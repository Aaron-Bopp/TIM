/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => ExtraMDHTMLSyntax
});
var import_obsidian = __toModule(require("obsidian"));
var ExtraMDHTMLSyntax = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      this.addCommand({
        id: "underscore-bold",
        name: "Underscore Bold",
        editorCallback: (editor, view) => this.wrapSelection("__", "__", editor)
      });
      this.addCommand({
        id: "underscore-italics",
        name: "Underscore Italics",
        editorCallback: (editor, view) => this.wrapSelection("_", "_", editor)
      });
      this.addCommand({
        id: "html-comment",
        name: "HTML Comment",
        editorCallback: (editor, view) => this.wrapSelection("<!--", "-->", editor)
      });
      this.addCommand({
        id: "html-cite",
        name: "<cite> tags",
        editorCallback: (editor, view) => this.wrapSelection("<cite>", "</cite>", editor)
      });
      this.addCommand({
        id: "html-aside",
        name: "<aside> tags",
        editorCallback: (editor, view) => this.wrapSelection("<aside>", "</aside>", editor)
      });
      this.addCommand({
        id: "multi-color-highlight-1",
        name: "Multicolor Highlight 1",
        editorCallback: (editor, view) => this.wrapSelection("*==", "==*", editor)
      });
      this.addCommand({
        id: "multi-color-highlight-2",
        name: "Multicolor Highlight 2",
        editorCallback: (editor, view) => this.wrapSelection("**==", "==**", editor)
      });
      console.log("Extra MD & HTML Syntax Plugin loaded.");
    });
  }
  onunload() {
    return __async(this, null, function* () {
      console.log("Extra MD & HTML Syntax Plugin unloaded.");
    });
  }
  wrapSelection(beforeStr, afterStr, editor) {
    let selectedText = "";
    if (editor.somethingSelected())
      selectedText = editor.getSelection();
    function Cursor(pos) {
      return editor.offsetToPos(pos);
    }
    const sp = editor.posToOffset(editor.getCursor("from"));
    const len = selectedText.length;
    const blen = beforeStr.length;
    const alen = afterStr.length;
    const charsBefore = editor.getRange(Cursor(sp - blen), Cursor(sp));
    const charsAfter = editor.getRange(Cursor(sp + len), Cursor(sp + len + alen));
    const firstChars = editor.getRange(Cursor(sp), Cursor(sp + blen));
    const lastChars = editor.getRange(Cursor(sp + len - alen), Cursor(sp + len));
    if (charsBefore == beforeStr && charsAfter == afterStr) {
      editor.setSelection(Cursor(sp - blen), Cursor(sp + len + alen));
      editor.replaceSelection(selectedText);
      editor.setSelection(Cursor(sp - blen), Cursor(sp - blen + len));
    } else if (firstChars == beforeStr && lastChars == afterStr) {
      editor.replaceSelection(selectedText.slice(blen, -alen));
      editor.setSelection(Cursor(sp), Cursor(sp + len - (blen + alen)));
    } else {
      if (selectedText) {
        editor.replaceSelection(beforeStr + selectedText + afterStr);
        editor.setSelection(Cursor(sp + blen), Cursor(sp + blen + len));
      } else {
        editor.replaceSelection(beforeStr + afterStr);
        const cursor = editor.getCursor();
        cursor.ch -= alen;
        editor.setCursor(cursor);
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBQbHVnaW4sIEVkaXRvclBvc2l0aW9uLCBFZGl0b3IgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4dHJhTURIVE1MU3ludGF4IGV4dGVuZHMgUGx1Z2luIHtcclxuICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJ1bmRlcnNjb3JlLWJvbGRcIixcclxuICAgICAgbmFtZTogXCJVbmRlcnNjb3JlIEJvbGRcIixcclxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB0aGlzXHJcbiAgICAgICAgLndyYXBTZWxlY3Rpb24oXCJfX1wiLCBcIl9fXCIsIGVkaXRvciksXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJ1bmRlcnNjb3JlLWl0YWxpY3NcIixcclxuICAgICAgbmFtZTogXCJVbmRlcnNjb3JlIEl0YWxpY3NcIixcclxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB0aGlzXHJcbiAgICAgICAgLndyYXBTZWxlY3Rpb24oXCJfXCIsIFwiX1wiLCBlZGl0b3IpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwiaHRtbC1jb21tZW50XCIsXHJcbiAgICAgIG5hbWU6IFwiSFRNTCBDb21tZW50XCIsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4gdGhpc1xyXG4gICAgICAgIC53cmFwU2VsZWN0aW9uKFwiPCEtLVwiLFwiLS0+XCIsIGVkaXRvciksXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJodG1sLWNpdGVcIixcclxuICAgICAgbmFtZTogXCI8Y2l0ZT4gdGFnc1wiLFxyXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHRoaXNcclxuICAgICAgICAud3JhcFNlbGVjdGlvbihcIjxjaXRlPlwiLFwiPC9jaXRlPlwiLCBlZGl0b3IpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwiaHRtbC1hc2lkZVwiLFxyXG4gICAgICBuYW1lOiBcIjxhc2lkZT4gdGFnc1wiLFxyXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHRoaXNcclxuICAgICAgICAud3JhcFNlbGVjdGlvbihcIjxhc2lkZT5cIixcIjwvYXNpZGU+XCIsIGVkaXRvciksXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogXCJtdWx0aS1jb2xvci1oaWdobGlnaHQtMVwiLFxyXG4gICAgICBuYW1lOiBcIk11bHRpY29sb3IgSGlnaGxpZ2h0IDFcIixcclxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB0aGlzXHJcbiAgICAgICAgLndyYXBTZWxlY3Rpb24oXCIqPT1cIixcIj09KlwiLCBlZGl0b3IpLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgaWQ6IFwibXVsdGktY29sb3ItaGlnaGxpZ2h0LTJcIixcclxuICAgICAgbmFtZTogXCJNdWx0aWNvbG9yIEhpZ2hsaWdodCAyXCIsXHJcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4gdGhpc1xyXG4gICAgICAgIC53cmFwU2VsZWN0aW9uKFwiKio9PVwiLFwiPT0qKlwiLCBlZGl0b3IpLFxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGNvbnNvbGUubG9nIChcIkV4dHJhIE1EICYgSFRNTCBTeW50YXggUGx1Z2luIGxvYWRlZC5cIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbnVubG9hZCgpIHtcclxuICAgIGNvbnNvbGUubG9nIChcIkV4dHJhIE1EICYgSFRNTCBTeW50YXggUGx1Z2luIHVubG9hZGVkLlwiKTtcclxuICB9XHJcblxyXG4gIHdyYXBTZWxlY3Rpb24oYmVmb3JlU3RyOiBzdHJpbmcsIGFmdGVyU3RyOiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yKTogdm9pZCB7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkVGV4dCA9IFwiXCI7XHJcbiAgICBpZiAoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHNlbGVjdGVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHJcbiAgICBmdW5jdGlvbiBDdXJzb3IocG9zOiBudW1iZXIpOiBFZGl0b3JQb3NpdGlvbiB7XHJcbiAgICAgIHJldHVybiBlZGl0b3Iub2Zmc2V0VG9Qb3MocG9zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRlY3Qgd2hldGhlciB0aGUgc2VsZWN0ZWQgdGV4dCBpcyBzdXJyb3VuZGVkIHdpdGggU3ludGF4XHJcbiAgICAvLyBJZiB0cnVlLCB1bnBhY2sgaXQsIGVsc2UgcGFjayB3aXRoIFN5bnRheFxyXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBjb25zdCBzcCA9IGVkaXRvci5wb3NUb09mZnNldChlZGl0b3IuZ2V0Q3Vyc29yKFwiZnJvbVwiKSk7IC8vIFN0YXJ0aW5nIHBvc2l0aW9uXHJcbiAgICBjb25zdCBsZW4gPSBzZWxlY3RlZFRleHQubGVuZ3RoO1xyXG4gICAgY29uc3QgYmxlbiA9IGJlZm9yZVN0ci5sZW5ndGg7XHJcbiAgICBjb25zdCBhbGVuID0gYWZ0ZXJTdHIubGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGNoYXJzQmVmb3JlID0gZWRpdG9yLmdldFJhbmdlKEN1cnNvcihzcCAtIGJsZW4pLCBDdXJzb3Ioc3ApKTtcclxuICAgIGNvbnN0IGNoYXJzQWZ0ZXIgPSBlZGl0b3IuZ2V0UmFuZ2UoQ3Vyc29yKHNwICsgbGVuKSwgQ3Vyc29yKHNwICsgbGVuICsgYWxlbikpO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0Q2hhcnMgPSBlZGl0b3IuZ2V0UmFuZ2UoQ3Vyc29yKHNwKSwgQ3Vyc29yKHNwICsgYmxlbikpO1xyXG4gICAgY29uc3QgbGFzdENoYXJzID0gZWRpdG9yLmdldFJhbmdlKEN1cnNvcihzcCArIGxlbiAtIGFsZW4pLCBDdXJzb3Ioc3AgKyBsZW4pKTtcclxuXHJcbiAgIC8vIFVuZG8gc3Vycm91bmRpbmcgU3ludGF4IChvdXRzaWRlIHNlbGVjdGlvbilcclxuICAgIGlmIChjaGFyc0JlZm9yZSA9PSBiZWZvcmVTdHIgJiYgY2hhcnNBZnRlciA9PSBhZnRlclN0cikge1xyXG4gICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKEN1cnNvcihzcCAtIGJsZW4pLCBDdXJzb3Ioc3AgKyBsZW4gKyBhbGVuKSk7XHJcbiAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHNlbGVjdGVkVGV4dCk7XHJcbiAgICAgIGVkaXRvci5zZXRTZWxlY3Rpb24oQ3Vyc29yKHNwIC0gYmxlbiksIEN1cnNvcihzcCAtIGJsZW4gKyBsZW4pKTtcclxuXHJcbiAgIC8vIFVuZG8gc3Vycm91bmRpbmcgU3ludGF4IChpbnNpZGUgc2VsZWN0aW9uKVxyXG4gICAgfSBlbHNlIGlmIChmaXJzdENoYXJzID09IGJlZm9yZVN0ciAmJiBsYXN0Q2hhcnMgPT0gYWZ0ZXJTdHIpIHtcclxuICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oc2VsZWN0ZWRUZXh0LnNsaWNlKGJsZW4sLWFsZW4pKTtcclxuICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihDdXJzb3Ioc3ApLCBDdXJzb3Ioc3AgKyBsZW4gLSAoYmxlbiArIGFsZW4pKSk7XHJcblxyXG4gICAvLyBXcmFwIFN5bnRheCBhcm91bmQgU2VsZWN0aW9uXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoc2VsZWN0ZWRUZXh0KSB7XHJcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYmVmb3JlU3RyICsgc2VsZWN0ZWRUZXh0ICsgYWZ0ZXJTdHIpO1xyXG4gICAgICAgIGVkaXRvci5zZXRTZWxlY3Rpb24oQ3Vyc29yKHNwICsgYmxlbiksIEN1cnNvcihzcCArIGJsZW4gKyBsZW4pKTtcclxuICAvLyBObyBTZWxlY3Rpb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihiZWZvcmVTdHIgKyBhZnRlclN0cik7XHJcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgIGN1cnNvci5jaCAtPSBhbGVuO1xyXG4gICAgICAgIGVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQTZEO0FBRTdELHNDQUErQyx1QkFBTztBQUFBLEVBQzlDLFNBQVM7QUFBQTtBQUNiLFdBQUssV0FBVztBQUFBLFFBQ2QsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUIsS0FDckQsY0FBYyxNQUFNLE1BQU07QUFBQTtBQUcvQixXQUFLLFdBQVc7QUFBQSxRQUNkLElBQUk7QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLGdCQUFnQixDQUFDLFFBQWdCLFNBQXVCLEtBQ3JELGNBQWMsS0FBSyxLQUFLO0FBQUE7QUFHN0IsV0FBSyxXQUFXO0FBQUEsUUFDZCxJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QixLQUNyRCxjQUFjLFFBQU8sT0FBTztBQUFBO0FBR2pDLFdBQUssV0FBVztBQUFBLFFBQ2QsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUIsS0FDckQsY0FBYyxVQUFTLFdBQVc7QUFBQTtBQUd2QyxXQUFLLFdBQVc7QUFBQSxRQUNkLElBQUk7QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLGdCQUFnQixDQUFDLFFBQWdCLFNBQXVCLEtBQ3JELGNBQWMsV0FBVSxZQUFZO0FBQUE7QUFHekMsV0FBSyxXQUFXO0FBQUEsUUFDZCxJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QixLQUNyRCxjQUFjLE9BQU0sT0FBTztBQUFBO0FBR2hDLFdBQUssV0FBVztBQUFBLFFBQ2QsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUIsS0FDckQsY0FBYyxRQUFPLFFBQVE7QUFBQTtBQUlsQyxjQUFRLElBQUs7QUFBQTtBQUFBO0FBQUEsRUFHVCxXQUFXO0FBQUE7QUFDZixjQUFRLElBQUs7QUFBQTtBQUFBO0FBQUEsRUFHZixjQUFjLFdBQW1CLFVBQWtCLFFBQXNCO0FBRXZFLFFBQUksZUFBZTtBQUNuQixRQUFJLE9BQU87QUFBcUIscUJBQWUsT0FBTztBQUV0RCxvQkFBZ0IsS0FBNkI7QUFDM0MsYUFBTyxPQUFPLFlBQVk7QUFBQTtBQU01QixVQUFNLEtBQUssT0FBTyxZQUFZLE9BQU8sVUFBVTtBQUMvQyxVQUFNLE1BQU0sYUFBYTtBQUN6QixVQUFNLE9BQU8sVUFBVTtBQUN2QixVQUFNLE9BQU8sU0FBUztBQUV0QixVQUFNLGNBQWMsT0FBTyxTQUFTLE9BQU8sS0FBSyxPQUFPLE9BQU87QUFDOUQsVUFBTSxhQUFhLE9BQU8sU0FBUyxPQUFPLEtBQUssTUFBTSxPQUFPLEtBQUssTUFBTTtBQUV2RSxVQUFNLGFBQWEsT0FBTyxTQUFTLE9BQU8sS0FBSyxPQUFPLEtBQUs7QUFDM0QsVUFBTSxZQUFZLE9BQU8sU0FBUyxPQUFPLEtBQUssTUFBTSxPQUFPLE9BQU8sS0FBSztBQUd2RSxRQUFJLGVBQWUsYUFBYSxjQUFjLFVBQVU7QUFDdEQsYUFBTyxhQUFhLE9BQU8sS0FBSyxPQUFPLE9BQU8sS0FBSyxNQUFNO0FBQ3pELGFBQU8saUJBQWlCO0FBQ3hCLGFBQU8sYUFBYSxPQUFPLEtBQUssT0FBTyxPQUFPLEtBQUssT0FBTztBQUFBLGVBR2pELGNBQWMsYUFBYSxhQUFhLFVBQVU7QUFDM0QsYUFBTyxpQkFBaUIsYUFBYSxNQUFNLE1BQUssQ0FBQztBQUNqRCxhQUFPLGFBQWEsT0FBTyxLQUFLLE9BQU8sS0FBSyxNQUFPLFFBQU87QUFBQSxXQUdyRDtBQUNMLFVBQUksY0FBYztBQUNoQixlQUFPLGlCQUFpQixZQUFZLGVBQWU7QUFDbkQsZUFBTyxhQUFhLE9BQU8sS0FBSyxPQUFPLE9BQU8sS0FBSyxPQUFPO0FBQUEsYUFFckQ7QUFDTCxlQUFPLGlCQUFpQixZQUFZO0FBQ3BDLGNBQU0sU0FBUyxPQUFPO0FBQ3RCLGVBQU8sTUFBTTtBQUNiLGVBQU8sVUFBVTtBQUFBO0FBQUE7QUFBQTtBQUFBOyIsCiAgIm5hbWVzIjogW10KfQo=
