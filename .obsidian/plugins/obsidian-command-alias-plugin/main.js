/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

class CommandAliasPluginSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        let app = this.app;
        let options = { "": "--- command list ---" };
        for (const key in app.commands.commands) {
            if (!Object.prototype.hasOwnProperty.call(app.commands.commands, key)) {
                continue;
            }
            if (key.startsWith('obsidian-command-alias-plugin:')) {
                continue;
            }
            const command = app.commands.commands[key];
            options[key] = command.name;
        }
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Command alias' });
        let selectedCommandId = "";
        new obsidian.Setting(containerEl)
            .setName('Select command')
            .setDesc('*Obsolate*: Added useful commands. "Command Alias: Add command alias" does not require a manual reload of the plugin.')
            .addDropdown(dropdown => dropdown
            .addOptions(options)
            .onChange(value => {
            console.log("select command");
            selectedCommandId = value;
        }));
        let aliasName = "";
        new obsidian.Setting(containerEl)
            .setName('Add alias')
            .setDesc('Reload is required to apply.')
            .addText(text => text
            .setPlaceholder('alias name')
            .onChange(value => {
            aliasName = value.trim();
        }))
            .addButton(button => button
            .setButtonText('Add')
            .onClick((e) => __awaiter(this, void 0, void 0, function* () {
            if (selectedCommandId == "" || aliasName == "") {
                return;
            }
            this.plugin.addAliasSetting(aliasName, selectedCommandId);
            yield this.plugin.saveSettings();
            this.display();
        })));
        // command detection
        containerEl.createEl('h3', { text: 'Command detection' });
        new obsidian.Setting(containerEl)
            .setName('Maximum number of trials')
            .addSlider(slider => slider
            .setLimits(1, 10, 1)
            .setValue(this.plugin.settings.commandDetection.maxTry)
            .setDynamicTooltip()
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.commandDetection.maxTry = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Trial interval (msec)')
            .addSlider(slider => slider
            .setLimits(100, 1000, 100)
            .setValue(this.plugin.settings.commandDetection.msecOfInterval)
            .setDynamicTooltip()
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.commandDetection.msecOfInterval = value;
            yield this.plugin.saveSettings();
        })));
        // remove alias
        containerEl.createEl('h3', { text: 'Register aliases' });
        for (const aliasId in this.plugin.settings.aliases) {
            if (!Object.prototype.hasOwnProperty.call(this.plugin.settings.aliases, aliasId)) {
                continue;
            }
            const alias = this.plugin.settings.aliases[aliasId];
            const command = app.commands.commands[alias.commandId];
            const commandName = command.name || 'command missing';
            new obsidian.Setting(containerEl)
                .setName(alias.name)
                .setDesc(commandName)
                .addButton(button => button
                .setButtonText('Remove')
                .onClick((e) => __awaiter(this, void 0, void 0, function* () {
                delete this.plugin.settings.aliases[aliasId];
                yield this.plugin.saveSettings();
                this.display();
            })));
        }
    }
}

class CommandSuggestionModal extends obsidian.FuzzySuggestModal {
    constructor(app, plugin) {
        super(app);
        this.plugin = plugin;
        let appex = app;
        let items = [];
        for (let id in appex.commands.commands) {
            // Don't loop aliases.
            if (id.startsWith('obsidian-command-alias-plugin:alias:')) {
                continue;
            }
            items.push({
                id: id,
                name: appex.commands.commands[id].name,
            });
        }
        this.items = items;
    }
    getItems() {
        return this.items;
    }
    getItemText(item) {
        return item.name;
    }
    onChooseItem(item, evt) {
        let m = new NamingModal({
            app: this.app,
            plugin: this.plugin,
            command: item,
        });
        m.open();
    }
}
class NamingModal extends obsidian.Modal {
    constructor(params) {
        let { app, plugin, command } = params;
        super(app);
        this.plugin = plugin;
        this.command = command;
    }
    onOpen() {
        let { contentEl } = this;
        contentEl.createEl('h2', { text: `Add alias: ${this.command.name}` });
        let aliasName = "";
        new obsidian.Setting(contentEl)
            .setName('Naming alias')
            .addText(text => text
            .setPlaceholder('add alias')
            .onChange(value => {
            aliasName = value.trim();
        }))
            .addButton(button => button
            .setButtonText('Add')
            .onClick((e) => __awaiter(this, void 0, void 0, function* () {
            if (aliasName === "") {
                new obsidian.Notice('alias name is empty');
                return;
            }
            this.plugin.addAliasSetting(aliasName, this.command.id);
            yield this.plugin.saveSettings();
            this.close();
            this.plugin.unload();
            this.plugin.load();
        })));
        contentEl.find('input').focus();
    }
    onClose() {
        let { contentEl } = this;
        contentEl.empty();
    }
}

const DEFAULT_SETTINGS = {
    aliases: {},
    commandDetection: {
        maxTry: 5,
        msecOfInterval: 200
    }
};
function timeoutPromise(msec) {
    return __awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve) => {
            setTimeout(() => {
                resolve(null);
            }, msec);
        });
    });
}
class CommandAliasPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('loading plugin');
            this.app;
            yield this.loadSettings();
            this.addCommand({
                id: "add-alias",
                name: "Add command alias",
                callback: () => {
                    let modal = new CommandSuggestionModal(this.app, this);
                    modal.open();
                },
            });
            this.addSettingTab(new CommandAliasPluginSettingTab(this.app, this));
            let promises = [];
            for (const aliasId in this.settings.aliases) {
                if (!Object.prototype.hasOwnProperty.call(this.settings.aliases, aliasId)) {
                    continue;
                }
                let p = this.addAliasCommand(aliasId);
                promises.push(p);
            }
            yield Promise.all(promises);
        });
    }
    addAliasCommand(aliasId) {
        return __awaiter(this, void 0, void 0, function* () {
            let app = this.app;
            const { maxTry, msecOfInterval } = this.settings.commandDetection;
            const alias = this.settings.aliases[aliasId];
            const commandDetection = new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {
                for (let tried = 0; tried < maxTry; tried += 1) {
                    let ref = app.commands.commands[alias.commandId];
                    if (ref != null) {
                        resolve(ref);
                        return;
                    }
                    yield timeoutPromise(msecOfInterval);
                }
                reject("Missing command");
            })).then((target) => {
                let command = {
                    id: `alias:${aliasId}`,
                    name: `${alias.name}: ${target.name}`,
                };
                if (target.callback) {
                    command.callback = () => {
                        const target = app.commands.commands[alias.commandId];
                        if (target) {
                            target.callback();
                        }
                        else {
                            new obsidian.Notice("Missing command. The command may be invalid.");
                        }
                    };
                }
                if (target.checkCallback) {
                    command.checkCallback = (checking) => {
                        const target = app.commands.commands[alias.commandId];
                        if (target) {
                            return target.checkCallback(checking);
                        }
                        if (checking) {
                            // Don't hide the probrem.
                            return true;
                        }
                        else {
                            new obsidian.Notice("Missing command. The command may be invalid.");
                        }
                    };
                }
                this.addCommand(command);
            }).catch((reason) => {
                // fallback
                let command = {
                    id: `alias:${aliasId}`,
                    name: `${alias.name}: Missing command. Run this and try rebinding.`,
                    callback: () => {
                        this.unload();
                        this.load();
                    }
                };
                this.addCommand(command);
            });
            return commandDetection;
        });
    }
    onunload() {
        console.log('unloading plugin');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
    addAliasSetting(aliasName, commandId) {
        let aliasId = Date.now().toString();
        console.log('Add id:', aliasId, 'alias:', aliasName, "command:", commandId);
        this.settings.aliases[aliasId] = {
            name: aliasName,
            commandId: commandId,
        };
    }
}

module.exports = CommandAliasPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9zZXR0aW5nLXRhYi50cyIsInNyYy9hZGQtYWxpYXMtbW9kYWwudHMiLCJzcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6bnVsbCwibmFtZXMiOlsiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJGdXp6eVN1Z2dlc3RNb2RhbCIsIk1vZGFsIiwiTm90aWNlIiwiUGx1Z2luIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxD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
