/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

const LINKED_TO = " => ";
const LINKED_FROM = " <= ";
const LINKED_CN = "None";
const LINKED_BOTH = " <=> ";
const MOC_VIEW_TYPE = "map-of-content";

class FileItem {
    constructor(path, extension, links_to, linked_from, distance_from_CN) {
        this.path = path;
        this.extension = extension;
        this.links_to = links_to;
        this.linked_from = linked_from;
        this.distance_from_CN = distance_from_CN;
    }
}

const Log = (message) => {
};
const RemoveExtension = (path, extension = ".md") => {
    if (path.endsWith(extension)) {
        return path.slice(0, -extension.length);
    }
    return path;
};
/**@returns True if CTRL / Meta is pressed */
const IsCtrlPressed = (e) => {
    return window.navigator.userAgent.includes("Macintosh")
        ? e.metaKey
        : e.ctrlKey;
};
/**  Returns only the name of the actual file  */
const FileNameFromPath = (path) => {
    return path.split("/").last();
};
/**  return the full path if there are two or more notes with the same filename and extension, else only the filename  */
const GetDisplayName = (path, db) => {
    let file_name = FileNameFromPath(path);
    let display_name = null;
    if (db.duplicate_file_status.get(file_name)) {
        display_name = RemoveExtension(path);
    }
    else {
        display_name = RemoveExtension(file_name);
    }
    return display_name;
};
const NavigateToFile = async (app, path, event) => {
    let file = app.metadataCache.getFirstLinkpathDest(path, "/");
    if (!file)
        return;
    IsCtrlPressed(event)
        ? app.workspace.splitActiveLeaf()
        : app.workspace.getUnpinnedLeaf();
    app.workspace.openLinkText(path, "/");
};
/** Get the paths of all folders in the vault, empty or not */
const GetAllFolders = (app) => {
    let vault_files = app.vault.getFiles();
    let all_folder_paths = [];
    vault_files.forEach((file) => {
        // cut of filename
        let folder_path = file.path.slice(0, file.path.length - (file.basename.length + file.extension.length + 1));
        // add path to collected paths
        if (folder_path.length && !all_folder_paths.contains(folder_path)) {
            all_folder_paths.push(folder_path);
        }
    });
    // store all parent folder paths as unique paths if they aren't yet because they don't include any notes directly
    all_folder_paths.forEach((path) => {
        let all_sub_paths = path.split("/");
        for (let i = 1; i < all_sub_paths.length - 1; i++) {
            let partial_path = all_sub_paths.slice(0, i).join("/") + "/";
            if (!all_folder_paths.contains(partial_path)) {
                all_folder_paths.push(partial_path);
            }
        }
    });
    return all_folder_paths;
};

class DBManager {
    constructor(plugin) {
        this.database_updating = true;
        this.app = plugin.app;
        this.plugin = plugin;
        this.settings = plugin.settings;
        this.all_paths = [];
        this.db = {};
        this.db_entries = Object.entries(this.db);
    }
    init() { }
    async update(silent = false) {
        this.database_complete = false;
        this.database_updating = true;
        try {
            if (this.plugin.CNexists()) {
                let start_tmsp = Date.now();
                if (!silent) {
                    new obsidian.Notice("Updating the Map of Content...");
                }
                Log("Updating the Map of Content...");
                await new Promise((r) => setTimeout(r, 0));
                this.updateDB();
                await new Promise((r) => setTimeout(r, 0));
                this.get_paths_ran = 0;
                this.updateDepthInformation();
                this.all_paths.length = 0;
                let path_so_far = {
                    all_members: [this.settings.get("CN_path")],
                    items: [[this.settings.get("CN_path"), LINKED_CN]],
                };
                await new Promise((r) => setTimeout(r, 0));
                this.followPaths(path_so_far);
                await new Promise((r) => setTimeout(r, 0));
                this.updateDescendants();
                if (!silent) {
                    new obsidian.Notice("Update complete");
                }
                let end_tmsp = Date.now();
                Log("Update complete, Took " + String((end_tmsp - start_tmsp) / 1000));
                this.database_complete = true;
            }
        }
        finally {
            this.database_updating = false;
            this.plugin.rerender();
        }
    }
    getNoteFromPath(path) {
        if (path in this.db) {
            return this.db[path];
        }
    }
    /** return all paths that include a certain note. Only return the path up to that note*/
    findPaths(path) {
        let filtered_paths = [];
        let filtered_paths_json = JSON.stringify(filtered_paths);
        this.all_paths.forEach((p) => {
            if (p.all_members.includes(path)) {
                if (p.all_members.last() == path) {
                    filtered_paths.push(p);
                }
                else {
                    let index = p.all_members.indexOf(path) + 1;
                    let chopped_of_path = p.items.slice(0, index);
                    if (!filtered_paths_json.includes(JSON.stringify(chopped_of_path))) {
                        // return a path element containing only the parts of the path information up to the note in question
                        filtered_paths.push({
                            all_members: p.all_members.slice(0, index),
                            items: p.items.slice(0, index),
                        });
                        filtered_paths_json = JSON.stringify(filtered_paths);
                    }
                }
            }
        });
        return filtered_paths;
    }
    all_notes() {
        return this.db_entries.map(([key, value]) => value);
    }
    updateDB() {
        // delete old state
        for (let note in this.db) {
            delete this.db[note];
        }
        // read all files
        let vault_files = this.app.vault.getFiles();
        Log("Total number of files in vault: " + String(vault_files.length));
        vault_files.forEach((file) => {
            if (!this.settings.isExludedFile(file)) {
                this.db[file.path] = new FileItem(file.path, file.extension, [], [], null);
            }
        });
        this.db_entries = Object.entries(this.db);
        this.db_keys = Object.keys(this.db);
        this.duplicate_file_status = new Map();
        this.all_notes().forEach((note) => {
            let file_name = FileNameFromPath(note.path);
            if (this.duplicate_file_status.has(file_name)) {
                // If the file name is encountered twice or more, set it's duplicate status to true
                this.duplicate_file_status.set(file_name, true);
            }
            else {
                this.duplicate_file_status.set(file_name, false);
            }
        });
        // update the db_entries representation of the db
        this.db_entries = Object.entries(this.db);
        this.all_notes().forEach((note) => {
            if (note.extension != "md") {
                // skip if it's not an md file. Other file types can't link to anything
                return;
            }
            //  save all the links this note links to
            let this_links_to = [];
            let linkcache = this.app.metadataCache.getCache(note.path).links;
            let all_links = [];
            if (linkcache) {
                linkcache.forEach((val) => {
                    all_links.push(val.link);
                });
            }
            let transclusions = this.app.metadataCache.getCache(note.path).embeds;
            if (transclusions) {
                transclusions.forEach((val) => {
                    all_links.push(val.link);
                });
            }
            all_links.forEach((link) => {
                // remove references to blocks or sections
                link = link.split("#")[0];
                link = link.split("^")[0];
                all_links.push(link);
                // check if the link is valid
                let link_dest = this.app.metadataCache.getFirstLinkpathDest(link, "/");
                //TODO is it neccessary to avoid including links multiple times? maybe they can't even be duplicate in the linkcache
                if (link_dest &&
                    !this_links_to.includes(link_dest.path) &&
                    this.db_keys.contains(link_dest.path)) {
                    this_links_to.push(link_dest.path);
                }
            });
            if (!this_links_to.length)
                return; // no links
            // save links_to information to db
            this.db[note.path].links_to = this_links_to;
            // add a "linked_from" reference to the db entry of all notes that are linked to from this note
            this_links_to.forEach((link) => {
                if (!this.db[link].linked_from.includes(note.path)) {
                    this.db[link].linked_from.push(note.path);
                }
            });
        });
    }
    /** starting from the CN, follow all paths and store the information on how long the shortest path to each note is*/
    updateDepthInformation() {
        Log("Analyzing distance from Central Note. CN path: " +
            this.settings.get("CN_path"));
        let depth = 0; // distance from the CN. starts at zero
        let checked_links = []; // all the notes that have already been visited. dont visit them again to prevent endless loops
        let do_continue = true;
        // start at the the CN
        let links = [this.settings.get("CN_path")];
        while (do_continue) {
            let next_links = [];
            links.forEach((link) => {
                // extract all active and passive connections (linked to or from) for the next iteration of link-following
                let note = this.getNoteFromPath(link);
                note.links_to.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                note.linked_from.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                // update the info on how far the note is removed from CN
                if (note.distance_from_CN == null || note.distance_from_CN > depth) {
                    note.distance_from_CN = depth;
                }
                checked_links.push(link);
            });
            links = next_links.slice();
            if (links.length == 0) {
                do_continue = false;
            }
            depth += 1;
        }
    }
    /**
     * Recursive function that follows all possible paths from the CN that aren't unreasonably long or circular and stores them
     * @param path_so_far the path to be extended in this iteration
     */
    followPaths(path_so_far) {
        // logging
        this.get_paths_ran += 1;
        if (this.get_paths_ran % 10000 == 0) {
            Log("get paths ran " + String(this.get_paths_ran));
        }
        let note = this.db[path_so_far.all_members.last()];
        let all_members = path_so_far.all_members;
        let items = path_so_far.items;
        let new_paths_to_follow = [];
        let note_links_to = note.links_to.slice();
        let note_linked_from = note.linked_from.slice();
        note_links_to.forEach((link) => {
            // check whether the linked note also links to the current note
            let linked_to_or_both_ways = LINKED_TO;
            if (note_linked_from.contains(link)) {
                // remove it from the passive links to be followed later
                let index = note_linked_from.indexOf(link, 0);
                note_linked_from.splice(index, 1);
                linked_to_or_both_ways = LINKED_BOTH;
            }
            let new_path = {
                all_members: all_members.concat(link),
                items: items.concat([[link, linked_to_or_both_ways]]),
            };
            new_paths_to_follow.push(new_path);
        });
        note_linked_from.forEach((link) => {
            let new_path = {
                all_members: all_members.concat(link),
                items: items.concat([[link, LINKED_FROM]]),
            };
            new_paths_to_follow.push(new_path);
        });
        let called_itself = false; // whether the function called itself
        // function calls itself to explore every new path
        new_paths_to_follow.forEach((path) => {
            // the path without the next note that is to be explored
            let all_items_so_far = path.all_members.slice(0, -1);
            let last_item_path = path.all_members.last();
            let last_item = this.getNoteFromPath(last_item_path);
            // stop if this note is already part of the explored path
            if (all_items_so_far.includes(last_item_path)) {
                return;
            }
            // stop if the path meanders too much
            if (path.all_members.length - last_item.distance_from_CN > 1) {
                return;
            }
            this.followPaths(path);
            called_itself = true;
        });
        if (!called_itself) {
            // only add the path if it does't lead anywhere else. No need to have paths that are parts of other paths
            this.all_paths.push(path_so_far);
        }
    }
    /** for every note, store all notes that come right after it in any path. this is for generating the Map Of Content later on */
    updateDescendants() {
        // delete old Information
        this.descendants = new Map();
        this.all_paths.forEach((p) => {
            p.all_members.forEach((note_path, index) => {
                // make sure it's not the last member of the path
                if (!(index == p.all_members.length - 1)) {
                    // create entry in descendants if it doesn't exist
                    if (!this.descendants.has(note_path)) {
                        this.descendants.set(note_path, []);
                    }
                    let next_path_member = p.all_members[index + 1];
                    // add note as descendant if it isn't already stored in array
                    if (!this.descendants.get(note_path).includes(next_path_member)) {
                        this.descendants.set(note_path, this.descendants.get(note_path).concat(next_path_member));
                    }
                }
            });
        });
    }
    getLinksFromNote(path, contained_in_db = false) {
        let linkcache = this.app.metadataCache.getCache(path).links;
        let all_links = [];
        if (linkcache) {
            linkcache.forEach((val) => {
                // check if the link is valid
                let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                //TODO is it neccessary to avoid including links multiple times? maybe they can't even be duplicate in the linkcache
                if (link_dest &&
                    !all_links.includes(link_dest.path) &&
                    (!contained_in_db || this.db_keys.contains(link_dest.path))) {
                    all_links.push(link_dest.path);
                }
            });
        }
        return all_links;
    }
}

function noop() { }
function add_location(element, file, line, column, char) {
    element.__svelte_meta = {
        loc: { file, line, column, char }
    };
}
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function is_function(thing) {
    return typeof thing === 'function';
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function is_empty(obj) {
    return Object.keys(obj).length === 0;
}
function null_to_empty(value) {
    return value == null ? '' : value;
}
function append(target, node) {
    target.appendChild(node);
}
function append_styles(target, style_sheet_id, styles) {
    const append_styles_to = get_root_for_style(target);
    if (!append_styles_to.getElementById(style_sheet_id)) {
        const style = element('style');
        style.id = style_sheet_id;
        style.textContent = styles;
        append_stylesheet(append_styles_to, style);
    }
}
function get_root_for_style(node) {
    if (!node)
        return document;
    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
    if (root.host) {
        return root;
    }
    return document;
}
function append_stylesheet(node, style) {
    append(node.head || node, style);
}
function insert(target, node, anchor) {
    target.insertBefore(node, anchor || null);
}
function detach(node) {
    node.parentNode.removeChild(node);
}
function destroy_each(iterations, detaching) {
    for (let i = 0; i < iterations.length; i += 1) {
        if (iterations[i])
            iterations[i].d(detaching);
    }
}
function element(name) {
    return document.createElement(name);
}
function svg_element(name) {
    return document.createElementNS('http://www.w3.org/2000/svg', name);
}
function text(data) {
    return document.createTextNode(data);
}
function space() {
    return text(' ');
}
function empty() {
    return text('');
}
function listen(node, event, handler, options) {
    node.addEventListener(event, handler, options);
    return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
    if (value == null)
        node.removeAttribute(attribute);
    else if (node.getAttribute(attribute) !== value)
        node.setAttribute(attribute, value);
}
function children(element) {
    return Array.from(element.childNodes);
}
function set_input_value(input, value) {
    input.value = value == null ? '' : value;
}
function set_style(node, key, value, important) {
    node.style.setProperty(key, value, important ? 'important' : '');
}
function toggle_class(element, name, toggle) {
    element.classList[toggle ? 'add' : 'remove'](name);
}
function custom_event(type, detail, bubbles = false) {
    const e = document.createEvent('CustomEvent');
    e.initCustomEvent(type, bubbles, false, detail);
    return e;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
function get_current_component() {
    if (!current_component)
        throw new Error('Function called outside component initialization');
    return current_component;
}
function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
}

const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
    if (!update_scheduled) {
        update_scheduled = true;
        resolved_promise.then(flush);
    }
}
function add_render_callback(fn) {
    render_callbacks.push(fn);
}
let flushing = false;
const seen_callbacks = new Set();
function flush() {
    if (flushing)
        return;
    flushing = true;
    do {
        // first, call beforeUpdate functions
        // and update components
        for (let i = 0; i < dirty_components.length; i += 1) {
            const component = dirty_components[i];
            set_current_component(component);
            update(component.$$);
        }
        set_current_component(null);
        dirty_components.length = 0;
        while (binding_callbacks.length)
            binding_callbacks.pop()();
        // then, once components are updated, call
        // afterUpdate functions. This may cause
        // subsequent updates...
        for (let i = 0; i < render_callbacks.length; i += 1) {
            const callback = render_callbacks[i];
            if (!seen_callbacks.has(callback)) {
                // ...so guard against infinite loops
                seen_callbacks.add(callback);
                callback();
            }
        }
        render_callbacks.length = 0;
    } while (dirty_components.length);
    while (flush_callbacks.length) {
        flush_callbacks.pop()();
    }
    update_scheduled = false;
    flushing = false;
    seen_callbacks.clear();
}
function update($$) {
    if ($$.fragment !== null) {
        $$.update();
        run_all($$.before_update);
        const dirty = $$.dirty;
        $$.dirty = [-1];
        $$.fragment && $$.fragment.p($$.ctx, dirty);
        $$.after_update.forEach(add_render_callback);
    }
}
const outroing = new Set();
let outros;
function group_outros() {
    outros = {
        r: 0,
        c: [],
        p: outros // parent group
    };
}
function check_outros() {
    if (!outros.r) {
        run_all(outros.c);
    }
    outros = outros.p;
}
function transition_in(block, local) {
    if (block && block.i) {
        outroing.delete(block);
        block.i(local);
    }
}
function transition_out(block, local, detach, callback) {
    if (block && block.o) {
        if (outroing.has(block))
            return;
        outroing.add(block);
        outros.c.push(() => {
            outroing.delete(block);
            if (callback) {
                if (detach)
                    block.d(1);
                callback();
            }
        });
        block.o(local);
    }
}

const globals = (typeof window !== 'undefined'
    ? window
    : typeof globalThis !== 'undefined'
        ? globalThis
        : global);
function create_component(block) {
    block && block.c();
}
function mount_component(component, target, anchor, customElement) {
    const { fragment, on_mount, on_destroy, after_update } = component.$$;
    fragment && fragment.m(target, anchor);
    if (!customElement) {
        // onMount happens before the initial afterUpdate
        add_render_callback(() => {
            const new_on_destroy = on_mount.map(run).filter(is_function);
            if (on_destroy) {
                on_destroy.push(...new_on_destroy);
            }
            else {
                // Edge case - component was destroyed immediately,
                // most likely as a result of a binding initialising
                run_all(new_on_destroy);
            }
            component.$$.on_mount = [];
        });
    }
    after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
    const $$ = component.$$;
    if ($$.fragment !== null) {
        run_all($$.on_destroy);
        $$.fragment && $$.fragment.d(detaching);
        // TODO null out other refs, including component.$$ (but need to
        // preserve final state?)
        $$.on_destroy = $$.fragment = null;
        $$.ctx = [];
    }
}
function make_dirty(component, i) {
    if (component.$$.dirty[0] === -1) {
        dirty_components.push(component);
        schedule_update();
        component.$$.dirty.fill(0);
    }
    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));
}
function init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {
    const parent_component = current_component;
    set_current_component(component);
    const $$ = component.$$ = {
        fragment: null,
        ctx: null,
        // state
        props,
        update: noop,
        not_equal,
        bound: blank_object(),
        // lifecycle
        on_mount: [],
        on_destroy: [],
        on_disconnect: [],
        before_update: [],
        after_update: [],
        context: new Map(parent_component ? parent_component.$$.context : options.context || []),
        // everything else
        callbacks: blank_object(),
        dirty,
        skip_bound: false,
        root: options.target || parent_component.$$.root
    };
    append_styles && append_styles($$.root);
    let ready = false;
    $$.ctx = instance
        ? instance(component, options.props || {}, (i, ret, ...rest) => {
            const value = rest.length ? rest[0] : ret;
            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
                if (!$$.skip_bound && $$.bound[i])
                    $$.bound[i](value);
                if (ready)
                    make_dirty(component, i);
            }
            return ret;
        })
        : [];
    $$.update();
    ready = true;
    run_all($$.before_update);
    // `false` as a special case of no DOM component
    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;
    if (options.target) {
        if (options.hydrate) {
            const nodes = children(options.target);
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.l(nodes);
            nodes.forEach(detach);
        }
        else {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.c();
        }
        if (options.intro)
            transition_in(component.$$.fragment);
        mount_component(component, options.target, options.anchor, options.customElement);
        flush();
    }
    set_current_component(parent_component);
}
/**
 * Base class for Svelte components. Used when dev=false.
 */
class SvelteComponent {
    $destroy() {
        destroy_component(this, 1);
        this.$destroy = noop;
    }
    $on(type, callback) {
        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));
        callbacks.push(callback);
        return () => {
            const index = callbacks.indexOf(callback);
            if (index !== -1)
                callbacks.splice(index, 1);
        };
    }
    $set($$props) {
        if (this.$$set && !is_empty($$props)) {
            this.$$.skip_bound = true;
            this.$$set($$props);
            this.$$.skip_bound = false;
        }
    }
}

function dispatch_dev(type, detail) {
    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));
}
function append_dev(target, node) {
    dispatch_dev('SvelteDOMInsert', { target, node });
    append(target, node);
}
function insert_dev(target, node, anchor) {
    dispatch_dev('SvelteDOMInsert', { target, node, anchor });
    insert(target, node, anchor);
}
function detach_dev(node) {
    dispatch_dev('SvelteDOMRemove', { node });
    detach(node);
}
function listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {
    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];
    if (has_prevent_default)
        modifiers.push('preventDefault');
    if (has_stop_propagation)
        modifiers.push('stopPropagation');
    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });
    const dispose = listen(node, event, handler, options);
    return () => {
        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });
        dispose();
    };
}
function attr_dev(node, attribute, value) {
    attr(node, attribute, value);
    if (value == null)
        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });
    else
        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });
}
function prop_dev(node, property, value) {
    node[property] = value;
    dispatch_dev('SvelteDOMSetProperty', { node, property, value });
}
function set_data_dev(text, data) {
    data = '' + data;
    if (text.wholeText === data)
        return;
    dispatch_dev('SvelteDOMSetData', { node: text, data });
    text.data = data;
}
function validate_each_argument(arg) {
    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {
        let msg = '{#each} only iterates over array-like objects.';
        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {
            msg += ' You can use a spread to convert this iterable into an array.';
        }
        throw new Error(msg);
    }
}
function validate_slots(name, slot, keys) {
    for (const slot_key of Object.keys(slot)) {
        if (!~keys.indexOf(slot_key)) {
            console.warn(`<${name}> received an unexpected slot "${slot_key}".`);
        }
    }
}
/**
 * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.
 */
class SvelteComponentDev extends SvelteComponent {
    constructor(options) {
        if (!options || (!options.target && !options.$$inline)) {
            throw new Error("'target' is a required option");
        }
        super();
    }
    $destroy() {
        super.$destroy();
        this.$destroy = () => {
            console.warn('Component was already destroyed'); // eslint-disable-line no-console
        };
    }
    $capture_state() { }
    $inject_state() { }
}

/* src/svelte/NoLinkImage.svelte generated by Svelte v3.42.1 */

const file$6 = "src/svelte/NoLinkImage.svelte";

function add_css$6(target) {
	append_styles(target, "svelte-slw3mj", "div#broken-link-container.svelte-slw3mj{position:fixed;bottom:5%;width:100%;height:25%;max-height:200px;align-content:center}svg.svelte-slw3mj{display:block;width:100%;height:100%;opacity:60%;position:relative;margin-left:auto;margin-right:auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9MaW5rSW1hZ2Uuc3ZlbHRlIiwibWFwcGluZ3MiOiJBQTZHRSxHQUFHLHNCQUFzQixjQUFDLENBQUEsQUFDeEIsUUFBUSxDQUFFLEtBQUssQ0FDZixNQUFNLENBQUUsRUFBRSxDQUNWLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLEdBQUcsQ0FDWCxVQUFVLENBQUUsS0FBSyxDQUNqQixhQUFhLENBQUUsTUFBTSxBQUN2QixDQUFBLEFBQ0EsR0FBRyxjQUFDLENBQUEsQUFDRixPQUFPLENBQUUsS0FBSyxDQUNkLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLElBQUksQ0FDWixPQUFPLENBQUUsR0FBRyxDQUNaLFFBQVEsQ0FBRSxRQUFRLENBQ2xCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLFlBQVksQ0FBRSxJQUFJLEFBQ3BCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiTm9MaW5rSW1hZ2Uuc3ZlbHRlIl19 */");
}

function create_fragment$6(ctx) {
	let div;
	let svg;
	let g;
	let path0;
	let path1;
	let path2;
	let path3;
	let path4;
	let path5;
	let path6;
	let path7;
	let path8;
	let path9;
	let path10;
	let path11;
	let path12;
	let path13;

	const block = {
		c: function create() {
			div = element("div");
			svg = svg_element("svg");
			g = svg_element("g");
			path0 = svg_element("path");
			path1 = svg_element("path");
			path2 = svg_element("path");
			path3 = svg_element("path");
			path4 = svg_element("path");
			path5 = svg_element("path");
			path6 = svg_element("path");
			path7 = svg_element("path");
			path8 = svg_element("path");
			path9 = svg_element("path");
			path10 = svg_element("path");
			path11 = svg_element("path");
			path12 = svg_element("path");
			path13 = svg_element("path");
			set_style(path0, "fill", "#B3404A");
			attr_dev(path0, "d", "M383.112,223.342c-3.162,0-6.347-1.034-9.008-3.162c-6.227-4.981-7.238-14.067-2.257-20.294\n\t\tl23.098-28.877c4.982-6.226,14.067-7.238,20.294-2.257c6.227,4.981,7.238,14.067,2.257,20.294l-23.098,28.877\n\t\tC391.545,221.487,387.348,223.342,383.112,223.342z");
			add_location(path0, file$6, 14, 6, 355);
			set_style(path1, "fill", "#B3404A");
			attr_dev(path1, "d", "M435.095,270.439h-37.537c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th37.537c7.973,0,14.438,6.465,14.438,14.438C449.533,263.973,443.069,270.439,435.095,270.439z");
			add_location(path1, file$6, 20, 6, 667);
			set_style(path2, "fill", "#B3404A");
			attr_dev(path2, "d", "M406.229,346.41c-4.237,0-8.433-1.854-11.285-5.42l-23.098-28.877\n\t\tc-4.98-6.227-3.97-15.311,2.257-20.294c6.228-4.98,15.313-3.969,20.294,2.257l23.098,28.877c4.98,6.227,3.97,15.311-2.257,20.294\n\t\tC412.576,345.376,409.393,346.41,406.229,346.41z");
			add_location(path2, file$6, 25, 6, 920);
			set_style(path3, "fill", "#B3404A");
			attr_dev(path3, "d", "M128.887,223.342c-4.237,0-8.433-1.854-11.285-5.42l-23.098-28.877\n\t\tc-4.98-6.227-3.97-15.311,2.257-20.294c6.228-4.981,15.311-3.97,20.294,2.257l23.098,28.877c4.98,6.227,3.97,15.311-2.257,20.294\n\t\tC135.232,222.31,132.049,223.342,128.887,223.342z");
			add_location(path3, file$6, 31, 6, 1224);
			set_style(path4, "fill", "#B3404A");
			attr_dev(path4, "d", "M114.44,270.439H76.904c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th37.537c7.973,0,14.438,6.465,14.438,14.438C128.878,263.973,122.413,270.439,114.44,270.439z");
			add_location(path4, file$6, 37, 6, 1530);
			set_style(path5, "fill", "#B3404A");
			attr_dev(path5, "d", "M105.769,346.41c-3.162,0-6.347-1.034-9.008-3.162c-6.227-4.981-7.238-14.067-2.257-20.294\n\t\tl23.098-28.877c4.982-6.226,14.067-7.236,20.294-2.257c6.227,4.981,7.238,14.067,2.257,20.294l-23.098,28.877\n\t\tC114.202,344.553,110.004,346.41,105.769,346.41z");
			add_location(path5, file$6, 42, 6, 1780);
			set_style(path6, "fill", "#B3404A");
			attr_dev(path6, "d", "M471.123,176.32c-7.973,0-14.438-6.465-14.438-14.438v-53.826c0-29.082-23.661-52.741-52.741-52.741\n\t\th-24.949c-7.973,0-14.438-6.465-14.438-14.438s6.465-14.438,14.438-14.438h24.949c45.004,0,81.617,36.613,81.617,81.617v53.826\n\t\tC485.561,169.855,479.096,176.32,471.123,176.32z");
			add_location(path6, file$6, 48, 6, 2089);
			set_style(path7, "fill", "#B3404A");
			attr_dev(path7, "d", "M40.877,176.32c-7.973,0-14.438-6.465-14.438-14.438v-53.826c0-45.004,36.613-81.617,81.617-81.617\n\t\th24.948c7.973,0,14.438,6.465,14.438,14.438s-6.465,14.438-14.438,14.438h-24.948c-29.082,0-52.741,23.661-52.741,52.741v53.826\n\t\tC55.315,169.855,48.85,176.32,40.877,176.32z");
			add_location(path7, file$6, 54, 6, 2424);
			set_style(path8, "fill", "#B3404A");
			attr_dev(path8, "d", "M403.943,485.561h-24.948c-7.973,0-14.438-6.465-14.438-14.438c0-7.973,6.465-14.438,14.438-14.438\n\t\th24.948c29.082,0,52.741-23.661,52.741-52.741v-53.826c0-7.973,6.465-14.438,14.438-14.438c7.973,0,14.438,6.465,14.438,14.438\n\t\tv53.826C485.561,448.947,448.947,485.561,403.943,485.561z");
			add_location(path8, file$6, 60, 6, 2755);
			set_style(path9, "fill", "#B3404A");
			attr_dev(path9, "d", "M133.005,485.561h-24.948c-45.004,0-81.617-36.613-81.617-81.617v-53.826\n\t\tc0-7.973,6.465-14.438,14.438-14.438s14.438,6.465,14.438,14.438v53.826c0,29.082,23.661,52.741,52.741,52.741h24.948\n\t\tc7.973,0,14.438,6.465,14.438,14.438C147.442,479.096,140.979,485.561,133.005,485.561z");
			add_location(path9, file$6, 66, 6, 3098);
			add_location(g, file$6, 13, 4, 345);
			set_style(path10, "fill", "#EBAFAE");
			attr_dev(path10, "d", "M202.039,208.49c12.894,0,23.349-10.453,23.349-23.349V91.748c0-16.593,14.019-30.612,30.612-30.612\n\tc16.593,0,30.612,14.019,30.612,30.612v93.395c0,12.894,10.453,23.349,23.349,23.349l0,0c12.894,0,23.349-10.453,23.349-23.349\n\tV91.748c0-42.521-34.789-77.31-77.31-77.31l0,0c-42.521,0-77.31,34.789-77.31,77.31v93.395\n\tC178.69,198.037,189.143,208.49,202.039,208.49L202.039,208.49z");
			add_location(path10, file$6, 73, 4, 3442);
			set_style(path11, "fill", "#B1404A");
			attr_dev(path11, "d", "M309.961,222.928c-20.837,0-37.787-16.95-37.787-37.787V91.748c0-8.616-7.558-16.175-16.175-16.175\n\tc-8.616,0-16.175,7.558-16.175,16.175v93.395c0,20.837-16.95,37.787-37.787,37.787s-37.787-16.95-37.787-37.787V91.748\n\tC164.252,41.158,205.409,0,256,0s91.748,41.158,91.748,91.748v93.395C347.746,205.978,330.796,222.928,309.961,222.928z M256,46.698\n\tc24.42,0,45.05,20.63,45.05,45.05v93.395c0,4.913,3.998,8.911,8.911,8.911s8.911-3.998,8.911-8.911V91.748\n\tc0-34.668-28.204-62.872-62.872-62.872c-34.668,0-62.872,28.204-62.872,62.872v93.395c0,4.913,3.998,8.911,8.911,8.911\n\ts8.911-3.998,8.911-8.911V91.748C210.948,67.328,231.578,46.698,256,46.698z");
			add_location(path11, file$6, 80, 4, 3870);
			set_style(path12, "fill", "#EBAFAE");
			attr_dev(path12, "d", "M309.96,303.51c-12.894,0-23.349,10.453-23.349,23.349v93.395c0,16.593-14.019,30.612-30.612,30.612\n\tc-16.593,0-30.612-14.019-30.612-30.612v-93.395c0-12.894-10.453-23.349-23.349-23.349l0,0c-12.894,0-23.349,10.453-23.349,23.349\n\tv93.395c0,42.521,34.789,77.31,77.31,77.31l0,0c42.521,0,77.31-34.789,77.31-77.31v-93.395\n\tC333.309,313.963,322.856,303.51,309.96,303.51L309.96,303.51z");
			add_location(path12, file$6, 89, 4, 4561);
			set_style(path13, "fill", "#B1404A");
			attr_dev(path13, "d", "M256,512c-50.59,0-91.748-41.158-91.748-91.748v-93.395c0-20.837,16.95-37.787,37.787-37.787\n\ts37.787,16.95,37.787,37.787v93.395c0,8.616,7.558,16.175,16.175,16.175c8.616,0,16.175-7.558,16.175-16.175v-93.395\n\tc0-20.837,16.95-37.787,37.787-37.787s37.787,16.95,37.787,37.787v93.395C347.746,470.842,306.59,512,256,512z M202.039,317.947\n\tc-4.913,0-8.911,3.998-8.911,8.911v93.395c0,34.668,28.204,62.872,62.872,62.872c34.668,0,62.872-28.204,62.872-62.872v-93.395\n\tc0-4.913-3.998-8.911-8.911-8.911s-8.911,3.998-8.911,8.911v93.395c0,24.42-20.63,45.05-45.05,45.05s-45.05-20.63-45.05-45.05\n\tv-93.395C210.948,321.944,206.952,317.947,202.039,317.947z");
			add_location(path13, file$6, 96, 4, 4991);
			attr_dev(svg, "version", "1.1");
			attr_dev(svg, "id", "Layer_1");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "xmlns:xlink", "http://www.w3.org/1999/xlink");
			attr_dev(svg, "x", "0px");
			attr_dev(svg, "y", "0px");
			attr_dev(svg, "viewBox", "0 0 512 512");
			set_style(svg, "enable-background", "new 0 0 512 512");
			attr_dev(svg, "xml:space", "preserve");
			attr_dev(svg, "class", "svelte-slw3mj");
			add_location(svg, file$6, 2, 2, 89);
			attr_dev(div, "id", "broken-link-container");
			attr_dev(div, "class", "svelte-slw3mj");
			add_location(div, file$6, 0, 0, 0);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			append_dev(div, svg);
			append_dev(svg, g);
			append_dev(g, path0);
			append_dev(g, path1);
			append_dev(g, path2);
			append_dev(g, path3);
			append_dev(g, path4);
			append_dev(g, path5);
			append_dev(g, path6);
			append_dev(g, path7);
			append_dev(g, path8);
			append_dev(g, path9);
			append_dev(svg, path10);
			append_dev(svg, path11);
			append_dev(svg, path12);
			append_dev(svg, path13);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$6.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$6($$self, $$props) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('NoLinkImage', slots, []);
	const writable_props = [];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<NoLinkImage> was created with unknown prop '${key}'`);
	});

	return [];
}

class NoLinkImage extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$6, create_fragment$6, safe_not_equal, {}, add_css$6);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "NoLinkImage",
			options,
			id: create_fragment$6.name
		});
	}
}

/* src/svelte/Descendants.svelte generated by Svelte v3.42.1 */

const { console: console_1 } = globals;
const file$5 = "src/svelte/Descendants.svelte";

function add_css$5(target) {
	append_styles(target, "svelte-1anwmr5", "a.link.svelte-1anwmr5.svelte-1anwmr5{cursor:pointer}ul.svelte-1anwmr5.svelte-1anwmr5{list-style:none;margin:0;padding:0}li.svelte-1anwmr5.svelte-1anwmr5{list-style:none;margin:0;padding:0}ul.svelte-1anwmr5.svelte-1anwmr5{padding-left:1em}li.svelte-1anwmr5.svelte-1anwmr5{padding-left:1em;border:5px solid darkgray;border-width:0 0 1px 1px}li.dark-mode.svelte-1anwmr5.svelte-1anwmr5{padding-left:1em;border:5px solid gray;border-width:0 0 1px 1px}li.container.svelte-1anwmr5.svelte-1anwmr5{border-bottom:0px}li.svelte-1anwmr5 p.svelte-1anwmr5{margin:0;position:relative;top:0em;padding:1px 0 1px 0}li.svelte-1anwmr5 ul.svelte-1anwmr5{border-top:1px solid darkgray;margin-left:-1em;padding-left:2em}li.dark-mode.svelte-1anwmr5 ul.svelte-1anwmr5{border-top:1px solid gray}ul li.svelte-1anwmr5:last-child ul.svelte-1anwmr5{border-left:none;margin-left:-17px}.expand-arrow.svelte-1anwmr5.svelte-1anwmr5{color:darkgrey}.expand-arrow.svelte-1anwmr5.svelte-1anwmr5:hover{color:gray}div.expand_button.svelte-1anwmr5.svelte-1anwmr5{display:inline}div.expand_button.svelte-1anwmr5 svg.svg.svelte-1anwmr5{width:14px;height:14px;margin-top:5px}li.light-mode.svelte-1anwmr5 div.expand_button svg.svg.svelte-1anwmr5{fill:darkgrey}li.light-mode.svelte-1anwmr5 div.expand_button svg.svg.svelte-1anwmr5:hover{fill:gray}li.dark-mode.svelte-1anwmr5 div.expand_button svg.svg.svelte-1anwmr5{fill:gray}li.dark-mode.svelte-1anwmr5 div.expand_button svg.svg.svelte-1anwmr5:hover{fill:lightgray}div.expand_button.svelte-1anwmr5 svg.svg.expanded.svelte-1anwmr5{transform:rotate(90deg)}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$4(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[12] = list[i];
	return child_ctx;
}

// (47:0) {:else}
function create_else_block$1(ctx) {
	let li;
	let p;
	let t;
	let ul;
	let current;

	function select_block_type_1(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0) return create_if_block_2$1;
		return create_else_block_1$1;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block0 = current_block_type(ctx);
	let if_block1 = /*children*/ ctx[7].length > 0 && /*expanded*/ ctx[6] && create_if_block_1$1(ctx);

	const block = {
		c: function create() {
			li = element("li");
			p = element("p");
			if_block0.c();
			t = space();
			ul = element("ul");
			if (if_block1) if_block1.c();
			attr_dev(p, "class", "svelte-1anwmr5");
			add_location(p, file$5, 48, 4, 1194);
			attr_dev(ul, "class", "svelte-1anwmr5");
			add_location(ul, file$5, 85, 4, 2314);
			attr_dev(li, "class", "container " + /*dark_mode*/ ctx[8] + " svelte-1anwmr5");
			add_location(li, file$5, 47, 2, 1155);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, p);
			if_block0.m(p, null);
			append_dev(li, t);
			append_dev(li, ul);
			if (if_block1) if_block1.m(ul, null);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block0) {
				if_block0.p(ctx, dirty);
			} else {
				if_block0.d(1);
				if_block0 = current_block_type(ctx);

				if (if_block0) {
					if_block0.c();
					if_block0.m(p, null);
				}
			}

			if (/*children*/ ctx[7].length > 0 && /*expanded*/ ctx[6]) {
				if (if_block1) {
					if_block1.p(ctx, dirty);

					if (dirty & /*children, expanded*/ 192) {
						transition_in(if_block1, 1);
					}
				} else {
					if_block1 = create_if_block_1$1(ctx);
					if_block1.c();
					transition_in(if_block1, 1);
					if_block1.m(ul, null);
				}
			} else if (if_block1) {
				group_outros();

				transition_out(if_block1, 1, 1, () => {
					if_block1 = null;
				});

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block1);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block1);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
			if_block0.d();
			if (if_block1) if_block1.d();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block$1.name,
		type: "else",
		source: "(47:0) {:else}",
		ctx
	});

	return block;
}

// (45:0) {#if indentation == 0 && children.length == 0}
function create_if_block$1(ctx) {
	let t;

	const block = {
		c: function create() {
			t = text("No descendants");
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block$1.name,
		type: "if",
		source: "(45:0) {#if indentation == 0 && children.length == 0}",
		ctx
	});

	return block;
}

// (52:6) {:else}
function create_else_block_1$1(ctx) {
	let t0;
	let a;
	let t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t1;
	let mounted;
	let dispose;
	let if_block = /*children*/ ctx[7].length > 0 && create_if_block_3$1(ctx);

	const block = {
		c: function create() {
			if (if_block) if_block.c();
			t0 = space();
			a = element("a");
			t1 = text(t1_value);
			attr_dev(a, "class", "link svelte-1anwmr5");
			attr_dev(a, "title", /*note_path*/ ctx[0]);
			add_location(a, file$5, 74, 8, 2073);
		},
		m: function mount(target, anchor) {
			if (if_block) if_block.m(target, anchor);
			insert_dev(target, t0, anchor);
			insert_dev(target, a, anchor);
			append_dev(a, t1);

			if (!mounted) {
				dispose = listen_dev(a, "click", /*click_handler_1*/ ctx[10], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (/*children*/ ctx[7].length > 0) {
				if (if_block) {
					if_block.p(ctx, dirty);
				} else {
					if_block = create_if_block_3$1(ctx);
					if_block.c();
					if_block.m(t0.parentNode, t0);
				}
			} else if (if_block) {
				if_block.d(1);
				if_block = null;
			}

			if (dirty & /*note_path, db*/ 3 && t1_value !== (t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t1, t1_value);

			if (dirty & /*note_path*/ 1) {
				attr_dev(a, "title", /*note_path*/ ctx[0]);
			}
		},
		d: function destroy(detaching) {
			if (if_block) if_block.d(detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1$1.name,
		type: "else",
		source: "(52:6) {:else}",
		ctx
	});

	return block;
}

// (50:6) {#if indentation == 0}
function create_if_block_2$1(ctx) {
	let t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t;

	const block = {
		c: function create() {
			t = text(t_value);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*note_path, db*/ 3 && t_value !== (t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2$1.name,
		type: "if",
		source: "(50:6) {#if indentation == 0}",
		ctx
	});

	return block;
}

// (52:13) {#if children.length > 0}
function create_if_block_3$1(ctx) {
	let span;
	let div;
	let mounted;
	let dispose;

	function select_block_type_2(ctx, dirty) {
		if (/*expanded*/ ctx[6]) return create_if_block_4$1;
		return create_else_block_2$1;
	}

	let current_block_type = select_block_type_2(ctx);
	let if_block = current_block_type(ctx);

	const block = {
		c: function create() {
			span = element("span");
			div = element("div");
			if_block.c();
			attr_dev(div, "class", "expand_button svelte-1anwmr5");
			add_location(div, file$5, 63, 13, 1716);
			attr_dev(span, "class", "expand-arrow svelte-1anwmr5");
			add_location(span, file$5, 52, 10, 1316);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, div);
			if_block.m(div, null);

			if (!mounted) {
				dispose = listen_dev(span, "click", /*click_handler*/ ctx[9], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (current_block_type !== (current_block_type = select_block_type_2(ctx))) {
				if_block.d(1);
				if_block = current_block_type(ctx);

				if (if_block) {
					if_block.c();
					if_block.m(div, null);
				}
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
			if_block.d();
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3$1.name,
		type: "if",
		source: "(52:13) {#if children.length > 0}",
		ctx
	});

	return block;
}

// (69:14) {:else}
function create_else_block_2$1(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$5, 69, 18, 1947);
			attr_dev(svg, "class", "svg svelte-1anwmr5");
			add_location(svg, file$5, 68, 21, 1911);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_2$1.name,
		type: "else",
		source: "(69:14) {:else}",
		ctx
	});

	return block;
}

// (65:14) {#if expanded}
function create_if_block_4$1(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$5, 66, 18, 1834);
			attr_dev(svg, "class", "svg expanded svelte-1anwmr5");
			add_location(svg, file$5, 65, 16, 1789);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4$1.name,
		type: "if",
		source: "(65:14) {#if expanded}",
		ctx
	});

	return block;
}

// (87:6) {#if children.length > 0 && expanded}
function create_if_block_1$1(ctx) {
	let each_1_anchor;
	let current;
	let each_value = /*children*/ ctx[7];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));
	}

	const out = i => transition_out(each_blocks[i], 1, 1, () => {
		each_blocks[i] = null;
	});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			each_1_anchor = empty();
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, each_1_anchor, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*db, app, children, indentation, view, expandMan*/ 190) {
				each_value = /*children*/ ctx[7];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$4(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
						transition_in(each_blocks[i], 1);
					} else {
						each_blocks[i] = create_each_block$4(child_ctx);
						each_blocks[i].c();
						transition_in(each_blocks[i], 1);
						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
					}
				}

				group_outros();

				for (i = each_value.length; i < each_blocks.length; i += 1) {
					out(i);
				}

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;

			for (let i = 0; i < each_value.length; i += 1) {
				transition_in(each_blocks[i]);
			}

			current = true;
		},
		o: function outro(local) {
			each_blocks = each_blocks.filter(Boolean);

			for (let i = 0; i < each_blocks.length; i += 1) {
				transition_out(each_blocks[i]);
			}

			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(each_1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1$1.name,
		type: "if",
		source: "(87:6) {#if children.length > 0 && expanded}",
		ctx
	});

	return block;
}

// (88:8) {#each children as child}
function create_each_block$4(ctx) {
	let descendants;
	let current;

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[1],
				app: /*app*/ ctx[4],
				note_path: /*child*/ ctx[12],
				indentation: /*indentation*/ ctx[2] + 1,
				view: /*view*/ ctx[3],
				expandMan: /*expandMan*/ ctx[5]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			create_component(descendants.$$.fragment);
		},
		m: function mount(target, anchor) {
			mount_component(descendants, target, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			const descendants_changes = {};
			if (dirty & /*db*/ 2) descendants_changes.db = /*db*/ ctx[1];
			if (dirty & /*app*/ 16) descendants_changes.app = /*app*/ ctx[4];
			if (dirty & /*children*/ 128) descendants_changes.note_path = /*child*/ ctx[12];
			if (dirty & /*indentation*/ 4) descendants_changes.indentation = /*indentation*/ ctx[2] + 1;
			if (dirty & /*view*/ 8) descendants_changes.view = /*view*/ ctx[3];
			if (dirty & /*expandMan*/ 32) descendants_changes.expandMan = /*expandMan*/ ctx[5];
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_component(descendants, detaching);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$4.name,
		type: "each",
		source: "(88:8) {#each children as child}",
		ctx
	});

	return block;
}

function create_fragment$5(ctx) {
	let svg;
	let symbol;
	let path;
	let t;
	let current_block_type_index;
	let if_block;
	let if_block_anchor;
	let current;
	const if_block_creators = [create_if_block$1, create_else_block$1];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0 && /*children*/ ctx[7].length == 0) return 0;
		return 1;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			svg = svg_element("svg");
			symbol = svg_element("symbol");
			path = svg_element("path");
			t = space();
			if_block.c();
			if_block_anchor = empty();
			attr_dev(path, "d", "M22 12l-20 12 5-12-5-12z");
			add_location(path, file$5, 40, 5, 994);
			attr_dev(symbol, "id", "expand-arrow-svg");
			attr_dev(symbol, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol, "viewBox", "0 0 24 24");
			add_location(symbol, file$5, 36, 2, 892);
			attr_dev(svg, "display", "none");
			add_location(svg, file$5, 35, 0, 869);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, symbol);
			append_dev(symbol, path);
			insert_dev(target, t, anchor);
			if_blocks[current_block_type_index].m(target, anchor);
			insert_dev(target, if_block_anchor, anchor);
			current = true;
		},
		p: function update(ctx, [dirty]) {
			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(if_block_anchor.parentNode, if_block_anchor);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
			if (detaching) detach_dev(t);
			if_blocks[current_block_type_index].d(detaching);
			if (detaching) detach_dev(if_block_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$5.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$5($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Descendants', slots, []);
	
	
	
	let { note_path } = $$props;
	let { db } = $$props;
	let { indentation } = $$props;
	let { view } = $$props;
	let { app } = $$props;
	let { expandMan } = $$props;
	expandMan.logIndent(indentation);

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	let expanded;
	let children = [];

	if (db.descendants.has(note_path)) {
		children = db.descendants.get(note_path).slice();
	}

	function resetExpanded(new_max_indent) {
		if (indentation == 0) {
			$$invalidate(6, expanded = true);
		} else if (!view.plugin.settings.isExpanded(note_path)) {
			$$invalidate(6, expanded = false);
		} else {
			$$invalidate(6, expanded = indentation < new_max_indent );
		}
	}

	resetExpanded(expandMan.initial_max_indent);
	expandMan.registerRedrawDescendantCallback(resetExpanded);
	const writable_props = ['note_path', 'db', 'indentation', 'view', 'app', 'expandMan'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console_1.warn(`<Descendants> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		$$invalidate(6, expanded = !expanded);
		console.log("known path: ", note_path);
		view.plugin.settings.setExpanded(note_path, expanded);

		if (expanded) {
			expandMan.onManualExpand();
			expandMan.logIndent(indentation + 1);
		}
	};

	const click_handler_1 = event => {
		NavigateToFile(app, note_path, event);
	};

	$$self.$$set = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('view' in $$props) $$invalidate(3, view = $$props.view);
		if ('app' in $$props) $$invalidate(4, app = $$props.app);
		if ('expandMan' in $$props) $$invalidate(5, expandMan = $$props.expandMan);
	};

	$$self.$capture_state = () => ({
		GetDisplayName,
		NavigateToFile,
		note_path,
		db,
		indentation,
		view,
		app,
		expandMan,
		dark_mode,
		expanded,
		children,
		resetExpanded
	});

	$$self.$inject_state = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('view' in $$props) $$invalidate(3, view = $$props.view);
		if ('app' in $$props) $$invalidate(4, app = $$props.app);
		if ('expandMan' in $$props) $$invalidate(5, expandMan = $$props.expandMan);
		if ('dark_mode' in $$props) $$invalidate(8, dark_mode = $$props.dark_mode);
		if ('expanded' in $$props) $$invalidate(6, expanded = $$props.expanded);
		if ('children' in $$props) $$invalidate(7, children = $$props.children);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		note_path,
		db,
		indentation,
		view,
		app,
		expandMan,
		expanded,
		children,
		dark_mode,
		click_handler,
		click_handler_1
	];
}

class Descendants extends SvelteComponentDev {
	constructor(options) {
		super(options);

		init(
			this,
			options,
			instance$5,
			create_fragment$5,
			safe_not_equal,
			{
				note_path: 0,
				db: 1,
				indentation: 2,
				view: 3,
				app: 4,
				expandMan: 5
			},
			add_css$5
		);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Descendants",
			options,
			id: create_fragment$5.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*note_path*/ ctx[0] === undefined && !('note_path' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'note_path'");
		}

		if (/*db*/ ctx[1] === undefined && !('db' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'db'");
		}

		if (/*indentation*/ ctx[2] === undefined && !('indentation' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'indentation'");
		}

		if (/*view*/ ctx[3] === undefined && !('view' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'view'");
		}

		if (/*app*/ ctx[4] === undefined && !('app' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'app'");
		}

		if (/*expandMan*/ ctx[5] === undefined && !('expandMan' in props)) {
			console_1.warn("<Descendants> was created without expected prop 'expandMan'");
		}
	}

	get note_path() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set note_path(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get db() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set db(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get indentation() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set indentation(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get view() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get app() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get expandMan() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set expandMan(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/UpdateNotice.svelte generated by Svelte v3.42.1 */
const file$4 = "src/svelte/UpdateNotice.svelte";

function add_css$4(target) {
	append_styles(target, "svelte-tmf5ld", "div#all-container.svelte-tmf5ld{display:flex;flex-direction:column;height:100%}div#main_moc_div.svelte-tmf5ld{padding:initial;width:initial;height:initial;position:initial;overflow:auto;flex:1}div#main_moc_div.dark-mode.svelte-tmf5ld{color:#dcddde}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXBkYXRlTm90aWNlLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUF3REUsR0FBRyxjQUFjLGNBQUMsQ0FBQSxBQUNoQixPQUFPLENBQUUsSUFBSSxDQUNiLGNBQWMsQ0FBRSxNQUFNLENBQ3RCLE1BQU0sQ0FBRSxJQUFJLEFBQ2QsQ0FBQSxBQUVBLEdBQUcsYUFBYSxjQUFDLENBQUEsQUFDZixPQUFPLENBQUUsT0FBTyxDQUNoQixLQUFLLENBQUUsT0FBTyxDQUNkLE1BQU0sQ0FBRSxPQUFPLENBQ2YsUUFBUSxDQUFFLE9BQU8sQ0FDakIsUUFBUSxDQUFFLElBQUksQ0FDZCxJQUFJLENBQUUsQ0FBQyxBQUNULENBQUEsQUFFQSxHQUFHLGFBQWEsVUFBVSxjQUFDLENBQUEsQUFDekIsS0FBSyxDQUFFLE9BQU8sQUFDaEIsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJVcGRhdGVOb3RpY2Uuc3ZlbHRlIl19 */");
}

function create_fragment$4(ctx) {
	let div1;
	let div0;
	let h3;
	let t1;
	let ul;
	let li0;
	let t3;
	let br0;
	let t4;
	let li1;
	let t6;
	let a0;
	let t8;
	let br1;
	let br2;
	let t9;
	let a1;
	let t11;
	let a2;
	let t13;
	let a3;
	let t15;
	let br3;
	let br4;
	let t16;
	let button;
	let mounted;
	let dispose;

	const block = {
		c: function create() {
			div1 = element("div");
			div0 = element("div");
			h3 = element("h3");
			h3.textContent = "This plugin has been updated";
			t1 = text("\n\n    The latest changes are:\n    ");
			ul = element("ul");
			li0 = element("li");
			li0.textContent = "Added a settings option to display the path from the Central Note\n        starting at the Central Note instead of the currently open one.";
			t3 = space();
			br0 = element("br");
			t4 = space();
			li1 = element("li");
			li1.textContent = "Fixed a bug where links using # or ^ to reference headings or blocks\n        weren't followed";
			t6 = text("\n    See");
			a0 = element("a");
			a0.textContent = "here";
			t8 = text("\n    for a complete history of all changes.");
			br1 = element("br");
			br2 = element("br");
			t9 = text("\n    Thank you for using this plugin! You can donate to support it's development on\n    ");
			a1 = element("a");
			a1.textContent = "Patreon";
			t11 = text(",\n    ");
			a2 = element("a");
			a2.textContent = "Ko-Fi";
			t13 = text("\n    or\n    ");
			a3 = element("a");
			a3.textContent = "PayPal";
			t15 = text(".\n\n    ");
			br3 = element("br");
			br4 = element("br");
			t16 = space();
			button = element("button");
			button.textContent = "Close";
			set_style(h3, "text-align", "center");
			add_location(h3, file$4, 15, 4, 343);
			add_location(li0, file$4, 19, 6, 451);
			add_location(br0, file$4, 23, 6, 620);
			add_location(li1, file$4, 24, 6, 633);
			add_location(ul, file$4, 18, 4, 440);
			attr_dev(a0, "href", "https://github.com/Robin-Haupt-1/Obsidian-Map-of-Content/releases");
			add_location(a0, file$4, 29, 13, 775);
			add_location(br1, file$4, 34, 42, 925);
			add_location(br2, file$4, 34, 48, 931);
			attr_dev(a1, "href", "https://www.patreon.com/RobinHaupt");
			add_location(a1, file$4, 36, 4, 1025);
			attr_dev(a2, "href", "https://ko-fi.com/robinhaupt");
			add_location(a2, file$4, 37, 4, 1087);
			attr_dev(a3, "href", "https://www.paypal.com/paypalme/robinhaupt");
			add_location(a3, file$4, 39, 4, 1147);
			add_location(br3, file$4, 41, 4, 1217);
			add_location(br4, file$4, 41, 10, 1223);
			set_style(button, "display", "block");
			set_style(button, "margin", "auto");
			add_location(button, file$4, 42, 4, 1234);
			attr_dev(div0, "id", "main_moc_div");
			attr_dev(div0, "class", "" + (null_to_empty(/*dark_mode*/ ctx[2]) + " svelte-tmf5ld"));
			add_location(div0, file$4, 14, 2, 297);
			attr_dev(div1, "id", "all-container");
			attr_dev(div1, "class", "svelte-tmf5ld");
			add_location(div1, file$4, 13, 0, 270);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div1, anchor);
			append_dev(div1, div0);
			append_dev(div0, h3);
			append_dev(div0, t1);
			append_dev(div0, ul);
			append_dev(ul, li0);
			append_dev(ul, t3);
			append_dev(ul, br0);
			append_dev(ul, t4);
			append_dev(ul, li1);
			append_dev(div0, t6);
			append_dev(div0, a0);
			append_dev(div0, t8);
			append_dev(div0, br1);
			append_dev(div0, br2);
			append_dev(div0, t9);
			append_dev(div0, a1);
			append_dev(div0, t11);
			append_dev(div0, a2);
			append_dev(div0, t13);
			append_dev(div0, a3);
			append_dev(div0, t15);
			append_dev(div0, br3);
			append_dev(div0, br4);
			append_dev(div0, t16);
			append_dev(div0, button);

			if (!mounted) {
				dispose = listen_dev(button, "click", /*click_handler*/ ctx[4], false, false, false);
				mounted = true;
			}
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div1);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$4.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$4($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('UpdateNotice', slots, []);
	
	
	
	let { view } = $$props;
	let { plugin } = $$props;
	let settings = plugin.settings;

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	const writable_props = ['view', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<UpdateNotice> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		settings.set({ do_show_update_notice: false });
		view.rerender();
	};

	$$self.$$set = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('plugin' in $$props) $$invalidate(3, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		Log,
		onMount,
		view,
		plugin,
		settings,
		dark_mode
	});

	$$self.$inject_state = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('plugin' in $$props) $$invalidate(3, plugin = $$props.plugin);
		if ('settings' in $$props) $$invalidate(1, settings = $$props.settings);
		if ('dark_mode' in $$props) $$invalidate(2, dark_mode = $$props.dark_mode);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [view, settings, dark_mode, plugin, click_handler];
}

class UpdateNotice extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$4, create_fragment$4, safe_not_equal, { view: 0, plugin: 3 }, add_css$4);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "UpdateNotice",
			options,
			id: create_fragment$4.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*view*/ ctx[0] === undefined && !('view' in props)) {
			console.warn("<UpdateNotice> was created without expected prop 'view'");
		}

		if (/*plugin*/ ctx[3] === undefined && !('plugin' in props)) {
			console.warn("<UpdateNotice> was created without expected prop 'plugin'");
		}
	}

	get view() {
		throw new Error("<UpdateNotice>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<UpdateNotice>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<UpdateNotice>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<UpdateNotice>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

class expandManager {
    constructor() {
        this.initial_max_indent = 3;
        this.redrawCallbacks = [];
        this.manually_expanded = false;
    }
    expand() {
        if (this.manually_expanded) {
            this.rerenderDescendants(this.initial_max_indent);
            this.manually_expanded = false;
        }
        else {
            this.rerenderDescendants(this.initial_max_indent + 1);
        }
    }
    contract() {
        if (this.initial_max_indent > 1) {
            this.rerenderDescendants(this.initial_max_indent - 1);
            this.initial_max_indent -= 1;
        }
    }
    rerenderDescendants(new_max_indent) {
        for (let func of this.redrawCallbacks) {
            func(new_max_indent);
        }
    }
    registerRedrawDescendantCallback(redraw) {
        this.redrawCallbacks.push(redraw);
    }
    logIndent(indent) {
        if (indent > this.initial_max_indent) {
            this.initial_max_indent = indent;
        }
    }
    onManualExpand() {
        this.manually_expanded = true;
    }
}

/* src/svelte/View.svelte generated by Svelte v3.42.1 */
const file$3 = "src/svelte/View.svelte";

function add_css$3(target) {
	append_styles(target, "svelte-1swdn0o", "div#all-container.svelte-1swdn0o.svelte-1swdn0o{display:flex;flex-direction:column;height:100%}div#top-bar.svelte-1swdn0o.svelte-1swdn0o{min-height:30px;width:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-gap:10px;margin-bottom:1em}div#top-bar.svelte-1swdn0o div#pin-file svg#pinned.svelte-1swdn0o{display:none}div#top-bar.svelte-1swdn0o div#pin-file.is-pinned svg#pinned.svelte-1swdn0o{display:block}div#top-bar.svelte-1swdn0o div#pin-file.is-pinned svg#not-pinned.svelte-1swdn0o{display:none}div#top-bar-flex.svelte-1swdn0o.svelte-1swdn0o{min-height:30px;display:flex;justify-content:center}div#top-bar.svelte-1swdn0o div.action.svelte-1swdn0o{height:20px;width:20px;margin:5px}div#top-bar.svelte-1swdn0o div.action svg.svelte-1swdn0o{height:20px;width:20px;fill:darkgrey}div#top-bar.svelte-1swdn0o div.action:hover svg.svelte-1swdn0o{fill:grey}div.dark-mode.svelte-1swdn0o div#top-bar div.action svg.svelte-1swdn0o{height:20px;width:20px;fill:grey}div.dark-mode.svelte-1swdn0o div#top-bar div.action:hover svg.svelte-1swdn0o{fill:darkgrey}div#main_moc_div.svelte-1swdn0o.svelte-1swdn0o{padding:initial;width:initial;height:initial;position:initial;overflow:auto;flex:1}div.dark-mode.svelte-1swdn0o.svelte-1swdn0o{color:#dcddde}div#scroll_up.svelte-1swdn0o.svelte-1swdn0o{justify-self:flex-end;display:none}div#scroll_up.svelte-1swdn0o.svelte-1swdn0o{cursor:pointer;color:darkgrey}div#scroll_up.svelte-1swdn0o svg.svelte-1swdn0o{transform:rotate(-90deg);height:20px}div.light-mode.svelte-1swdn0o div#scroll_up svg.svelte-1swdn0o{fill:darkgray}div.light-mode.svelte-1swdn0o div#scroll_up:hover svg.svelte-1swdn0o{fill:gray}div.dark-mode.svelte-1swdn0o div#scroll_up svg.svelte-1swdn0o{fill:gray}div.dark-mode.svelte-1swdn0o div#scroll_up:hover svg.svelte-1swdn0o{fill:darkgray}a.link.svelte-1swdn0o.svelte-1swdn0o{cursor:pointer}ul.svelte-1swdn0o.svelte-1swdn0o{padding-left:0}svg.path-arrow.svelte-1swdn0o.svelte-1swdn0o{margin-right:3px;margin-left:3px;display:inline;width:24px;height:0.7em}div.dark-mode.svelte-1swdn0o svg.path-arrow.svelte-1swdn0o{fill:lightgray}.errors.svelte-1swdn0o.svelte-1swdn0o{padding:10px;width:initial;height:initial;position:initial;overflow-y:initial;overflow-wrap:initial}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$3(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[25] = list[i];
	return child_ctx;
}

function get_each_context_2(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[28] = list[i];
	child_ctx[30] = i;
	return child_ctx;
}

function get_each_context_1$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[28] = list[i];
	child_ctx[30] = i;
	return child_ctx;
}

// (166:4) {:else}
function create_else_block(ctx) {
	let t0;
	let br;
	let t1;
	let ul;
	let descendants;
	let current;
	let each_value = /*paths*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));
	}

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[9],
				app: /*app*/ ctx[8],
				view: /*view*/ ctx[0],
				note_path: /*view*/ ctx[0].open_file_path,
				indentation: 0,
				expandMan: /*expandMan*/ ctx[11]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t0 = space();
			br = element("br");
			t1 = space();
			ul = element("ul");
			create_component(descendants.$$.fragment);
			add_location(br, file$3, 247, 6, 9871);
			attr_dev(ul, "class", "svelte-1swdn0o");
			add_location(ul, file$3, 248, 6, 9884);
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, t0, anchor);
			insert_dev(target, br, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, ul, anchor);
			mount_component(descendants, ul, null);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*paths, db, app, settings*/ 4866) {
				each_value = /*paths*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$3(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$3(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(t0.parentNode, t0);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const descendants_changes = {};
			if (dirty[0] & /*view*/ 1) descendants_changes.view = /*view*/ ctx[0];
			if (dirty[0] & /*view*/ 1) descendants_changes.note_path = /*view*/ ctx[0].open_file_path;
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(br);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(ul);
			destroy_component(descendants);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block.name,
		type: "else",
		source: "(166:4) {:else}",
		ctx
	});

	return block;
}

// (150:32) 
function create_if_block_2(ctx) {
	let t0;
	let a0;
	let t1_value = GetDisplayName(/*cn_path*/ ctx[10], /*db*/ ctx[9]) + "";
	let t1;
	let t2;
	let br0;
	let br1;
	let t3;
	let a1;
	let t5;
	let br2;
	let t6;
	let nolinkimage;
	let current;
	let mounted;
	let dispose;
	nolinkimage = new NoLinkImage({ $$inline: true });

	const block = {
		c: function create() {
			t0 = text("This file doesn't have any connections to ");
			a0 = element("a");
			t1 = text(t1_value);
			t2 = text(".");
			br0 = element("br");
			br1 = element("br");
			t3 = text(" Link it to a file that is part of your Map of Content. Then\n      ");
			a1 = element("a");
			a1.textContent = "update";
			t5 = text("\n      your Map of Content and watch it grow!");
			br2 = element("br");
			t6 = space();
			create_component(nolinkimage.$$.fragment);
			attr_dev(a0, "class", "link svelte-1swdn0o");
			attr_dev(a0, "title", /*cn_path*/ ctx[10]);
			add_location(a0, file$3, 150, 48, 5890);
			add_location(br0, file$3, 156, 8, 6061);
			add_location(br1, file$3, 156, 14, 6067);
			attr_dev(a1, "class", "link svelte-1swdn0o");
			add_location(a1, file$3, 157, 6, 6140);
			add_location(br2, file$3, 163, 44, 6286);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t0, anchor);
			insert_dev(target, a0, anchor);
			append_dev(a0, t1);
			insert_dev(target, t2, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t3, anchor);
			insert_dev(target, a1, anchor);
			insert_dev(target, t5, anchor);
			insert_dev(target, br2, anchor);
			insert_dev(target, t6, anchor);
			mount_component(nolinkimage, target, anchor);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(a0, "click", /*click_handler_5*/ ctx[19], false, false, false),
					listen_dev(a1, "click", /*click_handler_6*/ ctx[20], false, false, false)
				];

				mounted = true;
			}
		},
		p: noop,
		i: function intro(local) {
			if (current) return;
			transition_in(nolinkimage.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(nolinkimage.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a0);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t3);
			if (detaching) detach_dev(a1);
			if (detaching) detach_dev(t5);
			if (detaching) detach_dev(br2);
			if (detaching) detach_dev(t6);
			destroy_component(nolinkimage, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2.name,
		type: "if",
		source: "(150:32) ",
		ctx
	});

	return block;
}

// (146:28) 
function create_if_block_1(ctx) {
	let div;
	let raw_value = /*errors*/ ctx[2][0] + "";

	const block = {
		c: function create() {
			div = element("div");
			attr_dev(div, "class", "errors svelte-1swdn0o");
			add_location(div, file$3, 146, 6, 5749);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			div.innerHTML = raw_value;
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*errors*/ 4 && raw_value !== (raw_value = /*errors*/ ctx[2][0] + "")) div.innerHTML = raw_value;		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1.name,
		type: "if",
		source: "(146:28) ",
		ctx
	});

	return block;
}

// (144:4) {#if settings.get("do_show_update_notice")}
function create_if_block(ctx) {
	let updatenotice;
	let current;

	updatenotice = new UpdateNotice({
			props: {
				view: /*view*/ ctx[0],
				plugin: /*plugin*/ ctx[7]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			create_component(updatenotice.$$.fragment);
		},
		m: function mount(target, anchor) {
			mount_component(updatenotice, target, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			const updatenotice_changes = {};
			if (dirty[0] & /*view*/ 1) updatenotice_changes.view = /*view*/ ctx[0];
			updatenotice.$set(updatenotice_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(updatenotice.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(updatenotice.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_component(updatenotice, detaching);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block.name,
		type: "if",
		source: "(144:4) {#if settings.get(\\\"do_show_update_notice\\\")}",
		ctx
	});

	return block;
}

// (207:10) {:else}
function create_else_block_2(ctx) {
	let each_1_anchor;
	let each_value_2 = /*path*/ ctx[25].reverse();
	validate_each_argument(each_value_2);
	let each_blocks = [];

	for (let i = 0; i < each_value_2.length; i += 1) {
		each_blocks[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));
	}

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			each_1_anchor = empty();
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, each_1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*paths, db, app*/ 770) {
				each_value_2 = /*path*/ ctx[25].reverse();
				validate_each_argument(each_value_2);
				let i;

				for (i = 0; i < each_value_2.length; i += 1) {
					const child_ctx = get_each_context_2(ctx, each_value_2, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block_2(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value_2.length;
			}
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(each_1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_2.name,
		type: "else",
		source: "(207:10) {:else}",
		ctx
	});

	return block;
}

// (169:10) {#if settings.get("MOC_path_starts_at_CN")}
function create_if_block_3(ctx) {
	let each_1_anchor;
	let each_value_1 = /*path*/ ctx[25];
	validate_each_argument(each_value_1);
	let each_blocks = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks[i] = create_each_block_1$1(get_each_context_1$1(ctx, each_value_1, i));
	}

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			each_1_anchor = empty();
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, each_1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*paths, db, app*/ 770) {
				each_value_1 = /*path*/ ctx[25];
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1$1(ctx, each_value_1, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block_1$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value_1.length;
			}
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(each_1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3.name,
		type: "if",
		source: "(169:10) {#if settings.get(\\\"MOC_path_starts_at_CN\\\")}",
		ctx
	});

	return block;
}

// (211:17) {:else}
function create_else_block_3(ctx) {
	let a;
	let t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "";
	let t;
	let a_title_value;
	let mounted;
	let dispose;

	function click_handler_8(...args) {
		return /*click_handler_8*/ ctx[22](/*pathitem*/ ctx[28], ...args);
	}

	const block = {
		c: function create() {
			a = element("a");
			t = text(t_value);
			attr_dev(a, "class", "link svelte-1swdn0o");
			attr_dev(a, "title", a_title_value = /*pathitem*/ ctx[28][0]);
			add_location(a, file$3, 210, 24, 8333);
		},
		m: function mount(target, anchor) {
			insert_dev(target, a, anchor);
			append_dev(a, t);

			if (!mounted) {
				dispose = listen_dev(a, "click", click_handler_8, false, false, false);
				mounted = true;
			}
		},
		p: function update(new_ctx, dirty) {
			ctx = new_ctx;
			if (dirty[0] & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty[0] & /*paths*/ 2 && a_title_value !== (a_title_value = /*pathitem*/ ctx[28][0])) {
				attr_dev(a, "title", a_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_3.name,
		type: "else",
		source: "(211:17) {:else}",
		ctx
	});

	return block;
}

// (209:14) {#if i == 0}
function create_if_block_11(ctx) {
	let span;
	let t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "";
	let t;
	let span_title_value;

	const block = {
		c: function create() {
			span = element("span");
			t = text(t_value);
			attr_dev(span, "title", span_title_value = /*pathitem*/ ctx[28][0]);
			add_location(span, file$3, 208, 26, 8224);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, t);
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty[0] & /*paths*/ 2 && span_title_value !== (span_title_value = /*pathitem*/ ctx[28][0])) {
				attr_dev(span, "title", span_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_11.name,
		type: "if",
		source: "(209:14) {#if i == 0}",
		ctx
	});

	return block;
}

// (233:59) 
function create_if_block_10(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 9 0 L 0 7.5214844 L 9 15 L 9.6445312 14.236328 L 2.1152344 8 L 21.882812 8 L 14.355469 14.234375 L 15 15 L 24 7.4785156 L 15 0 L 14.355469 0.76367188 L 21.884766 7 L 2.1171875 7 L 9.6445312 0.765625 L 9 0 z ");
			add_location(path, file$3, 237, 18, 9495);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 232, 59, 9323);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_10.name,
		type: "if",
		source: "(233:59) ",
		ctx
	});

	return block;
}

// (225:57) 
function create_if_block_9(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 2.117,7 9.644,0.765 9,0 0,7.521 9,15 9.645,14.236 2.116,8 H 24 V 7 Z");
			add_location(path, file$3, 229, 18, 9142);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 224, 57, 8970);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_9.name,
		type: "if",
		source: "(225:57) ",
		ctx
	});

	return block;
}

// (217:22) {#if pathitem[1] == LINKED_FROM}
function create_if_block_8(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", " M 21.883,8 14.356,14.235 15,15 24,7.479 15,0 14.355,0.764 21.884,7 H 0 v 1 z");
			add_location(path, file$3, 221, 18, 8784);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 216, 54, 8612);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_8.name,
		type: "if",
		source: "(217:22) {#if pathitem[1] == LINKED_FROM}",
		ctx
	});

	return block;
}

// (208:12) {#each path.reverse() as pathitem, i}
function create_each_block_2(ctx) {
	let if_block0_anchor;
	let if_block1_anchor;

	function select_block_type_4(ctx, dirty) {
		if (/*i*/ ctx[30] == 0) return create_if_block_11;
		return create_else_block_3;
	}

	let current_block_type = select_block_type_4(ctx);
	let if_block0 = current_block_type(ctx);

	function select_block_type_5(ctx, dirty) {
		if (/*pathitem*/ ctx[28][1] == LINKED_FROM) return create_if_block_8;
		if (/*pathitem*/ ctx[28][1] == LINKED_TO) return create_if_block_9;
		if (/*pathitem*/ ctx[28][1] == LINKED_BOTH) return create_if_block_10;
	}

	let current_block_type_1 = select_block_type_5(ctx);
	let if_block1 = current_block_type_1 && current_block_type_1(ctx);

	const block = {
		c: function create() {
			if_block0.c();
			if_block0_anchor = empty();
			if (if_block1) if_block1.c();
			if_block1_anchor = empty();
		},
		m: function mount(target, anchor) {
			if_block0.m(target, anchor);
			insert_dev(target, if_block0_anchor, anchor);
			if (if_block1) if_block1.m(target, anchor);
			insert_dev(target, if_block1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if_block0.p(ctx, dirty);

			if (current_block_type_1 !== (current_block_type_1 = select_block_type_5(ctx))) {
				if (if_block1) if_block1.d(1);
				if_block1 = current_block_type_1 && current_block_type_1(ctx);

				if (if_block1) {
					if_block1.c();
					if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
				}
			}
		},
		d: function destroy(detaching) {
			if_block0.d(detaching);
			if (detaching) detach_dev(if_block0_anchor);

			if (if_block1) {
				if_block1.d(detaching);
			}

			if (detaching) detach_dev(if_block1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_2.name,
		type: "each",
		source: "(208:12) {#each path.reverse() as pathitem, i}",
		ctx
	});

	return block;
}

// (189:59) 
function create_if_block_7(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 9 0 L 0 7.5214844 L 9 15 L 9.6445312 14.236328 L 2.1152344 8 L 21.882812 8 L 14.355469 14.234375 L 15 15 L 24 7.4785156 L 15 0 L 14.355469 0.76367188 L 21.884766 7 L 2.1171875 7 L 9.6445312 0.765625 L 9 0 z ");
			add_location(path, file$3, 194, 18, 7456);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 189, 16, 7284);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_7.name,
		type: "if",
		source: "(189:59) ",
		ctx
	});

	return block;
}

// (180:57) 
function create_if_block_6(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", " M 21.883,8 14.356,14.235 15,15 24,7.479 15,0 14.355,0.764 21.884,7 H 0 v 1 z");
			add_location(path, file$3, 185, 18, 7079);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 180, 16, 6907);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_6.name,
		type: "if",
		source: "(180:57) ",
		ctx
	});

	return block;
}

// (171:14) {#if pathitem[1] == LINKED_FROM}
function create_if_block_5(ctx) {
	let svg;
	let path;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			path = svg_element("path");
			attr_dev(path, "d", "M 2.117,7 9.644,0.765 9,0 0,7.521 9,15 9.645,14.236 2.116,8 H 24 V 7 Z");
			add_location(path, file$3, 176, 18, 6711);
			attr_dev(svg, "class", "path-arrow svelte-1swdn0o");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "viewBox", "0 0 24 15.05");
			add_location(svg, file$3, 171, 16, 6539);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, path);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_5.name,
		type: "if",
		source: "(171:14) {#if pathitem[1] == LINKED_FROM}",
		ctx
	});

	return block;
}

// (200:17) {:else}
function create_else_block_1(ctx) {
	let a;
	let t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "";
	let t;
	let a_title_value;
	let mounted;
	let dispose;

	function click_handler_7(...args) {
		return /*click_handler_7*/ ctx[21](/*pathitem*/ ctx[28], ...args);
	}

	const block = {
		c: function create() {
			a = element("a");
			t = text(t_value);
			attr_dev(a, "class", "link svelte-1swdn0o");
			attr_dev(a, "title", a_title_value = /*pathitem*/ ctx[28][0]);
			add_location(a, file$3, 199, 24, 7879);
		},
		m: function mount(target, anchor) {
			insert_dev(target, a, anchor);
			append_dev(a, t);

			if (!mounted) {
				dispose = listen_dev(a, "click", click_handler_7, false, false, false);
				mounted = true;
			}
		},
		p: function update(new_ctx, dirty) {
			ctx = new_ctx;
			if (dirty[0] & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty[0] & /*paths*/ 2 && a_title_value !== (a_title_value = /*pathitem*/ ctx[28][0])) {
				attr_dev(a, "title", a_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1.name,
		type: "else",
		source: "(200:17) {:else}",
		ctx
	});

	return block;
}

// (198:27) {#if i == path.length - 1}
function create_if_block_4(ctx) {
	let span;
	let t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "";
	let t;
	let span_title_value;

	const block = {
		c: function create() {
			span = element("span");
			t = text(t_value);
			attr_dev(span, "title", span_title_value = /*pathitem*/ ctx[28][0]);
			add_location(span, file$3, 197, 53, 7770);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, t);
		},
		p: function update(ctx, dirty) {
			if (dirty[0] & /*paths*/ 2 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[28][0], /*db*/ ctx[9]) + "")) set_data_dev(t, t_value);

			if (dirty[0] & /*paths*/ 2 && span_title_value !== (span_title_value = /*pathitem*/ ctx[28][0])) {
				attr_dev(span, "title", span_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4.name,
		type: "if",
		source: "(198:27) {#if i == path.length - 1}",
		ctx
	});

	return block;
}

// (170:12) {#each path as pathitem, i}
function create_each_block_1$1(ctx) {
	let if_block0_anchor;
	let if_block1_anchor;

	function select_block_type_2(ctx, dirty) {
		if (/*pathitem*/ ctx[28][1] == LINKED_FROM) return create_if_block_5;
		if (/*pathitem*/ ctx[28][1] == LINKED_TO) return create_if_block_6;
		if (/*pathitem*/ ctx[28][1] == LINKED_BOTH) return create_if_block_7;
	}

	let current_block_type = select_block_type_2(ctx);
	let if_block0 = current_block_type && current_block_type(ctx);

	function select_block_type_3(ctx, dirty) {
		if (/*i*/ ctx[30] == /*path*/ ctx[25].length - 1) return create_if_block_4;
		return create_else_block_1;
	}

	let current_block_type_1 = select_block_type_3(ctx);
	let if_block1 = current_block_type_1(ctx);

	const block = {
		c: function create() {
			if (if_block0) if_block0.c();
			if_block0_anchor = empty();
			if_block1.c();
			if_block1_anchor = empty();
		},
		m: function mount(target, anchor) {
			if (if_block0) if_block0.m(target, anchor);
			insert_dev(target, if_block0_anchor, anchor);
			if_block1.m(target, anchor);
			insert_dev(target, if_block1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if (current_block_type !== (current_block_type = select_block_type_2(ctx))) {
				if (if_block0) if_block0.d(1);
				if_block0 = current_block_type && current_block_type(ctx);

				if (if_block0) {
					if_block0.c();
					if_block0.m(if_block0_anchor.parentNode, if_block0_anchor);
				}
			}

			if (current_block_type_1 === (current_block_type_1 = select_block_type_3(ctx)) && if_block1) {
				if_block1.p(ctx, dirty);
			} else {
				if_block1.d(1);
				if_block1 = current_block_type_1(ctx);

				if (if_block1) {
					if_block1.c();
					if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
				}
			}
		},
		d: function destroy(detaching) {
			if (if_block0) {
				if_block0.d(detaching);
			}

			if (detaching) detach_dev(if_block0_anchor);
			if_block1.d(detaching);
			if (detaching) detach_dev(if_block1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1$1.name,
		type: "each",
		source: "(170:12) {#each path as pathitem, i}",
		ctx
	});

	return block;
}

// (167:6) {#each paths as path}
function create_each_block$3(ctx) {
	let div;
	let t;
	let br;

	function select_block_type_1(ctx, dirty) {
		if (/*settings*/ ctx[12].get("MOC_path_starts_at_CN")) return create_if_block_3;
		return create_else_block_2;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block = current_block_type(ctx);

	const block = {
		c: function create() {
			div = element("div");
			if_block.c();
			t = space();
			br = element("br");
			attr_dev(div, "class", "path");
			add_location(div, file$3, 167, 8, 6363);
			add_location(br, file$3, 244, 8, 9843);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			if_block.m(div, null);
			insert_dev(target, t, anchor);
			insert_dev(target, br, anchor);
		},
		p: function update(ctx, dirty) {
			if_block.p(ctx, dirty);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
			if_block.d();
			if (detaching) detach_dev(t);
			if (detaching) detach_dev(br);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$3.name,
		type: "each",
		source: "(167:6) {#each paths as path}",
		ctx
	});

	return block;
}

function create_fragment$3(ctx) {
	let div8;
	let div6;
	let div0;
	let svg0;
	let path0;
	let svg1;
	let path1;
	let div0_title_value;
	let t0;
	let div4;
	let div1;
	let svg2;
	let path2;
	let t1;
	let div2;
	let svg3;
	let path3;
	let t2;
	let div3;
	let svg4;
	let path4;
	let t3;
	let div5;
	let svg5;
	let path5;
	let t4;
	let div7;
	let show_if;
	let current_block_type_index;
	let if_block;
	let current;
	let mounted;
	let dispose;
	const if_block_creators = [create_if_block, create_if_block_1, create_if_block_2, create_else_block];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (show_if == null) show_if = !!/*settings*/ ctx[12].get("do_show_update_notice");
		if (show_if) return 0;
		if (/*errors*/ ctx[2].length) return 1;
		if (/*paths*/ ctx[1].length == 0) return 2;
		return 3;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			div8 = element("div");
			div6 = element("div");
			div0 = element("div");
			svg0 = svg_element("svg");
			path0 = svg_element("path");
			svg1 = svg_element("svg");
			path1 = svg_element("path");
			t0 = space();
			div4 = element("div");
			div1 = element("div");
			svg2 = svg_element("svg");
			path2 = svg_element("path");
			t1 = space();
			div2 = element("div");
			svg3 = svg_element("svg");
			path3 = svg_element("path");
			t2 = space();
			div3 = element("div");
			svg4 = svg_element("svg");
			path4 = svg_element("path");
			t3 = space();
			div5 = element("div");
			svg5 = svg_element("svg");
			path5 = svg_element("path");
			t4 = space();
			div7 = element("div");
			if_block.c();
			attr_dev(path0, "d", "M18 6c0 2.972-2.164 5.433-5 5.91v8.09h-2v-8.089c-2.836-.477-5-2.938-5-5.911 0-3.314 2.687-6 6-6s6 2.687 6 6zm-2 0c0-2.206-1.794-4-4-4s-4 1.794-4 4 1.794 4 4 4 4-1.794 4-4zm-5.618 2.098c2.339 1.84 5.563-.722 3.858-3.539.313 2.237-1.956 4.03-3.858 3.539zm4.618 8.195v2.052l.438.107c1.706.493 2.496 1.027 2.507 1.547-.011.52-.801 1.054-2.507 1.547-2.097.606-4.786.604-6.874.001-1.695-.489-2.515-1.021-2.515-1.547s.82-1.058 2.516-1.548l.436-.106v-2.052c-2.932.593-5.001 2.028-5.001 3.706 0 2.209 3.581 4 8 4s8-1.791 8-4c0-1.678-2.069-3.113-5-3.707z");
			add_location(path0, file$3, 49, 8, 1423);
			attr_dev(svg0, "id", "not-pinned");
			attr_dev(svg0, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg0, "viewBox", "0 0 24 24");
			attr_dev(svg0, "class", "svelte-1swdn0o");
			add_location(svg0, file$3, 44, 6, 1307);
			attr_dev(path1, "d", "M 12,2 C 8.687,2 6,4.687 6,8 c 0,2.972 2.164,5.433 5,5.91 V 20 h 2 v -6.089 c 2.836,-0.477 5,-2.938 5,-5.91 C 18,4.687 15.313,2 12,2 Z M 11.293,6.508 C 10.744,7.158 9.87,7.308 9.34,6.841 8.81,6.374 8.824,5.469 9.374,4.819 9.922,4.169 10.796,4.02 11.326,4.486 c 0.53,0.467 0.515,1.372 -0.033,2.022 z M 20,20 c 0,2.209 -3.581,4 -8,4 -4.419,0 -8,-1.791 -8,-4 0,-1.678 2.069,-3.113 5,-3.707 v 2.052 L 8.564,18.451 C 6.869,18.942 6.048,19.474 6.048,20 c 0,0.526 0.82,1.058 2.516,1.548 2.088,0.603 4.777,0.605 6.874,-10e-4 C 17.144,21.054 17.934,20.52 17.945,20 17.934,19.48 17.144,18.946 15.438,18.453 L 15,18.346 v -2.052 c 2.931,0.593 5,2.028 5,3.706 z");
			add_location(path1, file$3, 58, 9, 2155);
			attr_dev(svg1, "id", "pinned");
			attr_dev(svg1, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg1, "width", "24");
			attr_dev(svg1, "height", "24");
			attr_dev(svg1, "viewBox", "0 0 24 24");
			attr_dev(svg1, "class", "svelte-1swdn0o");
			add_location(svg1, file$3, 52, 12, 2011);
			attr_dev(div0, "id", "pin-file");
			attr_dev(div0, "class", "action is-pinned svelte-1swdn0o");

			attr_dev(div0, "title", div0_title_value = /*is_pinned*/ ctx[6]
			? "Unpin this file"
			: "Pin this file");

			toggle_class(div0, "is-pinned", /*is_pinned*/ ctx[6]);
			add_location(div0, file$3, 32, 4, 996);
			attr_dev(path2, "d", "M23 12c0 1.042-.154 2.045-.425 3h-2.101c.335-.94.526-1.947.526-3 0-4.962-4.037-9-9-9-1.706 0-3.296.484-4.655 1.314l1.858 2.686h-6.994l2.152-7 1.849 2.673c1.684-1.049 3.659-1.673 5.79-1.673 6.074 0 11 4.925 11 11zm-6.354 7.692c-1.357.826-2.944 1.308-4.646 1.308-4.962 0-9-4.038-9-9 0-1.053.191-2.06.525-3h-2.1c-.271.955-.425 1.958-.425 3 0 6.075 4.925 11 11 11 2.127 0 4.099-.621 5.78-1.667l1.853 2.667 2.152-6.989h-6.994l1.855 2.681z");
			add_location(path2, file$3, 73, 10, 3135);
			attr_dev(svg2, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg2, "viewBox", "0 0 24 24");
			attr_dev(svg2, "class", "svelte-1swdn0o");
			add_location(svg2, file$3, 72, 8, 3064);
			attr_dev(div1, "id", "update-moc");
			attr_dev(div1, "class", "action svelte-1swdn0o");
			attr_dev(div1, "title", "Update the Map of Content");
			add_location(div1, file$3, 64, 6, 2894);
			attr_dev(path3, "d", "M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z");
			add_location(path3, file$3, 87, 10, 3887);
			attr_dev(svg3, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg3, "viewBox", "0 0 24 24");
			attr_dev(svg3, "class", "svelte-1swdn0o");
			add_location(svg3, file$3, 86, 8, 3816);
			attr_dev(div2, "id", "minus-expand");
			attr_dev(div2, "class", "action svelte-1swdn0o");
			attr_dev(div2, "title", "Show fewer descendants");
			add_location(div2, file$3, 78, 6, 3638);
			attr_dev(path4, "d", "M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z");
			add_location(path4, file$3, 106, 10, 4458);
			attr_dev(svg4, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg4, "viewBox", "0 0 24 24");
			attr_dev(svg4, "fill-rule", "evenodd");
			attr_dev(svg4, "clip-rule", "evenodd");
			attr_dev(svg4, "class", "svelte-1swdn0o");
			add_location(svg4, file$3, 100, 8, 4298);
			attr_dev(div3, "id", "plus-expand");
			attr_dev(div3, "class", "action svelte-1swdn0o");
			attr_dev(div3, "title", "Show more descendants");
			add_location(div3, file$3, 92, 6, 4124);
			attr_dev(div4, "id", "top-bar-flex");
			attr_dev(div4, "class", "svelte-1swdn0o");
			add_location(div4, file$3, 63, 4, 2864);
			attr_dev(path5, "d", "M15 5.829l6.171 6.171-6.171 6.171v-3.171h-13v-6h13v-3.171zm-2-4.829v6h-13v10h13v6l11-11-11-11z");
			add_location(path5, file$3, 122, 9, 4975);
			attr_dev(svg5, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg5, "viewBox", "0 0 24 24");
			attr_dev(svg5, "class", "svelte-1swdn0o");
			add_location(svg5, file$3, 121, 6, 4906);
			attr_dev(div5, "id", "scroll_up");
			attr_dev(div5, "title", "Scroll to top");
			attr_dev(div5, "class", "action svelte-1swdn0o");
			add_location(div5, file$3, 112, 4, 4722);
			attr_dev(div6, "id", "top-bar");
			attr_dev(div6, "class", "svelte-1swdn0o");
			add_location(div6, file$3, 31, 2, 973);
			attr_dev(div7, "id", "main_moc_div");
			attr_dev(div7, "class", "svelte-1swdn0o");
			add_location(div7, file$3, 128, 2, 5136);
			attr_dev(div8, "id", "all-container");

			attr_dev(div8, "class", "" + (null_to_empty(document.body.classList.contains("theme-dark")
			? "dark-mode"
			: "light-mode") + " svelte-1swdn0o"));

			add_location(div8, file$3, 25, 0, 849);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div8, anchor);
			append_dev(div8, div6);
			append_dev(div6, div0);
			append_dev(div0, svg0);
			append_dev(svg0, path0);
			append_dev(div0, svg1);
			append_dev(svg1, path1);
			append_dev(div6, t0);
			append_dev(div6, div4);
			append_dev(div4, div1);
			append_dev(div1, svg2);
			append_dev(svg2, path2);
			append_dev(div4, t1);
			append_dev(div4, div2);
			append_dev(div2, svg3);
			append_dev(svg3, path3);
			append_dev(div4, t2);
			append_dev(div4, div3);
			append_dev(div3, svg4);
			append_dev(svg4, path4);
			append_dev(div6, t3);
			append_dev(div6, div5);
			append_dev(div5, svg5);
			append_dev(svg5, path5);
			/*div5_binding*/ ctx[17](div5);
			append_dev(div8, t4);
			append_dev(div8, div7);
			if_blocks[current_block_type_index].m(div7, null);
			/*div7_binding*/ ctx[23](div7);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(div0, "click", /*click_handler*/ ctx[13], false, false, false),
					listen_dev(div1, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(div2, "click", /*click_handler_2*/ ctx[15], false, false, false),
					listen_dev(div3, "click", /*click_handler_3*/ ctx[16], false, false, false),
					listen_dev(div5, "click", /*click_handler_4*/ ctx[18], false, false, false),
					listen_dev(div7, "scroll", /*scroll_handler*/ ctx[24], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (!current || dirty[0] & /*is_pinned*/ 64 && div0_title_value !== (div0_title_value = /*is_pinned*/ ctx[6]
			? "Unpin this file"
			: "Pin this file")) {
				attr_dev(div0, "title", div0_title_value);
			}

			if (dirty[0] & /*is_pinned*/ 64) {
				toggle_class(div0, "is-pinned", /*is_pinned*/ ctx[6]);
			}

			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(div7, null);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div8);
			/*div5_binding*/ ctx[17](null);
			if_blocks[current_block_type_index].d();
			/*div7_binding*/ ctx[23](null);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$3.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$3($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('View', slots, []);
	
	let { view } = $$props;
	let { paths } = $$props;
	let { errors } = $$props;

	//let open_file_folder2=view.open_file_path.split("/")
	//open_file_folder2.pop()
	//let open_file_folder=open_file_folder2.join('/')
	let plugin = view.plugin;

	let app = plugin.app;
	let db = plugin.db;
	let cn_path = plugin.settings.get("CN_path");
	let expandMan = new expandManager();
	let scroll_up_div;
	let settings = plugin.settings;
	let main_div;
	let scroll_up_div_already_visible = false;
	let is_pinned = false;
	const writable_props = ['view', 'paths', 'errors'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<View> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		$$invalidate(0, view.is_pinned = !view.is_pinned, view);
		$$invalidate(6, is_pinned = !is_pinned);

		if (view.is_pinned) ;
	};

	const click_handler_1 = () => {
		db.update();
	};

	const click_handler_2 = () => {
		expandMan.contract();
	};

	const click_handler_3 = () => {
		expandMan.expand();
	};

	function div5_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			scroll_up_div = $$value;
			$$invalidate(3, scroll_up_div);
		});
	}

	const click_handler_4 = () => {
		$$invalidate(4, main_div.scrollTop = 0, main_div);
	};

	const click_handler_5 = event => NavigateToFile(app, cn_path, event);

	const click_handler_6 = () => {
		db.update();
	};

	const click_handler_7 = (pathitem, event) => NavigateToFile(app, pathitem[0], event);
	const click_handler_8 = (pathitem, event) => NavigateToFile(app, pathitem[0], event);

	function div7_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			main_div = $$value;
			$$invalidate(4, main_div);
		});
	}

	const scroll_handler = e => {
		if (e.target.scrollTop > 30 && !scroll_up_div_already_visible) {
			$$invalidate(3, scroll_up_div.style.display = "block", scroll_up_div);
			$$invalidate(5, scroll_up_div_already_visible = true);
		} else //hide the arrow if user scrolls back to the top
		if (e.target.scrollTop <= 30 && scroll_up_div_already_visible) {
			$$invalidate(3, scroll_up_div.style.display = "none", scroll_up_div);
			$$invalidate(5, scroll_up_div_already_visible = false);
		}
	};

	$$self.$$set = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('paths' in $$props) $$invalidate(1, paths = $$props.paths);
		if ('errors' in $$props) $$invalidate(2, errors = $$props.errors);
	};

	$$self.$capture_state = () => ({
		LINKED_BOTH,
		LINKED_TO,
		LINKED_FROM,
		GetDisplayName,
		IsCtrlPressed,
		NavigateToFile,
		Log,
		NoLinkImage,
		Descendants,
		UpdateNotice,
		expandManager,
		view,
		paths,
		errors,
		plugin,
		app,
		db,
		cn_path,
		expandMan,
		scroll_up_div,
		settings,
		main_div,
		scroll_up_div_already_visible,
		is_pinned
	});

	$$self.$inject_state = $$props => {
		if ('view' in $$props) $$invalidate(0, view = $$props.view);
		if ('paths' in $$props) $$invalidate(1, paths = $$props.paths);
		if ('errors' in $$props) $$invalidate(2, errors = $$props.errors);
		if ('plugin' in $$props) $$invalidate(7, plugin = $$props.plugin);
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('db' in $$props) $$invalidate(9, db = $$props.db);
		if ('cn_path' in $$props) $$invalidate(10, cn_path = $$props.cn_path);
		if ('expandMan' in $$props) $$invalidate(11, expandMan = $$props.expandMan);
		if ('scroll_up_div' in $$props) $$invalidate(3, scroll_up_div = $$props.scroll_up_div);
		if ('settings' in $$props) $$invalidate(12, settings = $$props.settings);
		if ('main_div' in $$props) $$invalidate(4, main_div = $$props.main_div);
		if ('scroll_up_div_already_visible' in $$props) $$invalidate(5, scroll_up_div_already_visible = $$props.scroll_up_div_already_visible);
		if ('is_pinned' in $$props) $$invalidate(6, is_pinned = $$props.is_pinned);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		view,
		paths,
		errors,
		scroll_up_div,
		main_div,
		scroll_up_div_already_visible,
		is_pinned,
		plugin,
		app,
		db,
		cn_path,
		expandMan,
		settings,
		click_handler,
		click_handler_1,
		click_handler_2,
		click_handler_3,
		div5_binding,
		click_handler_4,
		click_handler_5,
		click_handler_6,
		click_handler_7,
		click_handler_8,
		div7_binding,
		scroll_handler
	];
}

class View extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$3, create_fragment$3, safe_not_equal, { view: 0, paths: 1, errors: 2 }, add_css$3, [-1, -1]);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "View",
			options,
			id: create_fragment$3.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*view*/ ctx[0] === undefined && !('view' in props)) {
			console.warn("<View> was created without expected prop 'view'");
		}

		if (/*paths*/ ctx[1] === undefined && !('paths' in props)) {
			console.warn("<View> was created without expected prop 'paths'");
		}

		if (/*errors*/ ctx[2] === undefined && !('errors' in props)) {
			console.warn("<View> was created without expected prop 'errors'");
		}
	}

	get view() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set view(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get paths() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set paths(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get errors() {
		throw new Error("<View>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set errors(value) {
		throw new Error("<View>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

class MOCView extends obsidian.ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.max_indent = 5;
        this.is_pinned = false;
        this.plugin = plugin;
        this.db = this.plugin.db;
        this.settings = plugin.settings;
        this.app = this.plugin.app;
        // register with the main class
        this.plugin.registerViewInstance(this);
        this.plugin.app.workspace.onLayoutReady(() => this.init());
        // rerender on css change to adapt to dark/light mode changes
        // TODO pass command to svelte, not recreate it
        this.plugin.app.workspace.on("css-change", () => {
            this.rerender();
        });
    }
    init() {
        // update the path view every time a file is opened
        this.registerEvent(this.app.workspace.on("file-open", (file) => {
            if (!this.is_pinned) {
                this.monitorNote();
                this.rerender();
            }
        }));
        this.monitorNote();
        this.rerender();
    }
    async onOpen() { }
    /** reload paths and recreate the svelte instance */
    rerender() {
        // destroy old pathview/errorview instance
        // set symbol to undefined to avoid "This component has already been destroyed" message
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        let errors = [];
        if (this.db.database_updating) {
            errors.push("Updating...");
        }
        else if (!this.db.database_complete) {
            errors.push(`Your Map of Content couldn't be created.<br><br> Make sure your Central Note path '${this.settings.get("CN_path")}' is correct. You can change this path in the settings tab.`);
        }
        else if (this.app.workspace.getActiveFile() == null) {
            errors.push("No file is open");
        }
        else if (this.settings.isExludedFile(this.app.workspace.getActiveFile())) {
            errors.push("This file has been excluded from the Map of Content.");
        }
        else {
            this.open_file_path = this.app.workspace.getActiveFile().path;
            if (this.db.getNoteFromPath(this.open_file_path) == undefined) {
                errors.push("Updating...");
                this.db.update(true);
            }
        }
        let paths = [];
        if (errors.length == 0) {
            let all_paths = this.db.findPaths(this.open_file_path);
            if (all_paths.length == 0) ;
            paths = all_paths.map((p) => p.items.slice());
        }
        else {
            this.open_file_path = "None";
            paths = [];
        }
        this._app = new View({
            target: this.contentEl,
            props: { view: this, paths: paths, errors: errors },
        });
    }
    onClose() {
        if (this._app) {
            this._app.$destroy();
            this._app = undefined; // set symbol to undefined to avoid "This component has already been destroyed" message
        }
        this.plugin.unregisterViewInstance(this);
        return Promise.resolve();
    }
    async monitorNote() {
        let rerender = false;
        let active_file = this.app.workspace.getActiveFile();
        if (active_file == null) {
            return;
        }
        if (!this.settings.get("auto_update_on_file_change")) {
            return;
        }
        if (active_file == null || this.settings.isExludedFile(active_file)) {
            return;
        }
        if (this.monitoring_note &&
            this.app.metadataCache.getCache(this.monitoring_note) == undefined) {
            rerender = true;
        }
        let path = active_file.path;
        Log("Old monitoring note: " + this.monitoring_note);
        if (this.monitoring_note &&
            this.app.metadataCache.getCache(this.monitoring_note)) {
            if (!(path === this.monitoring_note)) {
                let now_links = this.db.getLinksFromNote(this.monitoring_note);
                if (!(JSON.stringify(now_links) ==
                    JSON.stringify(this.monitoring_note_links))) {
                    rerender = true;
                }
            }
        }
        this.monitoring_note = path;
        this.monitoring_note_links = this.db.getLinksFromNote(path);
        if (rerender) {
            this.db.update(true);
        }
    }
    getViewType() {
        return MOC_VIEW_TYPE;
    }
    getDisplayText() {
        return "Map of Content";
    }
    getIcon() {
        return "stacked-levels";
    }
}

/* src/svelte/settings/ExcludedFolders.svelte generated by Svelte v3.42.1 */
const file$2 = "src/svelte/settings/ExcludedFolders.svelte";

function add_css$2(target) {
	append_styles(target, "svelte-8qyew1", ".svelte-8qyew1{font-size:1em}h2.svelte-8qyew1{text-align:left}div#exluded-folders.svelte-8qyew1{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-8qyew1{width:300px}#excluded-select.svelte-8qyew1{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-8qyew1{height:300px;width:300px}div#currently-excluded.svelte-8qyew1{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-8qyew1{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGb2xkZXJzLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUF3S0UsY0FBRSxDQUFBLEFBQ0EsU0FBUyxDQUFFLEdBQUcsQUFDaEIsQ0FBQSxBQUVBLEVBQUUsY0FBQyxDQUFBLEFBQ0QsVUFBVSxDQUFFLElBQUksQUFDbEIsQ0FBQSxBQUVBLEdBQUcsZ0JBQWdCLGNBQUMsQ0FBQSxBQUNsQixPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxJQUFJLENBQ2YsVUFBVSxDQUFFLElBQUksQUFDbEIsQ0FBQSxBQUVBLEdBQUcsY0FBYyxjQUFDLENBQUEsQUFDaEIsS0FBSyxDQUFFLEtBQUssQUFDZCxDQUFBLEFBRUEsZ0JBQWdCLGNBQUMsQ0FBQSxBQUNmLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQ0FDWixTQUFTLENBQUUsR0FBRyxDQUNkLFFBQVEsQ0FBRSxJQUFJLEFBQ2hCLENBQUEsQUFFQSxtQkFBbUIsY0FBQyxDQUFBLEFBQ2xCLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQUFDZCxDQUFBLEFBQ0EsR0FBRyxtQkFBbUIsY0FBQyxDQUFBLEFBQ3JCLEtBQUssQ0FBRSxLQUFLLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsUUFBUSxDQUFFLE1BQU0sQUFDbEIsQ0FBQSxBQUNBLEdBQUcsd0JBQXdCLGNBQUMsQ0FBQSxBQUMxQixRQUFRLENBQUUsSUFBSSxDQUNkLFVBQVUsQ0FBRSxLQUFLLEFBQ25CLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRXhjbHVkZWRGb2xkZXJzLnN2ZWx0ZSJdfQ== */");
}

function get_each_context$2(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

function get_each_context_1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[23] = list[i];
	return child_ctx;
}

// (107:6) {#each all_folders as folder_path}
function create_each_block_1(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*folder_path*/ ctx[23];
			option.value = option.__value;
			attr_dev(option, "class", "svelte-8qyew1");
			add_location(option, file$2, 107, 8, 3187);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1.name,
		type: "each",
		source: "(107:6) {#each all_folders as folder_path}",
		ctx
	});

	return block;
}

// (144:8) {#each excluded_files as file_path}
function create_each_block$2(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-8qyew1");
			add_location(li, file$2, 144, 10, 4014);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$2.name,
		type: "each",
		source: "(144:8) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$2(ctx) {
	let h2;
	let t1;
	let div4;
	let div0;
	let select;
	let t2;
	let div1;
	let label;
	let t4;
	let input0;
	let t5;
	let datalist;
	let br0;
	let t6;
	let br1;
	let t7;
	let input1;
	let br2;
	let t8;
	let input2;
	let br3;
	let br4;
	let t9;
	let div3;
	let t10;
	let t11_value = /*excluded_files*/ ctx[1].length + "";
	let t11;
	let t12;
	let input3;
	let input3_value_value;
	let t13;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value_1 = /*all_folders*/ ctx[5];
	validate_each_argument(each_value_1);
	let each_blocks_1 = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
	}

	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded folders";
			t1 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t2 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a folder:";
			t4 = space();
			input0 = element("input");
			t5 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].c();
			}

			br0 = element("br");
			t6 = space();
			br1 = element("br");
			t7 = space();
			input1 = element("input");
			br2 = element("br");
			t8 = space();
			input2 = element("input");
			br3 = element("br");
			br4 = element("br");
			t9 = space();
			div3 = element("div");
			t10 = text("Currently excluded files: ");
			t11 = text(t11_value);
			t12 = space();
			input3 = element("input");
			t13 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-8qyew1");
			add_location(h2, file$2, 82, 0, 2549);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-8qyew1");
			add_location(select, file$2, 86, 4, 2634);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-8qyew1");
			add_location(div0, file$2, 85, 2, 2605);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-8qyew1");
			add_location(label, file$2, 95, 4, 2807);
			attr_dev(input0, "list", "exlude-folder");
			attr_dev(input0, "id", "Exluded-folders");
			attr_dev(input0, "type", "text");
			attr_dev(input0, "placeholder", "Start typing to see suggestions...");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-8qyew1");
			add_location(input0, file$2, 96, 4, 2857);
			attr_dev(datalist, "id", "exlude-folder");
			attr_dev(datalist, "class", "svelte-8qyew1");
			add_location(datalist, file$2, 105, 4, 3108);
			attr_dev(br0, "class", "svelte-8qyew1");
			add_location(br0, file$2, 109, 15, 3247);
			attr_dev(br1, "class", "svelte-8qyew1");
			add_location(br1, file$2, 110, 4, 3258);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-8qyew1");
			add_location(input1, file$2, 111, 4, 3269);
			attr_dev(br2, "class", "svelte-8qyew1");
			add_location(br2, file$2, 118, 6, 3390);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-8qyew1");
			add_location(input2, file$2, 119, 4, 3401);
			attr_dev(br3, "class", "svelte-8qyew1");
			add_location(br3, file$2, 126, 6, 3531);
			attr_dev(br4, "class", "svelte-8qyew1");
			add_location(br4, file$2, 126, 12, 3537);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-8qyew1");
			add_location(div1, file$2, 94, 2, 2773);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-8qyew1");
			add_location(input3, file$2, 130, 4, 3643);
			attr_dev(ul, "class", "svelte-8qyew1");
			add_location(ul, file$2, 142, 6, 3955);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-8qyew1");
			add_location(div2, file$2, 138, 4, 3838);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-8qyew1");
			add_location(div3, file$2, 128, 2, 3555);
			attr_dev(div4, "id", "exluded-folders");
			attr_dev(div4, "class", "svelte-8qyew1");
			add_location(div4, file$2, 84, 0, 2576);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[10](select);
			append_dev(div4, t2);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t4);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[11](input0);
			set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			append_dev(div1, t5);
			append_dev(div1, datalist);

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].m(datalist, null);
			}

			append_dev(div1, br0);
			append_dev(div1, t6);
			append_dev(div1, br1);
			append_dev(div1, t7);
			append_dev(div1, input1);
			append_dev(div1, br2);
			append_dev(div1, t8);
			append_dev(div1, input2);
			append_dev(div1, br3);
			append_dev(div1, br4);
			append_dev(div4, t9);
			append_dev(div4, div3);
			append_dev(div3, t10);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, input3);
			append_dev(div3, t13);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[12]),
					listen_dev(input1, "click", /*click_handler*/ ctx[13], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[15], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exlude_path_input_value*/ 4 && input0.value !== /*exlude_path_input_value*/ ctx[2]) {
				set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			}

			if (dirty & /*all_folders*/ 32) {
				each_value_1 = /*all_folders*/ ctx[5];
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1(ctx, each_value_1, i);

					if (each_blocks_1[i]) {
						each_blocks_1[i].p(child_ctx, dirty);
					} else {
						each_blocks_1[i] = create_each_block_1(child_ctx);
						each_blocks_1[i].c();
						each_blocks_1[i].m(datalist, null);
					}
				}

				for (; i < each_blocks_1.length; i += 1) {
					each_blocks_1[i].d(1);
				}

				each_blocks_1.length = each_value_1.length;
			}

			if (dirty & /*excluded_files*/ 2 && t11_value !== (t11_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t11, t11_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$2(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$2(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[10](null);
			/*input0_binding*/ ctx[11](null);
			destroy_each(each_blocks_1, detaching);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$2.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$2($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFolders', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let excluded_folders = plugin.settings.get("exluded_folders");

	// TODO show all exluded files in TextEdit not list
	// Select box based on https://www.c-sharpcorner.com/UploadFile/mahakgupta/add-and-remove-listbox-items-in-javascript/
	let all_folders = GetAllFolders(app);

	var list_options_no = 0;
	let excluded_files = allExcludedFiles();

	onMount(() => {
		// create select entries for all already excluded folders
		excluded_folders.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		let all_files = app.vault.getFiles().map(file => file.path);

		return all_files.filter(path_to_file => {
			return excluded_folders.some(path => path_to_file.startsWith(path));
		});
	}

	let exlude_path_input_value;
	let exlude_path_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.settings.set({ exluded_folders: excluded_folders });
	}

	function addValue() {
		if (!exlude_path_input_value) {
			return;
		}

		// Return if folder doesn't exist
		if (!all_folders.contains(exlude_path_input_value)) {
			alert("Please choose a folder from the list");
			return;
		}

		// Return if folder already on list
		if (excluded_folders.contains(exlude_path_input_value)) {
			$$invalidate(3, exlude_path_input.value = "", exlude_path_input);
			$$invalidate(2, exlude_path_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exlude_path_input_value, exlude_path_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		excluded_folders.push(exlude_path_input_value);

		// reset input field
		$$invalidate(3, exlude_path_input.value = "", exlude_path_input);

		$$invalidate(2, exlude_path_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				excluded_folders.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFolders> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exlude_path_input = $$value;
			$$invalidate(3, exlude_path_input);
		});
	}

	function input0_input_handler() {
		exlude_path_input_value = this.value;
		$$invalidate(2, exlude_path_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		Log,
		GetAllFolders,
		app,
		plugin,
		excludedlist,
		excluded_folders,
		all_folders,
		list_options_no,
		excluded_files,
		allExcludedFiles,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('excluded_folders' in $$props) excluded_folders = $$props.excluded_folders;
		if ('all_folders' in $$props) $$invalidate(5, all_folders = $$props.all_folders);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('exlude_path_input_value' in $$props) $$invalidate(2, exlude_path_input_value = $$props.exlude_path_input_value);
		if ('exlude_path_input' in $$props) $$invalidate(3, exlude_path_input = $$props.exlude_path_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		all_folders,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFolders extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$2, create_fragment$2, safe_not_equal, { app: 8, plugin: 9 }, add_css$2);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFolders",
			options,
			id: create_fragment$2.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[8] === undefined && !('app' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[9] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/settings/ExcludedFilenames.svelte generated by Svelte v3.42.1 */
const file$1 = "src/svelte/settings/ExcludedFilenames.svelte";

function add_css$1(target) {
	append_styles(target, "svelte-bfysum", ".svelte-bfysum{font-size:1em}h2.svelte-bfysum{text-align:left}div#exlude-filenames.svelte-bfysum{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-bfysum{width:300px}#excluded-select.svelte-bfysum{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-bfysum{height:300px;width:300px}div#currently-excluded.svelte-bfysum{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-bfysum{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGaWxlbmFtZXMuc3ZlbHRlIiwibWFwcGluZ3MiOiJBQXVLRSxjQUFFLENBQUEsQUFDQSxTQUFTLENBQUUsR0FBRyxBQUNoQixDQUFBLEFBRUEsRUFBRSxjQUFDLENBQUEsQUFDRCxVQUFVLENBQUUsSUFBSSxBQUNsQixDQUFBLEFBRUEsR0FBRyxpQkFBaUIsY0FBQyxDQUFBLEFBQ25CLE9BQU8sQ0FBRSxJQUFJLENBQ2IsU0FBUyxDQUFFLElBQUksQ0FDZixVQUFVLENBQUUsSUFBSSxBQUNsQixDQUFBLEFBRUEsR0FBRyxjQUFjLGNBQUMsQ0FBQSxBQUNoQixLQUFLLENBQUUsS0FBSyxBQUNkLENBQUEsQUFFQSxnQkFBZ0IsY0FBQyxDQUFBLEFBQ2YsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxDQUNaLFNBQVMsQ0FBRSxHQUFHLENBQ2QsUUFBUSxDQUFFLElBQUksQUFDaEIsQ0FBQSxBQUVBLG1CQUFtQixjQUFDLENBQUEsQUFDbEIsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxBQUNkLENBQUEsQUFDQSxHQUFHLG1CQUFtQixjQUFDLENBQUEsQUFDckIsS0FBSyxDQUFFLEtBQUssQ0FDWixVQUFVLENBQUUsS0FBSyxDQUNqQixRQUFRLENBQUUsTUFBTSxBQUNsQixDQUFBLEFBQ0EsR0FBRyx3QkFBd0IsY0FBQyxDQUFBLEFBQzFCLFFBQVEsQ0FBRSxJQUFJLENBQ2QsVUFBVSxDQUFFLEtBQUssQUFDbkIsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJFeGNsdWRlZEZpbGVuYW1lcy5zdmVsdGUiXX0= */");
}

function get_each_context$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

// (137:8) {#each excluded_files as file_path}
function create_each_block$1(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-bfysum");
			add_location(li, file$1, 137, 10, 3793);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$1.name,
		type: "each",
		source: "(137:8) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$1(ctx) {
	let h2;
	let t1;
	let br0;
	let br1;
	let t2;
	let div4;
	let div0;
	let select;
	let t3;
	let div1;
	let label;
	let t5;
	let input0;
	let t6;
	let br2;
	let t7;
	let br3;
	let t8;
	let input1;
	let br4;
	let t9;
	let input2;
	let br5;
	let br6;
	let t10;
	let div3;
	let t11;
	let t12_value = /*excluded_files*/ ctx[1].length + "";
	let t12;
	let t13;
	let input3;
	let input3_value_value;
	let t14;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded filenames";
			t1 = text("\nFilenames that contain these phrases will not be included in the Map of Content.\nThat also includes the file extension.");
			br0 = element("br");
			br1 = element("br");
			t2 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t3 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a phrase:";
			t5 = space();
			input0 = element("input");
			t6 = space();
			br2 = element("br");
			t7 = space();
			br3 = element("br");
			t8 = space();
			input1 = element("input");
			br4 = element("br");
			t9 = space();
			input2 = element("input");
			br5 = element("br");
			br6 = element("br");
			t10 = space();
			div3 = element("div");
			t11 = text("Currently excluded files: ");
			t12 = text(t12_value);
			t13 = space();
			input3 = element("input");
			t14 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-bfysum");
			add_location(h2, file$1, 79, 0, 2406);
			attr_dev(br0, "class", "svelte-bfysum");
			add_location(br0, file$1, 81, 38, 2553);
			attr_dev(br1, "class", "svelte-bfysum");
			add_location(br1, file$1, 81, 44, 2559);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-bfysum");
			add_location(select, file$1, 85, 4, 2626);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-bfysum");
			add_location(div0, file$1, 84, 2, 2597);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-bfysum");
			add_location(label, file$1, 94, 4, 2799);
			attr_dev(input0, "id", "Exluded-filenames");
			attr_dev(input0, "type", "text");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-bfysum");
			add_location(input0, file$1, 95, 4, 2849);
			attr_dev(br2, "class", "svelte-bfysum");
			add_location(br2, file$1, 102, 4, 3026);
			attr_dev(br3, "class", "svelte-bfysum");
			add_location(br3, file$1, 103, 4, 3037);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-bfysum");
			add_location(input1, file$1, 104, 4, 3048);
			attr_dev(br4, "class", "svelte-bfysum");
			add_location(br4, file$1, 111, 6, 3169);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-bfysum");
			add_location(input2, file$1, 112, 4, 3180);
			attr_dev(br5, "class", "svelte-bfysum");
			add_location(br5, file$1, 119, 6, 3310);
			attr_dev(br6, "class", "svelte-bfysum");
			add_location(br6, file$1, 119, 12, 3316);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-bfysum");
			add_location(div1, file$1, 93, 2, 2765);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-bfysum");
			add_location(input3, file$1, 123, 4, 3422);
			attr_dev(ul, "class", "svelte-bfysum");
			add_location(ul, file$1, 135, 6, 3734);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-bfysum");
			add_location(div2, file$1, 131, 4, 3617);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-bfysum");
			add_location(div3, file$1, 121, 2, 3334);
			attr_dev(div4, "id", "exlude-filenames");
			attr_dev(div4, "class", "svelte-bfysum");
			add_location(div4, file$1, 83, 0, 2567);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t2, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[9](select);
			append_dev(div4, t3);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t5);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[10](input0);
			set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			append_dev(div1, t6);
			append_dev(div1, br2);
			append_dev(div1, t7);
			append_dev(div1, br3);
			append_dev(div1, t8);
			append_dev(div1, input1);
			append_dev(div1, br4);
			append_dev(div1, t9);
			append_dev(div1, input2);
			append_dev(div1, br5);
			append_dev(div1, br6);
			append_dev(div4, t10);
			append_dev(div4, div3);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, t13);
			append_dev(div3, input3);
			append_dev(div3, t14);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[11]),
					listen_dev(input1, "click", /*click_handler*/ ctx[12], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[13], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[14], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exclude_phrase_input_value*/ 4 && input0.value !== /*exclude_phrase_input_value*/ ctx[2]) {
				set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			}

			if (dirty & /*excluded_files*/ 2 && t12_value !== (t12_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t12, t12_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$1(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[9](null);
			/*input0_binding*/ ctx[10](null);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$1.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$1($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFilenames', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let exluded_filename_components = plugin.settings.get("exluded_filename_components");
	let all_files = app.vault.getFiles().map(file => file.basename + "." + file.extension);
	let excluded_files = allExcludedFiles();

	// TODO show all exluded files in TextEdit not list
	// add all existing excluded folders to select element
	var list_options_no = 0;

	onMount(() => {
		// create select entries for all already excluded filename components
		exluded_filename_components.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		return all_files.filter(filename => {
			return exluded_filename_components.some(path => filename.contains(path));
		});
	}

	let exclude_phrase_input_value;
	let exclude_phrase_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.settings.set({ exluded_filename_components });
	}

	function addValue() {
		if (!exclude_phrase_input_value) {
			return;
		}

		// Return if folder already on list
		if (exluded_filename_components.contains(exclude_phrase_input_value)) {
			$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);
			$$invalidate(2, exclude_phrase_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exclude_phrase_input_value, exclude_phrase_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		exluded_filename_components.push(exclude_phrase_input_value);

		// reset input field
		$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);

		$$invalidate(2, exclude_phrase_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				exluded_filename_components.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFilenames> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exclude_phrase_input = $$value;
			$$invalidate(3, exclude_phrase_input);
		});
	}

	function input0_input_handler() {
		exclude_phrase_input_value = this.value;
		$$invalidate(2, exclude_phrase_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		app,
		plugin,
		excludedlist,
		exluded_filename_components,
		all_files,
		excluded_files,
		list_options_no,
		allExcludedFiles,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('exluded_filename_components' in $$props) exluded_filename_components = $$props.exluded_filename_components;
		if ('all_files' in $$props) all_files = $$props.all_files;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('exclude_phrase_input_value' in $$props) $$invalidate(2, exclude_phrase_input_value = $$props.exclude_phrase_input_value);
		if ('exclude_phrase_input' in $$props) $$invalidate(3, exclude_phrase_input = $$props.exclude_phrase_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFilenames extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$1, create_fragment$1, safe_not_equal, { app: 7, plugin: 8 }, add_css$1);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFilenames",
			options,
			id: create_fragment$1.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[7] === undefined && !('app' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[8] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/Settings.svelte generated by Svelte v3.42.1 */
const file = "src/svelte/Settings.svelte";

function add_css(target) {
	append_styles(target, "svelte-83jj2u", "#settings-container.svelte-83jj2u{position:relative;height:100%;width:100%}#CN_select.svelte-83jj2u{min-width:200px;width:50%;font-size:1em}#update_TLI_path_button.svelte-83jj2u{margin-left:auto;margin-right:auto}h2.svelte-83jj2u{text-align:left}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dGluZ3Muc3ZlbHRlIiwibWFwcGluZ3MiOiJBQTBJRSxtQkFBbUIsY0FBQyxDQUFBLEFBQ2xCLFFBQVEsQ0FBRSxRQUFRLENBQ2xCLE1BQU0sQ0FBRSxJQUFJLENBQ1osS0FBSyxDQUFFLElBQUksQUFDYixDQUFBLEFBQ0EsVUFBVSxjQUFDLENBQUEsQUFDVCxTQUFTLENBQUUsS0FBSyxDQUNoQixLQUFLLENBQUUsR0FBRyxDQUNWLFNBQVMsQ0FBRSxHQUFHLEFBQ2hCLENBQUEsQUFDQSx1QkFBdUIsY0FBQyxDQUFBLEFBQ3RCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLFlBQVksQ0FBRSxJQUFJLEFBQ3BCLENBQUEsQUFDQSxFQUFFLGNBQUMsQ0FBQSxBQUNELFVBQVUsQ0FBRSxJQUFJLEFBQ2xCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiU2V0dGluZ3Muc3ZlbHRlIl19 */");
}

function get_each_context(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[14] = list[i];
	return child_ctx;
}

// (47:6) {#each all_files as filepath}
function create_each_block(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*filepath*/ ctx[14];
			option.value = option.__value;
			add_location(option, file, 47, 8, 1680);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block.name,
		type: "each",
		source: "(47:6) {#each all_files as filepath}",
		ctx
	});

	return block;
}

function create_fragment(ctx) {
	let div3;
	let div0;
	let h20;
	let t1;
	let span;
	let br0;
	let t3;
	let label0;
	let t5;
	let input0;
	let t6;
	let datalist;
	let t7;
	let button;
	let t9;
	let br1;
	let t10;
	let div1;
	let h21;
	let t12;
	let label1;
	let input1;
	let t14;
	let br2;
	let t15;
	let div2;
	let h22;
	let t17;
	let label2;
	let input2;
	let t19;
	let br3;
	let t20;
	let label3;
	let input3;
	let t22;
	let br4;
	let t23;
	let excludedfolders;
	let t24;
	let excludedfilenames;
	let t25;
	let p;
	let t26;
	let a0;
	let t28;
	let a1;
	let t30;
	let br5;
	let br6;
	let t31;
	let a2;
	let t33;
	let a3;
	let t35;
	let a4;
	let t37;
	let current;
	let mounted;
	let dispose;
	let each_value = /*all_files*/ ctx[5];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
	}

	excludedfolders = new ExcludedFolders({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	excludedfilenames = new ExcludedFilenames({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			div3 = element("div");
			div0 = element("div");
			h20 = element("h2");
			h20.textContent = "Path of your Central Note";
			t1 = text("\n    Current path:");
			span = element("span");
			span.textContent = `${/*current_tli*/ ctx[6]}`;
			br0 = element("br");
			t3 = space();
			label0 = element("label");
			label0.textContent = "New path:";
			t5 = space();
			input0 = element("input");
			t6 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t7 = space();
			button = element("button");
			button.textContent = "Save";
			t9 = space();
			br1 = element("br");
			t10 = space();
			div1 = element("div");
			h21 = element("h2");
			h21.textContent = "Auto-updating the Map of Content";
			t12 = space();
			label1 = element("label");
			label1.textContent = "Update when switching between files\n    ";
			input1 = element("input");
			t14 = space();
			br2 = element("br");
			t15 = space();
			div2 = element("div");
			h22 = element("h2");
			h22.textContent = "Path and descendants";
			t17 = space();
			label2 = element("label");
			label2.textContent = "Display the path from the Central Note starting at the Central Note\n    ";
			input2 = element("input");
			t19 = space();
			br3 = element("br");
			t20 = space();
			label3 = element("label");
			label3.textContent = "Remember whether a file's descendants are shown or hidden\n    ";
			input3 = element("input");
			t22 = space();
			br4 = element("br");
			t23 = space();
			create_component(excludedfolders.$$.fragment);
			t24 = space();
			create_component(excludedfilenames.$$.fragment);
			t25 = space();
			p = element("p");
			t26 = text("For support and suggesting feature ideas, visit the plugin's ");
			a0 = element("a");
			a0.textContent = "GitHub page";
			t28 = text("\n    or\n    ");
			a1 = element("a");
			a1.textContent = "this post";
			t30 = text("\n    in the official Obsidian forum.\n    ");
			br5 = element("br");
			br6 = element("br");
			t31 = text("\n    You can support the development by donating on\n    ");
			a2 = element("a");
			a2.textContent = "Patreon";
			t33 = text(",\n    ");
			a3 = element("a");
			a3.textContent = "Ko-Fi";
			t35 = text("\n    or ");
			a4 = element("a");
			a4.textContent = "PayPal";
			t37 = text(". Thank\n    you!");
			attr_dev(h20, "class", "svelte-83jj2u");
			add_location(h20, file, 33, 4, 1261);
			attr_dev(span, "id", "tli_path");
			add_location(span, file, 34, 23, 1319);
			add_location(br0, file, 34, 63, 1359);
			attr_dev(label0, "for", "myBrowser");
			add_location(label0, file, 35, 4, 1370);
			attr_dev(input0, "type", "text");
			attr_dev(input0, "list", "notes");
			attr_dev(input0, "id", "CN_select");
			attr_dev(input0, "placeholder", "Start typing to see suggestions...");
			attr_dev(input0, "class", "svelte-83jj2u");
			add_location(input0, file, 36, 4, 1416);
			attr_dev(datalist, "id", "notes");
			add_location(datalist, file, 45, 4, 1614);
			attr_dev(button, "id", "update_TLI_path_button");
			attr_dev(button, "type", "button");
			attr_dev(button, "class", "svelte-83jj2u");
			add_location(button, file, 50, 4, 1736);
			attr_dev(div0, "class", "path");
			add_location(div0, file, 32, 2, 1238);
			add_location(br1, file, 58, 2, 1885);
			attr_dev(h21, "class", "svelte-83jj2u");
			add_location(h21, file, 60, 4, 1904);
			attr_dev(label1, "for", "auto-update-file-switch");
			add_location(label1, file, 61, 4, 1950);
			attr_dev(input1, "type", "checkbox");
			attr_dev(input1, "id", "auto-update-file-switch");
			input1.checked = /*settings*/ ctx[4].get("auto_update_on_file_change");
			add_location(input1, file, 63, 12, 2042);
			add_location(div1, file, 59, 2, 1894);
			add_location(br2, file, 75, 2, 2365);
			attr_dev(h22, "class", "svelte-83jj2u");
			add_location(h22, file, 77, 4, 2384);
			attr_dev(label2, "for", "MOC_path_starts_at_CN_checkbox");
			add_location(label2, file, 79, 4, 2419);
			attr_dev(input2, "type", "checkbox");
			attr_dev(input2, "id", "MOC_path_starts_at_CN_checkbox");
			input2.checked = /*settings*/ ctx[4].get("MOC_path_starts_at_CN");
			add_location(input2, file, 81, 12, 2550);
			add_location(br3, file, 92, 4, 2858);
			attr_dev(label3, "for", "do_remember_expanded_checkbox");
			add_location(label3, file, 93, 4, 2869);
			attr_dev(input3, "type", "checkbox");
			attr_dev(input3, "id", "do_remember_expanded_checkbox");
			input3.checked = /*settings*/ ctx[4].get("do_remember_expanded");
			add_location(input3, file, 95, 12, 2989);
			add_location(div2, file, 76, 2, 2374);
			add_location(br4, file, 107, 2, 3300);
			attr_dev(a0, "href", "https://github.com/Robin-Haupt-1/Obsidian-Map-of-Content");
			add_location(a0, file, 111, 65, 3454);
			attr_dev(a1, "href", "https://forum.obsidian.md/t/map-of-content-plugin-release/25209");
			add_location(a1, file, 117, 4, 3571);
			add_location(br5, file, 121, 4, 3711);
			add_location(br6, file, 121, 10, 3717);
			attr_dev(a2, "href", "https://www.patreon.com/RobinHaupt");
			add_location(a2, file, 123, 4, 3779);
			attr_dev(a3, "href", "https://ko-fi.com/robinhaupt");
			add_location(a3, file, 124, 4, 3841);
			attr_dev(a4, "href", "https://www.paypal.com/paypalme/robinhaupt");
			add_location(a4, file, 125, 7, 3897);
			add_location(p, file, 110, 2, 3385);
			attr_dev(div3, "id", "settings-container");
			attr_dev(div3, "class", "svelte-83jj2u");
			add_location(div3, file, 31, 0, 1206);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div3, anchor);
			append_dev(div3, div0);
			append_dev(div0, h20);
			append_dev(div0, t1);
			append_dev(div0, span);
			append_dev(div0, br0);
			append_dev(div0, t3);
			append_dev(div0, label0);
			append_dev(div0, t5);
			append_dev(div0, input0);
			/*input0_binding*/ ctx[8](input0);
			set_input_value(input0, /*cn_path_input_value*/ ctx[3]);
			append_dev(div0, t6);
			append_dev(div0, datalist);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(datalist, null);
			}

			append_dev(div0, t7);
			append_dev(div0, button);
			append_dev(div3, t9);
			append_dev(div3, br1);
			append_dev(div3, t10);
			append_dev(div3, div1);
			append_dev(div1, h21);
			append_dev(div1, t12);
			append_dev(div1, label1);
			append_dev(div1, input1);
			append_dev(div3, t14);
			append_dev(div3, br2);
			append_dev(div3, t15);
			append_dev(div3, div2);
			append_dev(div2, h22);
			append_dev(div2, t17);
			append_dev(div2, label2);
			append_dev(div2, input2);
			append_dev(div2, t19);
			append_dev(div2, br3);
			append_dev(div2, t20);
			append_dev(div2, label3);
			append_dev(div2, input3);
			append_dev(div3, t22);
			append_dev(div3, br4);
			append_dev(div3, t23);
			mount_component(excludedfolders, div3, null);
			append_dev(div3, t24);
			mount_component(excludedfilenames, div3, null);
			append_dev(div3, t25);
			append_dev(div3, p);
			append_dev(p, t26);
			append_dev(p, a0);
			append_dev(p, t28);
			append_dev(p, a1);
			append_dev(p, t30);
			append_dev(p, br5);
			append_dev(p, br6);
			append_dev(p, t31);
			append_dev(p, a2);
			append_dev(p, t33);
			append_dev(p, a3);
			append_dev(p, t35);
			append_dev(p, a4);
			append_dev(p, t37);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[9]),
					listen_dev(button, "click", /*click_handler*/ ctx[10], false, false, false),
					listen_dev(input1, "click", /*click_handler_1*/ ctx[11], false, false, false),
					listen_dev(input2, "click", /*click_handler_2*/ ctx[12], false, false, false),
					listen_dev(input3, "click", /*click_handler_3*/ ctx[13], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*cn_path_input_value*/ 8 && input0.value !== /*cn_path_input_value*/ ctx[3]) {
				set_input_value(input0, /*cn_path_input_value*/ ctx[3]);
			}

			if (dirty & /*all_files*/ 32) {
				each_value = /*all_files*/ ctx[5];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(datalist, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const excludedfolders_changes = {};
			if (dirty & /*app*/ 1) excludedfolders_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfolders_changes.plugin = /*plugin*/ ctx[1];
			excludedfolders.$set(excludedfolders_changes);
			const excludedfilenames_changes = {};
			if (dirty & /*app*/ 1) excludedfilenames_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfilenames_changes.plugin = /*plugin*/ ctx[1];
			excludedfilenames.$set(excludedfilenames_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(excludedfolders.$$.fragment, local);
			transition_in(excludedfilenames.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(excludedfolders.$$.fragment, local);
			transition_out(excludedfilenames.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div3);
			/*input0_binding*/ ctx[8](null);
			destroy_each(each_blocks, detaching);
			destroy_component(excludedfolders);
			destroy_component(excludedfilenames);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Settings', slots, []);
	
	let { app } = $$props;
	let { plugin } = $$props;
	let cn_input;
	let settings = plugin.settings;

	// TODO check the db is complete before allow settings changes (maybe have this svelte only do that and load all other components from other svelte files)
	// TODO lazy load all the file names and folders?
	// get list of all files for dropdown menu
	let all_files = app.vault.getFiles().map(file => file.path);

	Log("Central note path: " + settings.get("CN_path"));
	let cn_path_input_value;
	let current_tli = settings.get("CN_path");

	const updateCNPath = () => {
		if (!cn_path_input_value) {
			return;
		}

		// change TLI path
		settings.set({ CN_path: cn_path_input_value });
		document.getElementById("tli_path").textContent = cn_path_input_value;
		new obsidian.Notice("New Central Note path saved");

		// clear selection dropdown list
		$$invalidate(2, cn_input.value = "", cn_input);

		$$invalidate(3, cn_path_input_value = "");
	};

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<Settings> was created with unknown prop '${key}'`);
	});

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			cn_input = $$value;
			$$invalidate(2, cn_input);
		});
	}

	function input0_input_handler() {
		cn_path_input_value = this.value;
		$$invalidate(3, cn_path_input_value);
	}

	const click_handler = () => {
		updateCNPath();
	};

	const click_handler_1 = () => {
		let enabled = !settings.get("auto_update_on_file_change");
		settings.set({ auto_update_on_file_change: enabled });
	};

	const click_handler_2 = () => {
		let enabled = !settings.get("MOC_path_starts_at_CN");
		settings.set({ MOC_path_starts_at_CN: enabled });
	};

	const click_handler_3 = () => {
		let enabled = !settings.get("do_remember_expanded");
		settings.set({ do_remember_expanded: enabled });
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		App: obsidian.App,
		Notice: obsidian.Notice,
		TFile: obsidian.TFile,
		Log,
		GetAllFolders,
		ExcludedFolders,
		ExcludedFilenames,
		app,
		plugin,
		cn_input,
		settings,
		all_files,
		cn_path_input_value,
		current_tli,
		updateCNPath
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
		if ('cn_input' in $$props) $$invalidate(2, cn_input = $$props.cn_input);
		if ('settings' in $$props) $$invalidate(4, settings = $$props.settings);
		if ('all_files' in $$props) $$invalidate(5, all_files = $$props.all_files);
		if ('cn_path_input_value' in $$props) $$invalidate(3, cn_path_input_value = $$props.cn_path_input_value);
		if ('current_tli' in $$props) $$invalidate(6, current_tli = $$props.current_tli);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		app,
		plugin,
		cn_input,
		cn_path_input_value,
		settings,
		all_files,
		current_tli,
		updateCNPath,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2,
		click_handler_3
	];
}

class Settings extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance, create_fragment, safe_not_equal, { app: 0, plugin: 1 }, add_css);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Settings",
			options,
			id: create_fragment.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[0] === undefined && !('app' in props)) {
			console.warn("<Settings> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[1] === undefined && !('plugin' in props)) {
			console.warn("<Settings> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

const DEFAULT_SETTINGS = {
    CN_path: "Central Note.md",
    exluded_folders: [],
    exluded_filename_components: [],
    settings_version: "0.1.15",
    plugin_version: "0.1.15",
    do_show_update_notice: false,
    auto_update_on_file_change: true,
    do_remember_expanded: false,
    MOC_path_starts_at_CN: false,
    file_descendants_expanded: {},
};
class SettingsManager {
    constructor(plugin) {
        this.plugin = plugin;
    }
    async loadSettings() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, this.UpgradeSettingsVersion(await this.plugin.loadData()));
        this.saveSettings();
    }
    async saveSettings() {
        await this.plugin.saveData(this.settings);
    }
    async set(updates) {
        Object.assign(this.settings, updates);
        await this.plugin.saveData(this.settings);
    }
    get(setting) {
        return this.settings[setting];
    }
    UpgradeSettingsVersion(object) {
        // TODO remove deleted/renamed files from the is_expanded object
        try {
            // if fresh install, go with defaults
            if (object == undefined) {
                Log("fresh install, returning empty settings object");
                return {};
            }
            // abort if settings are already in current version format
            if (object["settings_version"] === DEFAULT_SETTINGS["settings_version"]) {
                Log("Settings already in current version");
                return object;
            }
            // clone the object
            object = JSON.parse(JSON.stringify(object));
            let object_keys = Object.keys(object);
            Log("old settings object: " + String(object_keys));
            let old_version = undefined;
            // determine which version the legacy object is from
            if (!object_keys.contains("settings_version")) {
                old_version = "pre-0.1.10";
            }
            else {
                old_version = object["settings_version"];
            }
            Log("old settings version: " + old_version);
            if (old_version === "pre-0.1.10") {
                // extract the CN path from CN_path_per_vault and save it as CN_path
                Log("Converting CN path from pre-0.1.10 to 0.1.10");
                let cn_settings_vault_names = object["CN_path_per_vault"].map((val) => val[0]); // get just the name of all vaults there's a CN stored for
                if (cn_settings_vault_names.contains(this.plugin.app.vault.getName())) {
                    object["CN_path"] =
                        object["CN_path_per_vault"][cn_settings_vault_names.indexOf(this.plugin.app.vault.getName())][1];
                }
                else {
                    delete object["CN_path"];
                }
                delete object["CN_path_per_vault"];
                object["settings_version"] = "0.1.10";
            } // clone the object
            let generic_update_versions = ["0.1.10", "0.1.12", "0.1.14"];
            if (generic_update_versions.contains(old_version)) {
                Log("performing generic update of settings to " +
                    DEFAULT_SETTINGS["settings_version"]);
                object["plugin_version"] = DEFAULT_SETTINGS["settings_version"];
                object["settings_version"] = DEFAULT_SETTINGS["settings_version"];
                object["do_show_update_notice"] = true;
            }
            return this.UpgradeSettingsVersion(object);
        }
        catch (_a) {
            return {};
        }
    }
    isExludedFile(file) {
        let path_to_file = file.path;
        let in_excluded_folder = this.get("exluded_folders").some((path) => path_to_file.startsWith(path));
        if (in_excluded_folder) {
            return true;
        }
        let filename = file.basename + "." + file.extension;
        let has_excluded_filename = this.get("exluded_filename_components").some((phrase) => filename.contains(phrase));
        return has_excluded_filename;
    }
    isExpanded(path) {
        if (!this.get("do_remember_expanded"))
            return true;
        let current_settings = this.get("file_descendants_expanded");
        if (Object.keys(current_settings).contains(path)) {
            return current_settings[path];
        }
        let new_settings = Object.assign(current_settings, { path: true });
        this.set({ file_descendants_expanded: new_settings });
        return true;
    }
    setExpanded(path, expanded) {
        if (!this.get("do_remember_expanded"))
            return;
        let new_val = {};
        new_val[path] = expanded;
        let new_settings = Object.assign({}, this.get("file_descendants_expanded"), new_val);
        this.set({ file_descendants_expanded: new_settings });
        return true;
    }
}
class MOCSettingTab extends obsidian.PluginSettingTab {
    constructor(plugin) {
        super(plugin.app, plugin);
        this.plugin = plugin;
        this.db = plugin.db;
        this._app = undefined;
    }
    display() {
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        this._app = new Settings({
            target: this.containerEl,
            props: { app: this.app, plugin: this.plugin },
        });
    }
    hide() {
        this.plugin.db.update();
    }
}

class MOCPlugin extends obsidian.Plugin {
    async onload() {
        this.settings = new SettingsManager(this);
        await this.settings.loadSettings();
        this.db = new DBManager(this);
        this.registerView(MOC_VIEW_TYPE, (leaf) => (this.view = new MOCView(leaf, this)));
        this.app.workspace.onLayoutReady(() => this.initializePlugin());
    }
    async initializePlugin() {
        this.addSettingTab(new MOCSettingTab(this));
        this.initLeaf();
        this.db.update(true);
        this.addRibbonIcon("sync", "Update Map of Content", async () => {
            await this.db.update();
        });
        this.addCommand({
            id: "rebuild-map-of-content",
            name: "Update Map of Content",
            callback: () => {
                this.db.update();
            },
        });
        this.addCommand({
            id: "open-note-as-central-note",
            name: "Set current note as Central Note",
            callback: () => {
                let errors = [];
                // make sure a file is opened
                if (this.app.workspace.getActiveFile() == null) {
                    errors.push("No file has been opened");
                }
                else if (this.settings.isExludedFile(this.app.workspace.getActiveFile())) {
                    errors.push("This file has been excluded from the Map of Content.");
                }
                if (errors.length) {
                    new obsidian.Notice(errors[0]);
                    return;
                }
                this.settings.set({ CN_path: this.app.workspace.getActiveFile().path });
                this.db.update();
            },
        });
    }
    initLeaf() {
        if (this.app.workspace.getLeavesOfType(MOC_VIEW_TYPE).length) ;
        else {
            this.app.workspace.getRightLeaf(true).setViewState({
                type: MOC_VIEW_TYPE,
                active: true,
            });
        }
    }
    rerender() {
        if (this.view) {
            this.view.rerender();
        }
    }
    onunload() {
        if (this.view) {
            this.view.onClose();
        }
        this.app.workspace.detachLeavesOfType(MOC_VIEW_TYPE);
    }
    CNexists() {
        let exists = !(this.app.vault.getAbstractFileByPath(this.settings.get("CN_path")) == null);
        return exists;
    }
    registerViewInstance(view) {
        this.view = view;
    }
    unregisterViewInstance(view) {
        this.view = undefined;
    }
}

module.exports = MOCPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL2NvbnN0YW50cy50cyIsInNyYy90eXBlcy50cyIsInNyYy91dGlscy50cyIsInNyYy9kYi50cyIsIm5vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXgubWpzIiwic3JjL3N2ZWx0ZS9Ob0xpbmtJbWFnZS5zdmVsdGUiLCJzcmMvc3ZlbHRlL0Rlc2NlbmRhbnRzLnN2ZWx0ZSIsInNyYy9zdmVsdGUvVXBkYXRlTm90aWNlLnN2ZWx0ZSIsInNyYy9zdmVsdGUvaGVscGVycy9leHBhbmRNYW5hZ2VyLnRzIiwic3JjL3N2ZWx0ZS9WaWV3LnN2ZWx0ZSIsInNyYy92aWV3LnRzIiwic3JjL3N2ZWx0ZS9zZXR0aW5ncy9FeGNsdWRlZEZvbGRlcnMuc3ZlbHRlIiwic3JjL3N2ZWx0ZS9zZXR0aW5ncy9FeGNsdWRlZEZpbGVuYW1lcy5zdmVsdGUiLCJzcmMvc3ZlbHRlL1NldHRpbmdzLnN2ZWx0ZSIsInNyYy9zZXR0aW5ncy50cyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIE1PQ1ZpZXcgZnJvbSBcIi4vdmlld1wiO1xuZXhwb3J0IGNvbnN0IENFTlRSQUxfTk9URV9QQVRIX0RFRkFVTFQgPSBcIkNlbnRyYWwgTm90ZS5tZFwiO1xuZXhwb3J0IGNvbnN0IExJTktFRF9UTyA9IFwiID0+IFwiO1xuZXhwb3J0IGNvbnN0IExJTktFRF9GUk9NID0gXCIgPD0gXCI7XG5leHBvcnQgY29uc3QgTElOS0VEX0NOID0gXCJOb25lXCI7XG5leHBvcnQgY29uc3QgTElOS0VEX0JPVEggPSBcIiA8PT4gXCI7XG5leHBvcnQgY29uc3QgTU9DX1ZJRVdfVFlQRSA9IFwibWFwLW9mLWNvbnRlbnRcIjtcbiIsImV4cG9ydCBjbGFzcyBGaWxlSXRlbSB7XG4gIHBhdGg6IHN0cmluZztcbiAgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gIGxpbmtzX3RvOiBzdHJpbmdbXTtcbiAgbGlua2VkX2Zyb206IHN0cmluZ1tdO1xuICBkaXN0YW5jZV9mcm9tX0NOOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIGV4dGVuc2lvbjogc3RyaW5nLFxuICAgIGxpbmtzX3RvOiBzdHJpbmdbXSxcbiAgICBsaW5rZWRfZnJvbTogc3RyaW5nW10sXG4gICAgZGlzdGFuY2VfZnJvbV9DTjogbnVtYmVyXG4gICkge1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5leHRlbnNpb24gPSBleHRlbnNpb247XG4gICAgdGhpcy5saW5rc190byA9IGxpbmtzX3RvO1xuICAgIHRoaXMubGlua2VkX2Zyb20gPSBsaW5rZWRfZnJvbTtcbiAgICB0aGlzLmRpc3RhbmNlX2Zyb21fQ04gPSBkaXN0YW5jZV9mcm9tX0NOO1xuICB9XG59XG5leHBvcnQgaW50ZXJmYWNlIERCIHtcbiAgW2luZGV4OiBzdHJpbmddOiBGaWxlSXRlbTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aCB7XG4gIGl0ZW1zOiBbc3RyaW5nLCBhbnldW107XG4gIGFsbF9tZW1iZXJzOiBzdHJpbmdbXTtcbn1cbiIsImltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCB0eXBlIHsgQXBwLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY29uc3QgTG9nID0gKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICBsZXQgcHJpbnRfbG9nID0gZmFsc2U7XG4gIGlmIChwcmludF9sb2cpIGNvbnNvbGUubG9nKFwiW01hcCBvZiBDb250ZW50XSBcIiArIG1lc3NhZ2UpO1xufTtcblxuZXhwb3J0IGNvbnN0IFJlbW92ZUV4dGVuc2lvbiA9IChwYXRoOiBzdHJpbmcsIGV4dGVuc2lvbjogc3RyaW5nID0gXCIubWRcIikgPT4ge1xuICBpZiAocGF0aC5lbmRzV2l0aChleHRlbnNpb24pKSB7XG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgLWV4dGVuc2lvbi5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBwYXRoO1xufTtcblxuLyoqQHJldHVybnMgVHJ1ZSBpZiBDVFJMIC8gTWV0YSBpcyBwcmVzc2VkICovXG5leHBvcnQgY29uc3QgSXNDdHJsUHJlc3NlZCA9IChlOiBNb3VzZUV2ZW50KTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk1hY2ludG9zaFwiKVxuICAgID8gZS5tZXRhS2V5XG4gICAgOiBlLmN0cmxLZXk7XG59O1xuXG4vKiogIFJldHVybnMgb25seSB0aGUgbmFtZSBvZiB0aGUgYWN0dWFsIGZpbGUgICovXG5leHBvcnQgY29uc3QgRmlsZU5hbWVGcm9tUGF0aCA9IChwYXRoOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gcGF0aC5zcGxpdChcIi9cIikubGFzdCgpO1xufTtcblxuLyoqICByZXR1cm4gdGhlIGZ1bGwgcGF0aCBpZiB0aGVyZSBhcmUgdHdvIG9yIG1vcmUgbm90ZXMgd2l0aCB0aGUgc2FtZSBmaWxlbmFtZSBhbmQgZXh0ZW5zaW9uLCBlbHNlIG9ubHkgdGhlIGZpbGVuYW1lICAqL1xuZXhwb3J0IGNvbnN0IEdldERpc3BsYXlOYW1lID0gKHBhdGg6IHN0cmluZywgZGI6IERCTWFuYWdlcik6IHN0cmluZyA9PiB7XG4gIGxldCBmaWxlX25hbWUgPSBGaWxlTmFtZUZyb21QYXRoKHBhdGgpO1xuICBsZXQgZGlzcGxheV9uYW1lID0gbnVsbDtcblxuICBpZiAoZGIuZHVwbGljYXRlX2ZpbGVfc3RhdHVzLmdldChmaWxlX25hbWUpKSB7XG4gICAgZGlzcGxheV9uYW1lID0gUmVtb3ZlRXh0ZW5zaW9uKHBhdGgpO1xuICB9IGVsc2Uge1xuICAgIGRpc3BsYXlfbmFtZSA9IFJlbW92ZUV4dGVuc2lvbihmaWxlX25hbWUpO1xuICB9XG4gIHJldHVybiBkaXNwbGF5X25hbWU7XG59O1xuXG5leHBvcnQgY29uc3QgTmF2aWdhdGVUb0ZpbGUgPSBhc3luYyAoXG4gIGFwcDogQXBwLFxuICBwYXRoOiBzdHJpbmcsXG4gIGV2ZW50OiBNb3VzZUV2ZW50XG4pID0+IHtcbiAgbGV0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXRoLCBcIi9cIik7XG5cbiAgaWYgKCFmaWxlKSByZXR1cm47XG4gIGNvbnN0IGxlYWYgPSBJc0N0cmxQcmVzc2VkKGV2ZW50KVxuICAgID8gYXBwLndvcmtzcGFjZS5zcGxpdEFjdGl2ZUxlYWYoKVxuICAgIDogYXBwLndvcmtzcGFjZS5nZXRVbnBpbm5lZExlYWYoKTtcbiAgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGF0aCwgXCIvXCIpO1xufTtcblxuLyoqIEdldCB0aGUgcGF0aHMgb2YgYWxsIGZvbGRlcnMgaW4gdGhlIHZhdWx0LCBlbXB0eSBvciBub3QgKi9cbmV4cG9ydCBjb25zdCBHZXRBbGxGb2xkZXJzID0gKGFwcDogQXBwKTogc3RyaW5nW10gPT4ge1xuICBsZXQgdmF1bHRfZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgbGV0IGFsbF9mb2xkZXJfcGF0aHMgPSBbXTtcbiAgdmF1bHRfZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIC8vIGN1dCBvZiBmaWxlbmFtZVxuICAgIGxldCBmb2xkZXJfcGF0aCA9IGZpbGUucGF0aC5zbGljZShcbiAgICAgIDAsXG4gICAgICBmaWxlLnBhdGgubGVuZ3RoIC0gKGZpbGUuYmFzZW5hbWUubGVuZ3RoICsgZmlsZS5leHRlbnNpb24ubGVuZ3RoICsgMSlcbiAgICApO1xuICAgIC8vIGFkZCBwYXRoIHRvIGNvbGxlY3RlZCBwYXRoc1xuICAgIGlmIChmb2xkZXJfcGF0aC5sZW5ndGggJiYgIWFsbF9mb2xkZXJfcGF0aHMuY29udGFpbnMoZm9sZGVyX3BhdGgpKSB7XG4gICAgICBhbGxfZm9sZGVyX3BhdGhzLnB1c2goZm9sZGVyX3BhdGgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gc3RvcmUgYWxsIHBhcmVudCBmb2xkZXIgcGF0aHMgYXMgdW5pcXVlIHBhdGhzIGlmIHRoZXkgYXJlbid0IHlldCBiZWNhdXNlIHRoZXkgZG9uJ3QgaW5jbHVkZSBhbnkgbm90ZXMgZGlyZWN0bHlcbiAgYWxsX2ZvbGRlcl9wYXRocy5mb3JFYWNoKChwYXRoKSA9PiB7XG4gICAgbGV0IGFsbF9zdWJfcGF0aHMgPSBwYXRoLnNwbGl0KFwiL1wiKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFsbF9zdWJfcGF0aHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBsZXQgcGFydGlhbF9wYXRoID0gYWxsX3N1Yl9wYXRocy5zbGljZSgwLCBpKS5qb2luKFwiL1wiKSArIFwiL1wiO1xuICAgICAgaWYgKCFhbGxfZm9sZGVyX3BhdGhzLmNvbnRhaW5zKHBhcnRpYWxfcGF0aCkpIHtcbiAgICAgICAgYWxsX2ZvbGRlcl9wYXRocy5wdXNoKHBhcnRpYWxfcGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYWxsX2ZvbGRlcl9wYXRocztcbn07XG4iLCJpbXBvcnQge1xuICBMSU5LRURfQk9USCxcbiAgTElOS0VEX0NOIGFzIExJTktFRF9DTixcbiAgTElOS0VEX1RPLFxuICBMSU5LRURfRlJPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgdHlwZSB7IEFwcCwgVmF1bHQsIExpbmtDYWNoZSwgRW1iZWRDYWNoZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBGaWxlSXRlbSwgREIsIFBhdGggfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgRmlsZU5hbWVGcm9tUGF0aCB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB0eXBlIHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcblxuZXhwb3J0IGNsYXNzIERCTWFuYWdlciB7XG4gIGRiOiBEQjtcbiAgc2V0dGluZ3M6IFNldHRpbmdzTWFuYWdlcjtcbiAgZGJfZW50cmllczogYW55W107XG4gIGRiX2tleXM6IHN0cmluZ1tdO1xuICBhcHA6IEFwcDtcbiAgcGx1Z2luOiBNT0NQbHVnaW47XG4gIHZhdWx0OiBWYXVsdDtcbiAgYWxsX3BhdGhzOiBQYXRoW107XG4gIGRlc2NlbmRhbnRzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XG4gIGR1cGxpY2F0ZV9maWxlX3N0YXR1czogTWFwPHN0cmluZywgYm9vbGVhbj47XG4gIGRhdGFiYXNlX2NvbXBsZXRlOiBib29sZWFuO1xuICBkYXRhYmFzZV91cGRhdGluZzogYm9vbGVhbiA9IHRydWU7XG5cbiAgZ2V0X3BhdGhzX3JhbjogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogTU9DUGx1Z2luKSB7XG4gICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG4gICAgdGhpcy5hbGxfcGF0aHMgPSBbXTtcbiAgICB0aGlzLmRiID0ge307XG4gICAgdGhpcy5kYl9lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5kYik7XG4gIH1cblxuICBpbml0KCkge31cblxuICBhc3luYyB1cGRhdGUoc2lsZW50OiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLmRhdGFiYXNlX2NvbXBsZXRlID0gZmFsc2U7XG4gICAgdGhpcy5kYXRhYmFzZV91cGRhdGluZyA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMucGx1Z2luLkNOZXhpc3RzKCkpIHtcbiAgICAgICAgbGV0IHN0YXJ0X3Rtc3AgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJVcGRhdGluZyB0aGUgTWFwIG9mIENvbnRlbnQuLi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgTG9nKFwiVXBkYXRpbmcgdGhlIE1hcCBvZiBDb250ZW50Li4uXCIpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAwKSk7XG4gICAgICAgIHRoaXMudXBkYXRlREIoKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMCkpO1xuXG4gICAgICAgIHRoaXMuZ2V0X3BhdGhzX3JhbiA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlRGVwdGhJbmZvcm1hdGlvbigpO1xuXG4gICAgICAgIHRoaXMuYWxsX3BhdGhzLmxlbmd0aCA9IDA7XG4gICAgICAgIGxldCBwYXRoX3NvX2ZhcjogUGF0aCA9IHtcbiAgICAgICAgICBhbGxfbWVtYmVyczogW3RoaXMuc2V0dGluZ3MuZ2V0KFwiQ05fcGF0aFwiKV0sXG4gICAgICAgICAgaXRlbXM6IFtbdGhpcy5zZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpLCBMSU5LRURfQ05dXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMCkpO1xuXG4gICAgICAgIHRoaXMuZm9sbG93UGF0aHMocGF0aF9zb19mYXIpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAwKSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVEZXNjZW5kYW50cygpO1xuXG4gICAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlVwZGF0ZSBjb21wbGV0ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW5kX3Rtc3AgPSBEYXRlLm5vdygpO1xuICAgICAgICBMb2coXCJVcGRhdGUgY29tcGxldGUsIFRvb2sgXCIgKyBTdHJpbmcoKGVuZF90bXNwIC0gc3RhcnRfdG1zcCkgLyAxMDAwKSk7XG5cbiAgICAgICAgdGhpcy5kYXRhYmFzZV9jb21wbGV0ZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZGF0YWJhc2VfdXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMucGx1Z2luLnJlcmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Tm90ZUZyb21QYXRoKHBhdGg6IHN0cmluZyk6IEZpbGVJdGVtIHtcbiAgICBpZiAocGF0aCBpbiB0aGlzLmRiKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYltwYXRoXTtcbiAgICB9XG4gIH1cblxuICAvKiogcmV0dXJuIGFsbCBwYXRocyB0aGF0IGluY2x1ZGUgYSBjZXJ0YWluIG5vdGUuIE9ubHkgcmV0dXJuIHRoZSBwYXRoIHVwIHRvIHRoYXQgbm90ZSovXG4gIGZpbmRQYXRocyhwYXRoOiBzdHJpbmcpOiBQYXRoW10ge1xuICAgIGxldCBmaWx0ZXJlZF9wYXRoczogUGF0aFtdID0gW107XG4gICAgbGV0IGZpbHRlcmVkX3BhdGhzX2pzb24gPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZF9wYXRocyk7XG4gICAgdGhpcy5hbGxfcGF0aHMuZm9yRWFjaCgocDogUGF0aCkgPT4ge1xuICAgICAgaWYgKHAuYWxsX21lbWJlcnMuaW5jbHVkZXMocGF0aCkpIHtcbiAgICAgICAgaWYgKHAuYWxsX21lbWJlcnMubGFzdCgpID09IHBhdGgpIHtcbiAgICAgICAgICBmaWx0ZXJlZF9wYXRocy5wdXNoKHApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBpbmRleCA9IHAuYWxsX21lbWJlcnMuaW5kZXhPZihwYXRoKSArIDE7XG4gICAgICAgICAgbGV0IGNob3BwZWRfb2ZfcGF0aCA9IHAuaXRlbXMuc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICAgIGlmICghZmlsdGVyZWRfcGF0aHNfanNvbi5pbmNsdWRlcyhKU09OLnN0cmluZ2lmeShjaG9wcGVkX29mX3BhdGgpKSkge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGEgcGF0aCBlbGVtZW50IGNvbnRhaW5pbmcgb25seSB0aGUgcGFydHMgb2YgdGhlIHBhdGggaW5mb3JtYXRpb24gdXAgdG8gdGhlIG5vdGUgaW4gcXVlc3Rpb25cbiAgICAgICAgICAgIGZpbHRlcmVkX3BhdGhzLnB1c2goe1xuICAgICAgICAgICAgICBhbGxfbWVtYmVyczogcC5hbGxfbWVtYmVycy5zbGljZSgwLCBpbmRleCksXG4gICAgICAgICAgICAgIGl0ZW1zOiBwLml0ZW1zLnNsaWNlKDAsIGluZGV4KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZmlsdGVyZWRfcGF0aHNfanNvbiA9IEpTT04uc3RyaW5naWZ5KGZpbHRlcmVkX3BhdGhzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBmaWx0ZXJlZF9wYXRocztcbiAgfVxuXG4gIGFsbF9ub3RlcygpOiBGaWxlSXRlbVtdIHtcbiAgICByZXR1cm4gdGhpcy5kYl9lbnRyaWVzLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gIH1cblxuICB1cGRhdGVEQigpIHtcbiAgICAvLyBzdGVwIDE6IHVwZGF0ZSB0aGUgcGx1Z2lucyBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhbGwgbm90ZXMgaW4gdGhlIHZhdWx0XG4gICAgTG9nKFwiVXBkYXRpbmcgdGhlIGxpYnJhcnkuLi5cIik7XG4gICAgLy8gZGVsZXRlIG9sZCBzdGF0ZVxuICAgIGZvciAobGV0IG5vdGUgaW4gdGhpcy5kYikge1xuICAgICAgZGVsZXRlIHRoaXMuZGJbbm90ZV07XG4gICAgfVxuICAgIC8vIHJlYWQgYWxsIGZpbGVzXG4gICAgbGV0IHZhdWx0X2ZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBMb2coXCJUb3RhbCBudW1iZXIgb2YgZmlsZXMgaW4gdmF1bHQ6IFwiICsgU3RyaW5nKHZhdWx0X2ZpbGVzLmxlbmd0aCkpO1xuICAgIC8vIGNyZWF0ZSBuZXcgZGIgZW50cmllc1xuICAgIGxldCBlbnRyaWVzX2NyZWF0ZWQgPSAwO1xuICAgIHZhdWx0X2ZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5pc0V4bHVkZWRGaWxlKGZpbGUpKSB7XG4gICAgICAgIC8vIGxvZ2dpbmdcbiAgICAgICAgZW50cmllc19jcmVhdGVkICs9IDE7XG4gICAgICAgIGlmIChlbnRyaWVzX2NyZWF0ZWQgJSAxMDAwID09IDApIHtcbiAgICAgICAgICBMb2coXCJDcmVhdGVkIG5ldyBkYiBlbnRyaWVzOiBcIiArIFN0cmluZyhlbnRyaWVzX2NyZWF0ZWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGJbZmlsZS5wYXRoXSA9IG5ldyBGaWxlSXRlbShcbiAgICAgICAgICBmaWxlLnBhdGgsXG4gICAgICAgICAgZmlsZS5leHRlbnNpb24sXG4gICAgICAgICAgW10sXG4gICAgICAgICAgW10sXG4gICAgICAgICAgbnVsbFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5kYl9lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5kYik7XG4gICAgdGhpcy5kYl9rZXlzID0gT2JqZWN0LmtleXModGhpcy5kYik7XG5cbiAgICB0aGlzLmR1cGxpY2F0ZV9maWxlX3N0YXR1cyA9IG5ldyBNYXA8c3RyaW5nLCBib29sZWFuPigpO1xuICAgIGxldCBjaGVja2VkX2ZpbGVzID0gMDtcbiAgICB0aGlzLmFsbF9ub3RlcygpLmZvckVhY2goKG5vdGUpID0+IHtcbiAgICAgIGxldCBmaWxlX25hbWUgPSBGaWxlTmFtZUZyb21QYXRoKG5vdGUucGF0aCk7XG5cbiAgICAgIC8vIGxvZ2dpbmdcbiAgICAgIGNoZWNrZWRfZmlsZXMgKz0gMTtcbiAgICAgIGlmIChjaGVja2VkX2ZpbGVzICUgMTAwMCA9PSAwKSB7XG4gICAgICAgIExvZyhcImNoZWNrZWQgZm9yIGR1cGxpY2F0ZXM6IFwiICsgU3RyaW5nKGNoZWNrZWRfZmlsZXMpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmR1cGxpY2F0ZV9maWxlX3N0YXR1cy5oYXMoZmlsZV9uYW1lKSkge1xuICAgICAgICAvLyBJZiB0aGUgZmlsZSBuYW1lIGlzIGVuY291bnRlcmVkIHR3aWNlIG9yIG1vcmUsIHNldCBpdCdzIGR1cGxpY2F0ZSBzdGF0dXMgdG8gdHJ1ZVxuICAgICAgICB0aGlzLmR1cGxpY2F0ZV9maWxlX3N0YXR1cy5zZXQoZmlsZV9uYW1lLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZHVwbGljYXRlX2ZpbGVfc3RhdHVzLnNldChmaWxlX25hbWUsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHVwZGF0ZSB0aGUgZGJfZW50cmllcyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZGJcbiAgICB0aGlzLmRiX2VudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmRiKTtcblxuICAgIC8vIHN0ZXAgMjogYW5hbHl6ZSBsaW5rc1xuICAgIExvZyhcImFuYWx5emluZyBsaW5rc1wiKTtcbiAgICB0aGlzLmFsbF9ub3RlcygpLmZvckVhY2goKG5vdGU6IEZpbGVJdGVtKSA9PiB7XG4gICAgICBpZiAobm90ZS5leHRlbnNpb24gIT0gXCJtZFwiKSB7XG4gICAgICAgIC8vIHNraXAgaWYgaXQncyBub3QgYW4gbWQgZmlsZS4gT3RoZXIgZmlsZSB0eXBlcyBjYW4ndCBsaW5rIHRvIGFueXRoaW5nXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gIHNhdmUgYWxsIHRoZSBsaW5rcyB0aGlzIG5vdGUgbGlua3MgdG9cbiAgICAgIGxldCB0aGlzX2xpbmtzX3RvOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgbGV0IGxpbmtjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUobm90ZS5wYXRoKS5saW5rcztcbiAgICAgIGxldCBhbGxfbGlua3MgPSBbXTtcbiAgICAgIGlmIChsaW5rY2FjaGUpIHtcbiAgICAgICAgbGlua2NhY2hlLmZvckVhY2goKHZhbDogTGlua0NhY2hlKSA9PiB7XG4gICAgICAgICAgYWxsX2xpbmtzLnB1c2godmFsLmxpbmspXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBsZXQgdHJhbnNjbHVzaW9ucyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUobm90ZS5wYXRoKS5lbWJlZHM7XG4gICAgICBpZiAodHJhbnNjbHVzaW9ucykge1xuICAgICAgICB0cmFuc2NsdXNpb25zLmZvckVhY2goKHZhbDogRW1iZWRDYWNoZSkgPT4ge1xuICAgICAgICAgIGFsbF9saW5rcy5wdXNoKHZhbC5saW5rKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFsbF9saW5rcy5mb3JFYWNoKChsaW5rOnN0cmluZykgPT4ge1xuICAgICAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2VzIHRvIGJsb2NrcyBvciBzZWN0aW9uc1xuICAgICAgICAgIGxpbms9bGluay5zcGxpdChcIiNcIilbMF1cbiAgICAgICAgICBsaW5rPWxpbmsuc3BsaXQoXCJeXCIpWzBdXG4gICAgICAgICAgYWxsX2xpbmtzLnB1c2gobGluaylcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgbGluayBpcyB2YWxpZFxuICAgICAgICAgIGxldCBsaW5rX2Rlc3QgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KFxuICAgICAgICAgICAgbGluayxcbiAgICAgICAgICAgIFwiL1wiXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vVE9ETyBpcyBpdCBuZWNjZXNzYXJ5IHRvIGF2b2lkIGluY2x1ZGluZyBsaW5rcyBtdWx0aXBsZSB0aW1lcz8gbWF5YmUgdGhleSBjYW4ndCBldmVuIGJlIGR1cGxpY2F0ZSBpbiB0aGUgbGlua2NhY2hlXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgbGlua19kZXN0ICYmXG4gICAgICAgICAgICAhdGhpc19saW5rc190by5pbmNsdWRlcyhsaW5rX2Rlc3QucGF0aCkgJiZcbiAgICAgICAgICAgIHRoaXMuZGJfa2V5cy5jb250YWlucyhsaW5rX2Rlc3QucGF0aClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXNfbGlua3NfdG8ucHVzaChsaW5rX2Rlc3QucGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgaWYgKCF0aGlzX2xpbmtzX3RvLmxlbmd0aCkgcmV0dXJuOyAvLyBubyBsaW5rc1xuXG4gICAgICAvLyBzYXZlIGxpbmtzX3RvIGluZm9ybWF0aW9uIHRvIGRiXG4gICAgICB0aGlzLmRiW25vdGUucGF0aF0ubGlua3NfdG8gPSB0aGlzX2xpbmtzX3RvO1xuXG4gICAgICAvLyBhZGQgYSBcImxpbmtlZF9mcm9tXCIgcmVmZXJlbmNlIHRvIHRoZSBkYiBlbnRyeSBvZiBhbGwgbm90ZXMgdGhhdCBhcmUgbGlua2VkIHRvIGZyb20gdGhpcyBub3RlXG4gICAgICB0aGlzX2xpbmtzX3RvLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuZGJbbGlua10ubGlua2VkX2Zyb20uaW5jbHVkZXMobm90ZS5wYXRoKSkge1xuICAgICAgICAgIHRoaXMuZGJbbGlua10ubGlua2VkX2Zyb20ucHVzaChub3RlLnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBzdGFydGluZyBmcm9tIHRoZSBDTiwgZm9sbG93IGFsbCBwYXRocyBhbmQgc3RvcmUgdGhlIGluZm9ybWF0aW9uIG9uIGhvdyBsb25nIHRoZSBzaG9ydGVzdCBwYXRoIHRvIGVhY2ggbm90ZSBpcyovXG4gIHVwZGF0ZURlcHRoSW5mb3JtYXRpb24oKSB7XG4gICAgTG9nKFxuICAgICAgXCJBbmFseXppbmcgZGlzdGFuY2UgZnJvbSBDZW50cmFsIE5vdGUuIENOIHBhdGg6IFwiICtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpXG4gICAgKTtcbiAgICBsZXQgZGVwdGggPSAwOyAvLyBkaXN0YW5jZSBmcm9tIHRoZSBDTi4gc3RhcnRzIGF0IHplcm9cbiAgICBsZXQgY2hlY2tlZF9saW5rczogc3RyaW5nW10gPSBbXTsgLy8gYWxsIHRoZSBub3RlcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHZpc2l0ZWQuIGRvbnQgdmlzaXQgdGhlbSBhZ2FpbiB0byBwcmV2ZW50IGVuZGxlc3MgbG9vcHNcbiAgICBsZXQgZG9fY29udGludWUgPSB0cnVlO1xuICAgIC8vIHN0YXJ0IGF0IHRoZSB0aGUgQ05cbiAgICBsZXQgbGlua3MgPSBbdGhpcy5zZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpXTtcbiAgICB3aGlsZSAoZG9fY29udGludWUpIHtcbiAgICAgIGxldCBuZXh0X2xpbmtzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgbGlua3MuZm9yRWFjaCgobGluazogc3RyaW5nKSA9PiB7XG4gICAgICAgIC8vIGV4dHJhY3QgYWxsIGFjdGl2ZSBhbmQgcGFzc2l2ZSBjb25uZWN0aW9ucyAobGlua2VkIHRvIG9yIGZyb20pIGZvciB0aGUgbmV4dCBpdGVyYXRpb24gb2YgbGluay1mb2xsb3dpbmdcbiAgICAgICAgbGV0IG5vdGUgPSB0aGlzLmdldE5vdGVGcm9tUGF0aChsaW5rKTtcbiAgICAgICAgbm90ZS5saW5rc190by5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIWNoZWNrZWRfbGlua3MuY29udGFpbnMobGluaykgJiYgIW5leHRfbGlua3MuY29udGFpbnMobGluaykpIHtcbiAgICAgICAgICAgIG5leHRfbGlua3MucHVzaChsaW5rKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBub3RlLmxpbmtlZF9mcm9tLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgIGlmICghY2hlY2tlZF9saW5rcy5jb250YWlucyhsaW5rKSAmJiAhbmV4dF9saW5rcy5jb250YWlucyhsaW5rKSkge1xuICAgICAgICAgICAgbmV4dF9saW5rcy5wdXNoKGxpbmspO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgaW5mbyBvbiBob3cgZmFyIHRoZSBub3RlIGlzIHJlbW92ZWQgZnJvbSBDTlxuICAgICAgICBpZiAobm90ZS5kaXN0YW5jZV9mcm9tX0NOID09IG51bGwgfHwgbm90ZS5kaXN0YW5jZV9mcm9tX0NOID4gZGVwdGgpIHtcbiAgICAgICAgICBub3RlLmRpc3RhbmNlX2Zyb21fQ04gPSBkZXB0aDtcbiAgICAgICAgfVxuICAgICAgICBjaGVja2VkX2xpbmtzLnB1c2gobGluayk7XG4gICAgICB9KTtcbiAgICAgIGxpbmtzID0gbmV4dF9saW5rcy5zbGljZSgpO1xuICAgICAgaWYgKGxpbmtzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGRvX2NvbnRpbnVlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBkZXB0aCArPSAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmUgZnVuY3Rpb24gdGhhdCBmb2xsb3dzIGFsbCBwb3NzaWJsZSBwYXRocyBmcm9tIHRoZSBDTiB0aGF0IGFyZW4ndCB1bnJlYXNvbmFibHkgbG9uZyBvciBjaXJjdWxhciBhbmQgc3RvcmVzIHRoZW1cbiAgICogQHBhcmFtIHBhdGhfc29fZmFyIHRoZSBwYXRoIHRvIGJlIGV4dGVuZGVkIGluIHRoaXMgaXRlcmF0aW9uXG4gICAqL1xuICBmb2xsb3dQYXRocyhwYXRoX3NvX2ZhcjogUGF0aCkge1xuICAgIC8vIGxvZ2dpbmdcbiAgICB0aGlzLmdldF9wYXRoc19yYW4gKz0gMTtcbiAgICBpZiAodGhpcy5nZXRfcGF0aHNfcmFuICUgMTAwMDAgPT0gMCkge1xuICAgICAgTG9nKFwiZ2V0IHBhdGhzIHJhbiBcIiArIFN0cmluZyh0aGlzLmdldF9wYXRoc19yYW4pKTtcbiAgICB9XG5cbiAgICBsZXQgbm90ZSA9IHRoaXMuZGJbcGF0aF9zb19mYXIuYWxsX21lbWJlcnMubGFzdCgpXTtcbiAgICBsZXQgYWxsX21lbWJlcnMgPSBwYXRoX3NvX2Zhci5hbGxfbWVtYmVycztcbiAgICBsZXQgaXRlbXMgPSBwYXRoX3NvX2Zhci5pdGVtcztcblxuICAgIGxldCBuZXdfcGF0aHNfdG9fZm9sbG93OiBQYXRoW10gPSBbXTtcbiAgICBsZXQgbm90ZV9saW5rc190byA9IG5vdGUubGlua3NfdG8uc2xpY2UoKTtcbiAgICBsZXQgbm90ZV9saW5rZWRfZnJvbSA9IG5vdGUubGlua2VkX2Zyb20uc2xpY2UoKTtcblxuICAgIG5vdGVfbGlua3NfdG8uZm9yRWFjaCgobGluazogc3RyaW5nKSA9PiB7XG4gICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBsaW5rZWQgbm90ZSBhbHNvIGxpbmtzIHRvIHRoZSBjdXJyZW50IG5vdGVcbiAgICAgIGxldCBsaW5rZWRfdG9fb3JfYm90aF93YXlzID0gTElOS0VEX1RPO1xuICAgICAgaWYgKG5vdGVfbGlua2VkX2Zyb20uY29udGFpbnMobGluaykpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGl0IGZyb20gdGhlIHBhc3NpdmUgbGlua3MgdG8gYmUgZm9sbG93ZWQgbGF0ZXJcbiAgICAgICAgbGV0IGluZGV4ID0gbm90ZV9saW5rZWRfZnJvbS5pbmRleE9mKGxpbmssIDApO1xuICAgICAgICBub3RlX2xpbmtlZF9mcm9tLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGxpbmtlZF90b19vcl9ib3RoX3dheXMgPSBMSU5LRURfQk9USDtcbiAgICAgIH1cbiAgICAgIGxldCBuZXdfcGF0aDogUGF0aCA9IHtcbiAgICAgICAgYWxsX21lbWJlcnM6IGFsbF9tZW1iZXJzLmNvbmNhdChsaW5rKSxcbiAgICAgICAgaXRlbXM6IGl0ZW1zLmNvbmNhdChbW2xpbmssIGxpbmtlZF90b19vcl9ib3RoX3dheXNdXSksXG4gICAgICB9O1xuICAgICAgbmV3X3BhdGhzX3RvX2ZvbGxvdy5wdXNoKG5ld19wYXRoKTtcbiAgICB9KTtcblxuICAgIG5vdGVfbGlua2VkX2Zyb20uZm9yRWFjaCgobGluazogc3RyaW5nKSA9PiB7XG4gICAgICBsZXQgbmV3X3BhdGg6IFBhdGggPSB7XG4gICAgICAgIGFsbF9tZW1iZXJzOiBhbGxfbWVtYmVycy5jb25jYXQobGluayksXG4gICAgICAgIGl0ZW1zOiBpdGVtcy5jb25jYXQoW1tsaW5rLCBMSU5LRURfRlJPTV1dKSxcbiAgICAgIH07XG4gICAgICBuZXdfcGF0aHNfdG9fZm9sbG93LnB1c2gobmV3X3BhdGgpO1xuICAgIH0pO1xuICAgIGxldCBjYWxsZWRfaXRzZWxmOiBib29sZWFuID0gZmFsc2U7IC8vIHdoZXRoZXIgdGhlIGZ1bmN0aW9uIGNhbGxlZCBpdHNlbGZcblxuICAgIC8vIGZ1bmN0aW9uIGNhbGxzIGl0c2VsZiB0byBleHBsb3JlIGV2ZXJ5IG5ldyBwYXRoXG5cbiAgICBuZXdfcGF0aHNfdG9fZm9sbG93LmZvckVhY2goKHBhdGg6IFBhdGgpID0+IHtcbiAgICAgIC8vIHRoZSBwYXRoIHdpdGhvdXQgdGhlIG5leHQgbm90ZSB0aGF0IGlzIHRvIGJlIGV4cGxvcmVkXG4gICAgICBsZXQgYWxsX2l0ZW1zX3NvX2ZhciA9IHBhdGguYWxsX21lbWJlcnMuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IGxhc3RfaXRlbV9wYXRoID0gcGF0aC5hbGxfbWVtYmVycy5sYXN0KCk7XG4gICAgICBsZXQgbGFzdF9pdGVtID0gdGhpcy5nZXROb3RlRnJvbVBhdGgobGFzdF9pdGVtX3BhdGgpO1xuXG4gICAgICAvLyBzdG9wIGlmIHRoaXMgbm90ZSBpcyBhbHJlYWR5IHBhcnQgb2YgdGhlIGV4cGxvcmVkIHBhdGhcbiAgICAgIGlmIChhbGxfaXRlbXNfc29fZmFyLmluY2x1ZGVzKGxhc3RfaXRlbV9wYXRoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIHN0b3AgaWYgdGhlIHBhdGggbWVhbmRlcnMgdG9vIG11Y2hcbiAgICAgIGlmIChwYXRoLmFsbF9tZW1iZXJzLmxlbmd0aCAtIGxhc3RfaXRlbS5kaXN0YW5jZV9mcm9tX0NOID4gMSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9sbG93UGF0aHMocGF0aCk7XG4gICAgICBjYWxsZWRfaXRzZWxmID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmICghY2FsbGVkX2l0c2VsZikge1xuICAgICAgLy8gb25seSBhZGQgdGhlIHBhdGggaWYgaXQgZG9lcyd0IGxlYWQgYW55d2hlcmUgZWxzZS4gTm8gbmVlZCB0byBoYXZlIHBhdGhzIHRoYXQgYXJlIHBhcnRzIG9mIG90aGVyIHBhdGhzXG4gICAgICB0aGlzLmFsbF9wYXRocy5wdXNoKHBhdGhfc29fZmFyKTtcbiAgICB9XG4gIH1cblxuICAvKiogZm9yIGV2ZXJ5IG5vdGUsIHN0b3JlIGFsbCBub3RlcyB0aGF0IGNvbWUgcmlnaHQgYWZ0ZXIgaXQgaW4gYW55IHBhdGguIHRoaXMgaXMgZm9yIGdlbmVyYXRpbmcgdGhlIE1hcCBPZiBDb250ZW50IGxhdGVyIG9uICovXG4gIHVwZGF0ZURlc2NlbmRhbnRzKCkge1xuICAgIC8vIGRlbGV0ZSBvbGQgSW5mb3JtYXRpb25cbiAgICB0aGlzLmRlc2NlbmRhbnRzID0gbmV3IE1hcCgpO1xuXG4gICAgbGV0IGRlc2NlbmRhbnRzX3JhbiA9IDA7XG4gICAgdGhpcy5hbGxfcGF0aHMuZm9yRWFjaCgocDogUGF0aCkgPT4ge1xuICAgICAgcC5hbGxfbWVtYmVycy5mb3JFYWNoKChub3RlX3BhdGg6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAvLyBtYWtlIHN1cmUgaXQncyBub3QgdGhlIGxhc3QgbWVtYmVyIG9mIHRoZSBwYXRoXG4gICAgICAgIGlmICghKGluZGV4ID09IHAuYWxsX21lbWJlcnMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAvLyBjcmVhdGUgZW50cnkgaW4gZGVzY2VuZGFudHMgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICAgIGlmICghdGhpcy5kZXNjZW5kYW50cy5oYXMobm90ZV9wYXRoKSkge1xuICAgICAgICAgICAgdGhpcy5kZXNjZW5kYW50cy5zZXQobm90ZV9wYXRoLCBbXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGxvZ2dpbmdcbiAgICAgICAgICBkZXNjZW5kYW50c19yYW4gKz0gMTtcbiAgICAgICAgICBpZiAoZGVzY2VuZGFudHNfcmFuICUgMTAwMCA9PSAwKSB7XG4gICAgICAgICAgICBMb2coXCJkZXNjZW5kYW50cyByYW4gXCIgKyBTdHJpbmcoZGVzY2VuZGFudHNfcmFuKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBuZXh0X3BhdGhfbWVtYmVyID0gcC5hbGxfbWVtYmVyc1tpbmRleCArIDFdO1xuICAgICAgICAgIC8vIGFkZCBub3RlIGFzIGRlc2NlbmRhbnQgaWYgaXQgaXNuJ3QgYWxyZWFkeSBzdG9yZWQgaW4gYXJyYXlcbiAgICAgICAgICBpZiAoIXRoaXMuZGVzY2VuZGFudHMuZ2V0KG5vdGVfcGF0aCkuaW5jbHVkZXMobmV4dF9wYXRoX21lbWJlcikpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzY2VuZGFudHMuc2V0KFxuICAgICAgICAgICAgICBub3RlX3BhdGgsXG4gICAgICAgICAgICAgIHRoaXMuZGVzY2VuZGFudHMuZ2V0KG5vdGVfcGF0aCkuY29uY2F0KG5leHRfcGF0aF9tZW1iZXIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0TGlua3NGcm9tTm90ZShwYXRoOiBzdHJpbmcsIGNvbnRhaW5lZF9pbl9kYjogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nW10ge1xuICAgIGxldCBsaW5rY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldENhY2hlKHBhdGgpLmxpbmtzO1xuICAgIGxldCBhbGxfbGlua3M6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKGxpbmtjYWNoZSkge1xuICAgICAgbGlua2NhY2hlLmZvckVhY2goKHZhbDogTGlua0NhY2hlKSA9PiB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBsaW5rIGlzIHZhbGlkXG4gICAgICAgIGxldCBsaW5rX2Rlc3QgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KFxuICAgICAgICAgIHZhbC5saW5rLFxuICAgICAgICAgIFwiL1wiXG4gICAgICAgICk7XG4gICAgICAgIC8vVE9ETyBpcyBpdCBuZWNjZXNzYXJ5IHRvIGF2b2lkIGluY2x1ZGluZyBsaW5rcyBtdWx0aXBsZSB0aW1lcz8gbWF5YmUgdGhleSBjYW4ndCBldmVuIGJlIGR1cGxpY2F0ZSBpbiB0aGUgbGlua2NhY2hlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBsaW5rX2Rlc3QgJiZcbiAgICAgICAgICAhYWxsX2xpbmtzLmluY2x1ZGVzKGxpbmtfZGVzdC5wYXRoKSAmJlxuICAgICAgICAgICghY29udGFpbmVkX2luX2RiIHx8IHRoaXMuZGJfa2V5cy5jb250YWlucyhsaW5rX2Rlc3QucGF0aCkpXG4gICAgICAgICkge1xuICAgICAgICAgIGFsbF9saW5rcy5wdXNoKGxpbmtfZGVzdC5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhbGxfbGlua3M7XG4gIH1cbn1cbiIsImZ1bmN0aW9uIG5vb3AoKSB7IH1cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4O1xuZnVuY3Rpb24gYXNzaWduKHRhciwgc3JjKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgayBpbiBzcmMpXG4gICAgICAgIHRhcltrXSA9IHNyY1trXTtcbiAgICByZXR1cm4gdGFyO1xufVxuZnVuY3Rpb24gaXNfcHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYWRkX2xvY2F0aW9uKGVsZW1lbnQsIGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhcikge1xuICAgIGVsZW1lbnQuX19zdmVsdGVfbWV0YSA9IHtcbiAgICAgICAgbG9jOiB7IGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhciB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICAgIHJldHVybiBmbigpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgICBmbnMuZm9yRWFjaChydW4pO1xufVxuZnVuY3Rpb24gaXNfZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gc2FmZV9ub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiIHx8ICgoYSAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHx8IHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKTtcbn1cbmxldCBzcmNfdXJsX2VxdWFsX2FuY2hvcjtcbmZ1bmN0aW9uIHNyY191cmxfZXF1YWwoZWxlbWVudF9zcmMsIHVybCkge1xuICAgIGlmICghc3JjX3VybF9lcXVhbF9hbmNob3IpIHtcbiAgICAgICAgc3JjX3VybF9lcXVhbF9hbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgfVxuICAgIHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWYgPSB1cmw7XG4gICAgcmV0dXJuIGVsZW1lbnRfc3JjID09PSBzcmNfdXJsX2VxdWFsX2FuY2hvci5ocmVmO1xufVxuZnVuY3Rpb24gbm90X2VxdWFsKGEsIGIpIHtcbiAgICByZXR1cm4gYSAhPSBhID8gYiA9PSBiIDogYSAhPT0gYjtcbn1cbmZ1bmN0aW9uIGlzX2VtcHR5KG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMDtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3N0b3JlKHN0b3JlLCBuYW1lKSB7XG4gICAgaWYgKHN0b3JlICE9IG51bGwgJiYgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCAuLi5jYWxsYmFja3MpIHtcbiAgICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgY29uc3QgdW5zdWIgPSBzdG9yZS5zdWJzY3JpYmUoLi4uY2FsbGJhY2tzKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKCQkc2NvcGUuZGlydHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGxldHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBsZXRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKSB7XG4gICAgaWYgKHNsb3RfY2hhbmdlcykge1xuICAgICAgICBjb25zdCBzbG90X2NvbnRleHQgPSBnZXRfc2xvdF9jb250ZXh0KHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbiAgICAgICAgc2xvdC5wKHNsb3RfY29udGV4dCwgc2xvdF9jaGFuZ2VzKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdChzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4sIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBjb25zdCBzbG90X2NoYW5nZXMgPSBnZXRfc2xvdF9jaGFuZ2VzKHNsb3RfZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGdldF9zbG90X2NoYW5nZXNfZm4pO1xuICAgIHVwZGF0ZV9zbG90X2Jhc2Uoc2xvdCwgc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIHNsb3RfY2hhbmdlcywgZ2V0X3Nsb3RfY29udGV4dF9mbik7XG59XG5mdW5jdGlvbiBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUoJCRzY29wZSkge1xuICAgIGlmICgkJHNjb3BlLmN0eC5sZW5ndGggPiAzMikge1xuICAgICAgICBjb25zdCBkaXJ0eSA9IFtdO1xuICAgICAgICBjb25zdCBsZW5ndGggPSAkJHNjb3BlLmN0eC5sZW5ndGggLyAzMjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZGlydHlbaV0gPSAtMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlydHk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbmZ1bmN0aW9uIGV4Y2x1ZGVfaW50ZXJuYWxfcHJvcHMocHJvcHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcHMpXG4gICAgICAgIGlmIChrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN1bHRba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29tcHV0ZV9yZXN0X3Byb3BzKHByb3BzLCBrZXlzKSB7XG4gICAgY29uc3QgcmVzdCA9IHt9O1xuICAgIGtleXMgPSBuZXcgU2V0KGtleXMpO1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKCFrZXlzLmhhcyhrKSAmJiBrWzBdICE9PSAnJCcpXG4gICAgICAgICAgICByZXN0W2tdID0gcHJvcHNba107XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Nsb3RzKHNsb3RzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gb25jZShmbikge1xuICAgIGxldCByYW4gPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHJhbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmFuID0gdHJ1ZTtcbiAgICAgICAgZm4uY2FsbCh0aGlzLCAuLi5hcmdzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbnVsbF90b19lbXB0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHNldF9zdG9yZV92YWx1ZShzdG9yZSwgcmV0LCB2YWx1ZSkge1xuICAgIHN0b3JlLnNldCh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldDtcbn1cbmNvbnN0IGhhc19wcm9wID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5mdW5jdGlvbiBhY3Rpb25fZGVzdHJveWVyKGFjdGlvbl9yZXN1bHQpIHtcbiAgICByZXR1cm4gYWN0aW9uX3Jlc3VsdCAmJiBpc19mdW5jdGlvbihhY3Rpb25fcmVzdWx0LmRlc3Ryb3kpID8gYWN0aW9uX3Jlc3VsdC5kZXN0cm95IDogbm9vcDtcbn1cblxuY29uc3QgaXNfY2xpZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5sZXQgbm93ID0gaXNfY2xpZW50XG4gICAgPyAoKSA9PiB3aW5kb3cucGVyZm9ybWFuY2Uubm93KClcbiAgICA6ICgpID0+IERhdGUubm93KCk7XG5sZXQgcmFmID0gaXNfY2xpZW50ID8gY2IgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNiKSA6IG5vb3A7XG4vLyB1c2VkIGludGVybmFsbHkgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIHNldF9ub3coZm4pIHtcbiAgICBub3cgPSBmbjtcbn1cbmZ1bmN0aW9uIHNldF9yYWYoZm4pIHtcbiAgICByYWYgPSBmbjtcbn1cblxuY29uc3QgdGFza3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBydW5fdGFza3Mobm93KSB7XG4gICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgaWYgKCF0YXNrLmMobm93KSkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICAgICAgdGFzay5mKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGFza3Muc2l6ZSAhPT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG59XG4vKipcbiAqIEZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkhXG4gKi9cbmZ1bmN0aW9uIGNsZWFyX2xvb3BzKCkge1xuICAgIHRhc2tzLmNsZWFyKCk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFzayB0aGF0IHJ1bnMgb24gZWFjaCByYWYgZnJhbWVcbiAqIHVudGlsIGl0IHJldHVybnMgYSBmYWxzeSB2YWx1ZSBvciBpcyBhYm9ydGVkXG4gKi9cbmZ1bmN0aW9uIGxvb3AoY2FsbGJhY2spIHtcbiAgICBsZXQgdGFzaztcbiAgICBpZiAodGFza3Muc2l6ZSA9PT0gMClcbiAgICAgICAgcmFmKHJ1bl90YXNrcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvbWlzZTogbmV3IFByb21pc2UoZnVsZmlsbCA9PiB7XG4gICAgICAgICAgICB0YXNrcy5hZGQodGFzayA9IHsgYzogY2FsbGJhY2ssIGY6IGZ1bGZpbGwgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBhYm9ydCgpIHtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZSh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8vIFRyYWNrIHdoaWNoIG5vZGVzIGFyZSBjbGFpbWVkIGR1cmluZyBoeWRyYXRpb24uIFVuY2xhaW1lZCBub2RlcyBjYW4gdGhlbiBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxuLy8gYXQgdGhlIGVuZCBvZiBoeWRyYXRpb24gd2l0aG91dCB0b3VjaGluZyB0aGUgcmVtYWluaW5nIG5vZGVzLlxubGV0IGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc3RhcnRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IHRydWU7XG59XG5mdW5jdGlvbiBlbmRfaHlkcmF0aW5nKCkge1xuICAgIGlzX2h5ZHJhdGluZyA9IGZhbHNlO1xufVxuZnVuY3Rpb24gdXBwZXJfYm91bmQobG93LCBoaWdoLCBrZXksIHZhbHVlKSB7XG4gICAgLy8gUmV0dXJuIGZpcnN0IGluZGV4IG9mIHZhbHVlIGxhcmdlciB0aGFuIGlucHV0IHZhbHVlIGluIHRoZSByYW5nZSBbbG93LCBoaWdoKVxuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgICAgIGlmIChrZXkobWlkKSA8PSB2YWx1ZSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbn1cbmZ1bmN0aW9uIGluaXRfaHlkcmF0ZSh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0Lmh5ZHJhdGVfaW5pdClcbiAgICAgICAgcmV0dXJuO1xuICAgIHRhcmdldC5oeWRyYXRlX2luaXQgPSB0cnVlO1xuICAgIC8vIFdlIGtub3cgdGhhdCBhbGwgY2hpbGRyZW4gaGF2ZSBjbGFpbV9vcmRlciB2YWx1ZXMgc2luY2UgdGhlIHVuY2xhaW1lZCBoYXZlIGJlZW4gZGV0YWNoZWQgaWYgdGFyZ2V0IGlzIG5vdCA8aGVhZD5cbiAgICBsZXQgY2hpbGRyZW4gPSB0YXJnZXQuY2hpbGROb2RlcztcbiAgICAvLyBJZiB0YXJnZXQgaXMgPGhlYWQ+LCB0aGVyZSBtYXkgYmUgY2hpbGRyZW4gd2l0aG91dCBjbGFpbV9vcmRlclxuICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdIRUFEJykge1xuICAgICAgICBjb25zdCBteUNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChub2RlLmNsYWltX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBteUNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4gPSBteUNoaWxkcmVuO1xuICAgIH1cbiAgICAvKlxuICAgICogUmVvcmRlciBjbGFpbWVkIGNoaWxkcmVuIG9wdGltYWxseS5cbiAgICAqIFdlIGNhbiByZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5IGJ5IGZpbmRpbmcgdGhlIGxvbmdlc3Qgc3Vic2VxdWVuY2Ugb2ZcbiAgICAqIG5vZGVzIHRoYXQgYXJlIGFscmVhZHkgY2xhaW1lZCBpbiBvcmRlciBhbmQgb25seSBtb3ZpbmcgdGhlIHJlc3QuIFRoZSBsb25nZXN0XG4gICAgKiBzdWJzZXF1ZW5jZSBzdWJzZXF1ZW5jZSBvZiBub2RlcyB0aGF0IGFyZSBjbGFpbWVkIGluIG9yZGVyIGNhbiBiZSBmb3VuZCBieVxuICAgICogY29tcHV0aW5nIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgLmNsYWltX29yZGVyIHZhbHVlcy5cbiAgICAqXG4gICAgKiBUaGlzIGFsZ29yaXRobSBpcyBvcHRpbWFsIGluIGdlbmVyYXRpbmcgdGhlIGxlYXN0IGFtb3VudCBvZiByZW9yZGVyIG9wZXJhdGlvbnNcbiAgICAqIHBvc3NpYmxlLlxuICAgICpcbiAgICAqIFByb29mOlxuICAgICogV2Uga25vdyB0aGF0LCBnaXZlbiBhIHNldCBvZiByZW9yZGVyaW5nIG9wZXJhdGlvbnMsIHRoZSBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlXG4gICAgKiBhbHdheXMgZm9ybSBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLCBzaW5jZSB0aGV5IGRvIG5vdCBtb3ZlIGFtb25nIGVhY2ggb3RoZXJcbiAgICAqIG1lYW5pbmcgdGhhdCB0aGV5IG11c3QgYmUgYWxyZWFkeSBvcmRlcmVkIGFtb25nIGVhY2ggb3RoZXIuIFRodXMsIHRoZSBtYXhpbWFsXG4gICAgKiBzZXQgb2Ygbm9kZXMgdGhhdCBkbyBub3QgbW92ZSBmb3JtIGEgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlLlxuICAgICovXG4gICAgLy8gQ29tcHV0ZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICAvLyBtOiBzdWJzZXF1ZW5jZSBsZW5ndGggaiA9PiBpbmRleCBrIG9mIHNtYWxsZXN0IHZhbHVlIHRoYXQgZW5kcyBhbiBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGxlbmd0aCBqXG4gICAgY29uc3QgbSA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCArIDEpO1xuICAgIC8vIFByZWRlY2Vzc29yIGluZGljZXMgKyAxXG4gICAgY29uc3QgcCA9IG5ldyBJbnQzMkFycmF5KGNoaWxkcmVuLmxlbmd0aCk7XG4gICAgbVswXSA9IC0xO1xuICAgIGxldCBsb25nZXN0ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGlsZHJlbltpXS5jbGFpbV9vcmRlcjtcbiAgICAgICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBzdWJzZXF1ZW5jZSBsZW5ndGggc3VjaCB0aGF0IGl0IGVuZHMgaW4gYSB2YWx1ZSBsZXNzIHRoYW4gb3VyIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgLy8gdXBwZXJfYm91bmQgcmV0dXJucyBmaXJzdCBncmVhdGVyIHZhbHVlLCBzbyB3ZSBzdWJ0cmFjdCBvbmVcbiAgICAgICAgLy8gd2l0aCBmYXN0IHBhdGggZm9yIHdoZW4gd2UgYXJlIG9uIHRoZSBjdXJyZW50IGxvbmdlc3Qgc3Vic2VxdWVuY2VcbiAgICAgICAgY29uc3Qgc2VxTGVuID0gKChsb25nZXN0ID4gMCAmJiBjaGlsZHJlblttW2xvbmdlc3RdXS5jbGFpbV9vcmRlciA8PSBjdXJyZW50KSA/IGxvbmdlc3QgKyAxIDogdXBwZXJfYm91bmQoMSwgbG9uZ2VzdCwgaWR4ID0+IGNoaWxkcmVuW21baWR4XV0uY2xhaW1fb3JkZXIsIGN1cnJlbnQpKSAtIDE7XG4gICAgICAgIHBbaV0gPSBtW3NlcUxlbl0gKyAxO1xuICAgICAgICBjb25zdCBuZXdMZW4gPSBzZXFMZW4gKyAxO1xuICAgICAgICAvLyBXZSBjYW4gZ3VhcmFudGVlIHRoYXQgY3VycmVudCBpcyB0aGUgc21hbGxlc3QgdmFsdWUuIE90aGVyd2lzZSwgd2Ugd291bGQgaGF2ZSBnZW5lcmF0ZWQgYSBsb25nZXIgc2VxdWVuY2UuXG4gICAgICAgIG1bbmV3TGVuXSA9IGk7XG4gICAgICAgIGxvbmdlc3QgPSBNYXRoLm1heChuZXdMZW4sIGxvbmdlc3QpO1xuICAgIH1cbiAgICAvLyBUaGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIG5vZGVzIChpbml0aWFsbHkgcmV2ZXJzZWQpXG4gICAgY29uc3QgbGlzID0gW107XG4gICAgLy8gVGhlIHJlc3Qgb2YgdGhlIG5vZGVzLCBub2RlcyB0aGF0IHdpbGwgYmUgbW92ZWRcbiAgICBjb25zdCB0b01vdmUgPSBbXTtcbiAgICBsZXQgbGFzdCA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgY3VyID0gbVtsb25nZXN0XSArIDE7IGN1ciAhPSAwOyBjdXIgPSBwW2N1ciAtIDFdKSB7XG4gICAgICAgIGxpcy5wdXNoKGNoaWxkcmVuW2N1ciAtIDFdKTtcbiAgICAgICAgZm9yICg7IGxhc3QgPj0gY3VyOyBsYXN0LS0pIHtcbiAgICAgICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0LS07XG4gICAgfVxuICAgIGZvciAoOyBsYXN0ID49IDA7IGxhc3QtLSkge1xuICAgICAgICB0b01vdmUucHVzaChjaGlsZHJlbltsYXN0XSk7XG4gICAgfVxuICAgIGxpcy5yZXZlcnNlKCk7XG4gICAgLy8gV2Ugc29ydCB0aGUgbm9kZXMgYmVpbmcgbW92ZWQgdG8gZ3VhcmFudGVlIHRoYXQgdGhlaXIgaW5zZXJ0aW9uIG9yZGVyIG1hdGNoZXMgdGhlIGNsYWltIG9yZGVyXG4gICAgdG9Nb3ZlLnNvcnQoKGEsIGIpID0+IGEuY2xhaW1fb3JkZXIgLSBiLmNsYWltX29yZGVyKTtcbiAgICAvLyBGaW5hbGx5LCB3ZSBtb3ZlIHRoZSBub2Rlc1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IHRvTW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICB3aGlsZSAoaiA8IGxpcy5sZW5ndGggJiYgdG9Nb3ZlW2ldLmNsYWltX29yZGVyID49IGxpc1tqXS5jbGFpbV9vcmRlcikge1xuICAgICAgICAgICAgaisrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IGogPCBsaXMubGVuZ3RoID8gbGlzW2pdIDogbnVsbDtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0b01vdmVbaV0sIGFuY2hvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwZW5kKHRhcmdldCwgbm9kZSkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXModGFyZ2V0LCBzdHlsZV9zaGVldF9pZCwgc3R5bGVzKSB7XG4gICAgY29uc3QgYXBwZW5kX3N0eWxlc190byA9IGdldF9yb290X2Zvcl9zdHlsZSh0YXJnZXQpO1xuICAgIGlmICghYXBwZW5kX3N0eWxlc190by5nZXRFbGVtZW50QnlJZChzdHlsZV9zaGVldF9pZCkpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS5pZCA9IHN0eWxlX3NoZWV0X2lkO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHN0eWxlcztcbiAgICAgICAgYXBwZW5kX3N0eWxlc2hlZXQoYXBwZW5kX3N0eWxlc190bywgc3R5bGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldF9yb290X2Zvcl9zdHlsZShub2RlKSB7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgY29uc3Qgcm9vdCA9IG5vZGUuZ2V0Um9vdE5vZGUgPyBub2RlLmdldFJvb3ROb2RlKCkgOiBub2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKHJvb3QuaG9zdCkge1xuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIGRvY3VtZW50O1xufVxuZnVuY3Rpb24gYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSkge1xuICAgIGNvbnN0IHN0eWxlX2VsZW1lbnQgPSBlbGVtZW50KCdzdHlsZScpO1xuICAgIGFwcGVuZF9zdHlsZXNoZWV0KGdldF9yb290X2Zvcl9zdHlsZShub2RlKSwgc3R5bGVfZWxlbWVudCk7XG4gICAgcmV0dXJuIHN0eWxlX2VsZW1lbnQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfc3R5bGVzaGVldChub2RlLCBzdHlsZSkge1xuICAgIGFwcGVuZChub2RlLmhlYWQgfHwgbm9kZSwgc3R5bGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpIHtcbiAgICBpZiAoaXNfaHlkcmF0aW5nKSB7XG4gICAgICAgIGluaXRfaHlkcmF0ZSh0YXJnZXQpO1xuICAgICAgICBpZiAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID09PSB1bmRlZmluZWQpIHx8ICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5wYXJlbnRFbGVtZW50ICE9PSB0YXJnZXQpKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTa2lwIG5vZGVzIG9mIHVuZGVmaW5lZCBvcmRlcmluZ1xuICAgICAgICB3aGlsZSAoKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkICE9PSBudWxsKSAmJiAodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQuY2xhaW1fb3JkZXIgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkID0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgIT09IHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkKSB7XG4gICAgICAgICAgICAvLyBXZSBvbmx5IGluc2VydCBpZiB0aGUgb3JkZXJpbmcgb2YgdGhpcyBub2RlIHNob3VsZCBiZSBtb2RpZmllZCBvciB0aGUgcGFyZW50IG5vZGUgaXMgbm90IHRhcmdldFxuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCB8fCBub2RlLnBhcmVudE5vZGUgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT09IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGlmIChpc19oeWRyYXRpbmcgJiYgIWFuY2hvcikge1xuICAgICAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0IHx8IG5vZGUubmV4dFNpYmxpbmcgIT0gYW5jaG9yKSB7XG4gICAgICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaChub2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gZGVzdHJveV9lYWNoKGl0ZXJhdGlvbnMsIGRldGFjaGluZykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoaXRlcmF0aW9uc1tpXSlcbiAgICAgICAgICAgIGl0ZXJhdGlvbnNbaV0uZChkZXRhY2hpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpO1xufVxuZnVuY3Rpb24gZWxlbWVudF9pcyhuYW1lLCBpcykge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUsIHsgaXMgfSk7XG59XG5mdW5jdGlvbiBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzKG9iaiwgZXhjbHVkZSkge1xuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc19wcm9wKG9iaiwgaylcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICYmIGV4Y2x1ZGUuaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRhcmdldFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc3ZnX2VsZW1lbnQobmFtZSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgbmFtZSk7XG59XG5mdW5jdGlvbiB0ZXh0KGRhdGEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZGF0YSk7XG59XG5mdW5jdGlvbiBzcGFjZSgpIHtcbiAgICByZXR1cm4gdGV4dCgnICcpO1xufVxuZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgcmV0dXJuIHRleHQoJycpO1xufVxuZnVuY3Rpb24gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4gbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHByZXZlbnRfZGVmYXVsdChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0b3BfcHJvcGFnYXRpb24oZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2VsZihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRydXN0ZWQoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGV2ZW50LmlzVHJ1c3RlZClcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICBlbHNlIGlmIChub2RlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpICE9PSB2YWx1ZSlcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBzZXRfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobm9kZS5fX3Byb3RvX18pO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5jc3NUZXh0ID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ19fdmFsdWUnKSB7XG4gICAgICAgICAgICBub2RlLnZhbHVlID0gbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3JzW2tleV0gJiYgZGVzY3JpcHRvcnNba2V5XS5zZXQpIHtcbiAgICAgICAgICAgIG5vZGVba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N2Z19hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGF0dHIobm9kZSwga2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9jdXN0b21fZWxlbWVudF9kYXRhKG5vZGUsIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHByb3AgaW4gbm9kZSkge1xuICAgICAgICBub2RlW3Byb3BdID0gdHlwZW9mIG5vZGVbcHJvcF0gPT09ICdib29sZWFuJyAmJiB2YWx1ZSA9PT0gJycgPyB0cnVlIDogdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhdHRyKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiB4bGlua19hdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgYXR0cmlidXRlLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRfYmluZGluZ19ncm91cF92YWx1ZShncm91cCwgX192YWx1ZSwgY2hlY2tlZCkge1xuICAgIGNvbnN0IHZhbHVlID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5hZGQoZ3JvdXBbaV0uX192YWx1ZSk7XG4gICAgfVxuICAgIGlmICghY2hlY2tlZCkge1xuICAgICAgICB2YWx1ZS5kZWxldGUoX192YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5mcm9tKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHRvX251bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gJycgPyBudWxsIDogK3ZhbHVlO1xufVxuZnVuY3Rpb24gdGltZV9yYW5nZXNfdG9fYXJyYXkocmFuZ2VzKSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJheS5wdXNoKHsgc3RhcnQ6IHJhbmdlcy5zdGFydChpKSwgZW5kOiByYW5nZXMuZW5kKGkpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKTtcbn1cbmZ1bmN0aW9uIGluaXRfY2xhaW1faW5mbyhub2Rlcykge1xuICAgIGlmIChub2Rlcy5jbGFpbV9pbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mbyA9IHsgbGFzdF9pbmRleDogMCwgdG90YWxfY2xhaW1lZDogMCB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsYWltX25vZGUobm9kZXMsIHByZWRpY2F0ZSwgcHJvY2Vzc05vZGUsIGNyZWF0ZU5vZGUsIGRvbnRVcGRhdGVMYXN0SW5kZXggPSBmYWxzZSkge1xuICAgIC8vIFRyeSB0byBmaW5kIG5vZGVzIGluIGFuIG9yZGVyIHN1Y2ggdGhhdCB3ZSBsZW5ndGhlbiB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlXG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCByZXN1bHROb2RlID0gKCgpID0+IHtcbiAgICAgICAgLy8gV2UgZmlyc3QgdHJ5IHRvIGZpbmQgYW4gZWxlbWVudCBhZnRlciB0aGUgcHJldmlvdXMgb25lXG4gICAgICAgIGZvciAobGV0IGkgPSBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXg7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKHByZWRpY2F0ZShub2RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gcHJvY2Vzc05vZGUobm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbaV0gPSByZXBsYWNlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFkb250VXBkYXRlTGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgdHJ5IHRvIGZpbmQgb25lIGJlZm9yZVxuICAgICAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugc28gdGhhdCB3ZSBkb24ndCBnbyB0b28gZmFyIGJhY2tcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSBzcGxpY2VkIGJlZm9yZSB0aGUgbGFzdF9pbmRleCwgd2UgZGVjcmVhc2UgaXRcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4LS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGNhbid0IGZpbmQgYW55IG1hdGNoaW5nIG5vZGUsIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU5vZGUoKTtcbiAgICB9KSgpO1xuICAgIHJlc3VsdE5vZGUuY2xhaW1fb3JkZXIgPSBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQ7XG4gICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgcmV0dXJuIHJlc3VsdE5vZGU7XG59XG5mdW5jdGlvbiBjbGFpbV9lbGVtZW50KG5vZGVzLCBuYW1lLCBhdHRyaWJ1dGVzLCBzdmcpIHtcbiAgICByZXR1cm4gY2xhaW1fbm9kZShub2RlcywgKG5vZGUpID0+IG5vZGUubm9kZU5hbWUgPT09IG5hbWUsIChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlID0gbm9kZS5hdHRyaWJ1dGVzW2pdO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZS5wdXNoKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW1vdmUuZm9yRWFjaCh2ID0+IG5vZGUucmVtb3ZlQXR0cmlidXRlKHYpKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9LCAoKSA9PiBzdmcgPyBzdmdfZWxlbWVudChuYW1lKSA6IGVsZW1lbnQobmFtZSkpO1xufVxuZnVuY3Rpb24gY2xhaW1fdGV4dChub2RlcywgZGF0YSkge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gMywgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9ICcnICsgZGF0YTtcbiAgICAgICAgaWYgKG5vZGUuZGF0YS5zdGFydHNXaXRoKGRhdGFTdHIpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5kYXRhLmxlbmd0aCAhPT0gZGF0YVN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5zcGxpdFRleHQoZGF0YVN0ci5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gZGF0YVN0cjtcbiAgICAgICAgfVxuICAgIH0sICgpID0+IHRleHQoZGF0YSksIHRydWUgLy8gVGV4dCBub2RlcyBzaG91bGQgbm90IHVwZGF0ZSBsYXN0IGluZGV4IHNpbmNlIGl0IGlzIGxpa2VseSBub3Qgd29ydGggaXQgdG8gZWxpbWluYXRlIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgYWN0dWFsIGVsZW1lbnRzXG4gICAgKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3NwYWNlKG5vZGVzKSB7XG4gICAgcmV0dXJuIGNsYWltX3RleHQobm9kZXMsICcgJyk7XG59XG5mdW5jdGlvbiBmaW5kX2NvbW1lbnQobm9kZXMsIHRleHQsIHN0YXJ0KSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgbm9kZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCAvKiBjb21tZW50IG5vZGUgKi8gJiYgbm9kZS50ZXh0Q29udGVudC50cmltKCkgPT09IHRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2Rlcy5sZW5ndGg7XG59XG5mdW5jdGlvbiBjbGFpbV9odG1sX3RhZyhub2Rlcykge1xuICAgIC8vIGZpbmQgaHRtbCBvcGVuaW5nIHRhZ1xuICAgIGNvbnN0IHN0YXJ0X2luZGV4ID0gZmluZF9jb21tZW50KG5vZGVzLCAnSFRNTF9UQUdfU1RBUlQnLCAwKTtcbiAgICBjb25zdCBlbmRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19FTkQnLCBzdGFydF9pbmRleCk7XG4gICAgaWYgKHN0YXJ0X2luZGV4ID09PSBlbmRfaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKCk7XG4gICAgfVxuICAgIGluaXRfY2xhaW1faW5mbyhub2Rlcyk7XG4gICAgY29uc3QgaHRtbF90YWdfbm9kZXMgPSBub2Rlcy5zcGxpY2Uoc3RhcnRfaW5kZXgsIGVuZF9pbmRleCArIDEpO1xuICAgIGRldGFjaChodG1sX3RhZ19ub2Rlc1swXSk7XG4gICAgZGV0YWNoKGh0bWxfdGFnX25vZGVzW2h0bWxfdGFnX25vZGVzLmxlbmd0aCAtIDFdKTtcbiAgICBjb25zdCBjbGFpbWVkX25vZGVzID0gaHRtbF90YWdfbm9kZXMuc2xpY2UoMSwgaHRtbF90YWdfbm9kZXMubGVuZ3RoIC0gMSk7XG4gICAgZm9yIChjb25zdCBuIG9mIGNsYWltZWRfbm9kZXMpIHtcbiAgICAgICAgbi5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICAgICAgbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkICs9IDE7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSHRtbFRhZ0h5ZHJhdGlvbihjbGFpbWVkX25vZGVzKTtcbn1cbmZ1bmN0aW9uIHNldF9kYXRhKHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCAhPT0gZGF0YSlcbiAgICAgICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF92YWx1ZShpbnB1dCwgdmFsdWUpIHtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3R5cGUoaW5wdXQsIHR5cGUpIHtcbiAgICB0cnkge1xuICAgICAgICBpbnB1dC50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdHlsZShub2RlLCBrZXksIHZhbHVlLCBpbXBvcnRhbnQpIHtcbiAgICBub2RlLnN0eWxlLnNldFByb3BlcnR5KGtleSwgdmFsdWUsIGltcG9ydGFudCA/ICdpbXBvcnRhbnQnIDogJycpO1xufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbihzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgaWYgKG9wdGlvbi5fX3ZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb25zKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB+dmFsdWUuaW5kZXhPZihvcHRpb24uX192YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X3ZhbHVlKHNlbGVjdCkge1xuICAgIGNvbnN0IHNlbGVjdGVkX29wdGlvbiA9IHNlbGVjdC5xdWVyeVNlbGVjdG9yKCc6Y2hlY2tlZCcpIHx8IHNlbGVjdC5vcHRpb25zWzBdO1xuICAgIHJldHVybiBzZWxlY3RlZF9vcHRpb24gJiYgc2VsZWN0ZWRfb3B0aW9uLl9fdmFsdWU7XG59XG5mdW5jdGlvbiBzZWxlY3RfbXVsdGlwbGVfdmFsdWUoc2VsZWN0KSB7XG4gICAgcmV0dXJuIFtdLm1hcC5jYWxsKHNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCc6Y2hlY2tlZCcpLCBvcHRpb24gPT4gb3B0aW9uLl9fdmFsdWUpO1xufVxuLy8gdW5mb3J0dW5hdGVseSB0aGlzIGNhbid0IGJlIGEgY29uc3RhbnQgYXMgdGhhdCB3b3VsZG4ndCBiZSB0cmVlLXNoYWtlYWJsZVxuLy8gc28gd2UgY2FjaGUgdGhlIHJlc3VsdCBpbnN0ZWFkXG5sZXQgY3Jvc3NvcmlnaW47XG5mdW5jdGlvbiBpc19jcm9zc29yaWdpbigpIHtcbiAgICBpZiAoY3Jvc3NvcmlnaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjcm9zc29yaWdpbiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjcm9zc29yaWdpbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNyb3Nzb3JpZ2luO1xufVxuZnVuY3Rpb24gYWRkX3Jlc2l6ZV9saXN0ZW5lcihub2RlLCBmbikge1xuICAgIGNvbnN0IGNvbXB1dGVkX3N0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoY29tcHV0ZWRfc3R5bGUucG9zaXRpb24gPT09ICdzdGF0aWMnKSB7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWUgPSBlbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBibG9jazsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7ICcgK1xuICAgICAgICAnb3ZlcmZsb3c6IGhpZGRlbjsgYm9yZGVyOiAwOyBvcGFjaXR5OiAwOyBwb2ludGVyLWV2ZW50czogbm9uZTsgei1pbmRleDogLTE7Jyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIGlmcmFtZS50YWJJbmRleCA9IC0xO1xuICAgIGNvbnN0IGNyb3Nzb3JpZ2luID0gaXNfY3Jvc3NvcmlnaW4oKTtcbiAgICBsZXQgdW5zdWJzY3JpYmU7XG4gICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSBcImRhdGE6dGV4dC9odG1sLDxzY3JpcHQ+b25yZXNpemU9ZnVuY3Rpb24oKXtwYXJlbnQucG9zdE1lc3NhZ2UoMCwnKicpfTwvc2NyaXB0PlwiO1xuICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3Rlbih3aW5kb3csICdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBpZnJhbWUuY29udGVudFdpbmRvdylcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICAgICAgICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUgPSBsaXN0ZW4oaWZyYW1lLmNvbnRlbnRXaW5kb3csICdyZXNpemUnLCBmbik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFwcGVuZChub2RlLCBpZnJhbWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChjcm9zc29yaWdpbikge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1bnN1YnNjcmliZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgICAgICBkZXRhY2goaWZyYW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9nZ2xlX2NsYXNzKGVsZW1lbnQsIG5hbWUsIHRvZ2dsZSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0W3RvZ2dsZSA/ICdhZGQnIDogJ3JlbW92ZSddKG5hbWUpO1xufVxuZnVuY3Rpb24gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCwgYnViYmxlcyA9IGZhbHNlKSB7XG4gICAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGJ1YmJsZXMsIGZhbHNlLCBkZXRhaWwpO1xuICAgIHJldHVybiBlO1xufVxuZnVuY3Rpb24gcXVlcnlfc2VsZWN0b3JfYWxsKHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudC5ib2R5KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbn1cbmNsYXNzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgIH1cbiAgICBtKGh0bWwsIHRhcmdldCwgYW5jaG9yID0gbnVsbCkge1xuICAgICAgICBpZiAoIXRoaXMuZSkge1xuICAgICAgICAgICAgdGhpcy5lID0gZWxlbWVudCh0YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaShhbmNob3IpO1xuICAgIH1cbiAgICBoKGh0bWwpIHtcbiAgICAgICAgdGhpcy5lLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIHRoaXMubiA9IEFycmF5LmZyb20odGhpcy5lLmNoaWxkTm9kZXMpO1xuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0KHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHAoaHRtbCkge1xuICAgICAgICB0aGlzLmQoKTtcbiAgICAgICAgdGhpcy5oKGh0bWwpO1xuICAgICAgICB0aGlzLmkodGhpcy5hKTtcbiAgICB9XG4gICAgZCgpIHtcbiAgICAgICAgdGhpcy5uLmZvckVhY2goZGV0YWNoKTtcbiAgICB9XG59XG5jbGFzcyBIdG1sVGFnSHlkcmF0aW9uIGV4dGVuZHMgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoY2xhaW1lZF9ub2Rlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmUgPSB0aGlzLm4gPSBudWxsO1xuICAgICAgICB0aGlzLmwgPSBjbGFpbWVkX25vZGVzO1xuICAgIH1cbiAgICBjKGh0bWwpIHtcbiAgICAgICAgaWYgKHRoaXMubCkge1xuICAgICAgICAgICAgdGhpcy5uID0gdGhpcy5sO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIuYyhodG1sKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpKGFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0X2h5ZHJhdGlvbih0aGlzLnQsIHRoaXMubltpXSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGF0dHJpYnV0ZV90b19vYmplY3QoYXR0cmlidXRlcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMoZWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgIHJlc3VsdFtub2RlLnNsb3QgfHwgJ2RlZmF1bHQnXSA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuY29uc3QgYWN0aXZlX2RvY3MgPSBuZXcgU2V0KCk7XG5sZXQgYWN0aXZlID0gMDtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfcnVsZShub2RlLCBhLCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2UsIGZuLCB1aWQgPSAwKSB7XG4gICAgY29uc3Qgc3RlcCA9IDE2LjY2NiAvIGR1cmF0aW9uO1xuICAgIGxldCBrZXlmcmFtZXMgPSAne1xcbic7XG4gICAgZm9yIChsZXQgcCA9IDA7IHAgPD0gMTsgcCArPSBzdGVwKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhICsgKGIgLSBhKSAqIGVhc2UocCk7XG4gICAgICAgIGtleWZyYW1lcyArPSBwICogMTAwICsgYCV7JHtmbih0LCAxIC0gdCl9fVxcbmA7XG4gICAgfVxuICAgIGNvbnN0IHJ1bGUgPSBrZXlmcmFtZXMgKyBgMTAwJSB7JHtmbihiLCAxIC0gYil9fVxcbn1gO1xuICAgIGNvbnN0IG5hbWUgPSBgX19zdmVsdGVfJHtoYXNoKHJ1bGUpfV8ke3VpZH1gO1xuICAgIGNvbnN0IGRvYyA9IGdldF9yb290X2Zvcl9zdHlsZShub2RlKTtcbiAgICBhY3RpdmVfZG9jcy5hZGQoZG9jKTtcbiAgICBjb25zdCBzdHlsZXNoZWV0ID0gZG9jLl9fc3ZlbHRlX3N0eWxlc2hlZXQgfHwgKGRvYy5fX3N2ZWx0ZV9zdHlsZXNoZWV0ID0gYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQobm9kZSkuc2hlZXQpO1xuICAgIGNvbnN0IGN1cnJlbnRfcnVsZXMgPSBkb2MuX19zdmVsdGVfcnVsZXMgfHwgKGRvYy5fX3N2ZWx0ZV9ydWxlcyA9IHt9KTtcbiAgICBpZiAoIWN1cnJlbnRfcnVsZXNbbmFtZV0pIHtcbiAgICAgICAgY3VycmVudF9ydWxlc1tuYW1lXSA9IHRydWU7XG4gICAgICAgIHN0eWxlc2hlZXQuaW5zZXJ0UnVsZShgQGtleWZyYW1lcyAke25hbWV9ICR7cnVsZX1gLCBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGNvbnN0IGFuaW1hdGlvbiA9IG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnO1xuICAgIG5vZGUuc3R5bGUuYW5pbWF0aW9uID0gYCR7YW5pbWF0aW9uID8gYCR7YW5pbWF0aW9ufSwgYCA6ICcnfSR7bmFtZX0gJHtkdXJhdGlvbn1tcyBsaW5lYXIgJHtkZWxheX1tcyAxIGJvdGhgO1xuICAgIGFjdGl2ZSArPSAxO1xuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZGVsZXRlX3J1bGUobm9kZSwgbmFtZSkge1xuICAgIGNvbnN0IHByZXZpb3VzID0gKG5vZGUuc3R5bGUuYW5pbWF0aW9uIHx8ICcnKS5zcGxpdCgnLCAnKTtcbiAgICBjb25zdCBuZXh0ID0gcHJldmlvdXMuZmlsdGVyKG5hbWVcbiAgICAgICAgPyBhbmltID0+IGFuaW0uaW5kZXhPZihuYW1lKSA8IDAgLy8gcmVtb3ZlIHNwZWNpZmljIGFuaW1hdGlvblxuICAgICAgICA6IGFuaW0gPT4gYW5pbS5pbmRleE9mKCdfX3N2ZWx0ZScpID09PSAtMSAvLyByZW1vdmUgYWxsIFN2ZWx0ZSBhbmltYXRpb25zXG4gICAgKTtcbiAgICBjb25zdCBkZWxldGVkID0gcHJldmlvdXMubGVuZ3RoIC0gbmV4dC5sZW5ndGg7XG4gICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBuZXh0LmpvaW4oJywgJyk7XG4gICAgICAgIGFjdGl2ZSAtPSBkZWxldGVkO1xuICAgICAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgICAgIGNsZWFyX3J1bGVzKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJfcnVsZXMoKSB7XG4gICAgcmFmKCgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYWN0aXZlX2RvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzaGVldCA9IGRvYy5fX3N2ZWx0ZV9zdHlsZXNoZWV0O1xuICAgICAgICAgICAgbGV0IGkgPSBzdHlsZXNoZWV0LmNzc1J1bGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICAgICAgc3R5bGVzaGVldC5kZWxldGVSdWxlKGkpO1xuICAgICAgICAgICAgZG9jLl9fc3ZlbHRlX3J1bGVzID0ge307XG4gICAgICAgIH0pO1xuICAgICAgICBhY3RpdmVfZG9jcy5jbGVhcigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVfYW5pbWF0aW9uKG5vZGUsIGZyb20sIGZuLCBwYXJhbXMpIHtcbiAgICBpZiAoIWZyb20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHRvID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoZnJvbS5sZWZ0ID09PSB0by5sZWZ0ICYmIGZyb20ucmlnaHQgPT09IHRvLnJpZ2h0ICYmIGZyb20udG9wID09PSB0by50b3AgJiYgZnJvbS5ib3R0b20gPT09IHRvLmJvdHRvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBzaG91bGQgdGhpcyBiZSBzZXBhcmF0ZWQgZnJvbSBkZXN0cnVjdHVyaW5nPyBPciBzdGFydC9lbmQgYWRkZWQgdG8gcHVibGljIGFwaSBhbmQgZG9jdW1lbnRhdGlvbj9cbiAgICBzdGFydDogc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzpcbiAgICBlbmQgPSBzdGFydF90aW1lICsgZHVyYXRpb24sIHRpY2sgPSBub29wLCBjc3MgfSA9IGZuKG5vZGUsIHsgZnJvbSwgdG8gfSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IHRydWU7XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICBsZXQgbmFtZTtcbiAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVsYXkpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBuYW1lKTtcbiAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgIGlmICghc3RhcnRlZCAmJiBub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQgJiYgbm93ID49IGVuZCkge1xuICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgIHN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCkge1xuICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHN0YXJ0X3RpbWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gMCArIDEgKiBlYXNpbmcocCAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHN0YXJ0KCk7XG4gICAgdGljaygwLCAxKTtcbiAgICByZXR1cm4gc3RvcDtcbn1cbmZ1bmN0aW9uIGZpeF9wb3NpdGlvbihub2RlKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChzdHlsZS5wb3NpdGlvbiAhPT0gJ2Fic29sdXRlJyAmJiBzdHlsZS5wb3NpdGlvbiAhPT0gJ2ZpeGVkJykge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHN0eWxlO1xuICAgICAgICBjb25zdCBhID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG5vZGUuc3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGFkZF90cmFuc2Zvcm0obm9kZSwgYSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkX3RyYW5zZm9ybShub2RlLCBhKSB7XG4gICAgY29uc3QgYiA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGEubGVmdCAhPT0gYi5sZWZ0IHx8IGEudG9wICE9PSBiLnRvcCkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zZm9ybSA9PT0gJ25vbmUnID8gJycgOiBzdHlsZS50cmFuc2Zvcm07XG4gICAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gYCR7dHJhbnNmb3JtfSB0cmFuc2xhdGUoJHthLmxlZnQgLSBiLmxlZnR9cHgsICR7YS50b3AgLSBiLnRvcH1weClgO1xuICAgIH1cbn1cblxubGV0IGN1cnJlbnRfY29tcG9uZW50O1xuZnVuY3Rpb24gc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGN1cnJlbnRfY29tcG9uZW50ID0gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkge1xuICAgIGlmICghY3VycmVudF9jb21wb25lbnQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gY2FsbGVkIG91dHNpZGUgY29tcG9uZW50IGluaXRpYWxpemF0aW9uJyk7XG4gICAgcmV0dXJuIGN1cnJlbnRfY29tcG9uZW50O1xufVxuZnVuY3Rpb24gYmVmb3JlVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYmVmb3JlX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uTW91bnQoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9tb3VudC5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFmdGVyVXBkYXRlKGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuYWZ0ZXJfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25EZXN0cm95KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fZGVzdHJveS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlcigpIHtcbiAgICBjb25zdCBjb21wb25lbnQgPSBnZXRfY3VycmVudF9jb21wb25lbnQoKTtcbiAgICByZXR1cm4gKHR5cGUsIGRldGFpbCkgPT4ge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW3R5cGVdO1xuICAgICAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGFyZSB0aGVyZSBzaXR1YXRpb25zIHdoZXJlIGV2ZW50cyBjb3VsZCBiZSBkaXNwYXRjaGVkXG4gICAgICAgICAgICAvLyBpbiBhIHNlcnZlciAobm9uLURPTSkgZW52aXJvbm1lbnQ/XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNsaWNlKCkuZm9yRWFjaChmbiA9PiB7XG4gICAgICAgICAgICAgICAgZm4uY2FsbChjb21wb25lbnQsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHNldENvbnRleHQoa2V5LCBjb250ZXh0KSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5zZXQoa2V5LCBjb250ZXh0KTtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuZ2V0KGtleSk7XG59XG5mdW5jdGlvbiBnZXRBbGxDb250ZXh0cygpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dDtcbn1cbmZ1bmN0aW9uIGhhc0NvbnRleHQoa2V5KSB7XG4gICAgcmV0dXJuIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuaGFzKGtleSk7XG59XG4vLyBUT0RPIGZpZ3VyZSBvdXQgaWYgd2Ugc3RpbGwgd2FudCB0byBzdXBwb3J0XG4vLyBzaG9ydGhhbmQgZXZlbnRzLCBvciBpZiB3ZSB3YW50IHRvIGltcGxlbWVudFxuLy8gYSByZWFsIGJ1YmJsaW5nIG1lY2hhbmlzbVxuZnVuY3Rpb24gYnViYmxlKGNvbXBvbmVudCwgZXZlbnQpIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSBjb21wb25lbnQuJCQuY2FsbGJhY2tzW2V2ZW50LnR5cGVdO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IGZuLmNhbGwodGhpcywgZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5jb25zdCByZW5kZXJfY2FsbGJhY2tzID0gW107XG5jb25zdCBmbHVzaF9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gICAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlZF9wcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkX3Byb21pc2U7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKGZuKSB7XG4gICAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFkZF9mbHVzaF9jYWxsYmFjayhmbikge1xuICAgIGZsdXNoX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmxldCBmbHVzaGluZyA9IGZhbHNlO1xuY29uc3Qgc2Vlbl9jYWxsYmFja3MgPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBpZiAoZmx1c2hpbmcpXG4gICAgICAgIHJldHVybjtcbiAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgZG8ge1xuICAgICAgICAvLyBmaXJzdCwgY2FsbCBiZWZvcmVVcGRhdGUgZnVuY3Rpb25zXG4gICAgICAgIC8vIGFuZCB1cGRhdGUgY29tcG9uZW50c1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGRpcnR5X2NvbXBvbmVudHNbaV07XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICB9XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgZGlydHlfY29tcG9uZW50cy5sZW5ndGggPSAwO1xuICAgICAgICB3aGlsZSAoYmluZGluZ19jYWxsYmFja3MubGVuZ3RoKVxuICAgICAgICAgICAgYmluZGluZ19jYWxsYmFja3MucG9wKCkoKTtcbiAgICAgICAgLy8gdGhlbiwgb25jZSBjb21wb25lbnRzIGFyZSB1cGRhdGVkLCBjYWxsXG4gICAgICAgIC8vIGFmdGVyVXBkYXRlIGZ1bmN0aW9ucy4gVGhpcyBtYXkgY2F1c2VcbiAgICAgICAgLy8gc3Vic2VxdWVudCB1cGRhdGVzLi4uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyX2NhbGxiYWNrcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSByZW5kZXJfY2FsbGJhY2tzW2ldO1xuICAgICAgICAgICAgaWYgKCFzZWVuX2NhbGxiYWNrcy5oYXMoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgLy8gLi4uc28gZ3VhcmQgYWdhaW5zdCBpbmZpbml0ZSBsb29wc1xuICAgICAgICAgICAgICAgIHNlZW5fY2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgfSB3aGlsZSAoZGlydHlfY29tcG9uZW50cy5sZW5ndGgpO1xuICAgIHdoaWxlIChmbHVzaF9jYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICAgIGZsdXNoX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgIH1cbiAgICB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICBzZWVuX2NhbGxiYWNrcy5jbGVhcigpO1xufVxuZnVuY3Rpb24gdXBkYXRlKCQkKSB7XG4gICAgaWYgKCQkLmZyYWdtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICQkLnVwZGF0ZSgpO1xuICAgICAgICBydW5fYWxsKCQkLmJlZm9yZV91cGRhdGUpO1xuICAgICAgICBjb25zdCBkaXJ0eSA9ICQkLmRpcnR5O1xuICAgICAgICAkJC5kaXJ0eSA9IFstMV07XG4gICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LnAoJCQuY3R4LCBkaXJ0eSk7XG4gICAgICAgICQkLmFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xuICAgIH1cbn1cblxubGV0IHByb21pc2U7XG5mdW5jdGlvbiB3YWl0KCkge1xuICAgIGlmICghcHJvbWlzZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwcm9taXNlID0gbnVsbDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2gobm9kZSwgZGlyZWN0aW9uLCBraW5kKSB7XG4gICAgbm9kZS5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudChgJHtkaXJlY3Rpb24gPyAnaW50cm8nIDogJ291dHJvJ30ke2tpbmR9YCkpO1xufVxuY29uc3Qgb3V0cm9pbmcgPSBuZXcgU2V0KCk7XG5sZXQgb3V0cm9zO1xuZnVuY3Rpb24gZ3JvdXBfb3V0cm9zKCkge1xuICAgIG91dHJvcyA9IHtcbiAgICAgICAgcjogMCxcbiAgICAgICAgYzogW10sXG4gICAgICAgIHA6IG91dHJvcyAvLyBwYXJlbnQgZ3JvdXBcbiAgICB9O1xufVxuZnVuY3Rpb24gY2hlY2tfb3V0cm9zKCkge1xuICAgIGlmICghb3V0cm9zLnIpIHtcbiAgICAgICAgcnVuX2FsbChvdXRyb3MuYyk7XG4gICAgfVxuICAgIG91dHJvcyA9IG91dHJvcy5wO1xufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9pbihibG9jaywgbG9jYWwpIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2suaSkge1xuICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICBibG9jay5pKGxvY2FsKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX291dChibG9jaywgbG9jYWwsIGRldGFjaCwgY2FsbGJhY2spIHtcbiAgICBpZiAoYmxvY2sgJiYgYmxvY2subykge1xuICAgICAgICBpZiAob3V0cm9pbmcuaGFzKGJsb2NrKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb3V0cm9pbmcuYWRkKGJsb2NrKTtcbiAgICAgICAgb3V0cm9zLmMucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICBvdXRyb2luZy5kZWxldGUoYmxvY2spO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFjaClcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suZCgxKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYmxvY2subyhsb2NhbCk7XG4gICAgfVxufVxuY29uc3QgbnVsbF90cmFuc2l0aW9uID0geyBkdXJhdGlvbjogMCB9O1xuZnVuY3Rpb24gY3JlYXRlX2luX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gZmFsc2U7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lO1xuICAgIGxldCB0YXNrO1xuICAgIGxldCB1aWQgPSAwO1xuICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDAsIDEsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MsIHVpZCsrKTtcbiAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBpZiAodGFzaylcbiAgICAgICAgICAgIHRhc2suYWJvcnQoKTtcbiAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ3N0YXJ0JykpO1xuICAgICAgICB0YXNrID0gbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHRydWUsICdlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGVhc2luZygobm93IC0gc3RhcnRfdGltZSkgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5uaW5nO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSk7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKGdvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVfb3V0X3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgY29uc3QgZ3JvdXAgPSBvdXRyb3M7XG4gICAgZ3JvdXAuciArPSAxO1xuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAxLCAwLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IG5vdygpICsgZGVsYXk7XG4gICAgICAgIGNvbnN0IGVuZF90aW1lID0gc3RhcnRfdGltZSArIGR1cmF0aW9uO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnc3RhcnQnKSk7XG4gICAgICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBmYWxzZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS0tZ3JvdXAucikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJlc3VsdCBpbiBgZW5kKClgIGJlaW5nIGNhbGxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gY2xlYW4gdXAgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuX2FsbChncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxIC0gdCwgdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICB3YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZ28oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5kKHJlc2V0KSB7XG4gICAgICAgICAgICBpZiAocmVzZXQgJiYgY29uZmlnLnRpY2spIHtcbiAgICAgICAgICAgICAgICBjb25maWcudGljaygxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24obm9kZSwgZm4sIHBhcmFtcywgaW50cm8pIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgdCA9IGludHJvID8gMCA6IDE7XG4gICAgbGV0IHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgbGV0IGFuaW1hdGlvbl9uYW1lID0gbnVsbDtcbiAgICBmdW5jdGlvbiBjbGVhcl9hbmltYXRpb24oKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25fbmFtZSlcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdChwcm9ncmFtLCBkdXJhdGlvbikge1xuICAgICAgICBjb25zdCBkID0gKHByb2dyYW0uYiAtIHQpO1xuICAgICAgICBkdXJhdGlvbiAqPSBNYXRoLmFicyhkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGE6IHQsXG4gICAgICAgICAgICBiOiBwcm9ncmFtLmIsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBzdGFydDogcHJvZ3JhbS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcHJvZ3JhbS5zdGFydCArIGR1cmF0aW9uLFxuICAgICAgICAgICAgZ3JvdXA6IHByb2dyYW0uZ3JvdXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oYikge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IG5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICBwZW5kaW5nX3Byb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhbiBpbnRybywgYW5kIHRoZXJlJ3MgYSBkZWxheSwgd2UgbmVlZCB0byBkb1xuICAgICAgICAgICAgLy8gYW4gaW5pdGlhbCB0aWNrIGFuZC9vciBhcHBseSBDU1MgYW5pbWF0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCB0LCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiKVxuICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBpbml0KHByb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgYiwgJ3N0YXJ0JykpO1xuICAgICAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nX3Byb2dyYW0gJiYgbm93ID4gcGVuZGluZ19wcm9ncmFtLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocGVuZGluZ19wcm9ncmFtLCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIHJ1bm5pbmdfcHJvZ3JhbS5iLCBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24sIDAsIGVhc2luZywgY29uZmlnLmNzcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5lbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCA9IHJ1bm5pbmdfcHJvZ3JhbS5iLCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCBydW5uaW5nX3Byb2dyYW0uYiwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbS5iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludHJvIOKAlCB3ZSBjYW4gdGlkeSB1cCBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG91dHJvIOKAlCBuZWVkcyB0byBiZSBjb29yZGluYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIS0tcnVubmluZ19wcm9ncmFtLmdyb3VwLnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKHJ1bm5pbmdfcHJvZ3JhbS5ncm91cC5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdyA+PSBydW5uaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBydW5uaW5nX3Byb2dyYW0uc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gcnVubmluZ19wcm9ncmFtLmEgKyBydW5uaW5nX3Byb2dyYW0uZCAqIGVhc2luZyhwIC8gcnVubmluZ19wcm9ncmFtLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2sodCwgMSAtIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhIShydW5uaW5nX3Byb2dyYW0gfHwgcGVuZGluZ19wcm9ncmFtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJ1bihiKSB7XG4gICAgICAgICAgICBpZiAoaXNfZnVuY3Rpb24oY29uZmlnKSkge1xuICAgICAgICAgICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBjb25maWcoKTtcbiAgICAgICAgICAgICAgICAgICAgZ28oYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgY2xlYXJfYW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBydW5uaW5nX3Byb2dyYW0gPSBwZW5kaW5nX3Byb2dyYW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlX3Byb21pc2UocHJvbWlzZSwgaW5mbykge1xuICAgIGNvbnN0IHRva2VuID0gaW5mby50b2tlbiA9IHt9O1xuICAgIGZ1bmN0aW9uIHVwZGF0ZSh0eXBlLCBpbmRleCwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZiAoaW5mby50b2tlbiAhPT0gdG9rZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSB2YWx1ZTtcbiAgICAgICAgbGV0IGNoaWxkX2N0eCA9IGluZm8uY3R4O1xuICAgICAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNoaWxkX2N0eCA9IGNoaWxkX2N0eC5zbGljZSgpO1xuICAgICAgICAgICAgY2hpbGRfY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBibG9jayA9IHR5cGUgJiYgKGluZm8uY3VycmVudCA9IHR5cGUpKGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBuZWVkc19mbHVzaCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5mby5ibG9jaykge1xuICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9ja3MuZm9yRWFjaCgoYmxvY2ssIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IGluZGV4ICYmIGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uYmxvY2tzW2ldID09PSBibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja19vdXRyb3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5mby5ibG9jay5kKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmxvY2suYygpO1xuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihibG9jaywgMSk7XG4gICAgICAgICAgICBibG9jay5tKGluZm8ubW91bnQoKSwgaW5mby5hbmNob3IpO1xuICAgICAgICAgICAgbmVlZHNfZmx1c2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8uYmxvY2sgPSBibG9jaztcbiAgICAgICAgaWYgKGluZm8uYmxvY2tzKVxuICAgICAgICAgICAgaW5mby5ibG9ja3NbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgIGlmIChuZWVkc19mbHVzaCkge1xuICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNfcHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgICAgICBwcm9taXNlLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnRoZW4sIDEsIGluZm8udmFsdWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGN1cnJlbnRfY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLmNhdGNoLCAyLCBpbmZvLmVycm9yLCBlcnJvcik7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQobnVsbCk7XG4gICAgICAgICAgICBpZiAoIWluZm8uaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVfYXdhaXRfYmxvY2tfYnJhbmNoKGluZm8sIGN0eCwgZGlydHkpIHtcbiAgICBjb25zdCBjaGlsZF9jdHggPSBjdHguc2xpY2UoKTtcbiAgICBjb25zdCB7IHJlc29sdmVkIH0gPSBpbmZvO1xuICAgIGlmIChpbmZvLmN1cnJlbnQgPT09IGluZm8udGhlbikge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby52YWx1ZV0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby5jYXRjaCkge1xuICAgICAgICBjaGlsZF9jdHhbaW5mby5lcnJvcl0gPSByZXNvbHZlZDtcbiAgICB9XG4gICAgaW5mby5ibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xufVxuXG5jb25zdCBnbG9iYWxzID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGdsb2JhbFRoaXNcbiAgICAgICAgOiBnbG9iYWwpO1xuXG5mdW5jdGlvbiBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5kKDEpO1xuICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbn1cbmZ1bmN0aW9uIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gdXBkYXRlX2tleWVkX2VhY2gob2xkX2Jsb2NrcywgZGlydHksIGdldF9rZXksIGR5bmFtaWMsIGN0eCwgbGlzdCwgbG9va3VwLCBub2RlLCBkZXN0cm95LCBjcmVhdGVfZWFjaF9ibG9jaywgbmV4dCwgZ2V0X2NvbnRleHQpIHtcbiAgICBsZXQgbyA9IG9sZF9ibG9ja3MubGVuZ3RoO1xuICAgIGxldCBuID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBvO1xuICAgIGNvbnN0IG9sZF9pbmRleGVzID0ge307XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgb2xkX2luZGV4ZXNbb2xkX2Jsb2Nrc1tpXS5rZXldID0gaTtcbiAgICBjb25zdCBuZXdfYmxvY2tzID0gW107XG4gICAgY29uc3QgbmV3X2xvb2t1cCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWx0YXMgPSBuZXcgTWFwKCk7XG4gICAgaSA9IG47XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpO1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBibG9jayA9IGxvb2t1cC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgYmxvY2sgPSBjcmVhdGVfZWFjaF9ibG9jayhrZXksIGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHluYW1pYykge1xuICAgICAgICAgICAgYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdfbG9va3VwLnNldChrZXksIG5ld19ibG9ja3NbaV0gPSBibG9jayk7XG4gICAgICAgIGlmIChrZXkgaW4gb2xkX2luZGV4ZXMpXG4gICAgICAgICAgICBkZWx0YXMuc2V0KGtleSwgTWF0aC5hYnMoaSAtIG9sZF9pbmRleGVzW2tleV0pKTtcbiAgICB9XG4gICAgY29uc3Qgd2lsbF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGRpZF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGluc2VydChibG9jaykge1xuICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgYmxvY2subShub2RlLCBuZXh0KTtcbiAgICAgICAgbG9va3VwLnNldChibG9jay5rZXksIGJsb2NrKTtcbiAgICAgICAgbmV4dCA9IGJsb2NrLmZpcnN0O1xuICAgICAgICBuLS07XG4gICAgfVxuICAgIHdoaWxlIChvICYmIG4pIHtcbiAgICAgICAgY29uc3QgbmV3X2Jsb2NrID0gbmV3X2Jsb2Nrc1tuIC0gMV07XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3NbbyAtIDFdO1xuICAgICAgICBjb25zdCBuZXdfa2V5ID0gbmV3X2Jsb2NrLmtleTtcbiAgICAgICAgY29uc3Qgb2xkX2tleSA9IG9sZF9ibG9jay5rZXk7XG4gICAgICAgIGlmIChuZXdfYmxvY2sgPT09IG9sZF9ibG9jaykge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgbmV4dCA9IG5ld19ibG9jay5maXJzdDtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgICAgIG4tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYmxvY2tcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsb29rdXAuaGFzKG5ld19rZXkpIHx8IHdpbGxfbW92ZS5oYXMobmV3X2tleSkpIHtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZF9tb3ZlLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhcy5nZXQobmV3X2tleSkgPiBkZWx0YXMuZ2V0KG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBkaWRfbW92ZS5hZGQobmV3X2tleSk7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbGxfbW92ZS5hZGQob2xkX2tleSk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKG8tLSkge1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW29dO1xuICAgICAgICBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9ibG9jay5rZXkpKVxuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgfVxuICAgIHdoaWxlIChuKVxuICAgICAgICBpbnNlcnQobmV3X2Jsb2Nrc1tuIC0gMV0pO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9rZXlzKGN0eCwgbGlzdCwgZ2V0X2NvbnRleHQsIGdldF9rZXkpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IFNldCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSkpO1xuICAgICAgICBpZiAoa2V5cy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSBkdXBsaWNhdGUga2V5cyBpbiBhIGtleWVkIGVhY2gnKTtcbiAgICAgICAgfVxuICAgICAgICBrZXlzLmFkZChrZXkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuLy8gc291cmNlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWxcbmNvbnN0IGJvb2xlYW5fYXR0cmlidXRlcyA9IG5ldyBTZXQoW1xuICAgICdhbGxvd2Z1bGxzY3JlZW4nLFxuICAgICdhbGxvd3BheW1lbnRyZXF1ZXN0JyxcbiAgICAnYXN5bmMnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdhdXRvcGxheScsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdjb250cm9scycsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdkZWZlcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZm9ybW5vdmFsaWRhdGUnLFxuICAgICdoaWRkZW4nLFxuICAgICdpc21hcCcsXG4gICAgJ2xvb3AnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ211dGVkJyxcbiAgICAnbm9tb2R1bGUnLFxuICAgICdub3ZhbGlkYXRlJyxcbiAgICAnb3BlbicsXG4gICAgJ3BsYXlzaW5saW5lJyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZXF1aXJlZCcsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAnc2VsZWN0ZWQnXG5dKTtcblxuY29uc3QgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSAvW1xccydcIj4vPVxcdXtGREQwfS1cXHV7RkRFRn1cXHV7RkZGRX1cXHV7RkZGRn1cXHV7MUZGRkV9XFx1ezFGRkZGfVxcdXsyRkZGRX1cXHV7MkZGRkZ9XFx1ezNGRkZFfVxcdXszRkZGRn1cXHV7NEZGRkV9XFx1ezRGRkZGfVxcdXs1RkZGRX1cXHV7NUZGRkZ9XFx1ezZGRkZFfVxcdXs2RkZGRn1cXHV7N0ZGRkV9XFx1ezdGRkZGfVxcdXs4RkZGRX1cXHV7OEZGRkZ9XFx1ezlGRkZFfVxcdXs5RkZGRn1cXHV7QUZGRkV9XFx1e0FGRkZGfVxcdXtCRkZGRX1cXHV7QkZGRkZ9XFx1e0NGRkZFfVxcdXtDRkZGRn1cXHV7REZGRkV9XFx1e0RGRkZGfVxcdXtFRkZGRX1cXHV7RUZGRkZ9XFx1e0ZGRkZFfVxcdXtGRkZGRn1cXHV7MTBGRkZFfVxcdXsxMEZGRkZ9XS91O1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG4vLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jbm9uY2hhcmFjdGVyXG5mdW5jdGlvbiBzcHJlYWQoYXJncywgY2xhc3Nlc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzLmNsYXNzID09IG51bGwpIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gJyAnICsgY2xhc3Nlc190b19hZGQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICBlbHNlIGlmIChib29sZWFuX2F0dHJpYnV0ZXMuaGFzKG5hbWUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICBzdHIgKz0gJyAnICsgbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzdHIgKz0gYCAke25hbWV9PVwiJHt2YWx1ZX1cImA7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgZXNjYXBlZCA9IHtcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjMzk7JyxcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0Oydcbn07XG5mdW5jdGlvbiBlc2NhcGUoaHRtbCkge1xuICAgIHJldHVybiBTdHJpbmcoaHRtbCkucmVwbGFjZSgvW1wiJyY8Pl0vZywgbWF0Y2ggPT4gZXNjYXBlZFttYXRjaF0pO1xufVxuZnVuY3Rpb24gZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gZXNjYXBlKHZhbHVlKSA6IHZhbHVlO1xufVxuZnVuY3Rpb24gZXNjYXBlX29iamVjdChvYmopIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKG9ialtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGVhY2goaXRlbXMsIGZuKSB7XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgc3RyICs9IGZuKGl0ZW1zW2ldLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cbmNvbnN0IG1pc3NpbmdfY29tcG9uZW50ID0ge1xuICAgICQkcmVuZGVyOiAoKSA9PiAnJ1xufTtcbmZ1bmN0aW9uIHZhbGlkYXRlX2NvbXBvbmVudChjb21wb25lbnQsIG5hbWUpIHtcbiAgICBpZiAoIWNvbXBvbmVudCB8fCAhY29tcG9uZW50LiQkcmVuZGVyKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnc3ZlbHRlOmNvbXBvbmVudCcpXG4gICAgICAgICAgICBuYW1lICs9ICcgdGhpcz17Li4ufSc7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgPCR7bmFtZX0+IGlzIG5vdCBhIHZhbGlkIFNTUiBjb21wb25lbnQuIFlvdSBtYXkgbmVlZCB0byByZXZpZXcgeW91ciBidWlsZCBjb25maWcgdG8gZW5zdXJlIHRoYXQgZGVwZW5kZW5jaWVzIGFyZSBjb21waWxlZCwgcmF0aGVyIHRoYW4gaW1wb3J0ZWQgYXMgcHJlLWNvbXBpbGVkIG1vZHVsZXNgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGRlYnVnKGZpbGUsIGxpbmUsIGNvbHVtbiwgdmFsdWVzKSB7XG4gICAgY29uc29sZS5sb2coYHtAZGVidWd9ICR7ZmlsZSA/IGZpbGUgKyAnICcgOiAnJ30oJHtsaW5lfToke2NvbHVtbn0pYCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIHJldHVybiAnJztcbn1cbmxldCBvbl9kZXN0cm95O1xuZnVuY3Rpb24gY3JlYXRlX3Nzcl9jb21wb25lbnQoZm4pIHtcbiAgICBmdW5jdGlvbiAkJHJlbmRlcihyZXN1bHQsIHByb3BzLCBiaW5kaW5ncywgc2xvdHMsIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgICAgICBjb25zdCAkJCA9IHtcbiAgICAgICAgICAgIG9uX2Rlc3Ryb3ksXG4gICAgICAgICAgICBjb250ZXh0OiBuZXcgTWFwKHBhcmVudF9jb21wb25lbnQgPyBwYXJlbnRfY29tcG9uZW50LiQkLmNvbnRleHQgOiBjb250ZXh0IHx8IFtdKSxcbiAgICAgICAgICAgIC8vIHRoZXNlIHdpbGwgYmUgaW1tZWRpYXRlbHkgZGlzY2FyZGVkXG4gICAgICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGFmdGVyX3VwZGF0ZTogW10sXG4gICAgICAgICAgICBjYWxsYmFja3M6IGJsYW5rX29iamVjdCgpXG4gICAgICAgIH07XG4gICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudCh7ICQkIH0pO1xuICAgICAgICBjb25zdCBodG1sID0gZm4ocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyOiAocHJvcHMgPSB7fSwgeyAkJHNsb3RzID0ge30sIGNvbnRleHQgPSBuZXcgTWFwKCkgfSA9IHt9KSA9PiB7XG4gICAgICAgICAgICBvbl9kZXN0cm95ID0gW107XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7IHRpdGxlOiAnJywgaGVhZDogJycsIGNzczogbmV3IFNldCgpIH07XG4gICAgICAgICAgICBjb25zdCBodG1sID0gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywge30sICQkc2xvdHMsIGNvbnRleHQpO1xuICAgICAgICAgICAgcnVuX2FsbChvbl9kZXN0cm95KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaHRtbCxcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQXJyYXkuZnJvbShyZXN1bHQuY3NzKS5tYXAoY3NzID0+IGNzcy5jb2RlKS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBudWxsIC8vIFRPRE9cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhlYWQ6IHJlc3VsdC50aXRsZSArIHJlc3VsdC5oZWFkXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAkJHJlbmRlclxuICAgIH07XG59XG5mdW5jdGlvbiBhZGRfYXR0cmlidXRlKG5hbWUsIHZhbHVlLCBib29sZWFuKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGJvb2xlYW4gJiYgIXZhbHVlKSlcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHJldHVybiBgICR7bmFtZX0ke3ZhbHVlID09PSB0cnVlID8gJycgOiBgPSR7dHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IEpTT04uc3RyaW5naWZ5KGVzY2FwZSh2YWx1ZSkpIDogYFwiJHt2YWx1ZX1cImB9YH1gO1xufVxuZnVuY3Rpb24gYWRkX2NsYXNzZXMoY2xhc3Nlcykge1xuICAgIHJldHVybiBjbGFzc2VzID8gYCBjbGFzcz1cIiR7Y2xhc3Nlc31cImAgOiAnJztcbn1cblxuZnVuY3Rpb24gYmluZChjb21wb25lbnQsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjb21wb25lbnQuJCQucHJvcHNbbmFtZV07XG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29tcG9uZW50LiQkLmJvdW5kW2luZGV4XSA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayhjb21wb25lbnQuJCQuY3R4W2luZGV4XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlX2NvbXBvbmVudChibG9jaykge1xuICAgIGJsb2NrICYmIGJsb2NrLmMoKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2NvbXBvbmVudChibG9jaywgcGFyZW50X25vZGVzKSB7XG4gICAgYmxvY2sgJiYgYmxvY2subChwYXJlbnRfbm9kZXMpO1xufVxuZnVuY3Rpb24gbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgdGFyZ2V0LCBhbmNob3IsIGN1c3RvbUVsZW1lbnQpIHtcbiAgICBjb25zdCB7IGZyYWdtZW50LCBvbl9tb3VudCwgb25fZGVzdHJveSwgYWZ0ZXJfdXBkYXRlIH0gPSBjb21wb25lbnQuJCQ7XG4gICAgZnJhZ21lbnQgJiYgZnJhZ21lbnQubSh0YXJnZXQsIGFuY2hvcik7XG4gICAgaWYgKCFjdXN0b21FbGVtZW50KSB7XG4gICAgICAgIC8vIG9uTW91bnQgaGFwcGVucyBiZWZvcmUgdGhlIGluaXRpYWwgYWZ0ZXJVcGRhdGVcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdfb25fZGVzdHJveSA9IG9uX21vdW50Lm1hcChydW4pLmZpbHRlcihpc19mdW5jdGlvbik7XG4gICAgICAgICAgICBpZiAob25fZGVzdHJveSkge1xuICAgICAgICAgICAgICAgIG9uX2Rlc3Ryb3kucHVzaCguLi5uZXdfb25fZGVzdHJveSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBFZGdlIGNhc2UgLSBjb21wb25lbnQgd2FzIGRlc3Ryb3llZCBpbW1lZGlhdGVseSxcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGxpa2VseSBhcyBhIHJlc3VsdCBvZiBhIGJpbmRpbmcgaW5pdGlhbGlzaW5nXG4gICAgICAgICAgICAgICAgcnVuX2FsbChuZXdfb25fZGVzdHJveSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wb25lbnQuJCQub25fbW91bnQgPSBbXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gZGVzdHJveV9jb21wb25lbnQoY29tcG9uZW50LCBkZXRhY2hpbmcpIHtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJDtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcnVuX2FsbCgkJC5vbl9kZXN0cm95KTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuZChkZXRhY2hpbmcpO1xuICAgICAgICAvLyBUT0RPIG51bGwgb3V0IG90aGVyIHJlZnMsIGluY2x1ZGluZyBjb21wb25lbnQuJCQgKGJ1dCBuZWVkIHRvXG4gICAgICAgIC8vIHByZXNlcnZlIGZpbmFsIHN0YXRlPylcbiAgICAgICAgJCQub25fZGVzdHJveSA9ICQkLmZyYWdtZW50ID0gbnVsbDtcbiAgICAgICAgJCQuY3R4ID0gW107XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpIHtcbiAgICBpZiAoY29tcG9uZW50LiQkLmRpcnR5WzBdID09PSAtMSkge1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC4kJC5kaXJ0eS5maWxsKDApO1xuICAgIH1cbiAgICBjb21wb25lbnQuJCQuZGlydHlbKGkgLyAzMSkgfCAwXSB8PSAoMSA8PCAoaSAlIDMxKSk7XG59XG5mdW5jdGlvbiBpbml0KGNvbXBvbmVudCwgb3B0aW9ucywgaW5zdGFuY2UsIGNyZWF0ZV9mcmFnbWVudCwgbm90X2VxdWFsLCBwcm9wcywgYXBwZW5kX3N0eWxlcywgZGlydHkgPSBbLTFdKSB7XG4gICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkID0ge1xuICAgICAgICBmcmFnbWVudDogbnVsbCxcbiAgICAgICAgY3R4OiBudWxsLFxuICAgICAgICAvLyBzdGF0ZVxuICAgICAgICBwcm9wcyxcbiAgICAgICAgdXBkYXRlOiBub29wLFxuICAgICAgICBub3RfZXF1YWwsXG4gICAgICAgIGJvdW5kOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgLy8gbGlmZWN5Y2xlXG4gICAgICAgIG9uX21vdW50OiBbXSxcbiAgICAgICAgb25fZGVzdHJveTogW10sXG4gICAgICAgIG9uX2Rpc2Nvbm5lY3Q6IFtdLFxuICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgY29udGV4dDogbmV3IE1hcChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogb3B0aW9ucy5jb250ZXh0IHx8IFtdKSxcbiAgICAgICAgLy8gZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIGRpcnR5LFxuICAgICAgICBza2lwX2JvdW5kOiBmYWxzZSxcbiAgICAgICAgcm9vdDogb3B0aW9ucy50YXJnZXQgfHwgcGFyZW50X2NvbXBvbmVudC4kJC5yb290XG4gICAgfTtcbiAgICBhcHBlbmRfc3R5bGVzICYmIGFwcGVuZF9zdHlsZXMoJCQucm9vdCk7XG4gICAgbGV0IHJlYWR5ID0gZmFsc2U7XG4gICAgJCQuY3R4ID0gaW5zdGFuY2VcbiAgICAgICAgPyBpbnN0YW5jZShjb21wb25lbnQsIG9wdGlvbnMucHJvcHMgfHwge30sIChpLCByZXQsIC4uLnJlc3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmVzdC5sZW5ndGggPyByZXN0WzBdIDogcmV0O1xuICAgICAgICAgICAgaWYgKCQkLmN0eCAmJiBub3RfZXF1YWwoJCQuY3R4W2ldLCAkJC5jdHhbaV0gPSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQkLnNraXBfYm91bmQgJiYgJCQuYm91bmRbaV0pXG4gICAgICAgICAgICAgICAgICAgICQkLmJvdW5kW2ldKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVhZHkpXG4gICAgICAgICAgICAgICAgICAgIG1ha2VfZGlydHkoY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0pXG4gICAgICAgIDogW107XG4gICAgJCQudXBkYXRlKCk7XG4gICAgcmVhZHkgPSB0cnVlO1xuICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgLy8gYGZhbHNlYCBhcyBhIHNwZWNpYWwgY2FzZSBvZiBubyBET00gY29tcG9uZW50XG4gICAgJCQuZnJhZ21lbnQgPSBjcmVhdGVfZnJhZ21lbnQgPyBjcmVhdGVfZnJhZ21lbnQoJCQuY3R4KSA6IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICBpZiAob3B0aW9ucy5oeWRyYXRlKSB7XG4gICAgICAgICAgICBzdGFydF9oeWRyYXRpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gY2hpbGRyZW4ob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50Lmwobm9kZXMpO1xuICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChkZXRhY2gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICQkLmZyYWdtZW50ICYmICQkLmZyYWdtZW50LmMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pbnRybylcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW4oY29tcG9uZW50LiQkLmZyYWdtZW50KTtcbiAgICAgICAgbW91bnRfY29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuYW5jaG9yLCBvcHRpb25zLmN1c3RvbUVsZW1lbnQpO1xuICAgICAgICBlbmRfaHlkcmF0aW5nKCk7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgfVxuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChwYXJlbnRfY29tcG9uZW50KTtcbn1cbmxldCBTdmVsdGVFbGVtZW50O1xuaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFN2ZWx0ZUVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBjb25zdCB7IG9uX21vdW50IH0gPSB0aGlzLiQkO1xuICAgICAgICAgICAgdGhpcy4kJC5vbl9kaXNjb25uZWN0ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLiQkLnNsb3R0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQodGhpcy4kJC5zbG90dGVkW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyLCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW2F0dHJdID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBydW5fYWxsKHRoaXMuJCQub25fZGlzY29ubmVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgJGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgICAgIHRoaXMuJGRlc3Ryb3kgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gVE9ETyBzaG91bGQgdGhpcyBkZWxlZ2F0ZSB0byBhZGRFdmVudExpc3RlbmVyP1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdIHx8ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSA9IFtdKSk7XG4gICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2FsbGJhY2tzLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiQkc2V0ICYmICFpc19lbXB0eSgkJHByb3BzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzLiBVc2VkIHdoZW4gZGV2PWZhbHNlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCQkcHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLiQkLnNraXBfYm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy4kJHNldCgkJHByb3BzKTtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaF9kZXYodHlwZSwgZGV0YWlsKSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQodHlwZSwgT2JqZWN0LmFzc2lnbih7IHZlcnNpb246ICczLjQyLjEnIH0sIGRldGFpbCksIHRydWUpKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmQodGFyZ2V0LCBub2RlKTtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9oeWRyYXRpb25fZGV2KHRhcmdldCwgbm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kX2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnQodGFyZ2V0LCBub2RlLCBhbmNob3IpO1xufVxuZnVuY3Rpb24gaW5zZXJ0X2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlLCBhbmNob3IpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0X2h5ZHJhdGlvbih0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBkZXRhY2hfZGV2KG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZScsIHsgbm9kZSB9KTtcbiAgICBkZXRhY2gobm9kZSk7XG59XG5mdW5jdGlvbiBkZXRhY2hfYmV0d2Vlbl9kZXYoYmVmb3JlLCBhZnRlcikge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcgJiYgYmVmb3JlLm5leHRTaWJsaW5nICE9PSBhZnRlcikge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2JlZm9yZV9kZXYoYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYWZ0ZXIucHJldmlvdXNTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYWZ0ZXJfZGV2KGJlZm9yZSkge1xuICAgIHdoaWxlIChiZWZvcmUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpc3Rlbl9kZXYobm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMsIGhhc19wcmV2ZW50X2RlZmF1bHQsIGhhc19zdG9wX3Byb3BhZ2F0aW9uKSB7XG4gICAgY29uc3QgbW9kaWZpZXJzID0gb3B0aW9ucyA9PT0gdHJ1ZSA/IFsnY2FwdHVyZSddIDogb3B0aW9ucyA/IEFycmF5LmZyb20oT2JqZWN0LmtleXMob3B0aW9ucykpIDogW107XG4gICAgaWYgKGhhc19wcmV2ZW50X2RlZmF1bHQpXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdwcmV2ZW50RGVmYXVsdCcpO1xuICAgIGlmIChoYXNfc3RvcF9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NQWRkRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICBjb25zdCBkaXNwb3NlID0gbGlzdGVuKG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXInLCB7IG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBtb2RpZmllcnMgfSk7XG4gICAgICAgIGRpc3Bvc2UoKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cl9kZXYobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlQXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldEF0dHJpYnV0ZScsIHsgbm9kZSwgYXR0cmlidXRlLCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIHByb3BfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGVbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXRQcm9wZXJ0eScsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gZGF0YXNldF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZS5kYXRhc2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YXNldCcsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0Lndob2xlVGV4dCA9PT0gZGF0YSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0RGF0YScsIHsgbm9kZTogdGV4dCwgZGF0YSB9KTtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfZWFjaF9hcmd1bWVudChhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ3N0cmluZycgJiYgIShhcmcgJiYgdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgJ2xlbmd0aCcgaW4gYXJnKSkge1xuICAgICAgICBsZXQgbXNnID0gJ3sjZWFjaH0gb25seSBpdGVyYXRlcyBvdmVyIGFycmF5LWxpa2Ugb2JqZWN0cy4nO1xuICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhcmcgJiYgU3ltYm9sLml0ZXJhdG9yIGluIGFyZykge1xuICAgICAgICAgICAgbXNnICs9ICcgWW91IGNhbiB1c2UgYSBzcHJlYWQgdG8gY29udmVydCB0aGlzIGl0ZXJhYmxlIGludG8gYW4gYXJyYXkuJztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zbG90cyhuYW1lLCBzbG90LCBrZXlzKSB7XG4gICAgZm9yIChjb25zdCBzbG90X2tleSBvZiBPYmplY3Qua2V5cyhzbG90KSkge1xuICAgICAgICBpZiAoIX5rZXlzLmluZGV4T2Yoc2xvdF9rZXkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYDwke25hbWV9PiByZWNlaXZlZCBhbiB1bmV4cGVjdGVkIHNsb3QgXCIke3Nsb3Rfa2V5fVwiLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBTdmVsdGUgY29tcG9uZW50cyB3aXRoIHNvbWUgbWlub3IgZGV2LWVuaGFuY2VtZW50cy4gVXNlZCB3aGVuIGRldj10cnVlLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnREZXYgZXh0ZW5kcyBTdmVsdGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8ICghb3B0aW9ucy50YXJnZXQgJiYgIW9wdGlvbnMuJCRpbmxpbmUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIndGFyZ2V0JyBpcyBhIHJlcXVpcmVkIG9wdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgIH1cbiAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIuJGRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ29tcG9uZW50IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgJGNhcHR1cmVfc3RhdGUoKSB7IH1cbiAgICAkaW5qZWN0X3N0YXRlKCkgeyB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgdG8gY3JlYXRlIHN0cm9uZ2x5IHR5cGVkIFN2ZWx0ZSBjb21wb25lbnRzLlxuICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgdHlwaW5nIHB1cnBvc2VzIGFuZCBzaG91bGQgYmUgdXNlZCBpbiBgLmQudHNgIGZpbGVzLlxuICpcbiAqICMjIyBFeGFtcGxlOlxuICpcbiAqIFlvdSBoYXZlIGNvbXBvbmVudCBsaWJyYXJ5IG9uIG5wbSBjYWxsZWQgYGNvbXBvbmVudC1saWJyYXJ5YCwgZnJvbSB3aGljaFxuICogeW91IGV4cG9ydCBhIGNvbXBvbmVudCBjYWxsZWQgYE15Q29tcG9uZW50YC4gRm9yIFN2ZWx0ZStUeXBlU2NyaXB0IHVzZXJzLFxuICogeW91IHdhbnQgdG8gcHJvdmlkZSB0eXBpbmdzLiBUaGVyZWZvcmUgeW91IGNyZWF0ZSBhIGBpbmRleC5kLnRzYDpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTdmVsdGVDb21wb25lbnRUeXBlZCB9IGZyb20gXCJzdmVsdGVcIjtcbiAqIGV4cG9ydCBjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkPHtmb286IHN0cmluZ30+IHt9XG4gKiBgYGBcbiAqIFR5cGluZyB0aGlzIG1ha2VzIGl0IHBvc3NpYmxlIGZvciBJREVzIGxpa2UgVlMgQ29kZSB3aXRoIHRoZSBTdmVsdGUgZXh0ZW5zaW9uXG4gKiB0byBwcm92aWRlIGludGVsbGlzZW5zZSBhbmQgdG8gdXNlIHRoZSBjb21wb25lbnQgbGlrZSB0aGlzIGluIGEgU3ZlbHRlIGZpbGVcbiAqIHdpdGggVHlwZVNjcmlwdDpcbiAqIGBgYHN2ZWx0ZVxuICogPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAqIFx0aW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tIFwiY29tcG9uZW50LWxpYnJhcnlcIjtcbiAqIDwvc2NyaXB0PlxuICogPE15Q29tcG9uZW50IGZvbz17J2Jhcid9IC8+XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFdoeSBub3QgbWFrZSB0aGlzIHBhcnQgb2YgYFN2ZWx0ZUNvbXBvbmVudChEZXYpYD9cbiAqIEJlY2F1c2VcbiAqIGBgYHRzXG4gKiBjbGFzcyBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudDx7Zm9vOiBzdHJpbmd9PiB7fVxuICogY29uc3QgY29tcG9uZW50OiB0eXBlb2YgU3ZlbHRlQ29tcG9uZW50ID0gQVN1YmNsYXNzT2ZTdmVsdGVDb21wb25lbnQ7XG4gKiBgYGBcbiAqIHdpbGwgdGhyb3cgYSB0eXBlIGVycm9yLCBzbyB3ZSBuZWVkIHRvIHNlcGFyYXRlIHRoZSBtb3JlIHN0cmljdGx5IHR5cGVkIGNsYXNzLlxuICovXG5jbGFzcyBTdmVsdGVDb21wb25lbnRUeXBlZCBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudERldiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb29wX2d1YXJkKHRpbWVvdXQpIHtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydCA+IHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5maW5pdGUgbG9vcCBkZXRlY3RlZCcpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgSHRtbFRhZywgSHRtbFRhZ0h5ZHJhdGlvbiwgU3ZlbHRlQ29tcG9uZW50LCBTdmVsdGVDb21wb25lbnREZXYsIFN2ZWx0ZUNvbXBvbmVudFR5cGVkLCBTdmVsdGVFbGVtZW50LCBhY3Rpb25fZGVzdHJveWVyLCBhZGRfYXR0cmlidXRlLCBhZGRfY2xhc3NlcywgYWRkX2ZsdXNoX2NhbGxiYWNrLCBhZGRfbG9jYXRpb24sIGFkZF9yZW5kZXJfY2FsbGJhY2ssIGFkZF9yZXNpemVfbGlzdGVuZXIsIGFkZF90cmFuc2Zvcm0sIGFmdGVyVXBkYXRlLCBhcHBlbmQsIGFwcGVuZF9kZXYsIGFwcGVuZF9lbXB0eV9zdHlsZXNoZWV0LCBhcHBlbmRfaHlkcmF0aW9uLCBhcHBlbmRfaHlkcmF0aW9uX2RldiwgYXBwZW5kX3N0eWxlcywgYXNzaWduLCBhdHRyLCBhdHRyX2RldiwgYXR0cmlidXRlX3RvX29iamVjdCwgYmVmb3JlVXBkYXRlLCBiaW5kLCBiaW5kaW5nX2NhbGxiYWNrcywgYmxhbmtfb2JqZWN0LCBidWJibGUsIGNoZWNrX291dHJvcywgY2hpbGRyZW4sIGNsYWltX2NvbXBvbmVudCwgY2xhaW1fZWxlbWVudCwgY2xhaW1faHRtbF90YWcsIGNsYWltX3NwYWNlLCBjbGFpbV90ZXh0LCBjbGVhcl9sb29wcywgY29tcG9uZW50X3N1YnNjcmliZSwgY29tcHV0ZV9yZXN0X3Byb3BzLCBjb21wdXRlX3Nsb3RzLCBjcmVhdGVFdmVudERpc3BhdGNoZXIsIGNyZWF0ZV9hbmltYXRpb24sIGNyZWF0ZV9iaWRpcmVjdGlvbmFsX3RyYW5zaXRpb24sIGNyZWF0ZV9jb21wb25lbnQsIGNyZWF0ZV9pbl90cmFuc2l0aW9uLCBjcmVhdGVfb3V0X3RyYW5zaXRpb24sIGNyZWF0ZV9zbG90LCBjcmVhdGVfc3NyX2NvbXBvbmVudCwgY3VycmVudF9jb21wb25lbnQsIGN1c3RvbV9ldmVudCwgZGF0YXNldF9kZXYsIGRlYnVnLCBkZXN0cm95X2Jsb2NrLCBkZXN0cm95X2NvbXBvbmVudCwgZGVzdHJveV9lYWNoLCBkZXRhY2gsIGRldGFjaF9hZnRlcl9kZXYsIGRldGFjaF9iZWZvcmVfZGV2LCBkZXRhY2hfYmV0d2Vlbl9kZXYsIGRldGFjaF9kZXYsIGRpcnR5X2NvbXBvbmVudHMsIGRpc3BhdGNoX2RldiwgZWFjaCwgZWxlbWVudCwgZWxlbWVudF9pcywgZW1wdHksIGVuZF9oeWRyYXRpbmcsIGVzY2FwZSwgZXNjYXBlX2F0dHJpYnV0ZV92YWx1ZSwgZXNjYXBlX29iamVjdCwgZXNjYXBlZCwgZXhjbHVkZV9pbnRlcm5hbF9wcm9wcywgZml4X2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBmaXhfcG9zaXRpb24sIGZsdXNoLCBnZXRBbGxDb250ZXh0cywgZ2V0Q29udGV4dCwgZ2V0X2FsbF9kaXJ0eV9mcm9tX3Njb3BlLCBnZXRfYmluZGluZ19ncm91cF92YWx1ZSwgZ2V0X2N1cnJlbnRfY29tcG9uZW50LCBnZXRfY3VzdG9tX2VsZW1lbnRzX3Nsb3RzLCBnZXRfcm9vdF9mb3Jfc3R5bGUsIGdldF9zbG90X2NoYW5nZXMsIGdldF9zcHJlYWRfb2JqZWN0LCBnZXRfc3ByZWFkX3VwZGF0ZSwgZ2V0X3N0b3JlX3ZhbHVlLCBnbG9iYWxzLCBncm91cF9vdXRyb3MsIGhhbmRsZV9wcm9taXNlLCBoYXNDb250ZXh0LCBoYXNfcHJvcCwgaWRlbnRpdHksIGluaXQsIGluc2VydCwgaW5zZXJ0X2RldiwgaW5zZXJ0X2h5ZHJhdGlvbiwgaW5zZXJ0X2h5ZHJhdGlvbl9kZXYsIGludHJvcywgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIsIGlzX2NsaWVudCwgaXNfY3Jvc3NvcmlnaW4sIGlzX2VtcHR5LCBpc19mdW5jdGlvbiwgaXNfcHJvbWlzZSwgbGlzdGVuLCBsaXN0ZW5fZGV2LCBsb29wLCBsb29wX2d1YXJkLCBtaXNzaW5nX2NvbXBvbmVudCwgbW91bnRfY29tcG9uZW50LCBub29wLCBub3RfZXF1YWwsIG5vdywgbnVsbF90b19lbXB0eSwgb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcywgb25EZXN0cm95LCBvbk1vdW50LCBvbmNlLCBvdXRyb19hbmRfZGVzdHJveV9ibG9jaywgcHJldmVudF9kZWZhdWx0LCBwcm9wX2RldiwgcXVlcnlfc2VsZWN0b3JfYWxsLCByYWYsIHJ1biwgcnVuX2FsbCwgc2FmZV9ub3RfZXF1YWwsIHNjaGVkdWxlX3VwZGF0ZSwgc2VsZWN0X211bHRpcGxlX3ZhbHVlLCBzZWxlY3Rfb3B0aW9uLCBzZWxlY3Rfb3B0aW9ucywgc2VsZWN0X3ZhbHVlLCBzZWxmLCBzZXRDb250ZXh0LCBzZXRfYXR0cmlidXRlcywgc2V0X2N1cnJlbnRfY29tcG9uZW50LCBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YSwgc2V0X2RhdGEsIHNldF9kYXRhX2Rldiwgc2V0X2lucHV0X3R5cGUsIHNldF9pbnB1dF92YWx1ZSwgc2V0X25vdywgc2V0X3JhZiwgc2V0X3N0b3JlX3ZhbHVlLCBzZXRfc3R5bGUsIHNldF9zdmdfYXR0cmlidXRlcywgc3BhY2UsIHNwcmVhZCwgc3JjX3VybF9lcXVhbCwgc3RhcnRfaHlkcmF0aW5nLCBzdG9wX3Byb3BhZ2F0aW9uLCBzdWJzY3JpYmUsIHN2Z19lbGVtZW50LCB0ZXh0LCB0aWNrLCB0aW1lX3Jhbmdlc190b19hcnJheSwgdG9fbnVtYmVyLCB0b2dnbGVfY2xhc3MsIHRyYW5zaXRpb25faW4sIHRyYW5zaXRpb25fb3V0LCB0cnVzdGVkLCB1cGRhdGVfYXdhaXRfYmxvY2tfYnJhbmNoLCB1cGRhdGVfa2V5ZWRfZWFjaCwgdXBkYXRlX3Nsb3QsIHVwZGF0ZV9zbG90X2Jhc2UsIHZhbGlkYXRlX2NvbXBvbmVudCwgdmFsaWRhdGVfZWFjaF9hcmd1bWVudCwgdmFsaWRhdGVfZWFjaF9rZXlzLCB2YWxpZGF0ZV9zbG90cywgdmFsaWRhdGVfc3RvcmUsIHhsaW5rX2F0dHIgfTtcbiIsIjxkaXYgaWQ9XCJicm9rZW4tbGluay1jb250YWluZXJcIj5cbiAgPCEtLSBmcm9tIGh0dHBzOi8vd3d3LnN2Z3JlcG8uY29tL3N2Zy80NTM4L2xpbmsgLS0+XG4gIDxzdmdcbiAgICB2ZXJzaW9uPVwiMS4xXCJcbiAgICBpZD1cIkxheWVyXzFcIlxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXG4gICAgeD1cIjBweFwiXG4gICAgeT1cIjBweFwiXG4gICAgdmlld0JveD1cIjAgMCA1MTIgNTEyXCJcbiAgICBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjtcIlxuICAgIHhtbDpzcGFjZT1cInByZXNlcnZlXCJcbiAgPlxuICAgIDxnPlxuICAgICAgPHBhdGhcbiAgICAgICAgc3R5bGU9XCJmaWxsOiNCMzQwNEE7XCJcbiAgICAgICAgZD1cIk0zODMuMTEyLDIyMy4zNDJjLTMuMTYyLDAtNi4zNDctMS4wMzQtOS4wMDgtMy4xNjJjLTYuMjI3LTQuOTgxLTcuMjM4LTE0LjA2Ny0yLjI1Ny0yMC4yOTRcblx0XHRsMjMuMDk4LTI4Ljg3N2M0Ljk4Mi02LjIyNiwxNC4wNjctNy4yMzgsMjAuMjk0LTIuMjU3YzYuMjI3LDQuOTgxLDcuMjM4LDE0LjA2NywyLjI1NywyMC4yOTRsLTIzLjA5OCwyOC44Nzdcblx0XHRDMzkxLjU0NSwyMjEuNDg3LDM4Ny4zNDgsMjIzLjM0MiwzODMuMTEyLDIyMy4zNDJ6XCJcbiAgICAgIC8+XG4gICAgICA8cGF0aFxuICAgICAgICBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIlxuICAgICAgICBkPVwiTTQzNS4wOTUsMjcwLjQzOWgtMzcuNTM3Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40Mzhcblx0XHRoMzcuNTM3YzcuOTczLDAsMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40MzhDNDQ5LjUzMywyNjMuOTczLDQ0My4wNjksMjcwLjQzOSw0MzUuMDk1LDI3MC40Mzl6XCJcbiAgICAgIC8+XG4gICAgICA8cGF0aFxuICAgICAgICBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIlxuICAgICAgICBkPVwiTTQwNi4yMjksMzQ2LjQxYy00LjIzNywwLTguNDMzLTEuODU0LTExLjI4NS01LjQybC0yMy4wOTgtMjguODc3XG5cdFx0Yy00Ljk4LTYuMjI3LTMuOTctMTUuMzExLDIuMjU3LTIwLjI5NGM2LjIyOC00Ljk4LDE1LjMxMy0zLjk2OSwyMC4yOTQsMi4yNTdsMjMuMDk4LDI4Ljg3N2M0Ljk4LDYuMjI3LDMuOTcsMTUuMzExLTIuMjU3LDIwLjI5NFxuXHRcdEM0MTIuNTc2LDM0NS4zNzYsNDA5LjM5MywzNDYuNDEsNDA2LjIyOSwzNDYuNDF6XCJcbiAgICAgIC8+XG4gICAgICA8cGF0aFxuICAgICAgICBzdHlsZT1cImZpbGw6I0IzNDA0QTtcIlxuICAgICAgICBkPVwiTTEyOC44ODcsMjIzLjM0MmMtNC4yMzcsMC04LjQzMy0xLjg1NC0xMS4yODUtNS40MmwtMjMuMDk4LTI4Ljg3N1xuXHRcdGMtNC45OC02LjIyNy0zLjk3LTE1LjMxMSwyLjI1Ny0yMC4yOTRjNi4yMjgtNC45ODEsMTUuMzExLTMuOTcsMjAuMjk0LDIuMjU3bDIzLjA5OCwyOC44NzdjNC45OCw2LjIyNywzLjk3LDE1LjMxMS0yLjI1NywyMC4yOTRcblx0XHRDMTM1LjIzMiwyMjIuMzEsMTMyLjA0OSwyMjMuMzQyLDEyOC44ODcsMjIzLjM0MnpcIlxuICAgICAgLz5cbiAgICAgIDxwYXRoXG4gICAgICAgIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiXG4gICAgICAgIGQ9XCJNMTE0LjQ0LDI3MC40MzlINzYuOTA0Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40Mzhcblx0XHRoMzcuNTM3YzcuOTczLDAsMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40MzhDMTI4Ljg3OCwyNjMuOTczLDEyMi40MTMsMjcwLjQzOSwxMTQuNDQsMjcwLjQzOXpcIlxuICAgICAgLz5cbiAgICAgIDxwYXRoXG4gICAgICAgIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiXG4gICAgICAgIGQ9XCJNMTA1Ljc2OSwzNDYuNDFjLTMuMTYyLDAtNi4zNDctMS4wMzQtOS4wMDgtMy4xNjJjLTYuMjI3LTQuOTgxLTcuMjM4LTE0LjA2Ny0yLjI1Ny0yMC4yOTRcblx0XHRsMjMuMDk4LTI4Ljg3N2M0Ljk4Mi02LjIyNiwxNC4wNjctNy4yMzYsMjAuMjk0LTIuMjU3YzYuMjI3LDQuOTgxLDcuMjM4LDE0LjA2NywyLjI1NywyMC4yOTRsLTIzLjA5OCwyOC44Nzdcblx0XHRDMTE0LjIwMiwzNDQuNTUzLDExMC4wMDQsMzQ2LjQxLDEwNS43NjksMzQ2LjQxelwiXG4gICAgICAvPlxuICAgICAgPHBhdGhcbiAgICAgICAgc3R5bGU9XCJmaWxsOiNCMzQwNEE7XCJcbiAgICAgICAgZD1cIk00NzEuMTIzLDE3Ni4zMmMtNy45NzMsMC0xNC40MzgtNi40NjUtMTQuNDM4LTE0LjQzOHYtNTMuODI2YzAtMjkuMDgyLTIzLjY2MS01Mi43NDEtNTIuNzQxLTUyLjc0MVxuXHRcdGgtMjQuOTQ5Yy03Ljk3MywwLTE0LjQzOC02LjQ2NS0xNC40MzgtMTQuNDM4czYuNDY1LTE0LjQzOCwxNC40MzgtMTQuNDM4aDI0Ljk0OWM0NS4wMDQsMCw4MS42MTcsMzYuNjEzLDgxLjYxNyw4MS42MTd2NTMuODI2XG5cdFx0QzQ4NS41NjEsMTY5Ljg1NSw0NzkuMDk2LDE3Ni4zMiw0NzEuMTIzLDE3Ni4zMnpcIlxuICAgICAgLz5cbiAgICAgIDxwYXRoXG4gICAgICAgIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiXG4gICAgICAgIGQ9XCJNNDAuODc3LDE3Ni4zMmMtNy45NzMsMC0xNC40MzgtNi40NjUtMTQuNDM4LTE0LjQzOHYtNTMuODI2YzAtNDUuMDA0LDM2LjYxMy04MS42MTcsODEuNjE3LTgxLjYxN1xuXHRcdGgyNC45NDhjNy45NzMsMCwxNC40MzgsNi40NjUsMTQuNDM4LDE0LjQzOHMtNi40NjUsMTQuNDM4LTE0LjQzOCwxNC40MzhoLTI0Ljk0OGMtMjkuMDgyLDAtNTIuNzQxLDIzLjY2MS01Mi43NDEsNTIuNzQxdjUzLjgyNlxuXHRcdEM1NS4zMTUsMTY5Ljg1NSw0OC44NSwxNzYuMzIsNDAuODc3LDE3Ni4zMnpcIlxuICAgICAgLz5cbiAgICAgIDxwYXRoXG4gICAgICAgIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiXG4gICAgICAgIGQ9XCJNNDAzLjk0Myw0ODUuNTYxaC0yNC45NDhjLTcuOTczLDAtMTQuNDM4LTYuNDY1LTE0LjQzOC0xNC40MzhjMC03Ljk3Myw2LjQ2NS0xNC40MzgsMTQuNDM4LTE0LjQzOFxuXHRcdGgyNC45NDhjMjkuMDgyLDAsNTIuNzQxLTIzLjY2MSw1Mi43NDEtNTIuNzQxdi01My44MjZjMC03Ljk3Myw2LjQ2NS0xNC40MzgsMTQuNDM4LTE0LjQzOGM3Ljk3MywwLDE0LjQzOCw2LjQ2NSwxNC40MzgsMTQuNDM4XG5cdFx0djUzLjgyNkM0ODUuNTYxLDQ0OC45NDcsNDQ4Ljk0Nyw0ODUuNTYxLDQwMy45NDMsNDg1LjU2MXpcIlxuICAgICAgLz5cbiAgICAgIDxwYXRoXG4gICAgICAgIHN0eWxlPVwiZmlsbDojQjM0MDRBO1wiXG4gICAgICAgIGQ9XCJNMTMzLjAwNSw0ODUuNTYxaC0yNC45NDhjLTQ1LjAwNCwwLTgxLjYxNy0zNi42MTMtODEuNjE3LTgxLjYxN3YtNTMuODI2XG5cdFx0YzAtNy45NzMsNi40NjUtMTQuNDM4LDE0LjQzOC0xNC40MzhzMTQuNDM4LDYuNDY1LDE0LjQzOCwxNC40Mzh2NTMuODI2YzAsMjkuMDgyLDIzLjY2MSw1Mi43NDEsNTIuNzQxLDUyLjc0MWgyNC45NDhcblx0XHRjNy45NzMsMCwxNC40MzgsNi40NjUsMTQuNDM4LDE0LjQzOEMxNDcuNDQyLDQ3OS4wOTYsMTQwLjk3OSw0ODUuNTYxLDEzMy4wMDUsNDg1LjU2MXpcIlxuICAgICAgLz5cbiAgICA8L2c+XG4gICAgPHBhdGhcbiAgICAgIHN0eWxlPVwiZmlsbDojRUJBRkFFO1wiXG4gICAgICBkPVwiTTIwMi4wMzksMjA4LjQ5YzEyLjg5NCwwLDIzLjM0OS0xMC40NTMsMjMuMzQ5LTIzLjM0OVY5MS43NDhjMC0xNi41OTMsMTQuMDE5LTMwLjYxMiwzMC42MTItMzAuNjEyXG5cdGMxNi41OTMsMCwzMC42MTIsMTQuMDE5LDMwLjYxMiwzMC42MTJ2OTMuMzk1YzAsMTIuODk0LDEwLjQ1MywyMy4zNDksMjMuMzQ5LDIzLjM0OWwwLDBjMTIuODk0LDAsMjMuMzQ5LTEwLjQ1MywyMy4zNDktMjMuMzQ5XG5cdFY5MS43NDhjMC00Mi41MjEtMzQuNzg5LTc3LjMxLTc3LjMxLTc3LjMxbDAsMGMtNDIuNTIxLDAtNzcuMzEsMzQuNzg5LTc3LjMxLDc3LjMxdjkzLjM5NVxuXHRDMTc4LjY5LDE5OC4wMzcsMTg5LjE0MywyMDguNDksMjAyLjAzOSwyMDguNDlMMjAyLjAzOSwyMDguNDl6XCJcbiAgICAvPlxuICAgIDxwYXRoXG4gICAgICBzdHlsZT1cImZpbGw6I0IxNDA0QTtcIlxuICAgICAgZD1cIk0zMDkuOTYxLDIyMi45MjhjLTIwLjgzNywwLTM3Ljc4Ny0xNi45NS0zNy43ODctMzcuNzg3VjkxLjc0OGMwLTguNjE2LTcuNTU4LTE2LjE3NS0xNi4xNzUtMTYuMTc1XG5cdGMtOC42MTYsMC0xNi4xNzUsNy41NTgtMTYuMTc1LDE2LjE3NXY5My4zOTVjMCwyMC44MzctMTYuOTUsMzcuNzg3LTM3Ljc4NywzNy43ODdzLTM3Ljc4Ny0xNi45NS0zNy43ODctMzcuNzg3VjkxLjc0OFxuXHRDMTY0LjI1Miw0MS4xNTgsMjA1LjQwOSwwLDI1NiwwczkxLjc0OCw0MS4xNTgsOTEuNzQ4LDkxLjc0OHY5My4zOTVDMzQ3Ljc0NiwyMDUuOTc4LDMzMC43OTYsMjIyLjkyOCwzMDkuOTYxLDIyMi45Mjh6IE0yNTYsNDYuNjk4XG5cdGMyNC40MiwwLDQ1LjA1LDIwLjYzLDQ1LjA1LDQ1LjA1djkzLjM5NWMwLDQuOTEzLDMuOTk4LDguOTExLDguOTExLDguOTExczguOTExLTMuOTk4LDguOTExLTguOTExVjkxLjc0OFxuXHRjMC0zNC42NjgtMjguMjA0LTYyLjg3Mi02Mi44NzItNjIuODcyYy0zNC42NjgsMC02Mi44NzIsMjguMjA0LTYyLjg3Miw2Mi44NzJ2OTMuMzk1YzAsNC45MTMsMy45OTgsOC45MTEsOC45MTEsOC45MTFcblx0czguOTExLTMuOTk4LDguOTExLTguOTExVjkxLjc0OEMyMTAuOTQ4LDY3LjMyOCwyMzEuNTc4LDQ2LjY5OCwyNTYsNDYuNjk4elwiXG4gICAgLz5cbiAgICA8cGF0aFxuICAgICAgc3R5bGU9XCJmaWxsOiNFQkFGQUU7XCJcbiAgICAgIGQ9XCJNMzA5Ljk2LDMwMy41MWMtMTIuODk0LDAtMjMuMzQ5LDEwLjQ1My0yMy4zNDksMjMuMzQ5djkzLjM5NWMwLDE2LjU5My0xNC4wMTksMzAuNjEyLTMwLjYxMiwzMC42MTJcblx0Yy0xNi41OTMsMC0zMC42MTItMTQuMDE5LTMwLjYxMi0zMC42MTJ2LTkzLjM5NWMwLTEyLjg5NC0xMC40NTMtMjMuMzQ5LTIzLjM0OS0yMy4zNDlsMCwwYy0xMi44OTQsMC0yMy4zNDksMTAuNDUzLTIzLjM0OSwyMy4zNDlcblx0djkzLjM5NWMwLDQyLjUyMSwzNC43ODksNzcuMzEsNzcuMzEsNzcuMzFsMCwwYzQyLjUyMSwwLDc3LjMxLTM0Ljc4OSw3Ny4zMS03Ny4zMXYtOTMuMzk1XG5cdEMzMzMuMzA5LDMxMy45NjMsMzIyLjg1NiwzMDMuNTEsMzA5Ljk2LDMwMy41MUwzMDkuOTYsMzAzLjUxelwiXG4gICAgLz5cbiAgICA8cGF0aFxuICAgICAgc3R5bGU9XCJmaWxsOiNCMTQwNEE7XCJcbiAgICAgIGQ9XCJNMjU2LDUxMmMtNTAuNTksMC05MS43NDgtNDEuMTU4LTkxLjc0OC05MS43NDh2LTkzLjM5NWMwLTIwLjgzNywxNi45NS0zNy43ODcsMzcuNzg3LTM3Ljc4N1xuXHRzMzcuNzg3LDE2Ljk1LDM3Ljc4NywzNy43ODd2OTMuMzk1YzAsOC42MTYsNy41NTgsMTYuMTc1LDE2LjE3NSwxNi4xNzVjOC42MTYsMCwxNi4xNzUtNy41NTgsMTYuMTc1LTE2LjE3NXYtOTMuMzk1XG5cdGMwLTIwLjgzNywxNi45NS0zNy43ODcsMzcuNzg3LTM3Ljc4N3MzNy43ODcsMTYuOTUsMzcuNzg3LDM3Ljc4N3Y5My4zOTVDMzQ3Ljc0Niw0NzAuODQyLDMwNi41OSw1MTIsMjU2LDUxMnogTTIwMi4wMzksMzE3Ljk0N1xuXHRjLTQuOTEzLDAtOC45MTEsMy45OTgtOC45MTEsOC45MTF2OTMuMzk1YzAsMzQuNjY4LDI4LjIwNCw2Mi44NzIsNjIuODcyLDYyLjg3MmMzNC42NjgsMCw2Mi44NzItMjguMjA0LDYyLjg3Mi02Mi44NzJ2LTkzLjM5NVxuXHRjMC00LjkxMy0zLjk5OC04LjkxMS04LjkxMS04LjkxMXMtOC45MTEsMy45OTgtOC45MTEsOC45MTF2OTMuMzk1YzAsMjQuNDItMjAuNjMsNDUuMDUtNDUuMDUsNDUuMDVzLTQ1LjA1LTIwLjYzLTQ1LjA1LTQ1LjA1XG5cdHYtOTMuMzk1QzIxMC45NDgsMzIxLjk0NCwyMDYuOTUyLDMxNy45NDcsMjAyLjAzOSwzMTcuOTQ3elwiXG4gICAgLz48L3N2Z1xuICA+XG48L2Rpdj5cblxuPHN0eWxlPlxuICBkaXYjYnJva2VuLWxpbmstY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgYm90dG9tOiA1JTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDI1JTtcbiAgICBtYXgtaGVpZ2h0OiAyMDBweDtcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIH1cbiAgc3ZnIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgb3BhY2l0eTogNjAlO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIH1cbjwvc3R5bGU+XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuICBpbXBvcnQgdHlwZSB7IERCTWFuYWdlciB9IGZyb20gXCIuLi9kYlwiO1xuICBpbXBvcnQgeyBHZXREaXNwbGF5TmFtZSwgTmF2aWdhdGVUb0ZpbGUgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbiAgaW1wb3J0IHR5cGUgeyBleHBhbmRNYW5hZ2VyIH0gZnJvbSBcIi4vaGVscGVycy9leHBhbmRNYW5hZ2VyXCI7XG5cbiAgZXhwb3J0IGxldCBub3RlX3BhdGg6IHN0cmluZztcbiAgZXhwb3J0IGxldCBkYjogREJNYW5hZ2VyO1xuICBleHBvcnQgbGV0IGluZGVudGF0aW9uOiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgdmlldzogYW55O1xuICBleHBvcnQgbGV0IGFwcDogQXBwO1xuICBleHBvcnQgbGV0IGV4cGFuZE1hbjogZXhwYW5kTWFuYWdlcjtcblxuICBleHBhbmRNYW4ubG9nSW5kZW50KGluZGVudGF0aW9uKTtcbiAgbGV0IGRhcmtfbW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKVxuICAgID8gXCJkYXJrLW1vZGVcIlxuICAgIDogXCJsaWdodC1tb2RlXCI7XG5cbiAgbGV0IGV4cGFuZGVkO1xuXG4gIGxldCBjaGlsZHJlbiA9IFtdO1xuICBpZiAoZGIuZGVzY2VuZGFudHMuaGFzKG5vdGVfcGF0aCkpIHtcbiAgICBjaGlsZHJlbiA9IGRiLmRlc2NlbmRhbnRzLmdldChub3RlX3BhdGgpLnNsaWNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldEV4cGFuZGVkKG5ld19tYXhfaW5kZW50OiBudW1iZXIpIHtcbiAgICBpZiAoaW5kZW50YXRpb24gPT0gMCkge1xuICAgICAgZXhwYW5kZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXZpZXcucGx1Z2luLnNldHRpbmdzLmlzRXhwYW5kZWQobm90ZV9wYXRoKSkge1xuICAgICAgZXhwYW5kZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwYW5kZWQgPSB0cnVlID8gaW5kZW50YXRpb24gPCBuZXdfbWF4X2luZGVudCA6IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXNldEV4cGFuZGVkKGV4cGFuZE1hbi5pbml0aWFsX21heF9pbmRlbnQpO1xuXG4gIGV4cGFuZE1hbi5yZWdpc3RlclJlZHJhd0Rlc2NlbmRhbnRDYWxsYmFjayhyZXNldEV4cGFuZGVkKTtcbjwvc2NyaXB0PlxuXG48IS0tIGV4cGFuZCBzdmctLT5cbjxzdmcgZGlzcGxheT1cIm5vbmVcIj5cbiAgPHN5bWJvbFxuICAgIGlkPVwiZXhwYW5kLWFycm93LXN2Z1wiXG4gICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgPjxwYXRoIGQ9XCJNMjIgMTJsLTIwIDEyIDUtMTItNS0xMnpcIiAvPlxuICA8L3N5bWJvbD48L3N2Z1xuPlxuPCEtLXN0YXJ0IGRlc2NlbmRhbnRzIHZpZXctLT5cbnsjaWYgaW5kZW50YXRpb24gPT0gMCAmJiBjaGlsZHJlbi5sZW5ndGggPT0gMH1cbiAgTm8gZGVzY2VuZGFudHNcbns6ZWxzZX1cbiAgPGxpIGNsYXNzPVwiY29udGFpbmVyIHtkYXJrX21vZGV9XCI+XG4gICAgPHA+XG4gICAgICB7I2lmIGluZGVudGF0aW9uID09IDB9XG4gICAgICAgIHtHZXREaXNwbGF5TmFtZShub3RlX3BhdGgsIGRiKX1cbiAgICAgIHs6ZWxzZX17I2lmIGNoaWxkcmVuLmxlbmd0aCA+IDB9XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzPVwiZXhwYW5kLWFycm93XCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGV4cGFuZGVkID0gIWV4cGFuZGVkO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImtub3duIHBhdGg6IFwiLCBub3RlX3BhdGgpO1xuICAgICAgICAgICAgICB2aWV3LnBsdWdpbi5zZXR0aW5ncy5zZXRFeHBhbmRlZChub3RlX3BhdGgsIGV4cGFuZGVkKTtcbiAgICAgICAgICAgICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kTWFuLm9uTWFudWFsRXhwYW5kKCk7XG4gICAgICAgICAgICAgICAgZXhwYW5kTWFuLmxvZ0luZGVudChpbmRlbnRhdGlvbiArIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgPjxkaXYgY2xhc3M9XCJleHBhbmRfYnV0dG9uXCI+XG4gICAgICAgICAgICAgIHsjaWYgZXhwYW5kZWR9XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cInN2ZyBleHBhbmRlZFwiPlxuICAgICAgICAgICAgICAgICAgPHVzZSBocmVmPVwiI2V4cGFuZC1hcnJvdy1zdmdcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICB7OmVsc2V9PHN2ZyBjbGFzcz1cInN2Z1wiPlxuICAgICAgICAgICAgICAgICAgPHVzZSBocmVmPVwiI2V4cGFuZC1hcnJvdy1zdmdcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgPC9kaXY+PC9zcGFuXG4gICAgICAgICAgPnsvaWZ9XG4gICAgICAgIDxhXG4gICAgICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgICAgICB0aXRsZT17bm90ZV9wYXRofVxuICAgICAgICAgIG9uOmNsaWNrPXsoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIE5hdmlnYXRlVG9GaWxlKGFwcCwgbm90ZV9wYXRoLCBldmVudCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHtHZXREaXNwbGF5TmFtZShub3RlX3BhdGgsIGRiKX08L2FcbiAgICAgICAgPlxuICAgICAgey9pZn1cbiAgICA8L3A+XG4gICAgPHVsPlxuICAgICAgeyNpZiBjaGlsZHJlbi5sZW5ndGggPiAwICYmIGV4cGFuZGVkfVxuICAgICAgICB7I2VhY2ggY2hpbGRyZW4gYXMgY2hpbGR9XG4gICAgICAgICAgPHN2ZWx0ZTpzZWxmXG4gICAgICAgICAgICB7ZGJ9XG4gICAgICAgICAgICB7YXBwfVxuICAgICAgICAgICAgbm90ZV9wYXRoPXtjaGlsZH1cbiAgICAgICAgICAgIGluZGVudGF0aW9uPXtpbmRlbnRhdGlvbiArIDF9XG4gICAgICAgICAgICB7dmlld31cbiAgICAgICAgICAgIHtleHBhbmRNYW59XG4gICAgICAgICAgLz5cbiAgICAgICAgey9lYWNofVxuICAgICAgey9pZn1cbiAgICA8L3VsPlxuICA8L2xpPlxuey9pZn1cblxuPHN0eWxlPlxuICBhLmxpbmsge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuXG4gIHVsIHtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgbGkge1xuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gIH1cblxuICB1bCB7XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gIH1cblxuICBsaSB7XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gICAgYm9yZGVyOiA1cHggc29saWQgZGFya2dyYXk7XG4gICAgYm9yZGVyLXdpZHRoOiAwIDAgMXB4IDFweDtcbiAgfVxuICBsaS5kYXJrLW1vZGUge1xuICAgIHBhZGRpbmctbGVmdDogMWVtO1xuICAgIGJvcmRlcjogNXB4IHNvbGlkIGdyYXk7XG4gICAgYm9yZGVyLXdpZHRoOiAwIDAgMXB4IDFweDtcbiAgfVxuICBsaS5jb250YWluZXIge1xuICAgIGJvcmRlci1ib3R0b206IDBweDtcbiAgfVxuXG4gIGxpIHAge1xuICAgIG1hcmdpbjogMDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgdG9wOiAwZW07XG4gICAgcGFkZGluZzogMXB4IDAgMXB4IDA7XG4gIH1cblxuICBsaSB1bCB7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIGRhcmtncmF5O1xuICAgIG1hcmdpbi1sZWZ0OiAtMWVtO1xuICAgIHBhZGRpbmctbGVmdDogMmVtO1xuICB9XG5cbiAgbGkuZGFyay1tb2RlIHVsIHtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQgZ3JheTtcbiAgfVxuXG4gIHVsIGxpOmxhc3QtY2hpbGQgdWwge1xuICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgIG1hcmdpbi1sZWZ0OiAtMTdweDtcbiAgfVxuXG4gIC5leHBhbmQtYXJyb3cge1xuICAgIGNvbG9yOiBkYXJrZ3JleTtcbiAgfVxuXG4gIC5leHBhbmQtYXJyb3c6aG92ZXIge1xuICAgIGNvbG9yOiBncmF5O1xuICB9XG5cbiAgZGl2LmV4cGFuZF9idXR0b24ge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxuXG4gIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcge1xuICAgIHdpZHRoOiAxNHB4O1xuICAgIGhlaWdodDogMTRweDtcbiAgICBtYXJnaW4tdG9wOiA1cHg7XG4gIH1cblxuICBsaS5saWdodC1tb2RlIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcge1xuICAgIGZpbGw6IGRhcmtncmV5O1xuICB9XG4gIGxpLmxpZ2h0LW1vZGUgZGl2LmV4cGFuZF9idXR0b24gc3ZnLnN2Zzpob3ZlciB7XG4gICAgZmlsbDogZ3JheTtcbiAgfVxuXG4gIGxpLmRhcmstbW9kZSBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnIHtcbiAgICBmaWxsOiBncmF5O1xuICB9XG4gIGxpLmRhcmstbW9kZSBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnOmhvdmVyIHtcbiAgICBmaWxsOiBsaWdodGdyYXk7XG4gIH1cblxuICBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnLmV4cGFuZGVkIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7XG4gIH1cbjwvc3R5bGU+XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuICBpbXBvcnQgdHlwZSB7IERCTWFuYWdlciB9IGZyb20gXCIuLi9kYlwiO1xuICBpbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbiAgaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG4gIGltcG9ydCB7IG9uTW91bnQgfSBmcm9tIFwic3ZlbHRlXCI7XG5cbiAgZXhwb3J0IGxldCB2aWV3OiBhbnk7XG4gIGV4cG9ydCBsZXQgcGx1Z2luOiBNT0NQbHVnaW47XG4gIGxldCBzZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcblxuICBsZXQgZGFya19tb2RlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aGVtZS1kYXJrXCIpXG4gICAgPyBcImRhcmstbW9kZVwiXG4gICAgOiBcImxpZ2h0LW1vZGVcIjtcbjwvc2NyaXB0PlxuXG48ZGl2IGlkPVwiYWxsLWNvbnRhaW5lclwiPlxuICA8ZGl2IGlkPVwibWFpbl9tb2NfZGl2XCIgY2xhc3M9e2RhcmtfbW9kZX0+XG4gICAgPGgzIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXJcIj5UaGlzIHBsdWdpbiBoYXMgYmVlbiB1cGRhdGVkPC9oMz5cblxuICAgIFRoZSBsYXRlc3QgY2hhbmdlcyBhcmU6XG4gICAgPHVsPlxuICAgICAgPGxpPlxuICAgICAgICBBZGRlZCBhIHNldHRpbmdzIG9wdGlvbiB0byBkaXNwbGF5IHRoZSBwYXRoIGZyb20gdGhlIENlbnRyYWwgTm90ZVxuICAgICAgICBzdGFydGluZyBhdCB0aGUgQ2VudHJhbCBOb3RlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnRseSBvcGVuIG9uZS5cbiAgICAgIDwvbGk+XG4gICAgICA8YnIgLz5cbiAgICAgIDxsaT5cbiAgICAgICAgRml4ZWQgYSBidWcgd2hlcmUgbGlua3MgdXNpbmcgIyBvciBeIHRvIHJlZmVyZW5jZSBoZWFkaW5ncyBvciBibG9ja3NcbiAgICAgICAgd2VyZW4ndCBmb2xsb3dlZFxuICAgICAgPC9saT5cbiAgICA8L3VsPlxuICAgIFNlZSZuYnNwOzxhXG4gICAgICBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL1JvYmluLUhhdXB0LTEvT2JzaWRpYW4tTWFwLW9mLUNvbnRlbnQvcmVsZWFzZXNcIlxuICAgID5cbiAgICAgIGhlcmU8L2FcbiAgICA+XG4gICAgZm9yIGEgY29tcGxldGUgaGlzdG9yeSBvZiBhbGwgY2hhbmdlcy48YnIgLz48YnIgLz5cbiAgICBUaGFuayB5b3UgZm9yIHVzaW5nIHRoaXMgcGx1Z2luISBZb3UgY2FuIGRvbmF0ZSB0byBzdXBwb3J0IGl0J3MgZGV2ZWxvcG1lbnQgb25cbiAgICA8YSBocmVmPVwiaHR0cHM6Ly93d3cucGF0cmVvbi5jb20vUm9iaW5IYXVwdFwiPlBhdHJlb248L2E+LFxuICAgIDxhIGhyZWY9XCJodHRwczovL2tvLWZpLmNvbS9yb2JpbmhhdXB0XCI+S28tRmk8L2E+XG4gICAgb3JcbiAgICA8YSBocmVmPVwiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9wYXlwYWxtZS9yb2JpbmhhdXB0XCI+UGF5UGFsPC9hPi5cblxuICAgIDxiciAvPjxiciAvPlxuICAgIDxidXR0b25cbiAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgIHNldHRpbmdzLnNldCh7IGRvX3Nob3dfdXBkYXRlX25vdGljZTogZmFsc2UgfSk7XG4gICAgICAgIHZpZXcucmVyZW5kZXIoKTtcbiAgICAgIH19XG4gICAgICBzdHlsZT1cImRpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87XCI+Q2xvc2U8L2J1dHRvblxuICAgID5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPHN0eWxlPlxuICBkaXYjYWxsLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuXG4gIGRpdiNtYWluX21vY19kaXYge1xuICAgIHBhZGRpbmc6IGluaXRpYWw7XG4gICAgd2lkdGg6IGluaXRpYWw7XG4gICAgaGVpZ2h0OiBpbml0aWFsO1xuICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICBkaXYjbWFpbl9tb2NfZGl2LmRhcmstbW9kZSB7XG4gICAgY29sb3I6ICNkY2RkZGU7XG4gIH1cbjwvc3R5bGU+XG4iLCJpbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbmltcG9ydCB7XG4gIEdldERpc3BsYXlOYW1lLFxuICBJc0N0cmxQcmVzc2VkLFxuICBOYXZpZ2F0ZVRvRmlsZSxcbiAgTG9nLFxufSBmcm9tIFwiLi4vLi4vdXRpbHNcIjtcbmltcG9ydCB7IG9uTW91bnQgfSBmcm9tIFwic3ZlbHRlXCI7XG5cbmV4cG9ydCBjbGFzcyBleHBhbmRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgTG9nKFwiZXhwYW5kTWFuYWdlciBjcmVhdGVkXCIpO1xuICB9XG5cbiAgaW5pdGlhbF9tYXhfaW5kZW50ID0gMztcbiAgcmVkcmF3Q2FsbGJhY2tzID0gW107XG4gIG1hbnVhbGx5X2V4cGFuZGVkID0gZmFsc2U7XG5cbiAgZXhwYW5kKCkge1xuICAgIGlmICh0aGlzLm1hbnVhbGx5X2V4cGFuZGVkKSB7XG4gICAgICB0aGlzLnJlcmVuZGVyRGVzY2VuZGFudHModGhpcy5pbml0aWFsX21heF9pbmRlbnQpO1xuICAgICAgdGhpcy5tYW51YWxseV9leHBhbmRlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlcmVuZGVyRGVzY2VuZGFudHModGhpcy5pbml0aWFsX21heF9pbmRlbnQgKyAxKTtcbiAgICB9XG4gIH1cblxuICBjb250cmFjdCgpIHtcbiAgICBpZiAodGhpcy5pbml0aWFsX21heF9pbmRlbnQgPiAxKSB7XG4gICAgICB0aGlzLnJlcmVuZGVyRGVzY2VuZGFudHModGhpcy5pbml0aWFsX21heF9pbmRlbnQgLSAxKTtcbiAgICAgIHRoaXMuaW5pdGlhbF9tYXhfaW5kZW50IC09IDE7XG4gICAgfVxuICB9XG5cbiAgcmVyZW5kZXJEZXNjZW5kYW50cyhuZXdfbWF4X2luZGVudCkge1xuICAgIExvZyhcInJlZHJhd2luZywgbmV3IG1heF9pbmRlbnQgXCIgKyBTdHJpbmcobmV3X21heF9pbmRlbnQpKTtcbiAgICBmb3IgKGxldCBmdW5jIG9mIHRoaXMucmVkcmF3Q2FsbGJhY2tzKSB7XG4gICAgICBmdW5jKG5ld19tYXhfaW5kZW50KTtcbiAgICB9XG4gIH1cbiAgcmVnaXN0ZXJSZWRyYXdEZXNjZW5kYW50Q2FsbGJhY2socmVkcmF3OiBGdW5jdGlvbikge1xuICAgIHRoaXMucmVkcmF3Q2FsbGJhY2tzLnB1c2gocmVkcmF3KTtcbiAgfVxuXG4gIGxvZ0luZGVudChpbmRlbnQ6IG51bWJlcikge1xuICAgIExvZyhcImluZGVudGF0aW9uIHJlZ2lzdGVyZWQ6IFwiICsgU3RyaW5nKGluZGVudCkpO1xuICAgIGlmIChpbmRlbnQgPiB0aGlzLmluaXRpYWxfbWF4X2luZGVudCkge1xuICAgICAgdGhpcy5pbml0aWFsX21heF9pbmRlbnQgPSBpbmRlbnQ7XG4gICAgfVxuICB9XG4gIG9uTWFudWFsRXhwYW5kKCkge1xuICAgIHRoaXMubWFudWFsbHlfZXhwYW5kZWQgPSB0cnVlO1xuICB9XG59XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgeyBMSU5LRURfQk9USCwgTElOS0VEX1RPLCBMSU5LRURfRlJPTSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbiAgaW1wb3J0IHR5cGUgTU9DVmlldyBmcm9tIFwiLi4vdmlld1wiO1xuICBpbXBvcnQgeyBHZXREaXNwbGF5TmFtZSwgSXNDdHJsUHJlc3NlZCwgTmF2aWdhdGVUb0ZpbGUsIExvZyB9IGZyb20gXCIuLi91dGlsc1wiO1xuICBpbXBvcnQgTm9MaW5rSW1hZ2UgZnJvbSBcIi4vTm9MaW5rSW1hZ2Uuc3ZlbHRlXCI7XG4gIGltcG9ydCBEZXNjZW5kYW50cyBmcm9tIFwiLi9EZXNjZW5kYW50cy5zdmVsdGVcIjtcbiAgaW1wb3J0IFVwZGF0ZU5vdGljZSBmcm9tIFwiLi9VcGRhdGVOb3RpY2Uuc3ZlbHRlXCI7XG4gIGltcG9ydCB7IGV4cGFuZE1hbmFnZXIgfSBmcm9tIFwiLi9oZWxwZXJzL2V4cGFuZE1hbmFnZXJcIjtcblxuICBleHBvcnQgbGV0IHZpZXc6IE1PQ1ZpZXc7XG4gIGV4cG9ydCBsZXQgcGF0aHM6IFtzdHJpbmcsIHN0cmluZ11bXVtdO1xuICBleHBvcnQgbGV0IGVycm9yczogc3RyaW5nW107XG5cbiAgLy9sZXQgb3Blbl9maWxlX2ZvbGRlcjI9dmlldy5vcGVuX2ZpbGVfcGF0aC5zcGxpdChcIi9cIilcbiAgLy9vcGVuX2ZpbGVfZm9sZGVyMi5wb3AoKVxuICAvL2xldCBvcGVuX2ZpbGVfZm9sZGVyPW9wZW5fZmlsZV9mb2xkZXIyLmpvaW4oJy8nKVxuICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW47XG4gIGxldCBhcHAgPSBwbHVnaW4uYXBwO1xuICBsZXQgZGIgPSBwbHVnaW4uZGI7XG4gIGxldCBjbl9wYXRoID0gcGx1Z2luLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIik7XG4gIGxldCBleHBhbmRNYW4gPSBuZXcgZXhwYW5kTWFuYWdlcigpO1xuICBsZXQgc2Nyb2xsX3VwX2RpdjtcbiAgbGV0IHNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICBsZXQgbWFpbl9kaXY7XG4gIGxldCBzY3JvbGxfdXBfZGl2X2FscmVhZHlfdmlzaWJsZSA9IGZhbHNlO1xuICBsZXQgaXNfcGlubmVkID0gZmFsc2U7XG48L3NjcmlwdD5cblxuPGRpdlxuICBpZD1cImFsbC1jb250YWluZXJcIlxuICBjbGFzcz17ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aGVtZS1kYXJrXCIpXG4gICAgPyBcImRhcmstbW9kZVwiXG4gICAgOiBcImxpZ2h0LW1vZGVcIn1cbj5cbiAgPGRpdiBpZD1cInRvcC1iYXJcIj5cbiAgICA8ZGl2XG4gICAgICBpZD1cInBpbi1maWxlXCJcbiAgICAgIGNsYXNzPVwiYWN0aW9uIGlzLXBpbm5lZFwiXG4gICAgICBjbGFzczppcy1waW5uZWQ9e2lzX3Bpbm5lZH1cbiAgICAgIHRpdGxlPXtpc19waW5uZWQgPyBcIlVucGluIHRoaXMgZmlsZVwiIDogXCJQaW4gdGhpcyBmaWxlXCJ9XG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICB2aWV3LmlzX3Bpbm5lZCA9ICF2aWV3LmlzX3Bpbm5lZDtcbiAgICAgICAgaXNfcGlubmVkID0gIWlzX3Bpbm5lZDtcbiAgICAgICAgaWYgKHZpZXcuaXNfcGlubmVkKSB7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgPlxuICAgICAgPHN2Z1xuICAgICAgICBpZD1cIm5vdC1waW5uZWRcIlxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICA+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgZD1cIk0xOCA2YzAgMi45NzItMi4xNjQgNS40MzMtNSA1LjkxdjguMDloLTJ2LTguMDg5Yy0yLjgzNi0uNDc3LTUtMi45MzgtNS01LjkxMSAwLTMuMzE0IDIuNjg3LTYgNi02czYgMi42ODcgNiA2em0tMiAwYzAtMi4yMDYtMS43OTQtNC00LTRzLTQgMS43OTQtNCA0IDEuNzk0IDQgNCA0IDQtMS43OTQgNC00em0tNS42MTggMi4wOThjMi4zMzkgMS44NCA1LjU2My0uNzIyIDMuODU4LTMuNTM5LjMxMyAyLjIzNy0xLjk1NiA0LjAzLTMuODU4IDMuNTM5em00LjYxOCA4LjE5NXYyLjA1MmwuNDM4LjEwN2MxLjcwNi40OTMgMi40OTYgMS4wMjcgMi41MDcgMS41NDctLjAxMS41Mi0uODAxIDEuMDU0LTIuNTA3IDEuNTQ3LTIuMDk3LjYwNi00Ljc4Ni42MDQtNi44NzQuMDAxLTEuNjk1LS40ODktMi41MTUtMS4wMjEtMi41MTUtMS41NDdzLjgyLTEuMDU4IDIuNTE2LTEuNTQ4bC40MzYtLjEwNnYtMi4wNTJjLTIuOTMyLjU5My01LjAwMSAyLjAyOC01LjAwMSAzLjcwNiAwIDIuMjA5IDMuNTgxIDQgOCA0czgtMS43OTEgOC00YzAtMS42NzgtMi4wNjktMy4xMTMtNS0zLjcwN3pcIlxuICAgICAgICAvPlxuICAgICAgPC9zdmc+PHN2Z1xuICAgICAgICBpZD1cInBpbm5lZFwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICB3aWR0aD1cIjI0XCJcbiAgICAgICAgaGVpZ2h0PVwiMjRcIlxuICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgPjxwYXRoXG4gICAgICAgICAgZD1cIk0gMTIsMiBDIDguNjg3LDIgNiw0LjY4NyA2LDggYyAwLDIuOTcyIDIuMTY0LDUuNDMzIDUsNS45MSBWIDIwIGggMiB2IC02LjA4OSBjIDIuODM2LC0wLjQ3NyA1LC0yLjkzOCA1LC01LjkxIEMgMTgsNC42ODcgMTUuMzEzLDIgMTIsMiBaIE0gMTEuMjkzLDYuNTA4IEMgMTAuNzQ0LDcuMTU4IDkuODcsNy4zMDggOS4zNCw2Ljg0MSA4LjgxLDYuMzc0IDguODI0LDUuNDY5IDkuMzc0LDQuODE5IDkuOTIyLDQuMTY5IDEwLjc5Niw0LjAyIDExLjMyNiw0LjQ4NiBjIDAuNTMsMC40NjcgMC41MTUsMS4zNzIgLTAuMDMzLDIuMDIyIHogTSAyMCwyMCBjIDAsMi4yMDkgLTMuNTgxLDQgLTgsNCAtNC40MTksMCAtOCwtMS43OTEgLTgsLTQgMCwtMS42NzggMi4wNjksLTMuMTEzIDUsLTMuNzA3IHYgMi4wNTIgTCA4LjU2NCwxOC40NTEgQyA2Ljg2OSwxOC45NDIgNi4wNDgsMTkuNDc0IDYuMDQ4LDIwIGMgMCwwLjUyNiAwLjgyLDEuMDU4IDIuNTE2LDEuNTQ4IDIuMDg4LDAuNjAzIDQuNzc3LDAuNjA1IDYuODc0LC0xMGUtNCBDIDE3LjE0NCwyMS4wNTQgMTcuOTM0LDIwLjUyIDE3Ljk0NSwyMCAxNy45MzQsMTkuNDggMTcuMTQ0LDE4Ljk0NiAxNS40MzgsMTguNDUzIEwgMTUsMTguMzQ2IHYgLTIuMDUyIGMgMi45MzEsMC41OTMgNSwyLjAyOCA1LDMuNzA2IHpcIlxuICAgICAgICAvPjwvc3ZnXG4gICAgICA+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cInRvcC1iYXItZmxleFwiPlxuICAgICAgPGRpdlxuICAgICAgICBpZD1cInVwZGF0ZS1tb2NcIlxuICAgICAgICBjbGFzcz1cImFjdGlvblwiXG4gICAgICAgIHRpdGxlPVwiVXBkYXRlIHRoZSBNYXAgb2YgQ29udGVudFwiXG4gICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgZGIudXBkYXRlKCk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk0yMyAxMmMwIDEuMDQyLS4xNTQgMi4wNDUtLjQyNSAzaC0yLjEwMWMuMzM1LS45NC41MjYtMS45NDcuNTI2LTMgMC00Ljk2Mi00LjAzNy05LTktOS0xLjcwNiAwLTMuMjk2LjQ4NC00LjY1NSAxLjMxNGwxLjg1OCAyLjY4NmgtNi45OTRsMi4xNTItNyAxLjg0OSAyLjY3M2MxLjY4NC0xLjA0OSAzLjY1OS0xLjY3MyA1Ljc5LTEuNjczIDYuMDc0IDAgMTEgNC45MjUgMTEgMTF6bS02LjM1NCA3LjY5MmMtMS4zNTcuODI2LTIuOTQ0IDEuMzA4LTQuNjQ2IDEuMzA4LTQuOTYyIDAtOS00LjAzOC05LTkgMC0xLjA1My4xOTEtMi4wNi41MjUtM2gtMi4xYy0uMjcxLjk1NS0uNDI1IDEuOTU4LS40MjUgMyAwIDYuMDc1IDQuOTI1IDExIDExIDExIDIuMTI3IDAgNC4wOTktLjYyMSA1Ljc4LTEuNjY3bDEuODUzIDIuNjY3IDIuMTUyLTYuOTg5aC02Ljk5NGwxLjg1NSAyLjY4MXpcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2XG4gICAgICAgIGlkPVwibWludXMtZXhwYW5kXCJcbiAgICAgICAgY2xhc3M9XCJhY3Rpb25cIlxuICAgICAgICB0aXRsZT1cIlNob3cgZmV3ZXIgZGVzY2VuZGFudHNcIlxuICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgIGV4cGFuZE1hbi5jb250cmFjdCgpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTIgMmM1LjUxNCAwIDEwIDQuNDg2IDEwIDEwcy00LjQ4NiAxMC0xMCAxMC0xMC00LjQ4Ni0xMC0xMCA0LjQ4Ni0xMCAxMC0xMHptMC0yYy02LjYyNyAwLTEyIDUuMzczLTEyIDEyczUuMzczIDEyIDEyIDEyIDEyLTUuMzczIDEyLTEyLTUuMzczLTEyLTEyLTEyem02IDEzaC0xMnYtMmgxMnYyelwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgaWQ9XCJwbHVzLWV4cGFuZFwiXG4gICAgICAgIGNsYXNzPVwiYWN0aW9uXCJcbiAgICAgICAgdGl0bGU9XCJTaG93IG1vcmUgZGVzY2VuZGFudHNcIlxuICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgIGV4cGFuZE1hbi5leHBhbmQoKTtcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPHN2Z1xuICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgIGNsaXAtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICA+XG4gICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIGQ9XCJNMTIgMmM1LjUxNCAwIDEwIDQuNDg2IDEwIDEwcy00LjQ4NiAxMC0xMCAxMC0xMC00LjQ4Ni0xMC0xMCA0LjQ4Ni0xMCAxMC0xMHptMC0yYy02LjYyNyAwLTEyIDUuMzczLTEyIDEyczUuMzczIDEyIDEyIDEyIDEyLTUuMzczIDEyLTEyLTUuMzczLTEyLTEyLTEyem02IDEzaC01djVoLTJ2LTVoLTV2LTJoNXYtNWgydjVoNXYyelwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2XG4gICAgICBiaW5kOnRoaXM9e3Njcm9sbF91cF9kaXZ9XG4gICAgICBpZD1cInNjcm9sbF91cFwiXG4gICAgICB0aXRsZT1cIlNjcm9sbCB0byB0b3BcIlxuICAgICAgY2xhc3M9XCJhY3Rpb25cIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgbWFpbl9kaXYuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH19XG4gICAgPlxuICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICAgID48cGF0aFxuICAgICAgICAgIGQ9XCJNMTUgNS44MjlsNi4xNzEgNi4xNzEtNi4xNzEgNi4xNzF2LTMuMTcxaC0xM3YtNmgxM3YtMy4xNzF6bS0yLTQuODI5djZoLTEzdjEwaDEzdjZsMTEtMTEtMTEtMTF6XCJcbiAgICAgICAgLz48L3N2Z1xuICAgICAgPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdlxuICAgIGlkPVwibWFpbl9tb2NfZGl2XCJcbiAgICBiaW5kOnRoaXM9e21haW5fZGl2fVxuICAgIG9uOnNjcm9sbD17KGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5zY3JvbGxUb3AgPiAzMCAmJiAhc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUpIHtcbiAgICAgICAgc2Nyb2xsX3VwX2Rpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBzY3JvbGxfdXBfZGl2X2FscmVhZHlfdmlzaWJsZSA9IHRydWU7XG4gICAgICB9XG4gICAgICAvL2hpZGUgdGhlIGFycm93IGlmIHVzZXIgc2Nyb2xscyBiYWNrIHRvIHRoZSB0b3BcbiAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LnNjcm9sbFRvcCA8PSAzMCAmJiBzY3JvbGxfdXBfZGl2X2FscmVhZHlfdmlzaWJsZSkge1xuICAgICAgICBzY3JvbGxfdXBfZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgc2Nyb2xsX3VwX2Rpdl9hbHJlYWR5X3Zpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9fVxuICA+XG4gICAgeyNpZiBzZXR0aW5ncy5nZXQoXCJkb19zaG93X3VwZGF0ZV9ub3RpY2VcIil9XG4gICAgICA8VXBkYXRlTm90aWNlIHt2aWV3fSB7cGx1Z2lufSAvPlxuICAgIHs6ZWxzZSBpZiBlcnJvcnMubGVuZ3RofVxuICAgICAgPGRpdiBjbGFzcz1cImVycm9yc1wiPlxuICAgICAgICB7QGh0bWwgZXJyb3JzWzBdfVxuICAgICAgPC9kaXY+XG4gICAgezplbHNlIGlmIHBhdGhzLmxlbmd0aCA9PSAwfVxuICAgICAgVGhpcyBmaWxlIGRvZXNuJ3QgaGF2ZSBhbnkgY29ubmVjdGlvbnMgdG8gPGFcbiAgICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgICAgdGl0bGU9e2NuX3BhdGh9XG4gICAgICAgIG9uOmNsaWNrPXsoZXZlbnQpID0+IE5hdmlnYXRlVG9GaWxlKGFwcCwgY25fcGF0aCwgZXZlbnQpfVxuICAgICAgPlxuICAgICAgICB7R2V0RGlzcGxheU5hbWUoY25fcGF0aCwgZGIpfTwvYVxuICAgICAgPi48YnIgLz48YnIgLz4gTGluayBpdCB0byBhIGZpbGUgdGhhdCBpcyBwYXJ0IG9mIHlvdXIgTWFwIG9mIENvbnRlbnQuIFRoZW5cbiAgICAgIDxhXG4gICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgZGIudXBkYXRlKCk7XG4gICAgICAgIH19PnVwZGF0ZTwvYVxuICAgICAgPlxuICAgICAgeW91ciBNYXAgb2YgQ29udGVudCBhbmQgd2F0Y2ggaXQgZ3JvdyE8YnIgLz5cbiAgICAgIDxOb0xpbmtJbWFnZSAvPlxuICAgIHs6ZWxzZX1cbiAgICAgIHsjZWFjaCBwYXRocyBhcyBwYXRofVxuICAgICAgICA8ZGl2IGNsYXNzPVwicGF0aFwiPlxuICAgICAgICAgIHsjaWYgc2V0dGluZ3MuZ2V0KFwiTU9DX3BhdGhfc3RhcnRzX2F0X0NOXCIpfVxuICAgICAgICAgICAgeyNlYWNoIHBhdGggYXMgcGF0aGl0ZW0sIGl9XG4gICAgICAgICAgICAgIHsjaWYgcGF0aGl0ZW1bMV0gPT0gTElOS0VEX0ZST019XG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJwYXRoLWFycm93XCJcbiAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0gMi4xMTcsNyA5LjY0NCwwLjc2NSA5LDAgMCw3LjUyMSA5LDE1IDkuNjQ1LDE0LjIzNiAyLjExNiw4IEggMjQgViA3IFpcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz57OmVsc2UgaWYgcGF0aGl0ZW1bMV0gPT0gTElOS0VEX1RPfVxuICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwicGF0aC1hcnJvd1wiXG4gICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMTUuMDVcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgIGQ9XCIgTSAyMS44ODMsOCAxNC4zNTYsMTQuMjM1IDE1LDE1IDI0LDcuNDc5IDE1LDAgMTQuMzU1LDAuNzY0IDIxLjg4NCw3IEggMCB2IDEgelwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPns6ZWxzZSBpZiBwYXRoaXRlbVsxXSA9PSBMSU5LRURfQk9USH1cbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cInBhdGgtYXJyb3dcIlxuICAgICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDE1LjA1XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICBkPVwiTSA5IDAgTCAwIDcuNTIxNDg0NCBMIDkgMTUgTCA5LjY0NDUzMTIgMTQuMjM2MzI4IEwgMi4xMTUyMzQ0IDggTCAyMS44ODI4MTIgOCBMIDE0LjM1NTQ2OSAxNC4yMzQzNzUgTCAxNSAxNSBMIDI0IDcuNDc4NTE1NiBMIDE1IDAgTCAxNC4zNTU0NjkgMC43NjM2NzE4OCBMIDIxLjg4NDc2NiA3IEwgMi4xMTcxODc1IDcgTCA5LjY0NDUzMTIgMC43NjU2MjUgTCA5IDAgeiBcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz57L2lmfXsjaWYgaSA9PSBwYXRoLmxlbmd0aCAtIDF9PHNwYW4gdGl0bGU9e3BhdGhpdGVtWzBdfT5cbiAgICAgICAgICAgICAgICAgIHtHZXREaXNwbGF5TmFtZShwYXRoaXRlbVswXSwgZGIpfTwvc3BhblxuICAgICAgICAgICAgICAgID57OmVsc2V9PGFcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgICAgICAgICB0aXRsZT17cGF0aGl0ZW1bMF19XG4gICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGV2ZW50KSA9PiBOYXZpZ2F0ZVRvRmlsZShhcHAsIHBhdGhpdGVtWzBdLCBldmVudCl9XG4gICAgICAgICAgICAgICAgICA+e0dldERpc3BsYXlOYW1lKHBhdGhpdGVtWzBdLCBkYil9PC9hXG4gICAgICAgICAgICAgICAgPnsvaWZ9XG4gICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgeyNlYWNoIHBhdGgucmV2ZXJzZSgpIGFzIHBhdGhpdGVtLCBpfVxuICAgICAgICAgICAgICB7I2lmIGkgPT0gMH08c3BhbiB0aXRsZT17cGF0aGl0ZW1bMF19PlxuICAgICAgICAgICAgICAgICAge0dldERpc3BsYXlOYW1lKHBhdGhpdGVtWzBdLCBkYil9PC9zcGFuXG4gICAgICAgICAgICAgICAgPns6ZWxzZX08YVxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsaW5rXCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtwYXRoaXRlbVswXX1cbiAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZXZlbnQpID0+IE5hdmlnYXRlVG9GaWxlKGFwcCwgcGF0aGl0ZW1bMF0sIGV2ZW50KX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7R2V0RGlzcGxheU5hbWUocGF0aGl0ZW1bMF0sIGRiKX08L2FcbiAgICAgICAgICAgICAgICA+ey9pZn17I2lmIHBhdGhpdGVtWzFdID09IExJTktFRF9GUk9NfTxzdmdcbiAgICAgICAgICAgICAgICAgIGNsYXNzPVwicGF0aC1hcnJvd1wiXG4gICAgICAgICAgICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMTUuMDVcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgIGQ9XCIgTSAyMS44ODMsOCAxNC4zNTYsMTQuMjM1IDE1LDE1IDI0LDcuNDc5IDE1LDAgMTQuMzU1LDAuNzY0IDIxLjg4NCw3IEggMCB2IDEgelwiXG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPns6ZWxzZSBpZiBwYXRoaXRlbVsxXSA9PSBMSU5LRURfVE99PHN2Z1xuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJwYXRoLWFycm93XCJcbiAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0gMi4xMTcsNyA5LjY0NCwwLjc2NSA5LDAgMCw3LjUyMSA5LDE1IDkuNjQ1LDE0LjIzNiAyLjExNiw4IEggMjQgViA3IFpcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz57OmVsc2UgaWYgcGF0aGl0ZW1bMV0gPT0gTElOS0VEX0JPVEh9PHN2Z1xuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJwYXRoLWFycm93XCJcbiAgICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0gOSAwIEwgMCA3LjUyMTQ4NDQgTCA5IDE1IEwgOS42NDQ1MzEyIDE0LjIzNjMyOCBMIDIuMTE1MjM0NCA4IEwgMjEuODgyODEyIDggTCAxNC4zNTU0NjkgMTQuMjM0Mzc1IEwgMTUgMTUgTCAyNCA3LjQ3ODUxNTYgTCAxNSAwIEwgMTQuMzU1NDY5IDAuNzYzNjcxODggTCAyMS44ODQ3NjYgNyBMIDIuMTE3MTg3NSA3IEwgOS42NDQ1MzEyIDAuNzY1NjI1IEwgOSAwIHogXCJcbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+ey9pZn1cbiAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICB7L2lmfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJyIC8+XG4gICAgICB7L2VhY2h9XG5cbiAgICAgIDxiciAvPlxuICAgICAgPHVsPlxuICAgICAgICA8RGVzY2VuZGFudHNcbiAgICAgICAgICB7ZGJ9XG4gICAgICAgICAge2FwcH1cbiAgICAgICAgICB7dmlld31cbiAgICAgICAgICBub3RlX3BhdGg9e3ZpZXcub3Blbl9maWxlX3BhdGh9XG4gICAgICAgICAgaW5kZW50YXRpb249ezB9XG4gICAgICAgICAge2V4cGFuZE1hbn1cbiAgICAgICAgLz5cbiAgICAgIDwvdWw+XG4gICAgey9pZn1cbiAgPC9kaXY+XG4gIDwhLS17b3Blbl9maWxlX2ZvbGRlcn0tLT5cbjwvZGl2PlxuXG48c3R5bGU+XG4gIGRpdiNhbGwtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgZGl2I3RvcC1iYXIge1xuICAgIG1pbi1oZWlnaHQ6IDMwcHg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZ3JpZDtcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyO1xuICAgIGdyaWQtZ2FwOiAxMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgfVxuXG4gIGRpdiN0b3AtYmFyIGRpdiNwaW4tZmlsZSBzdmcjcGlubmVkIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG4gIGRpdiN0b3AtYmFyIGRpdiNwaW4tZmlsZS5pcy1waW5uZWQgc3ZnI3Bpbm5lZCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cblxuICBkaXYjdG9wLWJhciBkaXYjcGluLWZpbGUuaXMtcGlubmVkIHN2ZyNub3QtcGlubmVkIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgZGl2I3RvcC1iYXItZmxleCB7XG4gICAgbWluLWhlaWdodDogMzBweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB9XG4gIGRpdiN0b3AtYmFyIGRpdi5hY3Rpb24ge1xuICAgIGhlaWdodDogMjBweDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBtYXJnaW46IDVweDtcbiAgfVxuICBkaXYjdG9wLWJhciBkaXYuYWN0aW9uIHN2ZyB7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGZpbGw6IGRhcmtncmV5O1xuICB9XG4gIGRpdiN0b3AtYmFyIGRpdi5hY3Rpb246aG92ZXIgc3ZnIHtcbiAgICBmaWxsOiBncmV5O1xuICB9XG4gIGRpdi5kYXJrLW1vZGUgZGl2I3RvcC1iYXIgZGl2LmFjdGlvbiBzdmcge1xuICAgIGhlaWdodDogMjBweDtcbiAgICB3aWR0aDogMjBweDtcbiAgICBmaWxsOiBncmV5O1xuICB9XG4gIGRpdi5kYXJrLW1vZGUgZGl2I3RvcC1iYXIgZGl2LmFjdGlvbjpob3ZlciBzdmcge1xuICAgIGZpbGw6IGRhcmtncmV5O1xuICB9XG4gIGRpdiNtYWluX21vY19kaXYge1xuICAgIHBhZGRpbmc6IGluaXRpYWw7XG4gICAgd2lkdGg6IGluaXRpYWw7XG4gICAgaGVpZ2h0OiBpbml0aWFsO1xuICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIGZsZXg6IDE7XG4gIH1cblxuICBkaXYuZGFyay1tb2RlIHtcbiAgICBjb2xvcjogI2RjZGRkZTtcbiAgfVxuXG4gIGRpdiNzY3JvbGxfdXAge1xuICAgIGp1c3RpZnktc2VsZjogZmxleC1lbmQ7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIGRpdiNzY3JvbGxfdXAge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBjb2xvcjogZGFya2dyZXk7XG4gIH1cblxuICBkaXYjc2Nyb2xsX3VwIHN2ZyB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gIH1cblxuICBkaXYubGlnaHQtbW9kZSBkaXYjc2Nyb2xsX3VwIHN2ZyB7XG4gICAgZmlsbDogZGFya2dyYXk7XG4gIH1cbiAgZGl2LmxpZ2h0LW1vZGUgZGl2I3Njcm9sbF91cDpob3ZlciBzdmcge1xuICAgIGZpbGw6IGdyYXk7XG4gIH1cblxuICBkaXYuZGFyay1tb2RlIGRpdiNzY3JvbGxfdXAgc3ZnIHtcbiAgICBmaWxsOiBncmF5O1xuICB9XG4gIGRpdi5kYXJrLW1vZGUgZGl2I3Njcm9sbF91cDpob3ZlciBzdmcge1xuICAgIGZpbGw6IGRhcmtncmF5O1xuICB9XG4gIGEubGluayB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG4gIHVsIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDA7XG4gIH1cblxuICBzdmcucGF0aC1hcnJvdyB7XG4gICAgbWFyZ2luLXJpZ2h0OiAzcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDNweDtcbiAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgd2lkdGg6IDI0cHg7XG4gICAgaGVpZ2h0OiAwLjdlbTtcbiAgfVxuICBkaXYuZGFyay1tb2RlIHN2Zy5wYXRoLWFycm93IHtcbiAgICBmaWxsOiBsaWdodGdyYXk7XG4gIH1cbiAgLmVycm9ycyB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICB3aWR0aDogaW5pdGlhbDtcbiAgICBoZWlnaHQ6IGluaXRpYWw7XG4gICAgcG9zaXRpb246IGluaXRpYWw7XG4gICAgb3ZlcmZsb3cteTogaW5pdGlhbDtcbiAgICBvdmVyZmxvdy13cmFwOiBpbml0aWFsO1xuICB9XG48L3N0eWxlPlxuIiwiaW1wb3J0IFwic3ZlbHRlXCI7XG5cbmltcG9ydCB7IEl0ZW1WaWV3LCBMaW5rQ2FjaGUsIE5vdGljZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IE1PQ19WSUVXX1RZUEUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcbmltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5pbXBvcnQgdHlwZSB7IFBhdGggfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IFZpZXcgZnJvbSBcIi4vc3ZlbHRlL1ZpZXcuc3ZlbHRlXCI7XG5pbXBvcnQgdHlwZSB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1PQ1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIGRiOiBEQk1hbmFnZXI7XG4gIF9hcHA6IFZpZXc7XG4gIHBsdWdpbjogTU9DUGx1Z2luO1xuICBzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyO1xuICBvcGVuX2ZpbGVfcGF0aDogc3RyaW5nO1xuXG4gIG1heF9pbmRlbnQ6IG51bWJlciA9IDU7XG4gIGlzX3Bpbm5lZCA9IGZhbHNlO1xuICBtb25pdG9yaW5nX25vdGU6IHN0cmluZztcbiAgbW9uaXRvcmluZ19ub3RlX2xpbmtzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IE1PQ1BsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuZGIgPSB0aGlzLnBsdWdpbi5kYjtcbiAgICB0aGlzLnNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICAgIHRoaXMuYXBwID0gdGhpcy5wbHVnaW4uYXBwO1xuXG4gICAgLy8gcmVnaXN0ZXIgd2l0aCB0aGUgbWFpbiBjbGFzc1xuICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyVmlld0luc3RhbmNlKHRoaXMpO1xuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB0aGlzLmluaXQoKSk7XG5cbiAgICAvLyByZXJlbmRlciBvbiBjc3MgY2hhbmdlIHRvIGFkYXB0IHRvIGRhcmsvbGlnaHQgbW9kZSBjaGFuZ2VzXG4gICAgLy8gVE9ETyBwYXNzIGNvbW1hbmQgdG8gc3ZlbHRlLCBub3QgcmVjcmVhdGUgaXRcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiY3NzLWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIC8vIHVwZGF0ZSB0aGUgcGF0aCB2aWV3IGV2ZXJ5IHRpbWUgYSBmaWxlIGlzIG9wZW5lZFxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGUtb3BlblwiLCAoZmlsZTogVEZpbGUpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzX3Bpbm5lZCkge1xuICAgICAgICAgIHRoaXMubW9uaXRvck5vdGUoKTtcbiAgICAgICAgICB0aGlzLnJlcmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLm1vbml0b3JOb3RlKCk7XG4gICAgdGhpcy5yZXJlbmRlcigpO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCk6IFByb21pc2U8dm9pZD4ge31cblxuICAvKiogcmVsb2FkIHBhdGhzIGFuZCByZWNyZWF0ZSB0aGUgc3ZlbHRlIGluc3RhbmNlICovXG4gIHJlcmVuZGVyKCk6IHZvaWQge1xuICAgIExvZyhcIlJlcmVuZGVyIGNhbGxlZCBvbiB2aWV3XCIpO1xuXG4gICAgLy8gZGVzdHJveSBvbGQgcGF0aHZpZXcvZXJyb3J2aWV3IGluc3RhbmNlXG4gICAgLy8gc2V0IHN5bWJvbCB0byB1bmRlZmluZWQgdG8gYXZvaWQgXCJUaGlzIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZFwiIG1lc3NhZ2VcbiAgICBpZiAodGhpcy5fYXBwKSB7XG4gICAgICB0aGlzLl9hcHAuJGRlc3Ryb3koKTtcbiAgICAgIHRoaXMuX2FwcCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgZXJyb3JzID0gW107XG5cbiAgICBpZiAodGhpcy5kYi5kYXRhYmFzZV91cGRhdGluZykge1xuICAgICAgZXJyb3JzLnB1c2goXCJVcGRhdGluZy4uLlwiKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmRiLmRhdGFiYXNlX2NvbXBsZXRlKSB7XG4gICAgICBlcnJvcnMucHVzaChcbiAgICAgICAgYFlvdXIgTWFwIG9mIENvbnRlbnQgY291bGRuJ3QgYmUgY3JlYXRlZC48YnI+PGJyPiBNYWtlIHN1cmUgeW91ciBDZW50cmFsIE5vdGUgcGF0aCAnJHt0aGlzLnNldHRpbmdzLmdldChcbiAgICAgICAgICBcIkNOX3BhdGhcIlxuICAgICAgICApfScgaXMgY29ycmVjdC4gWW91IGNhbiBjaGFuZ2UgdGhpcyBwYXRoIGluIHRoZSBzZXR0aW5ncyB0YWIuYFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkgPT0gbnVsbCkge1xuICAgICAgZXJyb3JzLnB1c2goXCJObyBmaWxlIGlzIG9wZW5cIik7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHRoaXMuc2V0dGluZ3MuaXNFeGx1ZGVkRmlsZSh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpKVxuICAgICkge1xuICAgICAgZXJyb3JzLnB1c2goXCJUaGlzIGZpbGUgaGFzIGJlZW4gZXhjbHVkZWQgZnJvbSB0aGUgTWFwIG9mIENvbnRlbnQuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9wZW5fZmlsZV9wYXRoID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5wYXRoO1xuICAgICAgaWYgKHRoaXMuZGIuZ2V0Tm90ZUZyb21QYXRoKHRoaXMub3Blbl9maWxlX3BhdGgpID09IHVuZGVmaW5lZCkge1xuICAgICAgICBlcnJvcnMucHVzaChcIlVwZGF0aW5nLi4uXCIpO1xuICAgICAgICB0aGlzLmRiLnVwZGF0ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHBhdGhzID0gW107XG4gICAgaWYgKGVycm9ycy5sZW5ndGggPT0gMCkge1xuICAgICAgbGV0IGFsbF9wYXRocyA9IHRoaXMuZGIuZmluZFBhdGhzKHRoaXMub3Blbl9maWxlX3BhdGgpO1xuICAgICAgaWYgKGFsbF9wYXRocy5sZW5ndGggPT0gMCkge1xuICAgICAgICBMb2coXCJObyBwYXRocyB0byB0aGlzIG5vdGVcIik7XG4gICAgICB9XG5cbiAgICAgIHBhdGhzID0gYWxsX3BhdGhzLm1hcCgocDogUGF0aCkgPT4gcC5pdGVtcy5zbGljZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuX2ZpbGVfcGF0aCA9IFwiTm9uZVwiO1xuICAgICAgcGF0aHMgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLl9hcHAgPSBuZXcgVmlldyh7XG4gICAgICB0YXJnZXQ6ICh0aGlzIGFzIGFueSkuY29udGVudEVsLFxuICAgICAgcHJvcHM6IHsgdmlldzogdGhpcywgcGF0aHM6IHBhdGhzLCBlcnJvcnM6IGVycm9ycyB9LFxuICAgIH0pO1xuICB9XG5cbiAgb25DbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBMb2coXCJWaWV3IGNsb3NpbmdcIik7XG5cbiAgICBpZiAodGhpcy5fYXBwKSB7XG4gICAgICB0aGlzLl9hcHAuJGRlc3Ryb3koKTtcbiAgICAgIHRoaXMuX2FwcCA9IHVuZGVmaW5lZDsgLy8gc2V0IHN5bWJvbCB0byB1bmRlZmluZWQgdG8gYXZvaWQgXCJUaGlzIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZFwiIG1lc3NhZ2VcbiAgICB9XG5cbiAgICB0aGlzLnBsdWdpbi51bnJlZ2lzdGVyVmlld0luc3RhbmNlKHRoaXMpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgYXN5bmMgbW9uaXRvck5vdGUoKSB7XG4gICAgbGV0IHJlcmVuZGVyID0gZmFsc2U7XG4gICAgbGV0IGFjdGl2ZV9maWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoYWN0aXZlX2ZpbGUgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZ2V0KFwiYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2VcIikpIHtcbiAgICAgIExvZyhcIm5vdCBtb25pdG9yaW5nIG5vdGUgYmVjYXVzZSBkaXNhYmxlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGFjdGl2ZV9maWxlID09IG51bGwgfHwgdGhpcy5zZXR0aW5ncy5pc0V4bHVkZWRGaWxlKGFjdGl2ZV9maWxlKSkge1xuICAgICAgTG9nKFwibm90IG1vbml0b3JpbmcgYmVjYXVzZSBubyBmaWxlIC8gZXhjbHVkZWQgZmlsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5tb25pdG9yaW5nX25vdGUgJiZcbiAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUodGhpcy5tb25pdG9yaW5nX25vdGUpID09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgTG9nKFwibm90ZSBuYW1lIG11c3QgaGF2ZSBjaGFuZ2VkXCIpO1xuICAgICAgcmVyZW5kZXIgPSB0cnVlO1xuICAgIH1cbiAgICBsZXQgcGF0aCA9IGFjdGl2ZV9maWxlLnBhdGg7XG5cbiAgICBMb2coXCJNb25pdG9ybm90ZSBjYWxsZWQgb246IFwiICsgcGF0aCk7XG4gICAgTG9nKFwiT2xkIG1vbml0b3Jpbmcgbm90ZTogXCIgKyB0aGlzLm1vbml0b3Jpbmdfbm90ZSk7XG4gICAgaWYgKFxuICAgICAgdGhpcy5tb25pdG9yaW5nX25vdGUgJiZcbiAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUodGhpcy5tb25pdG9yaW5nX25vdGUpXG4gICAgKSB7XG4gICAgICBpZiAoIShwYXRoID09PSB0aGlzLm1vbml0b3Jpbmdfbm90ZSkpIHtcbiAgICAgICAgbGV0IG5vd19saW5rcyA9IHRoaXMuZGIuZ2V0TGlua3NGcm9tTm90ZSh0aGlzLm1vbml0b3Jpbmdfbm90ZSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhKFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkobm93X2xpbmtzKSA9PVxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5tb25pdG9yaW5nX25vdGVfbGlua3MpXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBMb2coXCJsaW5rcyBjaGFuZ2VkIVwiKTtcbiAgICAgICAgICByZXJlbmRlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5tb25pdG9yaW5nX25vdGUgPSBwYXRoO1xuICAgIHRoaXMubW9uaXRvcmluZ19ub3RlX2xpbmtzID0gdGhpcy5kYi5nZXRMaW5rc0Zyb21Ob3RlKHBhdGgpO1xuICAgIGlmIChyZXJlbmRlcikge1xuICAgICAgdGhpcy5kYi51cGRhdGUodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gTU9DX1ZJRVdfVFlQRTtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiTWFwIG9mIENvbnRlbnRcIjtcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJzdGFja2VkLWxldmVsc1wiO1xuICB9XG59XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgdHlwZSB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vZGJcIjtcbiAgaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XG4gIGltcG9ydCB7IG9uTW91bnQgfSBmcm9tIFwic3ZlbHRlXCI7XG5cbiAgaW1wb3J0IHsgTG9nLCBHZXRBbGxGb2xkZXJzIH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5cbiAgZXhwb3J0IGxldCBhcHA6IEFwcDtcbiAgZXhwb3J0IGxldCBwbHVnaW46IE1PQ1BsdWdpbjtcbiAgbGV0IGV4Y2x1ZGVkbGlzdDtcbiAgbGV0IGV4Y2x1ZGVkX2ZvbGRlcnMgPSBwbHVnaW4uc2V0dGluZ3MuZ2V0KFwiZXhsdWRlZF9mb2xkZXJzXCIpO1xuICAvLyBUT0RPIHNob3cgYWxsIGV4bHVkZWQgZmlsZXMgaW4gVGV4dEVkaXQgbm90IGxpc3RcbiAgLy8gU2VsZWN0IGJveCBiYXNlZCBvbiBodHRwczovL3d3dy5jLXNoYXJwY29ybmVyLmNvbS9VcGxvYWRGaWxlL21haGFrZ3VwdGEvYWRkLWFuZC1yZW1vdmUtbGlzdGJveC1pdGVtcy1pbi1qYXZhc2NyaXB0L1xuICBsZXQgYWxsX2ZvbGRlcnMgPSBHZXRBbGxGb2xkZXJzKGFwcCk7XG5cbiAgdmFyIGxpc3Rfb3B0aW9uc19ubyA9IDA7XG4gIGxldCBleGNsdWRlZF9maWxlcyA9IGFsbEV4Y2x1ZGVkRmlsZXMoKTtcbiAgb25Nb3VudCgoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNlbGVjdCBlbnRyaWVzIGZvciBhbGwgYWxyZWFkeSBleGNsdWRlZCBmb2xkZXJzXG4gICAgZXhjbHVkZWRfZm9sZGVycy5mb3JFYWNoKChmb2xkZXIpID0+IHtcbiAgICAgIGV4Y2x1ZGVkbGlzdC5vcHRpb25zW2xpc3Rfb3B0aW9uc19ub10gPSBuZXcgT3B0aW9uKGZvbGRlciwgZm9sZGVyKTtcbiAgICAgIGxpc3Rfb3B0aW9uc19ubysrO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBhbGxFeGNsdWRlZEZpbGVzKCkge1xuICAgIGxldCBhbGxfZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKS5tYXAoKGZpbGUpID0+IGZpbGUucGF0aCk7XG5cbiAgICByZXR1cm4gYWxsX2ZpbGVzLmZpbHRlcigocGF0aF90b19maWxlKSA9PiB7XG4gICAgICByZXR1cm4gZXhjbHVkZWRfZm9sZGVycy5zb21lKChwYXRoOiBzdHJpbmcpID0+XG4gICAgICAgIHBhdGhfdG9fZmlsZS5zdGFydHNXaXRoKHBhdGgpXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgbGV0IGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlO1xuICBsZXQgZXhsdWRlX3BhdGhfaW5wdXQ7XG4gIGxldCBzaG93X2FsbF9oaWRkZW4gPSBmYWxzZTtcblxuICAvKiogdXBkYXRlIHRoZSBsaXN0IG9mIGV4bHVkZWQgZmlsZXMgYW5kIHNhdmUgdGhlIHVwZGF0ZWQgc2V0dGluZ3MqL1xuICBmdW5jdGlvbiBzYXZlKCkge1xuICAgIGV4Y2x1ZGVkX2ZpbGVzID0gYWxsRXhjbHVkZWRGaWxlcygpO1xuICAgIHBsdWdpbi5zZXR0aW5ncy5zZXQoeyBleGx1ZGVkX2ZvbGRlcnM6IGV4Y2x1ZGVkX2ZvbGRlcnMgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRWYWx1ZSgpIHtcbiAgICBpZiAoIWV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFJldHVybiBpZiBmb2xkZXIgZG9lc24ndCBleGlzdFxuICAgIGlmICghYWxsX2ZvbGRlcnMuY29udGFpbnMoZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUpKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBjaG9vc2UgYSBmb2xkZXIgZnJvbSB0aGUgbGlzdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gUmV0dXJuIGlmIGZvbGRlciBhbHJlYWR5IG9uIGxpc3RcbiAgICBpZiAoZXhjbHVkZWRfZm9sZGVycy5jb250YWlucyhleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSkpIHtcbiAgICAgIGV4bHVkZV9wYXRoX2lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlID0gXCJcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gYWRkIG9wdGlvbiB0byBzZWxlY3QgYm94XG4gICAgbGV0IEFkZE9wdCA9IG5ldyBPcHRpb24oZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUsIGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlKTtcbiAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm8rK10gPSBBZGRPcHQ7XG4gICAgZXhjbHVkZWRfZm9sZGVycy5wdXNoKGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlKTtcblxuICAgIC8vIHJlc2V0IGlucHV0IGZpZWxkXG4gICAgZXhsdWRlX3BhdGhfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlID0gXCJcIjtcblxuICAgIHNhdmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZVZhbHVlKCkge1xuICAgIGxldCBzID0gMTtcbiAgICBsZXQgSW5kZXg7XG4gICAgaWYgKGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gaXRlbSBmcm9tIHRoZSBsaXN0XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgd2hpbGUgKHMgPiAwKSB7XG4gICAgICBJbmRleCA9IGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4O1xuXG4gICAgICBpZiAoSW5kZXggPj0gMCkge1xuICAgICAgICBleGNsdWRlZF9mb2xkZXJzLnJlbW92ZShleGNsdWRlZGxpc3Qub3B0aW9uc1tJbmRleF0udmFsdWUpO1xuXG4gICAgICAgIGV4Y2x1ZGVkbGlzdC5vcHRpb25zW0luZGV4XSA9IG51bGw7XG5cbiAgICAgICAgLS1saXN0X29wdGlvbnNfbm87XG4gICAgICB9IGVsc2UgcyA9IDA7XG4gICAgfVxuICAgIHNhdmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuPC9zY3JpcHQ+XG5cbjxoMj5FeGNsdWRlZCBmb2xkZXJzPC9oMj5cblxuPGRpdiBpZD1cImV4bHVkZWQtZm9sZGVyc1wiPlxuICA8ZGl2IGlkPVwibGlzdC1leGNsdWRlZFwiPlxuICAgIDxzZWxlY3RcbiAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZWRsaXN0fVxuICAgICAgaWQ9XCJleGNsdWRlZC1zZWxlY3RcIlxuICAgICAgbmFtZT1cImxzdFZhbHVlXCJcbiAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgIG11bHRpcGxlXG4gICAgLz5cbiAgPC9kaXY+XG4gIDxkaXYgaWQ9XCJhZGQtcmVtb3ZlLWV4bHVkZWRcIj5cbiAgICA8bGFiZWwgZm9yPVwibXlCcm93c2VyXCI+IEFkZCBhIGZvbGRlcjo8L2xhYmVsPlxuICAgIDxpbnB1dFxuICAgICAgYmluZDp0aGlzPXtleGx1ZGVfcGF0aF9pbnB1dH1cbiAgICAgIGJpbmQ6dmFsdWU9e2V4bHVkZV9wYXRoX2lucHV0X3ZhbHVlfVxuICAgICAgbGlzdD1cImV4bHVkZS1mb2xkZXJcIlxuICAgICAgaWQ9XCJFeGx1ZGVkLWZvbGRlcnNcIlxuICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgcGxhY2Vob2xkZXI9XCJTdGFydCB0eXBpbmcgdG8gc2VlIHN1Z2dlc3Rpb25zLi4uXCJcbiAgICAgIHN0eWxlPVwid2lkdGg6MzAwcHg7XCJcbiAgICAvPlxuICAgIDxkYXRhbGlzdCBpZD1cImV4bHVkZS1mb2xkZXJcIj5cbiAgICAgIHsjZWFjaCBhbGxfZm9sZGVycyBhcyBmb2xkZXJfcGF0aH1cbiAgICAgICAgPG9wdGlvbiB2YWx1ZT17Zm9sZGVyX3BhdGh9IC8+XG4gICAgICB7L2VhY2h9XG4gICAgPC9kYXRhbGlzdD48YnIgLz5cbiAgICA8YnIgLz5cbiAgICA8aW5wdXRcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgbmFtZT1cImFkZFwiXG4gICAgICB2YWx1ZT1cIkFkZFwiXG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICBhZGRWYWx1ZSgpO1xuICAgICAgfX1cbiAgICAvPjxiciAvPlxuICAgIDxpbnB1dFxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICBuYW1lPVwiZGVsZXRlXCJcbiAgICAgIHZhbHVlPVwiRGVsZXRlXCJcbiAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgIGRlbGV0ZVZhbHVlKCk7XG4gICAgICB9fVxuICAgIC8+PGJyIC8+PGJyIC8+XG4gIDwvZGl2PlxuICA8ZGl2IGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkXCI+XG4gICAgQ3VycmVudGx5IGV4Y2x1ZGVkIGZpbGVzOiB7ZXhjbHVkZWRfZmlsZXMubGVuZ3RofVxuICAgIDxpbnB1dFxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICBuYW1lPVwidG9nZ2xlLXNob3ctaGlkZGVuXCJcbiAgICAgIHZhbHVlPXtzaG93X2FsbF9oaWRkZW4gPyBcIkhpZGVcIiA6IFwiU2hvd1wifVxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgc2hvd19hbGxfaGlkZGVuID0gIXNob3dfYWxsX2hpZGRlbjtcbiAgICAgIH19XG4gICAgLz5cbiAgICA8ZGl2XG4gICAgICBzdHlsZT17c2hvd19hbGxfaGlkZGVuID8gXCJkaXNwbGF5OmJsb2NrXCIgOiBcImRpc3BsYXk6bm9uZVwifVxuICAgICAgaWQ9XCJjdXJyZW50bHktZXhjbHVkZWQtbGlzdFwiXG4gICAgPlxuICAgICAgPHVsPlxuICAgICAgICB7I2VhY2ggZXhjbHVkZWRfZmlsZXMgYXMgZmlsZV9wYXRofVxuICAgICAgICAgIDxsaT57ZmlsZV9wYXRofTwvbGk+XG4gICAgICAgIHsvZWFjaH1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgKiB7XG4gICAgZm9udC1zaXplOiAxZW07XG4gIH1cblxuICBoMiB7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgfVxuXG4gIGRpdiNleGx1ZGVkLWZvbGRlcnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICAgIGNvbHVtbi1nYXA6IDEwcHg7XG4gIH1cblxuICBkaXYjbGlzdC1leGNsdWRlZCB7XG4gICAgd2lkdGg6IDMwMHB4O1xuICB9XG5cbiAgI2V4Y2x1ZGVkLXNlbGVjdCB7XG4gICAgaGVpZ2h0OiAzMDBweDtcbiAgICB3aWR0aDogMzAwcHg7XG4gICAgZm9udC1zaXplOiAxZW07XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gIH1cblxuICAjYWRkLXJlbW92ZS1leGx1ZGVkIHtcbiAgICBoZWlnaHQ6IDMwMHB4O1xuICAgIHdpZHRoOiAzMDBweDtcbiAgfVxuICBkaXYjY3VycmVudGx5LWV4Y2x1ZGVkIHtcbiAgICB3aWR0aDogNjAwcHg7XG4gICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgfVxuICBkaXYjY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3Qge1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICAgIG1heC1oZWlnaHQ6IDI2MHB4O1xuICB9XG48L3N0eWxlPlxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHR5cGUgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gIGltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2RiXCI7XG4gIGltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuXG4gIGV4cG9ydCBsZXQgYXBwOiBBcHA7XG4gIGV4cG9ydCBsZXQgcGx1Z2luOiBNT0NQbHVnaW47XG4gIGxldCBleGNsdWRlZGxpc3Q7XG5cbiAgbGV0IGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cyA9IHBsdWdpbi5zZXR0aW5ncy5nZXQoXG4gICAgXCJleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHNcIlxuICApO1xuICBsZXQgYWxsX2ZpbGVzID0gYXBwLnZhdWx0XG4gICAgLmdldEZpbGVzKClcbiAgICAubWFwKChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lICsgXCIuXCIgKyBmaWxlLmV4dGVuc2lvbik7XG5cbiAgbGV0IGV4Y2x1ZGVkX2ZpbGVzID0gYWxsRXhjbHVkZWRGaWxlcygpO1xuICAvLyBUT0RPIHNob3cgYWxsIGV4bHVkZWQgZmlsZXMgaW4gVGV4dEVkaXQgbm90IGxpc3RcblxuICAvLyBhZGQgYWxsIGV4aXN0aW5nIGV4Y2x1ZGVkIGZvbGRlcnMgdG8gc2VsZWN0IGVsZW1lbnRcblxuICB2YXIgbGlzdF9vcHRpb25zX25vID0gMDtcbiAgb25Nb3VudCgoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNlbGVjdCBlbnRyaWVzIGZvciBhbGwgYWxyZWFkeSBleGNsdWRlZCBmaWxlbmFtZSBjb21wb25lbnRzXG4gICAgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLmZvckVhY2goKGZvbGRlcikgPT4ge1xuICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbbGlzdF9vcHRpb25zX25vXSA9IG5ldyBPcHRpb24oZm9sZGVyLCBmb2xkZXIpO1xuICAgICAgbGlzdF9vcHRpb25zX25vKys7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGFsbEV4Y2x1ZGVkRmlsZXMoKSB7XG4gICAgcmV0dXJuIGFsbF9maWxlcy5maWx0ZXIoKGZpbGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgIHJldHVybiBleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHMuc29tZSgocGF0aDogc3RyaW5nKSA9PlxuICAgICAgICBmaWxlbmFtZS5jb250YWlucyhwYXRoKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuXG4gIGxldCBleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZTtcbiAgbGV0IGV4Y2x1ZGVfcGhyYXNlX2lucHV0O1xuICBsZXQgc2hvd19hbGxfaGlkZGVuID0gZmFsc2U7XG5cbiAgLyoqIHVwZGF0ZSB0aGUgbGlzdCBvZiBleGx1ZGVkIGZpbGVzIGFuZCBzYXZlIHRoZSB1cGRhdGVkIHNldHRpbmdzKi9cbiAgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICBleGNsdWRlZF9maWxlcyA9IGFsbEV4Y2x1ZGVkRmlsZXMoKTtcbiAgICBwbHVnaW4uc2V0dGluZ3Muc2V0KHtcbiAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50czogZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLFxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGFkZFZhbHVlKCkge1xuICAgIGlmICghZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gUmV0dXJuIGlmIGZvbGRlciBhbHJlYWR5IG9uIGxpc3RcbiAgICBpZiAoZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLmNvbnRhaW5zKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKSkge1xuICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUgPSBcIlwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFkZCBvcHRpb24gdG8gc2VsZWN0IGJveFxuICAgIGxldCBBZGRPcHQgPSBuZXcgT3B0aW9uKFxuICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUsXG4gICAgICBleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZVxuICAgICk7XG4gICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbbGlzdF9vcHRpb25zX25vKytdID0gQWRkT3B0O1xuICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cy5wdXNoKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKTtcbiAgICAvLyByZXNldCBpbnB1dCBmaWVsZFxuXG4gICAgZXhjbHVkZV9waHJhc2VfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlID0gXCJcIjtcblxuICAgIHNhdmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZVZhbHVlKCkge1xuICAgIGxldCBzID0gMTtcbiAgICBsZXQgSW5kZXg7XG4gICAgaWYgKGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gaXRlbSBmcm9tIHRoZSBsaXN0XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgd2hpbGUgKHMgPiAwKSB7XG4gICAgICBJbmRleCA9IGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4O1xuXG4gICAgICBpZiAoSW5kZXggPj0gMCkge1xuICAgICAgICBleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHMucmVtb3ZlKGV4Y2x1ZGVkbGlzdC5vcHRpb25zW0luZGV4XS52YWx1ZSk7XG5cbiAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbSW5kZXhdID0gbnVsbDtcblxuICAgICAgICAtLWxpc3Rfb3B0aW9uc19ubztcbiAgICAgIH0gZWxzZSBzID0gMDtcbiAgICB9XG4gICAgc2F2ZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG48L3NjcmlwdD5cblxuPGgyPkV4Y2x1ZGVkIGZpbGVuYW1lczwvaDI+XG5GaWxlbmFtZXMgdGhhdCBjb250YWluIHRoZXNlIHBocmFzZXMgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIE1hcCBvZiBDb250ZW50LlxuVGhhdCBhbHNvIGluY2x1ZGVzIHRoZSBmaWxlIGV4dGVuc2lvbi48YnIgLz48YnIgLz5cblxuPGRpdiBpZD1cImV4bHVkZS1maWxlbmFtZXNcIj5cbiAgPGRpdiBpZD1cImxpc3QtZXhjbHVkZWRcIj5cbiAgICA8c2VsZWN0XG4gICAgICBiaW5kOnRoaXM9e2V4Y2x1ZGVkbGlzdH1cbiAgICAgIGlkPVwiZXhjbHVkZWQtc2VsZWN0XCJcbiAgICAgIG5hbWU9XCJsc3RWYWx1ZVwiXG4gICAgICB0eXBlPVwidGV4dFwiXG4gICAgICBtdWx0aXBsZVxuICAgIC8+XG4gIDwvZGl2PlxuICA8ZGl2IGlkPVwiYWRkLXJlbW92ZS1leGx1ZGVkXCI+XG4gICAgPGxhYmVsIGZvcj1cIm15QnJvd3NlclwiPiBBZGQgYSBwaHJhc2U6PC9sYWJlbD5cbiAgICA8aW5wdXRcbiAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZV9waHJhc2VfaW5wdXR9XG4gICAgICBiaW5kOnZhbHVlPXtleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZX1cbiAgICAgIGlkPVwiRXhsdWRlZC1maWxlbmFtZXNcIlxuICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgc3R5bGU9XCJ3aWR0aDozMDBweDtcIlxuICAgIC8+XG4gICAgPGJyIC8+XG4gICAgPGJyIC8+XG4gICAgPGlucHV0XG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIG5hbWU9XCJhZGRcIlxuICAgICAgdmFsdWU9XCJBZGRcIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgYWRkVmFsdWUoKTtcbiAgICAgIH19XG4gICAgLz48YnIgLz5cbiAgICA8aW5wdXRcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgbmFtZT1cImRlbGV0ZVwiXG4gICAgICB2YWx1ZT1cIkRlbGV0ZVwiXG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICBkZWxldGVWYWx1ZSgpO1xuICAgICAgfX1cbiAgICAvPjxiciAvPjxiciAvPlxuICA8L2Rpdj5cbiAgPGRpdiBpZD1cImN1cnJlbnRseS1leGNsdWRlZFwiPlxuICAgIEN1cnJlbnRseSBleGNsdWRlZCBmaWxlczoge2V4Y2x1ZGVkX2ZpbGVzLmxlbmd0aH1cbiAgICA8aW5wdXRcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgbmFtZT1cInRvZ2dsZS1zaG93LWhpZGRlblwiXG4gICAgICB2YWx1ZT17c2hvd19hbGxfaGlkZGVuID8gXCJIaWRlXCIgOiBcIlNob3dcIn1cbiAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgIHNob3dfYWxsX2hpZGRlbiA9ICFzaG93X2FsbF9oaWRkZW47XG4gICAgICB9fVxuICAgIC8+XG4gICAgPGRpdlxuICAgICAgc3R5bGU9e3Nob3dfYWxsX2hpZGRlbiA/IFwiZGlzcGxheTpibG9ja1wiIDogXCJkaXNwbGF5Om5vbmVcIn1cbiAgICAgIGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3RcIlxuICAgID5cbiAgICAgIDx1bD5cbiAgICAgICAgeyNlYWNoIGV4Y2x1ZGVkX2ZpbGVzIGFzIGZpbGVfcGF0aH1cbiAgICAgICAgICA8bGk+e2ZpbGVfcGF0aH08L2xpPlxuICAgICAgICB7L2VhY2h9XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICoge1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICB9XG5cbiAgaDIge1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gIH1cblxuICBkaXYjZXhsdWRlLWZpbGVuYW1lcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgY29sdW1uLWdhcDogMTBweDtcbiAgfVxuXG4gIGRpdiNsaXN0LWV4Y2x1ZGVkIHtcbiAgICB3aWR0aDogMzAwcHg7XG4gIH1cblxuICAjZXhjbHVkZWQtc2VsZWN0IHtcbiAgICBoZWlnaHQ6IDMwMHB4O1xuICAgIHdpZHRoOiAzMDBweDtcbiAgICBmb250LXNpemU6IDFlbTtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgfVxuXG4gICNhZGQtcmVtb3ZlLWV4bHVkZWQge1xuICAgIGhlaWdodDogMzAwcHg7XG4gICAgd2lkdGg6IDMwMHB4O1xuICB9XG4gIGRpdiNjdXJyZW50bHktZXhjbHVkZWQge1xuICAgIHdpZHRoOiA2MDBweDtcbiAgICBtYXgtaGVpZ2h0OiAzMDBweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG4gIGRpdiNjdXJyZW50bHktZXhjbHVkZWQtbGlzdCB7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LWhlaWdodDogMjYwcHg7XG4gIH1cbjwvc3R5bGU+XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICBpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG4gIGltcG9ydCB7IExvZywgR2V0QWxsRm9sZGVycyB9IGZyb20gXCIuLi91dGlsc1wiO1xuICBpbXBvcnQgRXhjbHVkZWRGb2xkZXJzIGZyb20gXCIuL3NldHRpbmdzL0V4Y2x1ZGVkRm9sZGVycy5zdmVsdGVcIjtcbiAgaW1wb3J0IEV4Y2x1ZGVkRmlsZW5hbWVzIGZyb20gXCIuL3NldHRpbmdzL0V4Y2x1ZGVkRmlsZW5hbWVzLnN2ZWx0ZVwiO1xuXG4gIGV4cG9ydCBsZXQgYXBwOiBBcHA7XG4gIGV4cG9ydCBsZXQgcGx1Z2luOiBNT0NQbHVnaW47XG5cbiAgbGV0IGNuX2lucHV0O1xuICBsZXQgc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XG5cbiAgLy8gVE9ETyBjaGVjayB0aGUgZGIgaXMgY29tcGxldGUgYmVmb3JlIGFsbG93IHNldHRpbmdzIGNoYW5nZXMgKG1heWJlIGhhdmUgdGhpcyBzdmVsdGUgb25seSBkbyB0aGF0IGFuZCBsb2FkIGFsbCBvdGhlciBjb21wb25lbnRzIGZyb20gb3RoZXIgc3ZlbHRlIGZpbGVzKVxuICAvLyBUT0RPIGxhenkgbG9hZCBhbGwgdGhlIGZpbGUgbmFtZXMgYW5kIGZvbGRlcnM/XG5cbiAgLy8gZ2V0IGxpc3Qgb2YgYWxsIGZpbGVzIGZvciBkcm9wZG93biBtZW51XG4gIGxldCBhbGxfZmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKS5tYXAoKGZpbGU6IFRGaWxlKSA9PiBmaWxlLnBhdGgpO1xuICBMb2coXCJDZW50cmFsIG5vdGUgcGF0aDogXCIgKyBzZXR0aW5ncy5nZXQoXCJDTl9wYXRoXCIpKTtcbiAgbGV0IGNuX3BhdGhfaW5wdXRfdmFsdWU7XG4gIGxldCBjdXJyZW50X3RsaSA9IHNldHRpbmdzLmdldChcIkNOX3BhdGhcIik7XG5cbiAgY29uc3QgdXBkYXRlQ05QYXRoID0gKCkgPT4ge1xuICAgIGlmICghY25fcGF0aF9pbnB1dF92YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBjaGFuZ2UgVExJIHBhdGhcbiAgICBzZXR0aW5ncy5zZXQoeyBDTl9wYXRoOiBjbl9wYXRoX2lucHV0X3ZhbHVlIH0pO1xuICAgIExvZyhcIk5ldyBjZW50cmFsIG5vdGUgcGF0aDogXCIgKyBjbl9wYXRoX2lucHV0X3ZhbHVlKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRsaV9wYXRoXCIpLnRleHRDb250ZW50ID0gY25fcGF0aF9pbnB1dF92YWx1ZTtcbiAgICBuZXcgTm90aWNlKFwiTmV3IENlbnRyYWwgTm90ZSBwYXRoIHNhdmVkXCIpO1xuXG4gICAgLy8gY2xlYXIgc2VsZWN0aW9uIGRyb3Bkb3duIGxpc3RcbiAgICBjbl9pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgY25fcGF0aF9pbnB1dF92YWx1ZSA9IFwiXCI7XG4gIH07XG48L3NjcmlwdD5cblxuPGRpdiBpZD1cInNldHRpbmdzLWNvbnRhaW5lclwiPlxuICA8ZGl2IGNsYXNzPVwicGF0aFwiPlxuICAgIDxoMj5QYXRoIG9mIHlvdXIgQ2VudHJhbCBOb3RlPC9oMj5cbiAgICBDdXJyZW50IHBhdGg6Jm5ic3A7PHNwYW4gaWQ9XCJ0bGlfcGF0aFwiPntjdXJyZW50X3RsaX08L3NwYW4+PGJyIC8+XG4gICAgPGxhYmVsIGZvcj1cIm15QnJvd3NlclwiPiBOZXcgcGF0aDo8L2xhYmVsPlxuICAgIDxpbnB1dFxuICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgYmluZDp0aGlzPXtjbl9pbnB1dH1cbiAgICAgIGJpbmQ6dmFsdWU9e2NuX3BhdGhfaW5wdXRfdmFsdWV9XG4gICAgICBsaXN0PVwibm90ZXNcIlxuICAgICAgaWQ9XCJDTl9zZWxlY3RcIlxuICAgICAgcGxhY2Vob2xkZXI9XCJTdGFydCB0eXBpbmcgdG8gc2VlIHN1Z2dlc3Rpb25zLi4uXCJcbiAgICAvPlxuXG4gICAgPGRhdGFsaXN0IGlkPVwibm90ZXNcIj5cbiAgICAgIHsjZWFjaCBhbGxfZmlsZXMgYXMgZmlsZXBhdGh9XG4gICAgICAgIDxvcHRpb24gdmFsdWU9e2ZpbGVwYXRofSAvPnsvZWFjaH1cbiAgICA8L2RhdGFsaXN0PlxuXG4gICAgPGJ1dHRvblxuICAgICAgaWQ9XCJ1cGRhdGVfVExJX3BhdGhfYnV0dG9uXCJcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgdXBkYXRlQ05QYXRoKCk7XG4gICAgICB9fT5TYXZlPC9idXR0b25cbiAgICA+XG4gIDwvZGl2PlxuICA8YnIgLz5cbiAgPGRpdj5cbiAgICA8aDI+QXV0by11cGRhdGluZyB0aGUgTWFwIG9mIENvbnRlbnQ8L2gyPlxuICAgIDxsYWJlbCBmb3I9XCJhdXRvLXVwZGF0ZS1maWxlLXN3aXRjaFwiXG4gICAgICA+VXBkYXRlIHdoZW4gc3dpdGNoaW5nIGJldHdlZW4gZmlsZXNcbiAgICA8L2xhYmVsPjxpbnB1dFxuICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgIGlkPVwiYXV0by11cGRhdGUtZmlsZS1zd2l0Y2hcIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgbGV0IGVuYWJsZWQgPSAhc2V0dGluZ3MuZ2V0KFwiYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2VcIik7XG4gICAgICAgIHNldHRpbmdzLnNldCh7XG4gICAgICAgICAgYXV0b191cGRhdGVfb25fZmlsZV9jaGFuZ2U6IGVuYWJsZWQsXG4gICAgICAgIH0pO1xuICAgICAgfX1cbiAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmdldChcImF1dG9fdXBkYXRlX29uX2ZpbGVfY2hhbmdlXCIpfVxuICAgIC8+XG4gIDwvZGl2PlxuICA8YnIgLz5cbiAgPGRpdj5cbiAgICA8aDI+UGF0aCBhbmQgZGVzY2VuZGFudHM8L2gyPlxuXG4gICAgPGxhYmVsIGZvcj1cIk1PQ19wYXRoX3N0YXJ0c19hdF9DTl9jaGVja2JveFwiXG4gICAgICA+RGlzcGxheSB0aGUgcGF0aCBmcm9tIHRoZSBDZW50cmFsIE5vdGUgc3RhcnRpbmcgYXQgdGhlIENlbnRyYWwgTm90ZVxuICAgIDwvbGFiZWw+PGlucHV0XG4gICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgaWQ9XCJNT0NfcGF0aF9zdGFydHNfYXRfQ05fY2hlY2tib3hcIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgbGV0IGVuYWJsZWQgPSAhc2V0dGluZ3MuZ2V0KFwiTU9DX3BhdGhfc3RhcnRzX2F0X0NOXCIpO1xuICAgICAgICBzZXR0aW5ncy5zZXQoe1xuICAgICAgICAgIE1PQ19wYXRoX3N0YXJ0c19hdF9DTjogZW5hYmxlZCxcbiAgICAgICAgfSk7XG4gICAgICB9fVxuICAgICAgY2hlY2tlZD17c2V0dGluZ3MuZ2V0KFwiTU9DX3BhdGhfc3RhcnRzX2F0X0NOXCIpfVxuICAgIC8+XG4gICAgPGJyIC8+XG4gICAgPGxhYmVsIGZvcj1cImRvX3JlbWVtYmVyX2V4cGFuZGVkX2NoZWNrYm94XCJcbiAgICAgID5SZW1lbWJlciB3aGV0aGVyIGEgZmlsZSdzIGRlc2NlbmRhbnRzIGFyZSBzaG93biBvciBoaWRkZW5cbiAgICA8L2xhYmVsPjxpbnB1dFxuICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgIGlkPVwiZG9fcmVtZW1iZXJfZXhwYW5kZWRfY2hlY2tib3hcIlxuICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgbGV0IGVuYWJsZWQgPSAhc2V0dGluZ3MuZ2V0KFwiZG9fcmVtZW1iZXJfZXhwYW5kZWRcIik7XG4gICAgICAgIHNldHRpbmdzLnNldCh7XG4gICAgICAgICAgZG9fcmVtZW1iZXJfZXhwYW5kZWQ6IGVuYWJsZWQsXG4gICAgICAgIH0pO1xuICAgICAgfX1cbiAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmdldChcImRvX3JlbWVtYmVyX2V4cGFuZGVkXCIpfVxuICAgIC8+XG4gIDwvZGl2PlxuICA8YnIgLz5cbiAgPEV4Y2x1ZGVkRm9sZGVycyB7YXBwfSB7cGx1Z2lufSAvPlxuICA8RXhjbHVkZWRGaWxlbmFtZXMge2FwcH0ge3BsdWdpbn0gLz5cbiAgPHA+XG4gICAgRm9yIHN1cHBvcnQgYW5kIHN1Z2dlc3RpbmcgZmVhdHVyZSBpZGVhcywgdmlzaXQgdGhlIHBsdWdpbidzIDxhXG4gICAgICBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL1JvYmluLUhhdXB0LTEvT2JzaWRpYW4tTWFwLW9mLUNvbnRlbnRcIlxuICAgID5cbiAgICAgIEdpdEh1YiBwYWdlPC9hXG4gICAgPlxuICAgIG9yXG4gICAgPGEgaHJlZj1cImh0dHBzOi8vZm9ydW0ub2JzaWRpYW4ubWQvdC9tYXAtb2YtY29udGVudC1wbHVnaW4tcmVsZWFzZS8yNTIwOVwiPlxuICAgICAgdGhpcyBwb3N0PC9hXG4gICAgPlxuICAgIGluIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBmb3J1bS5cbiAgICA8YnIgLz48YnIgLz5cbiAgICBZb3UgY2FuIHN1cHBvcnQgdGhlIGRldmVsb3BtZW50IGJ5IGRvbmF0aW5nIG9uXG4gICAgPGEgaHJlZj1cImh0dHBzOi8vd3d3LnBhdHJlb24uY29tL1JvYmluSGF1cHRcIj5QYXRyZW9uPC9hPixcbiAgICA8YSBocmVmPVwiaHR0cHM6Ly9rby1maS5jb20vcm9iaW5oYXVwdFwiPktvLUZpPC9hPlxuICAgIG9yIDxhIGhyZWY9XCJodHRwczovL3d3dy5wYXlwYWwuY29tL3BheXBhbG1lL3JvYmluaGF1cHRcIj5QYXlQYWw8L2E+LiBUaGFua1xuICAgIHlvdSFcbiAgPC9wPlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgI3NldHRpbmdzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuICAjQ05fc2VsZWN0IHtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIHdpZHRoOiA1MCU7XG4gICAgZm9udC1zaXplOiAxZW07XG4gIH1cbiAgI3VwZGF0ZV9UTElfcGF0aF9idXR0b24ge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgfVxuICBoMiB7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgfVxuPC9zdHlsZT5cbiIsImltcG9ydCB0eXBlIHsgQXBwLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IFBsdWdpblNldHRpbmdUYWIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zdmVsdGUvU2V0dGluZ3Muc3ZlbHRlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTU9DU2V0dGluZ3Mge1xuICBDTl9wYXRoOiBzdHJpbmc7XG4gIGV4bHVkZWRfZm9sZGVyczogc3RyaW5nW107XG4gIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50czogc3RyaW5nW107XG4gIHNldHRpbmdzX3ZlcnNpb246IHN0cmluZztcbiAgcGx1Z2luX3ZlcnNpb246IHN0cmluZztcbiAgZG9fc2hvd191cGRhdGVfbm90aWNlOiBib29sZWFuO1xuICBhdXRvX3VwZGF0ZV9vbl9maWxlX2NoYW5nZTogYm9vbGVhbjtcbiAgZG9fcmVtZW1iZXJfZXhwYW5kZWQ6IGJvb2xlYW47XG4gIE1PQ19wYXRoX3N0YXJ0c19hdF9DTjogYm9vbGVhbjtcbiAgZmlsZV9kZXNjZW5kYW50c19leHBhbmRlZDoge307XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNT0NTZXR0aW5ncyA9IHtcbiAgQ05fcGF0aDogXCJDZW50cmFsIE5vdGUubWRcIixcbiAgZXhsdWRlZF9mb2xkZXJzOiBbXSxcbiAgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzOiBbXSxcbiAgc2V0dGluZ3NfdmVyc2lvbjogXCIwLjEuMTVcIixcbiAgcGx1Z2luX3ZlcnNpb246IFwiMC4xLjE1XCIsXG4gIGRvX3Nob3dfdXBkYXRlX25vdGljZTogZmFsc2UsXG4gIGF1dG9fdXBkYXRlX29uX2ZpbGVfY2hhbmdlOiB0cnVlLFxuICBkb19yZW1lbWJlcl9leHBhbmRlZDogZmFsc2UsXG4gIE1PQ19wYXRoX3N0YXJ0c19hdF9DTjogZmFsc2UsXG4gIGZpbGVfZGVzY2VuZGFudHNfZXhwYW5kZWQ6IHt9LFxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XG4gIHNldHRpbmdzOiBNT0NTZXR0aW5ncztcbiAgcGx1Z2luOiBNT0NQbHVnaW47XG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogYW55KSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICB7fSxcbiAgICAgIERFRkFVTFRfU0VUVElOR1MsXG4gICAgICB0aGlzLlVwZ3JhZGVTZXR0aW5nc1ZlcnNpb24oYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKSlcbiAgICApO1xuICAgIHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICBhc3luYyBzZXQodXBkYXRlczogUGFydGlhbDxNT0NTZXR0aW5ncz4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc2V0dGluZ3MsIHVwZGF0ZXMpO1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICB9XG5cbiAgZ2V0PEsgZXh0ZW5kcyBrZXlvZiBNT0NTZXR0aW5ncz4oc2V0dGluZzogSyk6IE1PQ1NldHRpbmdzW0tdIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5nc1tzZXR0aW5nXTtcbiAgfVxuXG4gIFVwZ3JhZGVTZXR0aW5nc1ZlcnNpb24ob2JqZWN0OiBhbnkpIHtcbiAgICAvLyBUT0RPIHJlbW92ZSBkZWxldGVkL3JlbmFtZWQgZmlsZXMgZnJvbSB0aGUgaXNfZXhwYW5kZWQgb2JqZWN0XG4gICAgdHJ5IHtcbiAgICAgIC8vIGlmIGZyZXNoIGluc3RhbGwsIGdvIHdpdGggZGVmYXVsdHNcbiAgICAgIGlmIChvYmplY3QgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIExvZyhcImZyZXNoIGluc3RhbGwsIHJldHVybmluZyBlbXB0eSBzZXR0aW5ncyBvYmplY3RcIik7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgLy8gYWJvcnQgaWYgc2V0dGluZ3MgYXJlIGFscmVhZHkgaW4gY3VycmVudCB2ZXJzaW9uIGZvcm1hdFxuICAgICAgaWYgKG9iamVjdFtcInNldHRpbmdzX3ZlcnNpb25cIl0gPT09IERFRkFVTFRfU0VUVElOR1NbXCJzZXR0aW5nc192ZXJzaW9uXCJdKSB7XG4gICAgICAgIExvZyhcIlNldHRpbmdzIGFscmVhZHkgaW4gY3VycmVudCB2ZXJzaW9uXCIpO1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuXG4gICAgICAvLyBjbG9uZSB0aGUgb2JqZWN0XG4gICAgICBvYmplY3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xuXG4gICAgICBsZXQgb2JqZWN0X2tleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICAgICAgTG9nKFwib2xkIHNldHRpbmdzIG9iamVjdDogXCIgKyBTdHJpbmcob2JqZWN0X2tleXMpKTtcbiAgICAgIGxldCBvbGRfdmVyc2lvbiA9IHVuZGVmaW5lZDtcblxuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHZlcnNpb24gdGhlIGxlZ2FjeSBvYmplY3QgaXMgZnJvbVxuICAgICAgaWYgKCFvYmplY3Rfa2V5cy5jb250YWlucyhcInNldHRpbmdzX3ZlcnNpb25cIikpIHtcbiAgICAgICAgb2xkX3ZlcnNpb24gPSBcInByZS0wLjEuMTBcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9sZF92ZXJzaW9uID0gb2JqZWN0W1wic2V0dGluZ3NfdmVyc2lvblwiXTtcbiAgICAgIH1cblxuICAgICAgTG9nKFwib2xkIHNldHRpbmdzIHZlcnNpb246IFwiICsgb2xkX3ZlcnNpb24pO1xuXG4gICAgICBpZiAob2xkX3ZlcnNpb24gPT09IFwicHJlLTAuMS4xMFwiKSB7XG4gICAgICAgIC8vIGV4dHJhY3QgdGhlIENOIHBhdGggZnJvbSBDTl9wYXRoX3Blcl92YXVsdCBhbmQgc2F2ZSBpdCBhcyBDTl9wYXRoXG4gICAgICAgIExvZyhcIkNvbnZlcnRpbmcgQ04gcGF0aCBmcm9tIHByZS0wLjEuMTAgdG8gMC4xLjEwXCIpO1xuXG4gICAgICAgIGxldCBjbl9zZXR0aW5nc192YXVsdF9uYW1lcyA9IG9iamVjdFtcIkNOX3BhdGhfcGVyX3ZhdWx0XCJdLm1hcChcbiAgICAgICAgICAodmFsOiBbc3RyaW5nLCBzdHJpbmddKSA9PiB2YWxbMF1cbiAgICAgICAgKTsgLy8gZ2V0IGp1c3QgdGhlIG5hbWUgb2YgYWxsIHZhdWx0cyB0aGVyZSdzIGEgQ04gc3RvcmVkIGZvclxuICAgICAgICBpZiAoY25fc2V0dGluZ3NfdmF1bHRfbmFtZXMuY29udGFpbnModGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE5hbWUoKSkpIHtcbiAgICAgICAgICBvYmplY3RbXCJDTl9wYXRoXCJdID1cbiAgICAgICAgICAgIG9iamVjdFtcIkNOX3BhdGhfcGVyX3ZhdWx0XCJdW1xuICAgICAgICAgICAgICBjbl9zZXR0aW5nc192YXVsdF9uYW1lcy5pbmRleE9mKHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXROYW1lKCkpXG4gICAgICAgICAgICBdWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSBvYmplY3RbXCJDTl9wYXRoXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIG9iamVjdFtcIkNOX3BhdGhfcGVyX3ZhdWx0XCJdO1xuXG4gICAgICAgIG9iamVjdFtcInNldHRpbmdzX3ZlcnNpb25cIl0gPSBcIjAuMS4xMFwiO1xuICAgICAgfSAvLyBjbG9uZSB0aGUgb2JqZWN0XG5cbiAgICAgIGxldCBnZW5lcmljX3VwZGF0ZV92ZXJzaW9ucyA9IFtcIjAuMS4xMFwiLCBcIjAuMS4xMlwiLCBcIjAuMS4xNFwiXTtcblxuICAgICAgaWYgKGdlbmVyaWNfdXBkYXRlX3ZlcnNpb25zLmNvbnRhaW5zKG9sZF92ZXJzaW9uKSkge1xuICAgICAgICBMb2coXG4gICAgICAgICAgXCJwZXJmb3JtaW5nIGdlbmVyaWMgdXBkYXRlIG9mIHNldHRpbmdzIHRvIFwiICtcbiAgICAgICAgICAgIERFRkFVTFRfU0VUVElOR1NbXCJzZXR0aW5nc192ZXJzaW9uXCJdXG4gICAgICAgICk7XG4gICAgICAgIG9iamVjdFtcInBsdWdpbl92ZXJzaW9uXCJdID0gREVGQVVMVF9TRVRUSU5HU1tcInNldHRpbmdzX3ZlcnNpb25cIl07XG4gICAgICAgIG9iamVjdFtcInNldHRpbmdzX3ZlcnNpb25cIl0gPSBERUZBVUxUX1NFVFRJTkdTW1wic2V0dGluZ3NfdmVyc2lvblwiXTtcbiAgICAgICAgb2JqZWN0W1wiZG9fc2hvd191cGRhdGVfbm90aWNlXCJdID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuVXBncmFkZVNldHRpbmdzVmVyc2lvbihvYmplY3QpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gaXQgdGhpbmdzIGRvbid0IHdvcmsgb3V0LCBkZWxldGUgYWxsIG9sZCBzZXR0aW5ncyBkYXRhIChiZXR0ZXIgdGhhbiBicmVha2luZyB0aGUgcGx1Z2luKVxuICAgICAgTG9nKFwiZXJyb3Igd2hpbGUgdHJhbnNmb3JtaW5nIHNldHRpbmdzIG9iamVjdFwiKTtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gIH1cblxuICBpc0V4bHVkZWRGaWxlKGZpbGU6IFRGaWxlKSB7XG4gICAgbGV0IHBhdGhfdG9fZmlsZSA9IGZpbGUucGF0aDtcbiAgICBsZXQgaW5fZXhjbHVkZWRfZm9sZGVyID0gdGhpcy5nZXQoXCJleGx1ZGVkX2ZvbGRlcnNcIikuc29tZSgocGF0aDogc3RyaW5nKSA9PlxuICAgICAgcGF0aF90b19maWxlLnN0YXJ0c1dpdGgocGF0aClcbiAgICApO1xuICAgIGlmIChpbl9leGNsdWRlZF9mb2xkZXIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgZmlsZW5hbWUgPSBmaWxlLmJhc2VuYW1lICsgXCIuXCIgKyBmaWxlLmV4dGVuc2lvbjtcbiAgICBsZXQgaGFzX2V4Y2x1ZGVkX2ZpbGVuYW1lID0gdGhpcy5nZXQoXCJleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHNcIikuc29tZShcbiAgICAgIChwaHJhc2U6IHN0cmluZykgPT4gZmlsZW5hbWUuY29udGFpbnMocGhyYXNlKVxuICAgICk7XG4gICAgcmV0dXJuIGhhc19leGNsdWRlZF9maWxlbmFtZTtcbiAgfVxuXG4gIGlzRXhwYW5kZWQocGF0aDogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLmdldChcImRvX3JlbWVtYmVyX2V4cGFuZGVkXCIpKSByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgY3VycmVudF9zZXR0aW5ncyA9IHRoaXMuZ2V0KFwiZmlsZV9kZXNjZW5kYW50c19leHBhbmRlZFwiKTtcbiAgICBpZiAoT2JqZWN0LmtleXMoY3VycmVudF9zZXR0aW5ncykuY29udGFpbnMocGF0aCkpIHtcbiAgICAgIHJldHVybiBjdXJyZW50X3NldHRpbmdzW3BhdGhdO1xuICAgIH1cbiAgICBsZXQgbmV3X3NldHRpbmdzID0gT2JqZWN0LmFzc2lnbihjdXJyZW50X3NldHRpbmdzLCB7IHBhdGg6IHRydWUgfSk7XG4gICAgdGhpcy5zZXQoeyBmaWxlX2Rlc2NlbmRhbnRzX2V4cGFuZGVkOiBuZXdfc2V0dGluZ3MgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzZXRFeHBhbmRlZChwYXRoOiBzdHJpbmcsIGV4cGFuZGVkOiBib29sZWFuKSB7XG4gICAgaWYgKCF0aGlzLmdldChcImRvX3JlbWVtYmVyX2V4cGFuZGVkXCIpKSByZXR1cm47XG5cbiAgICBsZXQgbmV3X3ZhbCA9IHt9O1xuICAgIG5ld192YWxbcGF0aF0gPSBleHBhbmRlZDtcblxuICAgIGxldCBuZXdfc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxuICAgICAge30sXG4gICAgICB0aGlzLmdldChcImZpbGVfZGVzY2VuZGFudHNfZXhwYW5kZWRcIiksXG4gICAgICBuZXdfdmFsXG4gICAgKTtcbiAgICB0aGlzLnNldCh7IGZpbGVfZGVzY2VuZGFudHNfZXhwYW5kZWQ6IG5ld19zZXR0aW5ncyB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTU9DU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IE1PQ1BsdWdpbjtcbiAgX2FwcDogU2V0dGluZ3M7XG4gIGRiOiBEQk1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBNT0NQbHVnaW4pIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuZGIgPSBwbHVnaW4uZGI7XG4gICAgdGhpcy5fYXBwID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYXBwKSB7XG4gICAgICB0aGlzLl9hcHAuJGRlc3Ryb3koKTtcbiAgICAgIHRoaXMuX2FwcCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy5fYXBwID0gbmV3IFNldHRpbmdzKHtcbiAgICAgIHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250YWluZXJFbCxcbiAgICAgIHByb3BzOiB7IGFwcDogdGhpcy5hcHAsIHBsdWdpbjogdGhpcy5wbHVnaW4gfSxcbiAgICB9KTtcbiAgfVxuXG4gIGhpZGUoKTogdm9pZCB7XG4gICAgdGhpcy5wbHVnaW4uZGIudXBkYXRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEFwcCxcbiAgZ2V0TGlua3BhdGgsXG4gIExpbmtDYWNoZSxcbiAgTW9kYWwsXG4gIE5vdGljZSxcbiAgUGx1Z2luLFxuICBQbHVnaW5TZXR0aW5nVGFiLFxuICBTZXR0aW5nLFxuICBURmlsZSxcbiAgVmF1bHQsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTU9DX1ZJRVdfVFlQRSB9IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCBNT0NWaWV3IGZyb20gXCIuL3ZpZXdcIjtcbmltcG9ydCB7IE1PQ1NldHRpbmdUYWIsIFNldHRpbmdzTWFuYWdlciB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBMb2cgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNT0NQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBkYjogREJNYW5hZ2VyO1xuICB2aWV3OiBNT0NWaWV3O1xuICBzZXR0aW5nczogU2V0dGluZ3NNYW5hZ2VyO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gbmV3IFNldHRpbmdzTWFuYWdlcih0aGlzKTtcbiAgICBhd2FpdCB0aGlzLnNldHRpbmdzLmxvYWRTZXR0aW5ncygpO1xuICAgIHRoaXMuZGIgPSBuZXcgREJNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgTU9DX1ZJRVdfVFlQRSxcbiAgICAgIChsZWFmKSA9PiAodGhpcy52aWV3ID0gbmV3IE1PQ1ZpZXcobGVhZiwgdGhpcykpXG4gICAgKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB0aGlzLmluaXRpYWxpemVQbHVnaW4oKSk7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplUGx1Z2luKCkge1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTU9DU2V0dGluZ1RhYih0aGlzKSk7XG4gICAgdGhpcy5pbml0TGVhZigpO1xuICAgIHRoaXMuZGIudXBkYXRlKHRydWUpO1xuXG4gICAgdGhpcy5hZGRSaWJib25JY29uKFwic3luY1wiLCBcIlVwZGF0ZSBNYXAgb2YgQ29udGVudFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLmRiLnVwZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiBcInJlYnVpbGQtbWFwLW9mLWNvbnRlbnRcIixcbiAgICAgIG5hbWU6IFwiVXBkYXRlIE1hcCBvZiBDb250ZW50XCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmRiLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogXCJvcGVuLW5vdGUtYXMtY2VudHJhbC1ub3RlXCIsXG4gICAgICBuYW1lOiBcIlNldCBjdXJyZW50IG5vdGUgYXMgQ2VudHJhbCBOb3RlXCIsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICBsZXQgZXJyb3JzID0gW107XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBhIGZpbGUgaXMgb3BlbmVkXG4gICAgICAgIGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09IG51bGwpIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChcIk5vIGZpbGUgaGFzIGJlZW4gb3BlbmVkXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaXNFeGx1ZGVkRmlsZSh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpKVxuICAgICAgICApIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChcIlRoaXMgZmlsZSBoYXMgYmVlbiBleGNsdWRlZCBmcm9tIHRoZSBNYXAgb2YgQ29udGVudC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGVycm9yc1swXSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dGluZ3Muc2V0KHsgQ05fcGF0aDogdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5wYXRoIH0pO1xuICAgICAgICB0aGlzLmRiLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGluaXRMZWFmKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKE1PQ19WSUVXX1RZUEUpLmxlbmd0aCkge1xuICAgICAgTG9nKFwiVmlldyBhbHJlYWR5IGF0dGFjaGVkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IE1PQ19WSUVXX1RZUEUsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlcmVuZGVyKCkge1xuICAgIExvZyhcInJlcmVuZGVyIG9uIHBsdWdpbiBjYWxsZWRcIik7XG4gICAgaWYgKHRoaXMudmlldykge1xuICAgICAgdGhpcy52aWV3LnJlcmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgb251bmxvYWQoKTogdm9pZCB7XG4gICAgTG9nKFwiVW5sb2FkaW5nIHBsdWdpblwiKTtcblxuICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgIHRoaXMudmlldy5vbkNsb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoTU9DX1ZJRVdfVFlQRSk7XG4gIH1cblxuICBDTmV4aXN0cygpOiBib29sZWFuIHtcbiAgICBsZXQgZXhpc3RzID0gIShcbiAgICAgIHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnNldHRpbmdzLmdldChcIkNOX3BhdGhcIikpID09IG51bGxcbiAgICApO1xuICAgIExvZyhleGlzdHMgPyBcIkNOIGV4aXN0c1wiIDogXCJDTiBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICByZXR1cm4gZXhpc3RzO1xuICB9XG5cbiAgcmVnaXN0ZXJWaWV3SW5zdGFuY2UodmlldzogTU9DVmlldykge1xuICAgIExvZyhcIlZpZXcgcmVnaXN0ZXJlZFwiKTtcbiAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICB9XG4gIHVucmVnaXN0ZXJWaWV3SW5zdGFuY2UodmlldzogTU9DVmlldykge1xuICAgIHRoaXMudmlldyA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5vdGljZSIsIkl0ZW1WaWV3IiwiUGx1Z2luU2V0dGluZ1RhYiIsIlBsdWdpbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRU8sTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDO0FBQ3pCLE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQztBQUMzQixNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUM7QUFDekIsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDO0FBQzVCLE1BQU0sYUFBYSxHQUFHLGdCQUFnQjs7TUNOaEMsUUFBUTtJQU9uQixZQUNFLElBQVksRUFDWixTQUFpQixFQUNqQixRQUFrQixFQUNsQixXQUFxQixFQUNyQixnQkFBd0I7UUFFeEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDO0tBQzFDOzs7QUNoQkksTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFlO0FBR25DLENBQUMsQ0FBQztBQUVLLE1BQU0sZUFBZSxHQUFHLENBQUMsSUFBWSxFQUFFLFlBQW9CLEtBQUs7SUFDckUsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1FBQzVCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDekM7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQUVGO0FBQ08sTUFBTSxhQUFhLEdBQUcsQ0FBQyxDQUFhO0lBQ3pDLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFdBQVcs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
