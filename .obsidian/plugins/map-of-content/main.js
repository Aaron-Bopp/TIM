/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

const LINKED_TO = " => ";
const LINKED_FROM = " <= ";
const LINKED_CN = "None";
const LINKED_BOTH = " <=> ";
const MOC_VIEW_TYPE = "map-of-content";

class Note {
    constructor(path, extension, links_to, linked_from, distance_from_CN) {
        this.path = path;
        this.extension = extension;
        this.links_to = links_to;
        this.linked_from = linked_from;
        this.distance_from_CN = distance_from_CN;
    }
}

/** log to the console */
const Log = (message, dev = false) => {
    let log_dev = false; // whether to print development log messages
    if (!dev || log_dev)
        console.log("[Map of Content] " + message);
};
/**  remove the given extension (by default ".md") from path  */
const CleanExtension = (path, extension = ".md") => {
    if (path.endsWith(extension)) {
        return path.slice(0, -extension.length);
    }
    return path;
};
/**@returns True if CTRL / Meta is pressed */
const IsCtrlPressed = (e) => {
    return window.navigator.userAgent.includes("Macintosh") ? e.metaKey : e.ctrlKey;
};
/**  Returns only the name of the actual file  */
const FileNameFromPath = (path) => {
    return path.split("/").last();
};
/**  return the full path if there are two or more notes with the same filename and extension, else only the filename
 * @todo only return as many segments (folders) of the path as are neccessary to uniquely differentiate the note
*/
const GetDisplayName = (path, db) => {
    let file_name = FileNameFromPath(path);
    let display_name = null;
    if (db.duplicate_file_status.get(file_name)) {
        display_name = CleanExtension(path);
    }
    else {
        display_name = CleanExtension(file_name);
    }
    return display_name;
};
const NavigateToFile = async (app, path, event) => {
    let file = app.metadataCache.getFirstLinkpathDest(path, "/");
    if (!file)
        return;
    IsCtrlPressed(event)
        ? app.workspace.splitActiveLeaf()
        : app.workspace.getUnpinnedLeaf();
    app.workspace.openLinkText(path, "/");
    //await leaf.openFile(file);
};
/** Get the paths of all folders in the vault, empty or not */
const GetAllFolders = (app) => {
    let vault_files = app.vault.getFiles();
    let all_folder_paths = [];
    vault_files.forEach((file) => {
        // cut of filename
        let folder_path = file.path.slice(0, file.path.length - (file.basename.length + file.extension.length + 1));
        // add path to collected paths
        if (folder_path.length && !all_folder_paths.contains(folder_path)) {
            all_folder_paths.push(folder_path);
        }
    });
    // store all parent folder paths as unique paths if they aren't yet because they don't include any notes directly
    all_folder_paths.forEach((path) => {
        let all_sub_paths = path.split("/");
        for (let i = 1; i < all_sub_paths.length - 1; i++) {
            let partial_path = all_sub_paths.slice(0, i).join("/") + "/";
            if (!all_folder_paths.contains(partial_path)) {
                all_folder_paths.push(partial_path);
            }
        }
    });
    return all_folder_paths;
};

class DBManager {
    constructor(app, plugin) {
        this.database_initialized = false; // false on plugin launch before the first (successful or failed) db update attempt
        this.app = app;
        this.plugin = plugin;
        this.all_paths = [];
        this.db = {};
        this.db_entries = Object.entries(this.db);
    }
    init() {
    }
    async update() {
        this.database_complete = false;
        try {
            // make sure the Central note exists
            if (!this.plugin.CNexists()) {
                new obsidian.Notice("Central note '" + this.plugin.getSettingValue("CN_path") + "' does not exist");
                new obsidian.Notice("You can adjust the path of your Central Note in the settings tab");
            }
            else {
                // save timestamp for tracking duration of rebuilding
                let start_tmsp = Date.now();
                new obsidian.Notice('Updating the Map of Content...');
                Log("Updating the Map of Content...");
                await new Promise(r => setTimeout(r, 0));
                // update db
                this.updateDB();
                await new Promise(r => setTimeout(r, 0));
                this.get_paths_ran = 0;
                this.updateDepthInformation();
                // delete old path information
                this.all_paths.length = 0;
                let path_so_far = { all_members: [this.plugin.getSettingValue("CN_path")], items: [[this.plugin.getSettingValue("CN_path"), LINKED_CN]] };
                await new Promise(r => setTimeout(r, 0));
                this.followPaths(path_so_far);
                await new Promise(r => setTimeout(r, 0));
                this.updateDescendants();
                // mark database as complete
                this.database_complete = true;
                new obsidian.Notice("Update complete");
                Log("Update complete");
                let end_tmsp = Date.now();
                Log("Took " + String((end_tmsp - start_tmsp) / 1000));
            }
        }
        finally {
            this.database_initialized = true;
            this.plugin.rerender();
        }
    }
    /**Return the internal note representation object for a given path */
    getNoteFromPath(path) {
        if (path in this.db) {
            return this.db[path];
        }
    }
    /** return all paths that include a certain note. Only return the path up to that note*/
    findPaths(path) {
        let filtered_paths = [];
        let filtered_paths_json = JSON.stringify(filtered_paths);
        this.all_paths.forEach((p) => {
            if (p.all_members.includes(path)) {
                if (p.all_members.last() == path) {
                    filtered_paths.push(p);
                }
                else {
                    let index = p.all_members.indexOf(path) + 1;
                    let chopped_of_path = p.items.slice(0, index);
                    if (!filtered_paths_json.includes(JSON.stringify(chopped_of_path))) {
                        // return a path element containing only the parts of the path information up to the note in question
                        filtered_paths.push({ all_members: p.all_members.slice(0, index), items: p.items.slice(0, index) });
                        filtered_paths_json = JSON.stringify(filtered_paths);
                    }
                }
            }
        });
        return filtered_paths;
    }
    all_notes() {
        return this.db_entries.map(([key, value]) => value);
    }
    updateDB() {
        // step 1: update the plugins internal representation of all notes in the vault
        Log("Updating the library...", true);
        // delete old state 
        for (let note in this.db) {
            delete this.db[note];
        }
        // read all files
        let vault_files = this.app.vault.getFiles();
        Log("Total number of files in vault: " + String(vault_files.length), true);
        // create new db entries 
        let entries_created = 0;
        vault_files.forEach((file) => {
            // make sure the file isn't in any exluded folders 
            if (!this.plugin.isExludedFile(file)) {
                // logging
                entries_created += 1;
                if (entries_created % 1000 == 0) {
                    Log("Created new db entries: " + String(entries_created), true);
                }
                let new_note = new Note(file.path, file.extension, [], [], null);
                // update the db
                this.db[new_note.path] = new_note;
            }
        });
        // update the db_entries representation of the db
        this.db_entries = Object.entries(this.db);
        this.db_keys = Object.keys(this.db);
        // check for duplicate files
        this.duplicate_file_status = new Map();
        let checked_files = 0;
        this.all_notes().forEach((note) => {
            let file_name = FileNameFromPath(note.path);
            // logging
            checked_files += 1;
            if (checked_files % 1000 == 0) {
                Log("checked for duplicates: " + String(checked_files), true);
            }
            if (this.duplicate_file_status.has(file_name)) { // If the file name is encountered twice or more, set it's duplicate status to true
                this.duplicate_file_status.set(file_name, true);
            }
            else {
                this.duplicate_file_status.set(file_name, false);
            }
        });
        // update the db_entries representation of the db
        this.db_entries = Object.entries(this.db);
        // step 2: analyze links 
        Log("analyzing links", true);
        this.all_notes().forEach((note) => {
            if (note.extension != "md") {
                // skip if it's not an md file. Other file types can't link to anything
                return;
            }
            //  save all the links this note links to
            let this_links_to = [];
            let linkcache = this.app.metadataCache.getCache(note.path).links;
            if (linkcache) {
                linkcache.forEach((val) => {
                    // check if the link is valid 
                    let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                    //TODO is it neccessary to avoid including links multiple times? maybe they can't even be duplicate in the linkcache
                    if (link_dest && !this_links_to.includes(link_dest.path) && this.db_keys.contains(link_dest.path)) {
                        this_links_to.push(link_dest.path);
                    }
                });
            }
            let transclusions = this.app.metadataCache.getCache(note.path).embeds;
            if (transclusions) {
                transclusions.forEach((val) => {
                    // check if the link is valid 
                    let link_dest = this.app.metadataCache.getFirstLinkpathDest(val.link, "/");
                    if (link_dest && !this_links_to.includes(link_dest.path) && this.db_keys.contains(link_dest.path)) {
                        this_links_to.push(link_dest.path);
                    }
                });
            }
            if (!this_links_to.length)
                return; // no links
            // save links_to information to db
            this.db[note.path].links_to = this_links_to;
            // add a "linked_from" reference to the db entry of all notes that are linked to from this note
            this_links_to.forEach((link) => {
                if (!this.db[link].linked_from.includes(note.path)) {
                    this.db[link].linked_from.push(note.path);
                }
            });
        });
    }
    /** starting from the CN, follow all paths and store the information on how long the shortest path to each note is*/
    updateDepthInformation() {
        Log("Analyzing distance from Central Note. CN path: " + this.plugin.getSettingValue("CN_path"), true);
        let depth = 0; // distance from the CN. starts at zero 
        let checked_links = []; // all the notes that have already been visited. dont visit them again to prevent endless loops
        let do_continue = true;
        // start at the the CN
        let links = [this.plugin.getSettingValue("CN_path")];
        while (do_continue) {
            let next_links = [];
            links.forEach((link) => {
                // extract all active and passive connections (linked to or from) for the next iteration of link-following
                let note = this.getNoteFromPath(link);
                note.links_to.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                note.linked_from.forEach((link) => {
                    if (!checked_links.contains(link) && !next_links.contains(link)) {
                        next_links.push(link);
                    }
                });
                // update the info on how far the note is removed from CN
                if (note.distance_from_CN == null || note.distance_from_CN > depth) {
                    note.distance_from_CN = depth;
                }
                checked_links.push(link);
            });
            links = next_links.slice();
            if (links.length == 0) {
                do_continue = false;
            }
            depth += 1;
        }
    }
    /**
     * Recursive function that follows all possible paths from the CN that aren't unreasonably long or circular and stores them
     * @param path_so_far the path to be extended in this iteration
     */
    followPaths(path_so_far) {
        // logging
        this.get_paths_ran += 1;
        if (this.get_paths_ran % 10000 == 0) {
            Log("get paths ran " + String(this.get_paths_ran), true);
        }
        let note = this.db[path_so_far.all_members.last()];
        let all_members = path_so_far.all_members;
        let items = path_so_far.items;
        let new_paths_to_follow = [];
        let note_links_to = note.links_to.slice();
        let note_linked_from = note.linked_from.slice();
        note_links_to.forEach((link) => {
            // check whether the linked note also links to the current note
            let linked_to_or_both_ways = LINKED_TO;
            if (note_linked_from.contains(link)) {
                // remove it from the passive links to be followed later
                let index = note_linked_from.indexOf(link, 0);
                note_linked_from.splice(index, 1);
                linked_to_or_both_ways = LINKED_BOTH;
            }
            let new_path = { all_members: all_members.concat(link), items: items.concat([[link, linked_to_or_both_ways]]) };
            new_paths_to_follow.push(new_path);
        });
        note_linked_from.forEach((link) => {
            let new_path = { all_members: all_members.concat(link), items: items.concat([[link, LINKED_FROM]]) };
            new_paths_to_follow.push(new_path);
        });
        let called_itself = false; // whether the function called itself
        // function calls itself to explore every new path  
        new_paths_to_follow.forEach((path) => {
            // the path without the next note that is to be explored
            let all_items_so_far = path.all_members.slice(0, -1);
            let last_item_path = path.all_members.last();
            let last_item = this.getNoteFromPath(last_item_path);
            // stop if this note is already part of the explored path
            if (all_items_so_far.includes(last_item_path)) {
                return;
            }
            // stop if the path meanders too much 
            if ((path.all_members.length - last_item.distance_from_CN) > 1) {
                return;
            }
            this.followPaths(path);
            called_itself = true;
        });
        if (!called_itself) {
            // only add the path if it does't lead anywhere else. No need to have paths that are parts of other paths
            this.all_paths.push(path_so_far);
        }
    }
    /** for every note, store all notes that come right after it in any path. this is for generating the Map Of Content later on */
    updateDescendants() {
        // delete old Information
        this.descendants = new Map();
        let descendants_ran = 0;
        this.all_paths.forEach((p) => {
            p.all_members.forEach((note_path, index) => {
                // make sure it's not the last member of the path
                if (!(index == p.all_members.length - 1)) {
                    // create entry in descendants if it doesn't exist
                    if (!this.descendants.has(note_path)) {
                        this.descendants.set(note_path, []);
                    }
                    // logging
                    descendants_ran += 1;
                    if (descendants_ran % 1000 == 0) {
                        Log("descendants ran " + String(descendants_ran), true);
                    }
                    let next_path_member = p.all_members[index + 1];
                    // add note as descendant if it isn't already stored in array
                    if (!this.descendants.get(note_path).includes(next_path_member)) {
                        this.descendants.set(note_path, this.descendants.get(note_path).concat(next_path_member));
                    }
                }
            });
        });
    }
}

function noop() { }
function add_location(element, file, line, column, char) {
    element.__svelte_meta = {
        loc: { file, line, column, char }
    };
}
function run(fn) {
    return fn();
}
function blank_object() {
    return Object.create(null);
}
function run_all(fns) {
    fns.forEach(run);
}
function is_function(thing) {
    return typeof thing === 'function';
}
function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');
}
function is_empty(obj) {
    return Object.keys(obj).length === 0;
}
function null_to_empty(value) {
    return value == null ? '' : value;
}
function append(target, node) {
    target.appendChild(node);
}
function append_styles(target, style_sheet_id, styles) {
    const append_styles_to = get_root_for_style(target);
    if (!append_styles_to.getElementById(style_sheet_id)) {
        const style = element('style');
        style.id = style_sheet_id;
        style.textContent = styles;
        append_stylesheet(append_styles_to, style);
    }
}
function get_root_for_style(node) {
    if (!node)
        return document;
    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
    if (root.host) {
        return root;
    }
    return document;
}
function append_stylesheet(node, style) {
    append(node.head || node, style);
}
function insert(target, node, anchor) {
    target.insertBefore(node, anchor || null);
}
function detach(node) {
    node.parentNode.removeChild(node);
}
function destroy_each(iterations, detaching) {
    for (let i = 0; i < iterations.length; i += 1) {
        if (iterations[i])
            iterations[i].d(detaching);
    }
}
function element(name) {
    return document.createElement(name);
}
function svg_element(name) {
    return document.createElementNS('http://www.w3.org/2000/svg', name);
}
function text(data) {
    return document.createTextNode(data);
}
function space() {
    return text(' ');
}
function empty() {
    return text('');
}
function listen(node, event, handler, options) {
    node.addEventListener(event, handler, options);
    return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
    if (value == null)
        node.removeAttribute(attribute);
    else if (node.getAttribute(attribute) !== value)
        node.setAttribute(attribute, value);
}
function children(element) {
    return Array.from(element.childNodes);
}
function set_input_value(input, value) {
    input.value = value == null ? '' : value;
}
function set_style(node, key, value, important) {
    node.style.setProperty(key, value, important ? 'important' : '');
}
function custom_event(type, detail, bubbles = false) {
    const e = document.createEvent('CustomEvent');
    e.initCustomEvent(type, bubbles, false, detail);
    return e;
}

let current_component;
function set_current_component(component) {
    current_component = component;
}
function get_current_component() {
    if (!current_component)
        throw new Error('Function called outside component initialization');
    return current_component;
}
function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
}

const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
    if (!update_scheduled) {
        update_scheduled = true;
        resolved_promise.then(flush);
    }
}
function add_render_callback(fn) {
    render_callbacks.push(fn);
}
let flushing = false;
const seen_callbacks = new Set();
function flush() {
    if (flushing)
        return;
    flushing = true;
    do {
        // first, call beforeUpdate functions
        // and update components
        for (let i = 0; i < dirty_components.length; i += 1) {
            const component = dirty_components[i];
            set_current_component(component);
            update(component.$$);
        }
        set_current_component(null);
        dirty_components.length = 0;
        while (binding_callbacks.length)
            binding_callbacks.pop()();
        // then, once components are updated, call
        // afterUpdate functions. This may cause
        // subsequent updates...
        for (let i = 0; i < render_callbacks.length; i += 1) {
            const callback = render_callbacks[i];
            if (!seen_callbacks.has(callback)) {
                // ...so guard against infinite loops
                seen_callbacks.add(callback);
                callback();
            }
        }
        render_callbacks.length = 0;
    } while (dirty_components.length);
    while (flush_callbacks.length) {
        flush_callbacks.pop()();
    }
    update_scheduled = false;
    flushing = false;
    seen_callbacks.clear();
}
function update($$) {
    if ($$.fragment !== null) {
        $$.update();
        run_all($$.before_update);
        const dirty = $$.dirty;
        $$.dirty = [-1];
        $$.fragment && $$.fragment.p($$.ctx, dirty);
        $$.after_update.forEach(add_render_callback);
    }
}
const outroing = new Set();
let outros;
function group_outros() {
    outros = {
        r: 0,
        c: [],
        p: outros // parent group
    };
}
function check_outros() {
    if (!outros.r) {
        run_all(outros.c);
    }
    outros = outros.p;
}
function transition_in(block, local) {
    if (block && block.i) {
        outroing.delete(block);
        block.i(local);
    }
}
function transition_out(block, local, detach, callback) {
    if (block && block.o) {
        if (outroing.has(block))
            return;
        outroing.add(block);
        outros.c.push(() => {
            outroing.delete(block);
            if (callback) {
                if (detach)
                    block.d(1);
                callback();
            }
        });
        block.o(local);
    }
}

const globals = (typeof window !== 'undefined'
    ? window
    : typeof globalThis !== 'undefined'
        ? globalThis
        : global);
function create_component(block) {
    block && block.c();
}
function mount_component(component, target, anchor, customElement) {
    const { fragment, on_mount, on_destroy, after_update } = component.$$;
    fragment && fragment.m(target, anchor);
    if (!customElement) {
        // onMount happens before the initial afterUpdate
        add_render_callback(() => {
            const new_on_destroy = on_mount.map(run).filter(is_function);
            if (on_destroy) {
                on_destroy.push(...new_on_destroy);
            }
            else {
                // Edge case - component was destroyed immediately,
                // most likely as a result of a binding initialising
                run_all(new_on_destroy);
            }
            component.$$.on_mount = [];
        });
    }
    after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
    const $$ = component.$$;
    if ($$.fragment !== null) {
        run_all($$.on_destroy);
        $$.fragment && $$.fragment.d(detaching);
        // TODO null out other refs, including component.$$ (but need to
        // preserve final state?)
        $$.on_destroy = $$.fragment = null;
        $$.ctx = [];
    }
}
function make_dirty(component, i) {
    if (component.$$.dirty[0] === -1) {
        dirty_components.push(component);
        schedule_update();
        component.$$.dirty.fill(0);
    }
    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));
}
function init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {
    const parent_component = current_component;
    set_current_component(component);
    const $$ = component.$$ = {
        fragment: null,
        ctx: null,
        // state
        props,
        update: noop,
        not_equal,
        bound: blank_object(),
        // lifecycle
        on_mount: [],
        on_destroy: [],
        on_disconnect: [],
        before_update: [],
        after_update: [],
        context: new Map(parent_component ? parent_component.$$.context : options.context || []),
        // everything else
        callbacks: blank_object(),
        dirty,
        skip_bound: false,
        root: options.target || parent_component.$$.root
    };
    append_styles && append_styles($$.root);
    let ready = false;
    $$.ctx = instance
        ? instance(component, options.props || {}, (i, ret, ...rest) => {
            const value = rest.length ? rest[0] : ret;
            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
                if (!$$.skip_bound && $$.bound[i])
                    $$.bound[i](value);
                if (ready)
                    make_dirty(component, i);
            }
            return ret;
        })
        : [];
    $$.update();
    ready = true;
    run_all($$.before_update);
    // `false` as a special case of no DOM component
    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;
    if (options.target) {
        if (options.hydrate) {
            const nodes = children(options.target);
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.l(nodes);
            nodes.forEach(detach);
        }
        else {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            $$.fragment && $$.fragment.c();
        }
        if (options.intro)
            transition_in(component.$$.fragment);
        mount_component(component, options.target, options.anchor, options.customElement);
        flush();
    }
    set_current_component(parent_component);
}
/**
 * Base class for Svelte components. Used when dev=false.
 */
class SvelteComponent {
    $destroy() {
        destroy_component(this, 1);
        this.$destroy = noop;
    }
    $on(type, callback) {
        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));
        callbacks.push(callback);
        return () => {
            const index = callbacks.indexOf(callback);
            if (index !== -1)
                callbacks.splice(index, 1);
        };
    }
    $set($$props) {
        if (this.$$set && !is_empty($$props)) {
            this.$$.skip_bound = true;
            this.$$set($$props);
            this.$$.skip_bound = false;
        }
    }
}

function dispatch_dev(type, detail) {
    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));
}
function append_dev(target, node) {
    dispatch_dev('SvelteDOMInsert', { target, node });
    append(target, node);
}
function insert_dev(target, node, anchor) {
    dispatch_dev('SvelteDOMInsert', { target, node, anchor });
    insert(target, node, anchor);
}
function detach_dev(node) {
    dispatch_dev('SvelteDOMRemove', { node });
    detach(node);
}
function listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {
    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];
    if (has_prevent_default)
        modifiers.push('preventDefault');
    if (has_stop_propagation)
        modifiers.push('stopPropagation');
    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });
    const dispose = listen(node, event, handler, options);
    return () => {
        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });
        dispose();
    };
}
function attr_dev(node, attribute, value) {
    attr(node, attribute, value);
    if (value == null)
        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });
    else
        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });
}
function prop_dev(node, property, value) {
    node[property] = value;
    dispatch_dev('SvelteDOMSetProperty', { node, property, value });
}
function set_data_dev(text, data) {
    data = '' + data;
    if (text.wholeText === data)
        return;
    dispatch_dev('SvelteDOMSetData', { node: text, data });
    text.data = data;
}
function validate_each_argument(arg) {
    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {
        let msg = '{#each} only iterates over array-like objects.';
        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {
            msg += ' You can use a spread to convert this iterable into an array.';
        }
        throw new Error(msg);
    }
}
function validate_slots(name, slot, keys) {
    for (const slot_key of Object.keys(slot)) {
        if (!~keys.indexOf(slot_key)) {
            console.warn(`<${name}> received an unexpected slot "${slot_key}".`);
        }
    }
}
/**
 * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.
 */
class SvelteComponentDev extends SvelteComponent {
    constructor(options) {
        if (!options || (!options.target && !options.$$inline)) {
            throw new Error("'target' is a required option");
        }
        super();
    }
    $destroy() {
        super.$destroy();
        this.$destroy = () => {
            console.warn('Component was already destroyed'); // eslint-disable-line no-console
        };
    }
    $capture_state() { }
    $inject_state() { }
}

/* src/svelte/Error.svelte generated by Svelte v3.42.1 */

const { Error: Error_1 } = globals;

function add_css$6(target) {
	append_styles(target, "svelte-6j6zdr", "\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXJyb3Iuc3ZlbHRlIiwibWFwcGluZ3MiOiIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsic3JjL3N2ZWx0ZS9FcnJvci5zdmVsdGUiXX0= */");
}

function create_fragment$6(ctx) {
	const block = {
		c: noop,
		l: function claim(nodes) {
			throw new Error_1("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: noop,
		p: noop,
		i: noop,
		o: noop,
		d: noop
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$6.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$6($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Error', slots, []);
	let { message } = $$props;
	const writable_props = ['message'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<Error> was created with unknown prop '${key}'`);
	});

	$$self.$$set = $$props => {
		if ('message' in $$props) $$invalidate(0, message = $$props.message);
	};

	$$self.$capture_state = () => ({ message });

	$$self.$inject_state = $$props => {
		if ('message' in $$props) $$invalidate(0, message = $$props.message);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [message];
}

class Error$1 extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$6, create_fragment$6, safe_not_equal, { message: 0 }, add_css$6);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Error",
			options,
			id: create_fragment$6.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*message*/ ctx[0] === undefined && !('message' in props)) {
			console.warn("<Error> was created without expected prop 'message'");
		}
	}

	get message() {
		throw new Error_1("<Error>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set message(value) {
		throw new Error_1("<Error>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/SaplingImage.svelte generated by Svelte v3.42.1 */

const file$5 = "src/svelte/SaplingImage.svelte";

function add_css$5(target) {
	append_styles(target, "svelte-z5pusg", "div#seedling-container.svelte-z5pusg{position:fixed;bottom:5%;width:100%;height:25%;max-height:200px;align-content:center}svg#seedling.svelte-z5pusg{display:block;width:100%;height:100%;opacity:60%;position:relative;margin-left:auto;margin-right:auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2FwbGluZ0ltYWdlLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUF1SkEsR0FBRyxtQkFBbUIsY0FBQyxDQUFBLEFBQ2YsUUFBUSxDQUFFLEtBQUssQ0FDZixNQUFNLENBQUUsRUFBRSxDQUNWLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLEdBQUcsQ0FDWCxVQUFVLENBQUUsS0FBSyxDQUNqQixhQUFhLENBQUUsTUFBTSxBQUN6QixDQUFBLEFBQ0EsR0FBRyxTQUFTLGNBQUMsQ0FBQSxBQUNULE9BQU8sQ0FBRSxLQUFLLENBQ2QsS0FBSyxDQUFFLElBQUksQ0FDWCxNQUFNLENBQUUsSUFBSSxDQUNaLE9BQU8sQ0FBRSxHQUFHLENBQ1osUUFBUSxDQUFFLFFBQVEsQ0FDbEIsV0FBVyxDQUFFLElBQUksQ0FDakIsWUFBWSxDQUFFLElBQUksQUFDdEIsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJTYXBsaW5nSW1hZ2Uuc3ZlbHRlIl19 */");
}

function create_fragment$5(ctx) {
	let div;
	let svg;
	let path0;
	let path1;
	let path2;
	let path3;
	let path4;
	let path5;
	let g0;
	let path6;
	let circle0;
	let circle1;
	let circle2;
	let circle3;
	let circle4;
	let circle5;
	let g1;
	let circle6;
	let circle7;
	let circle8;
	let g2;
	let circle9;
	let circle10;

	const block = {
		c: function create() {
			div = element("div");
			svg = svg_element("svg");
			path0 = svg_element("path");
			path1 = svg_element("path");
			path2 = svg_element("path");
			path3 = svg_element("path");
			path4 = svg_element("path");
			path5 = svg_element("path");
			g0 = svg_element("g");
			path6 = svg_element("path");
			circle0 = svg_element("circle");
			circle1 = svg_element("circle");
			circle2 = svg_element("circle");
			circle3 = svg_element("circle");
			circle4 = svg_element("circle");
			circle5 = svg_element("circle");
			g1 = svg_element("g");
			circle6 = svg_element("circle");
			circle7 = svg_element("circle");
			circle8 = svg_element("circle");
			g2 = svg_element("g");
			circle9 = svg_element("circle");
			circle10 = svg_element("circle");
			set_style(path0, "fill", "#6DC82A");
			attr_dev(path0, "d", "M282.915,211.33c-3.863,4.077-9.324,6.225-14.941,5.877c-1.943-0.123-48.129-3.298-95.369-28.754\nc-44.641-24.056-98.511-72.868-101.639-168.804c-0.172-5.232,1.831-10.3,5.531-14.002C82.141,0,88.765,0,91.594,0\nc0.001,0,0.001,0,0.001,0c2.001,0,49.045,0.338,97.518,29.403c25.163,15.089,46.083,35.148,62.181,59.622\nc19.446,29.566,31.786,65.589,36.678,107.066C288.63,201.671,286.777,207.252,282.915,211.33z");
			add_location(path0, file$5, 15, 8, 429);
			set_style(path1, "fill", "#5EAC24");
			attr_dev(path1, "d", "M251.887,89.963c-7.938,14.65-14.633,31.15-19.437,49.738c-4.32,12.902-10.917,35.57-16.362,66.933\nc28.719,8.988,50.563,10.49,51.886,10.573c5.618,0.349,11.078-1.799,14.941-5.877c3.862-4.078,5.715-9.659,5.056-15.237\nC283.13,155.048,270.983,119.354,251.887,89.963z");
			add_location(path1, file$5, 22, 8, 901);
			set_style(path2, "fill", "#4E901E");
			attr_dev(path2, "d", "M266.674,178.855l-40.788-39.775L215.13,85.482c-0.851-4.248-4.984-6.997-9.233-6.147\nc-4.248,0.852-6.998,4.987-6.147,9.233l6.245,31.116L183.5,97.748l-10.904-54.335c-0.851-4.248-4.986-6.994-9.233-6.147\nc-4.248,0.852-6.998,4.986-6.147,9.233l6.392,31.852l-52.492-51.184c-3.104-3.024-8.066-2.96-11.091,0.14\nc-3.024,3.102-2.961,8.067,0.14,11.09l57.719,56.284l-40.264-0.688c-4.327-0.118-7.901,3.377-7.976,7.708\nc-0.073,4.331,3.377,7.901,7.708,7.976l56.907,0.973l26.775,26.11l-40.88-0.697c-4.292-0.096-7.901,3.377-7.976,7.708\nc-0.073,4.331,3.377,7.901,7.708,7.976l57.522,0.982l38.311,37.358c1.526,1.487,3.501,2.227,5.474,2.227\nc2.04,0,4.078-0.792,5.617-2.368C269.837,186.843,269.775,181.878,266.674,178.855z");
			add_location(path2, file$5, 28, 8, 1236);
			set_style(path3, "fill", "#91DC5A");
			attr_dev(path3, "d", "M467.824,5.914c-3.863-4.077-9.324-6.225-14.941-5.877c-1.943,0.123-48.129,3.298-95.369,28.754\nc-36.301,19.561-78.701,55.493-94.961,119.819c-8.881,26.153-28.446,97.078-23.87,203.868c0.396,9.239,8.01,16.463,17.17,16.462\nc0.248,0,0.498-0.005,0.749-0.016c9.489-0.407,16.852-8.428,16.446-17.919c-2.371-55.323,2.184-100.55,8.054-133.923\nc13.209-0.757,52.566-5.045,92.92-29.241c25.163-15.089,46.083-35.148,62.181-59.622c19.446-29.566,31.786-65.589,36.678-107.066\nC473.539,15.573,471.686,9.992,467.824,5.914z");
			add_location(path3, file$5, 38, 8, 2010);
			set_style(path4, "fill", "#5EAC24");
			attr_dev(path4, "d", "M443.129,27.307c-3.026-3.101-7.991-3.164-11.091-0.14L379.55,78.35l6.392-31.851\nc0.851-4.247-1.899-8.38-6.147-9.233c-4.242-0.848-8.381,1.899-9.233,6.147l-10.905,54.335l-22.494,21.936l6.245-31.116\nc0.852-4.247-1.899-8.38-6.147-9.233c-4.246-0.85-8.381,1.899-9.233,6.147l-10.757,53.599l-40.789,39.775\nc-3.102,3.024-3.163,7.989-0.14,11.09c1.538,1.576,3.575,2.367,5.617,2.367c1.974,0,3.95-0.74,5.474-2.227l38.311-37.358\nl57.524-0.982c4.331-0.074,7.781-3.644,7.708-7.976c-0.073-4.286-3.57-7.709-7.839-7.709c-0.046,0-0.092,0-0.137,0.001\nl-40.881,0.697l26.775-26.11l56.907-0.973c4.331-0.074,7.781-3.644,7.708-7.976c-0.073-4.286-3.57-7.709-7.839-7.709\nc-0.046,0-0.092,0-0.137,0.001l-40.264,0.688l57.719-56.284C446.091,35.373,446.153,30.408,443.129,27.307z");
			add_location(path4, file$5, 46, 8, 2585);
			set_style(path5, "fill", "#CC7400");
			attr_dev(path5, "d", "M449.193,410.125c-7.91,0-15.298,2.228-21.577,6.087c-9.274-30.342-37.491-52.414-70.869-52.414\nc-3.704,0-7.341,0.28-10.898,0.805c-15.13-34.614-49.655-58.813-89.846-58.813s-74.716,24.199-89.846,58.813\nc-3.558-0.525-7.196-0.805-10.898-0.805c-33.378,0-61.594,22.072-70.869,52.414c-6.279-3.859-13.666-6.087-21.577-6.087\nc-22.795,0-41.275,18.48-41.275,41.275s18.48,41.275,41.275,41.275c12.216,0,23.188-5.31,30.744-13.744\nc13.282,19.931,35.954,33.07,61.701,33.07c20.851,0,39.68-8.625,53.144-22.487c14.097,7.848,30.321,12.334,47.601,12.334\nc17.279,0,33.504-4.487,47.601-12.334c13.466,13.862,32.293,22.487,53.144,22.487c25.747,0,48.42-13.137,61.701-33.07\nc7.557,8.434,18.529,13.744,30.744,13.744c22.795,0,41.275-18.48,41.275-41.275C490.468,428.604,471.988,410.125,449.193,410.125z");
			add_location(path5, file$5, 56, 8, 3406);
			set_style(path6, "fill", "#AA6100");
			attr_dev(path6, "d", "M309.888,345.918c9.748,0,19.154,1.443,28.042,4.092c-17.525-26.63-47.666-44.221-81.928-44.221\nc-40.192,0-74.716,24.199-89.846,58.813c-3.558-0.525-7.196-0.805-10.898-0.805c-33.378,0-61.594,22.072-70.869,52.414\nc-6.279-3.859-13.666-6.087-21.577-6.087c-22.795,0-41.275,18.48-41.275,41.275c0,22.795,18.48,41.275,41.275,41.275\nc12.216,0,23.188-5.31,30.744-13.744c13.282,19.931,35.954,33.07,61.701,33.07c20.851,0,39.68-8.625,53.144-22.487\nc6.148,3.423,12.7,6.204,19.567,8.255c-10.172-15.451-16.108-33.939-16.108-53.821C211.86,389.808,255.749,345.918,309.888,345.918\nz");
			add_location(path6, file$5, 67, 12, 4268);
			set_style(circle0, "fill", "#AA6100");
			attr_dev(circle0, "cx", "294.986");
			attr_dev(circle0, "cy", "421.014");
			attr_dev(circle0, "r", "17.771");
			add_location(circle0, file$5, 76, 12, 4920);
			set_style(circle1, "fill", "#AA6100");
			attr_dev(circle1, "cx", "366.638");
			attr_dev(circle1, "cy", "462.863");
			attr_dev(circle1, "r", "17.771");
			add_location(circle1, file$5, 82, 12, 5078);
			set_style(circle2, "fill", "#AA6100");
			attr_dev(circle2, "cx", "355.71");
			attr_dev(circle2, "cy", "402.055");
			attr_dev(circle2, "r", "6.838");
			add_location(circle2, file$5, 88, 12, 5236);
			set_style(circle3, "fill", "#AA6100");
			attr_dev(circle3, "cx", "256.002");
			attr_dev(circle3, "cy", "469.702");
			attr_dev(circle3, "r", "6.838");
			add_location(circle3, file$5, 94, 12, 5392);
			set_style(circle4, "fill", "#AA6100");
			attr_dev(circle4, "cx", "277.209");
			attr_dev(circle4, "cy", "376.498");
			attr_dev(circle4, "r", "6.838");
			add_location(circle4, file$5, 100, 12, 5549);
			set_style(circle5, "fill", "#AA6100");
			attr_dev(circle5, "cx", "424.351");
			attr_dev(circle5, "cy", "438.791");
			attr_dev(circle5, "r", "6.838");
			add_location(circle5, file$5, 106, 12, 5706);
			add_location(g0, file$5, 66, 8, 4252);
			set_style(circle6, "fill", "#CC7400");
			attr_dev(circle6, "cx", "384.415");
			attr_dev(circle6, "cy", "317.216");
			attr_dev(circle6, "r", "17.771");
			add_location(circle6, file$5, 114, 12, 5888);
			set_style(circle7, "fill", "#CC7400");
			attr_dev(circle7, "cx", "424.351");
			attr_dev(circle7, "cy", "356.953");
			attr_dev(circle7, "r", "6.838");
			add_location(circle7, file$5, 120, 12, 6046);
			set_style(circle8, "fill", "#CC7400");
			attr_dev(circle8, "cx", "424.351");
			attr_dev(circle8, "cy", "324.055");
			attr_dev(circle8, "r", "6.838");
			add_location(circle8, file$5, 126, 12, 6203);
			add_location(g1, file$5, 113, 8, 5872);
			set_style(circle9, "fill", "#AA6100");
			attr_dev(circle9, "cx", "112.53");
			attr_dev(circle9, "cy", "310.942");
			attr_dev(circle9, "r", "17.771");
			add_location(circle9, file$5, 134, 12, 6385);
			set_style(circle10, "fill", "#AA6100");
			attr_dev(circle10, "cx", "83.02");
			attr_dev(circle10, "cy", "350.115");
			attr_dev(circle10, "r", "6.838");
			add_location(circle10, file$5, 140, 12, 6542);
			add_location(g2, file$5, 133, 8, 6369);
			attr_dev(svg, "id", "seedling");
			attr_dev(svg, "version", "1.1");
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "xmlns:xlink", "http://www.w3.org/1999/xlink");
			attr_dev(svg, "x", "0px");
			attr_dev(svg, "y", "0px");
			attr_dev(svg, "viewBox", "0 0 512.001 512.001");
			set_style(svg, "enable-background", "new 0 0 512.001 512.001");
			attr_dev(svg, "xml:space", "preserve");
			attr_dev(svg, "class", "svelte-z5pusg");
			add_location(svg, file$5, 4, 4, 114);
			attr_dev(div, "id", "seedling-container");
			attr_dev(div, "class", "svelte-z5pusg");
			add_location(div, file$5, 2, 0, 3);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			append_dev(div, svg);
			append_dev(svg, path0);
			append_dev(svg, path1);
			append_dev(svg, path2);
			append_dev(svg, path3);
			append_dev(svg, path4);
			append_dev(svg, path5);
			append_dev(svg, g0);
			append_dev(g0, path6);
			append_dev(g0, circle0);
			append_dev(g0, circle1);
			append_dev(g0, circle2);
			append_dev(g0, circle3);
			append_dev(g0, circle4);
			append_dev(g0, circle5);
			append_dev(svg, g1);
			append_dev(g1, circle6);
			append_dev(g1, circle7);
			append_dev(g1, circle8);
			append_dev(svg, g2);
			append_dev(g2, circle9);
			append_dev(g2, circle10);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$5.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$5($$self, $$props) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('SaplingImage', slots, []);
	const writable_props = [];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<SaplingImage> was created with unknown prop '${key}'`);
	});

	return [];
}

class SaplingImage extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$5, create_fragment$5, safe_not_equal, {}, add_css$5);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "SaplingImage",
			options,
			id: create_fragment$5.name
		});
	}
}

/* src/svelte/Descendants.svelte generated by Svelte v3.42.1 */
const file$4 = "src/svelte/Descendants.svelte";

function add_css$4(target) {
	append_styles(target, "svelte-19blxph", "a.link.svelte-19blxph.svelte-19blxph{cursor:pointer}ul.svelte-19blxph.svelte-19blxph{list-style:none;margin:0;padding:0}li.svelte-19blxph.svelte-19blxph{list-style:none;margin:0;padding:0}ul.svelte-19blxph.svelte-19blxph{padding-left:1em}li.svelte-19blxph.svelte-19blxph{padding-left:1em;border:5px dotted black;border-width:0 0 1px 1px}li.dark-mode.svelte-19blxph.svelte-19blxph{padding-left:1em;border:5px dotted lightgray;border-width:0 0 1px 1px}li.container.svelte-19blxph.svelte-19blxph{border-bottom:0px}li.svelte-19blxph p.svelte-19blxph{margin:0;position:relative;top:0em}li.svelte-19blxph ul.svelte-19blxph{border-top:1px dotted black;margin-left:-1em;padding-left:2em}li.dark-mode.svelte-19blxph ul.svelte-19blxph{border-top:1px dotted lightgray}ul li.svelte-19blxph:last-child ul.svelte-19blxph{border-left:none;margin-left:-17px}.expand-arrow.svelte-19blxph.svelte-19blxph{color:darkgrey}.expand-arrow.svelte-19blxph.svelte-19blxph:hover{color:gray}div.expand_button.svelte-19blxph.svelte-19blxph{display:inline}div.expand_button.svelte-19blxph svg.svg.svelte-19blxph{width:14px;height:14px;margin-top:5px}li.light-mode.svelte-19blxph div.expand_button svg.svg.svelte-19blxph{fill:darkgrey}li.light-mode.svelte-19blxph div.expand_button svg.svg.svelte-19blxph:hover{fill:gray}li.dark-mode.svelte-19blxph div.expand_button svg.svg.svelte-19blxph{fill:gray}li.dark-mode.svelte-19blxph div.expand_button svg.svg.svelte-19blxph:hover{fill:lightgray}div.expand_button.svelte-19blxph svg.svg.expanded.svelte-19blxph{transform:rotate(90deg)}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$4(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[9] = list[i];
	return child_ctx;
}

// (30:0) {:else}
function create_else_block$1(ctx) {
	let li;
	let p;
	let t;
	let ul;
	let current;

	function select_block_type_1(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0) return create_if_block_2$1;
		return create_else_block_1$1;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block0 = current_block_type(ctx);
	let if_block1 = /*children*/ ctx[5].length > 0 && /*expanded*/ ctx[4] && create_if_block_1$1(ctx);

	const block = {
		c: function create() {
			li = element("li");
			p = element("p");
			if_block0.c();
			t = space();
			ul = element("ul");
			if (if_block1) if_block1.c();
			attr_dev(p, "class", "svelte-19blxph");
			add_location(p, file$4, 31, 4, 780);
			attr_dev(ul, "class", "svelte-19blxph");
			add_location(ul, file$4, 62, 4, 1633);
			attr_dev(li, "class", "container " + /*dark_mode*/ ctx[6] + " svelte-19blxph");
			add_location(li, file$4, 30, 2, 741);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, p);
			if_block0.m(p, null);
			append_dev(li, t);
			append_dev(li, ul);
			if (if_block1) if_block1.m(ul, null);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block0) {
				if_block0.p(ctx, dirty);
			} else {
				if_block0.d(1);
				if_block0 = current_block_type(ctx);

				if (if_block0) {
					if_block0.c();
					if_block0.m(p, null);
				}
			}

			if (/*children*/ ctx[5].length > 0 && /*expanded*/ ctx[4]) {
				if (if_block1) {
					if_block1.p(ctx, dirty);

					if (dirty & /*children, expanded*/ 48) {
						transition_in(if_block1, 1);
					}
				} else {
					if_block1 = create_if_block_1$1(ctx);
					if_block1.c();
					transition_in(if_block1, 1);
					if_block1.m(ul, null);
				}
			} else if (if_block1) {
				group_outros();

				transition_out(if_block1, 1, 1, () => {
					if_block1 = null;
				});

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block1);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block1);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
			if_block0.d();
			if (if_block1) if_block1.d();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block$1.name,
		type: "else",
		source: "(30:0) {:else}",
		ctx
	});

	return block;
}

// (28:0) {#if indentation == 0 && children.length == 0}
function create_if_block$1(ctx) {
	let t;

	const block = {
		c: function create() {
			t = text("No descendants");
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: noop,
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block$1.name,
		type: "if",
		source: "(28:0) {#if indentation == 0 && children.length == 0}",
		ctx
	});

	return block;
}

// (35:6) {:else}
function create_else_block_1$1(ctx) {
	let t0;
	let a;
	let t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t1;
	let mounted;
	let dispose;
	let if_block = /*children*/ ctx[5].length > 0 && create_if_block_3$1(ctx);

	const block = {
		c: function create() {
			if (if_block) if_block.c();
			t0 = space();
			a = element("a");
			t1 = text(t1_value);
			attr_dev(a, "class", "link svelte-19blxph");
			attr_dev(a, "title", /*note_path*/ ctx[0]);
			add_location(a, file$4, 51, 8, 1392);
		},
		m: function mount(target, anchor) {
			if (if_block) if_block.m(target, anchor);
			insert_dev(target, t0, anchor);
			insert_dev(target, a, anchor);
			append_dev(a, t1);

			if (!mounted) {
				dispose = listen_dev(a, "click", /*click_handler_1*/ ctx[8], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (/*children*/ ctx[5].length > 0) {
				if (if_block) {
					if_block.p(ctx, dirty);
				} else {
					if_block = create_if_block_3$1(ctx);
					if_block.c();
					if_block.m(t0.parentNode, t0);
				}
			} else if (if_block) {
				if_block.d(1);
				if_block = null;
			}

			if (dirty & /*note_path, db*/ 3 && t1_value !== (t1_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t1, t1_value);

			if (dirty & /*note_path*/ 1) {
				attr_dev(a, "title", /*note_path*/ ctx[0]);
			}
		},
		d: function destroy(detaching) {
			if (if_block) if_block.d(detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1$1.name,
		type: "else",
		source: "(35:6) {:else}",
		ctx
	});

	return block;
}

// (33:6) {#if indentation == 0}
function create_if_block_2$1(ctx) {
	let t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "";
	let t;

	const block = {
		c: function create() {
			t = text(t_value);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*note_path, db*/ 3 && t_value !== (t_value = GetDisplayName(/*note_path*/ ctx[0], /*db*/ ctx[1]) + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2$1.name,
		type: "if",
		source: "(33:6) {#if indentation == 0}",
		ctx
	});

	return block;
}

// (35:13) {#if children.length > 0}
function create_if_block_3$1(ctx) {
	let span;
	let div;
	let mounted;
	let dispose;

	function select_block_type_2(ctx, dirty) {
		if (/*expanded*/ ctx[4]) return create_if_block_4$1;
		return create_else_block_2;
	}

	let current_block_type = select_block_type_2(ctx);
	let if_block = current_block_type(ctx);

	const block = {
		c: function create() {
			span = element("span");
			div = element("div");
			if_block.c();
			attr_dev(div, "class", "expand_button svelte-19blxph");
			add_location(div, file$4, 40, 13, 1035);
			attr_dev(span, "class", "expand-arrow svelte-19blxph");
			add_location(span, file$4, 35, 10, 902);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, div);
			if_block.m(div, null);

			if (!mounted) {
				dispose = listen_dev(span, "click", /*click_handler*/ ctx[7], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (current_block_type !== (current_block_type = select_block_type_2(ctx))) {
				if_block.d(1);
				if_block = current_block_type(ctx);

				if (if_block) {
					if_block.c();
					if_block.m(div, null);
				}
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
			if_block.d();
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3$1.name,
		type: "if",
		source: "(35:13) {#if children.length > 0}",
		ctx
	});

	return block;
}

// (46:14) {:else}
function create_else_block_2(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$4, 46, 18, 1266);
			attr_dev(svg, "class", "svg svelte-19blxph");
			add_location(svg, file$4, 45, 21, 1230);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_2.name,
		type: "else",
		source: "(46:14) {:else}",
		ctx
	});

	return block;
}

// (42:14) {#if expanded}
function create_if_block_4$1(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#expand-arrow-svg");
			add_location(use, file$4, 43, 18, 1153);
			attr_dev(svg, "class", "svg expanded svelte-19blxph");
			add_location(svg, file$4, 42, 16, 1108);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4$1.name,
		type: "if",
		source: "(42:14) {#if expanded}",
		ctx
	});

	return block;
}

// (64:6) {#if children.length > 0 && expanded}
function create_if_block_1$1(ctx) {
	let each_1_anchor;
	let current;
	let each_value = /*children*/ ctx[5];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));
	}

	const out = i => transition_out(each_blocks[i], 1, 1, () => {
		each_blocks[i] = null;
	});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			each_1_anchor = empty();
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, each_1_anchor, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*db, app, children, indentation*/ 46) {
				each_value = /*children*/ ctx[5];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$4(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
						transition_in(each_blocks[i], 1);
					} else {
						each_blocks[i] = create_each_block$4(child_ctx);
						each_blocks[i].c();
						transition_in(each_blocks[i], 1);
						each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
					}
				}

				group_outros();

				for (i = each_value.length; i < each_blocks.length; i += 1) {
					out(i);
				}

				check_outros();
			}
		},
		i: function intro(local) {
			if (current) return;

			for (let i = 0; i < each_value.length; i += 1) {
				transition_in(each_blocks[i]);
			}

			current = true;
		},
		o: function outro(local) {
			each_blocks = each_blocks.filter(Boolean);

			for (let i = 0; i < each_blocks.length; i += 1) {
				transition_out(each_blocks[i]);
			}

			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(each_1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1$1.name,
		type: "if",
		source: "(64:6) {#if children.length > 0 && expanded}",
		ctx
	});

	return block;
}

// (65:8) {#each children as child}
function create_each_block$4(ctx) {
	let descendants;
	let current;

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[1],
				app: /*app*/ ctx[3],
				note_path: /*child*/ ctx[9],
				indentation: /*indentation*/ ctx[2] + 1
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			create_component(descendants.$$.fragment);
		},
		m: function mount(target, anchor) {
			mount_component(descendants, target, anchor);
			current = true;
		},
		p: function update(ctx, dirty) {
			const descendants_changes = {};
			if (dirty & /*db*/ 2) descendants_changes.db = /*db*/ ctx[1];
			if (dirty & /*app*/ 8) descendants_changes.app = /*app*/ ctx[3];
			if (dirty & /*children*/ 32) descendants_changes.note_path = /*child*/ ctx[9];
			if (dirty & /*indentation*/ 4) descendants_changes.indentation = /*indentation*/ ctx[2] + 1;
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_component(descendants, detaching);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$4.name,
		type: "each",
		source: "(65:8) {#each children as child}",
		ctx
	});

	return block;
}

function create_fragment$4(ctx) {
	let svg;
	let symbol;
	let path;
	let t;
	let current_block_type_index;
	let if_block;
	let if_block_anchor;
	let current;
	const if_block_creators = [create_if_block$1, create_else_block$1];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (/*indentation*/ ctx[2] == 0 && /*children*/ ctx[5].length == 0) return 0;
		return 1;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			svg = svg_element("svg");
			symbol = svg_element("symbol");
			path = svg_element("path");
			t = space();
			if_block.c();
			if_block_anchor = empty();
			attr_dev(path, "d", "M22 12l-20 12 5-12-5-12z");
			add_location(path, file$4, 23, 5, 580);
			attr_dev(symbol, "id", "expand-arrow-svg");
			attr_dev(symbol, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol, "viewBox", "0 0 24 24");
			add_location(symbol, file$4, 19, 2, 478);
			attr_dev(svg, "display", "none");
			add_location(svg, file$4, 18, 0, 455);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, symbol);
			append_dev(symbol, path);
			insert_dev(target, t, anchor);
			if_blocks[current_block_type_index].m(target, anchor);
			insert_dev(target, if_block_anchor, anchor);
			current = true;
		},
		p: function update(ctx, [dirty]) {
			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(if_block_anchor.parentNode, if_block_anchor);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
			if (detaching) detach_dev(t);
			if_blocks[current_block_type_index].d(detaching);
			if (detaching) detach_dev(if_block_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$4.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$4($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Descendants', slots, []);
	
	
	let { note_path } = $$props;
	let { db } = $$props;
	let { indentation } = $$props;
	let { app } = $$props;

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	let expanded = indentation < 3 ;
	let children = [];

	if (db.descendants.has(note_path)) {
		children = db.descendants.get(note_path).slice();
	}

	const writable_props = ['note_path', 'db', 'indentation', 'app'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<Descendants> was created with unknown prop '${key}'`);
	});

	const click_handler = () => {
		$$invalidate(4, expanded = !expanded);
	};

	const click_handler_1 = event => {
		NavigateToFile(app, note_path, event);
	};

	$$self.$$set = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('app' in $$props) $$invalidate(3, app = $$props.app);
	};

	$$self.$capture_state = () => ({
		GetDisplayName,
		NavigateToFile,
		note_path,
		db,
		indentation,
		app,
		dark_mode,
		expanded,
		children
	});

	$$self.$inject_state = $$props => {
		if ('note_path' in $$props) $$invalidate(0, note_path = $$props.note_path);
		if ('db' in $$props) $$invalidate(1, db = $$props.db);
		if ('indentation' in $$props) $$invalidate(2, indentation = $$props.indentation);
		if ('app' in $$props) $$invalidate(3, app = $$props.app);
		if ('dark_mode' in $$props) $$invalidate(6, dark_mode = $$props.dark_mode);
		if ('expanded' in $$props) $$invalidate(4, expanded = $$props.expanded);
		if ('children' in $$props) $$invalidate(5, children = $$props.children);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		note_path,
		db,
		indentation,
		app,
		expanded,
		children,
		dark_mode,
		click_handler,
		click_handler_1
	];
}

class Descendants extends SvelteComponentDev {
	constructor(options) {
		super(options);

		init(
			this,
			options,
			instance$4,
			create_fragment$4,
			safe_not_equal,
			{
				note_path: 0,
				db: 1,
				indentation: 2,
				app: 3
			},
			add_css$4
		);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Descendants",
			options,
			id: create_fragment$4.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*note_path*/ ctx[0] === undefined && !('note_path' in props)) {
			console.warn("<Descendants> was created without expected prop 'note_path'");
		}

		if (/*db*/ ctx[1] === undefined && !('db' in props)) {
			console.warn("<Descendants> was created without expected prop 'db'");
		}

		if (/*indentation*/ ctx[2] === undefined && !('indentation' in props)) {
			console.warn("<Descendants> was created without expected prop 'indentation'");
		}

		if (/*app*/ ctx[3] === undefined && !('app' in props)) {
			console.warn("<Descendants> was created without expected prop 'app'");
		}
	}

	get note_path() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set note_path(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get db() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set db(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get indentation() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set indentation(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get app() {
		throw new Error("<Descendants>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Descendants>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/PathView.svelte generated by Svelte v3.42.1 */
const file$3 = "src/svelte/PathView.svelte";

function add_css$3(target) {
	append_styles(target, "svelte-1jp8rsy", "div#top-bar.svelte-1jp8rsy.svelte-1jp8rsy{display:none;text-align:right}div#top-bar.svelte-1jp8rsy svg.svelte-1jp8rsy{float:right;clear:both;width:24px;margin-left:10px;margin-bottom:10px;height:24px}div#main_moc_div.svelte-1jp8rsy.svelte-1jp8rsy{padding:initial;width:initial;height:100%;position:initial;overflow:auto}div#main_moc_div.dark-mode.svelte-1jp8rsy.svelte-1jp8rsy{color:#dcddde}div#scroll_up.svelte-1jp8rsy.svelte-1jp8rsy{color:gray;display:none;text-align:center;height:30px;width:30px;background-color:transparent;position:fixed;margin-right:20px;margin-top:20px;right:5px;top:4px}div#scroll_up.svelte-1jp8rsy.svelte-1jp8rsy{cursor:pointer;font-size:25px;color:darkgrey}div#scroll_up.svelte-1jp8rsy svg.svelte-1jp8rsy{transform:rotate(-90deg)}div.light-mode.svelte-1jp8rsy div#scroll_up svg.svelte-1jp8rsy{fill:lightgray}div.light-mode.svelte-1jp8rsy div#scroll_up:hover svg.svelte-1jp8rsy{fill:gray}div.dark-mode.svelte-1jp8rsy div#scroll_up svg.svelte-1jp8rsy{fill:gray}div.dark-mode.svelte-1jp8rsy div#scroll_up:hover svg.svelte-1jp8rsy{fill:lightgray}a.link.svelte-1jp8rsy.svelte-1jp8rsy{cursor:pointer}ul.svelte-1jp8rsy.svelte-1jp8rsy{padding-left:0}svg.path-arrow.svelte-1jp8rsy.svelte-1jp8rsy{margin-right:2px;margin-left:2px;display:inline;width:24px;height:0.7em}div.dark-mode.svelte-1jp8rsy svg.path-arrow.svelte-1jp8rsy{fill:lightgray}.errors.svelte-1jp8rsy.svelte-1jp8rsy{padding:10px;width:initial;height:initial;position:initial;overflow-y:initial;overflow-wrap:initial}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,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 */");
}

function get_each_context$3(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[19] = list[i];
	return child_ctx;
}

function get_each_context_1$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[22] = list[i];
	child_ctx[24] = i;
	return child_ctx;
}

// (117:4) {:else}
function create_else_block(ctx) {
	let t0;
	let br;
	let t1;
	let ul;
	let descendants;
	let t2;
	let div;
	let svg;
	let path;
	let current;
	let mounted;
	let dispose;
	let each_value = /*paths*/ ctx[0];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));
	}

	descendants = new Descendants({
			props: {
				db: /*db*/ ctx[2],
				app: /*app*/ ctx[1],
				note_path: /*open_note_path*/ ctx[5],
				indentation: 0
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t0 = space();
			br = element("br");
			t1 = space();
			ul = element("ul");
			create_component(descendants.$$.fragment);
			t2 = space();
			div = element("div");
			svg = svg_element("svg");
			path = svg_element("path");
			add_location(br, file$3, 152, 8, 4963);
			attr_dev(ul, "class", "svelte-1jp8rsy");
			add_location(ul, file$3, 153, 8, 4978);
			attr_dev(path, "d", "M24 12l-12-9v5h-12v8h12v5l12-9z");
			add_location(path, file$3, 172, 17, 5498);
			attr_dev(svg, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(svg, "width", "24");
			attr_dev(svg, "height", "24");
			attr_dev(svg, "viewBox", "0 0 24 24");
			attr_dev(svg, "class", "svelte-1jp8rsy");
			add_location(svg, file$3, 167, 12, 5334);
			attr_dev(div, "id", "scroll_up");
			attr_dev(div, "title", "Scroll to top");
			attr_dev(div, "class", "svelte-1jp8rsy");
			add_location(div, file$3, 161, 8, 5163);
		},
		m: function mount(target, anchor) {
			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(target, anchor);
			}

			insert_dev(target, t0, anchor);
			insert_dev(target, br, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, ul, anchor);
			mount_component(descendants, ul, null);
			insert_dev(target, t2, anchor);
			insert_dev(target, div, anchor);
			append_dev(div, svg);
			append_dev(svg, path);
			/*div_binding*/ ctx[14](div);
			current = true;

			if (!mounted) {
				dispose = listen_dev(div, "click", /*click_handler_3*/ ctx[15], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths, LINKED_FROM, LINKED_TO, LINKED_BOTH, GetDisplayName, db, NavigateToFile, app*/ 7) {
				each_value = /*paths*/ ctx[0];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$3(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$3(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(t0.parentNode, t0);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const descendants_changes = {};
			if (dirty & /*db*/ 4) descendants_changes.db = /*db*/ ctx[2];
			if (dirty & /*app*/ 2) descendants_changes.app = /*app*/ ctx[1];
			if (dirty & /*open_note_path*/ 32) descendants_changes.note_path = /*open_note_path*/ ctx[5];
			descendants.$set(descendants_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(descendants.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(descendants.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(br);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(ul);
			destroy_component(descendants);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(div);
			/*div_binding*/ ctx[14](null);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block.name,
		type: "else",
		source: "(117:4) {:else}",
		ctx
	});

	return block;
}

// (100:32) 
function create_if_block_1(ctx) {
	let t0;
	let a0;
	let t1_value = GetDisplayName(/*cn_path*/ ctx[3], /*db*/ ctx[2]) + "";
	let t1;
	let t2;
	let br0;
	let br1;
	let t3;
	let a1;
	let t5;
	let br2;
	let t6;
	let saplingimage;
	let current;
	let mounted;
	let dispose;
	saplingimage = new SaplingImage({ $$inline: true });

	const block = {
		c: function create() {
			t0 = text("This file doesn't have any connections to ");
			a0 = element("a");
			t1 = text(t1_value);
			t2 = text(".");
			br0 = element("br");
			br1 = element("br");
			t3 = text(" Link it to a file that is part of your Map of Content.\n        Then\n        ");
			a1 = element("a");
			a1.textContent = "update";
			t5 = text("\n        your Map of Content and watch it grow!");
			br2 = element("br");
			t6 = space();
			create_component(saplingimage.$$.fragment);
			attr_dev(a0, "class", "link svelte-1jp8rsy");
			attr_dev(a0, "title", /*cn_path*/ ctx[3]);
			add_location(a0, file$3, 100, 50, 3035);
			add_location(br0, file$3, 106, 10, 3226);
			add_location(br1, file$3, 106, 16, 3232);
			attr_dev(a1, "class", "link svelte-1jp8rsy");
			add_location(a1, file$3, 108, 8, 3315);
			add_location(br2, file$3, 114, 46, 3483);
		},
		m: function mount(target, anchor) {
			insert_dev(target, t0, anchor);
			insert_dev(target, a0, anchor);
			append_dev(a0, t1);
			insert_dev(target, t2, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t3, anchor);
			insert_dev(target, a1, anchor);
			insert_dev(target, t5, anchor);
			insert_dev(target, br2, anchor);
			insert_dev(target, t6, anchor);
			mount_component(saplingimage, target, anchor);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(a0, "click", /*click_handler*/ ctx[11], false, false, false),
					listen_dev(a1, "click", /*click_handler_1*/ ctx[12], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, dirty) {
			if ((!current || dirty & /*cn_path, db*/ 12) && t1_value !== (t1_value = GetDisplayName(/*cn_path*/ ctx[3], /*db*/ ctx[2]) + "")) set_data_dev(t1, t1_value);

			if (!current || dirty & /*cn_path*/ 8) {
				attr_dev(a0, "title", /*cn_path*/ ctx[3]);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(saplingimage.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(saplingimage.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(a0);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t3);
			if (detaching) detach_dev(a1);
			if (detaching) detach_dev(t5);
			if (detaching) detach_dev(br2);
			if (detaching) detach_dev(t6);
			destroy_component(saplingimage, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_1.name,
		type: "if",
		source: "(100:32) ",
		ctx
	});

	return block;
}

// (96:4) {#if errors.length}
function create_if_block(ctx) {
	let div;
	let raw_value = /*errors*/ ctx[4][0] + "";

	const block = {
		c: function create() {
			div = element("div");
			attr_dev(div, "class", "errors svelte-1jp8rsy");
			add_location(div, file$3, 96, 8, 2886);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);
			div.innerHTML = raw_value;
		},
		p: function update(ctx, dirty) {
			if (dirty & /*errors*/ 16 && raw_value !== (raw_value = /*errors*/ ctx[4][0] + "")) div.innerHTML = raw_value;		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block.name,
		type: "if",
		source: "(96:4) {#if errors.length}",
		ctx
	});

	return block;
}

// (125:20) {:else}
function create_else_block_1(ctx) {
	let a;
	let t_value = GetDisplayName(/*pathitem*/ ctx[22][0], /*db*/ ctx[2]) + "";
	let t;
	let a_title_value;
	let mounted;
	let dispose;

	function click_handler_2(...args) {
		return /*click_handler_2*/ ctx[13](/*pathitem*/ ctx[22], ...args);
	}

	const block = {
		c: function create() {
			a = element("a");
			t = text(t_value);
			attr_dev(a, "class", "link svelte-1jp8rsy");
			attr_dev(a, "title", a_title_value = /*pathitem*/ ctx[22][0]);
			add_location(a, file$3, 125, 24, 3872);
		},
		m: function mount(target, anchor) {
			insert_dev(target, a, anchor);
			append_dev(a, t);

			if (!mounted) {
				dispose = listen_dev(a, "click", click_handler_2, false, false, false);
				mounted = true;
			}
		},
		p: function update(new_ctx, dirty) {
			ctx = new_ctx;
			if (dirty & /*paths, db*/ 5 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[22][0], /*db*/ ctx[2]) + "")) set_data_dev(t, t_value);

			if (dirty & /*paths*/ 1 && a_title_value !== (a_title_value = /*pathitem*/ ctx[22][0])) {
				attr_dev(a, "title", a_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(a);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_else_block_1.name,
		type: "else",
		source: "(125:20) {:else}",
		ctx
	});

	return block;
}

// (121:20) {#if i == 0}
function create_if_block_5(ctx) {
	let span;
	let t_value = GetDisplayName(/*pathitem*/ ctx[22][0], /*db*/ ctx[2]) + "";
	let t;
	let span_title_value;

	const block = {
		c: function create() {
			span = element("span");
			t = text(t_value);
			attr_dev(span, "title", span_title_value = /*pathitem*/ ctx[22][0]);
			add_location(span, file$3, 121, 24, 3699);
		},
		m: function mount(target, anchor) {
			insert_dev(target, span, anchor);
			append_dev(span, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths, db*/ 5 && t_value !== (t_value = GetDisplayName(/*pathitem*/ ctx[22][0], /*db*/ ctx[2]) + "")) set_data_dev(t, t_value);

			if (dirty & /*paths*/ 1 && span_title_value !== (span_title_value = /*pathitem*/ ctx[22][0])) {
				attr_dev(span, "title", span_title_value);
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(span);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_5.name,
		type: "if",
		source: "(121:20) {#if i == 0}",
		ctx
	});

	return block;
}

// (143:57) 
function create_if_block_4(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#pointer-arrow-both-svg-moc");
			add_location(use, file$3, 144, 28, 4776);
			attr_dev(svg, "class", "path-arrow svelte-1jp8rsy");
			add_location(svg, file$3, 143, 24, 4723);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_4.name,
		type: "if",
		source: "(143:57) ",
		ctx
	});

	return block;
}

// (139:55) 
function create_if_block_3(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#pointer-arrow-left-svg-moc");
			add_location(use, file$3, 140, 28, 4567);
			attr_dev(svg, "class", "path-arrow svelte-1jp8rsy");
			add_location(svg, file$3, 139, 24, 4514);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_3.name,
		type: "if",
		source: "(139:55) ",
		ctx
	});

	return block;
}

// (135:20) {#if pathitem[1] == LINKED_FROM}
function create_if_block_2(ctx) {
	let svg;
	let use;

	const block = {
		c: function create() {
			svg = svg_element("svg");
			use = svg_element("use");
			attr_dev(use, "href", "#pointer-arrow-right-svg-moc");
			add_location(use, file$3, 136, 28, 4359);
			attr_dev(svg, "class", "path-arrow svelte-1jp8rsy");
			add_location(svg, file$3, 135, 24, 4306);
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg, anchor);
			append_dev(svg, use);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_if_block_2.name,
		type: "if",
		source: "(135:20) {#if pathitem[1] == LINKED_FROM}",
		ctx
	});

	return block;
}

// (120:16) {#each path.reverse() as pathitem, i}
function create_each_block_1$1(ctx) {
	let t;
	let if_block1_anchor;

	function select_block_type_1(ctx, dirty) {
		if (/*i*/ ctx[24] == 0) return create_if_block_5;
		return create_else_block_1;
	}

	let current_block_type = select_block_type_1(ctx);
	let if_block0 = current_block_type(ctx);

	function select_block_type_2(ctx, dirty) {
		if (/*pathitem*/ ctx[22][1] == LINKED_FROM) return create_if_block_2;
		if (/*pathitem*/ ctx[22][1] == LINKED_TO) return create_if_block_3;
		if (/*pathitem*/ ctx[22][1] == LINKED_BOTH) return create_if_block_4;
	}

	let current_block_type_1 = select_block_type_2(ctx);
	let if_block1 = current_block_type_1 && current_block_type_1(ctx);

	const block = {
		c: function create() {
			if_block0.c();
			t = space();
			if (if_block1) if_block1.c();
			if_block1_anchor = empty();
		},
		m: function mount(target, anchor) {
			if_block0.m(target, anchor);
			insert_dev(target, t, anchor);
			if (if_block1) if_block1.m(target, anchor);
			insert_dev(target, if_block1_anchor, anchor);
		},
		p: function update(ctx, dirty) {
			if_block0.p(ctx, dirty);

			if (current_block_type_1 !== (current_block_type_1 = select_block_type_2(ctx))) {
				if (if_block1) if_block1.d(1);
				if_block1 = current_block_type_1 && current_block_type_1(ctx);

				if (if_block1) {
					if_block1.c();
					if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
				}
			}
		},
		d: function destroy(detaching) {
			if_block0.d(detaching);
			if (detaching) detach_dev(t);

			if (if_block1) {
				if_block1.d(detaching);
			}

			if (detaching) detach_dev(if_block1_anchor);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1$1.name,
		type: "each",
		source: "(120:16) {#each path.reverse() as pathitem, i}",
		ctx
	});

	return block;
}

// (118:8) {#each paths as path}
function create_each_block$3(ctx) {
	let div;
	let t;
	let br;
	let each_value_1 = /*path*/ ctx[19].reverse();
	validate_each_argument(each_value_1);
	let each_blocks = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks[i] = create_each_block_1$1(get_each_context_1$1(ctx, each_value_1, i));
	}

	const block = {
		c: function create() {
			div = element("div");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t = space();
			br = element("br");
			attr_dev(div, "class", "path");
			add_location(div, file$3, 118, 12, 3569);
			add_location(br, file$3, 149, 12, 4931);
		},
		m: function mount(target, anchor) {
			insert_dev(target, div, anchor);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(div, null);
			}

			insert_dev(target, t, anchor);
			insert_dev(target, br, anchor);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*paths, LINKED_FROM, LINKED_TO, LINKED_BOTH, GetDisplayName, db, NavigateToFile, app*/ 7) {
				each_value_1 = /*path*/ ctx[19].reverse();
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1$1(ctx, each_value_1, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block_1$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(div, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value_1.length;
			}
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div);
			destroy_each(each_blocks, detaching);
			if (detaching) detach_dev(t);
			if (detaching) detach_dev(br);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$3.name,
		type: "each",
		source: "(118:8) {#each paths as path}",
		ctx
	});

	return block;
}

function create_fragment$3(ctx) {
	let svg0;
	let symbol0;
	let path0;
	let t0;
	let svg1;
	let symbol1;
	let path1;
	let t1;
	let svg2;
	let symbol2;
	let path2;
	let t2;
	let svg3;
	let symbol3;
	let path3;
	let t3;
	let div1;
	let div0;
	let svg4;
	let use;
	let t4;
	let current_block_type_index;
	let if_block;
	let current;
	let mounted;
	let dispose;
	const if_block_creators = [create_if_block, create_if_block_1, create_else_block];
	const if_blocks = [];

	function select_block_type(ctx, dirty) {
		if (/*errors*/ ctx[4].length) return 0;
		if (/*paths*/ ctx[0].length == 0) return 1;
		return 2;
	}

	current_block_type_index = select_block_type(ctx);
	if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);

	const block = {
		c: function create() {
			svg0 = svg_element("svg");
			symbol0 = svg_element("symbol");
			path0 = svg_element("path");
			t0 = space();
			svg1 = svg_element("svg");
			symbol1 = svg_element("symbol");
			path1 = svg_element("path");
			t1 = space();
			svg2 = svg_element("svg");
			symbol2 = svg_element("symbol");
			path2 = svg_element("path");
			t2 = space();
			svg3 = svg_element("svg");
			symbol3 = svg_element("symbol");
			path3 = svg_element("path");
			t3 = space();
			div1 = element("div");
			div0 = element("div");
			svg4 = svg_element("svg");
			use = svg_element("use");
			t4 = space();
			if_block.c();
			attr_dev(path0, "d", " M 21.883,8 14.356,14.235 15,15 24,7.479 15,0 14.355,0.764 21.884,7 H 0 v 1 z");
			add_location(path0, file$3, 46, 9, 1408);
			attr_dev(symbol0, "id", "pointer-arrow-right-svg-moc");
			attr_dev(symbol0, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol0, "viewBox", "0 0 24 15.05");
			add_location(symbol0, file$3, 42, 4, 1276);
			attr_dev(svg0, "display", "none");
			add_location(svg0, file$3, 41, 0, 1251);
			attr_dev(path1, "d", "M 2.117,7 9.644,0.765 9,0 0,7.521 9,15 9.645,14.236 2.116,8 H 24 V 7 Z");
			add_location(path1, file$3, 57, 9, 1734);
			attr_dev(symbol1, "id", "pointer-arrow-left-svg-moc");
			attr_dev(symbol1, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol1, "viewBox", "0 0 24 15.05");
			add_location(symbol1, file$3, 53, 4, 1603);
			attr_dev(svg1, "display", "none");
			add_location(svg1, file$3, 52, 0, 1578);
			attr_dev(path2, "d", "M 9 0 L 0 7.5214844 L 9 15 L 9.6445312 14.236328 L 2.1152344 8 L 21.882812 8 L 14.355469 14.234375 L 15 15 L 24 7.4785156 L 15 0 L 14.355469 0.76367188 L 21.884766 7 L 2.1171875 7 L 9.6445312 0.765625 L 9 0 z ");
			add_location(path2, file$3, 69, 8, 2069);
			attr_dev(symbol2, "id", "pointer-arrow-both-svg-moc");
			attr_dev(symbol2, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol2, "viewBox", "0 0 24 15.05");
			add_location(symbol2, file$3, 64, 4, 1933);
			attr_dev(svg2, "display", "none");
			add_location(svg2, file$3, 63, 0, 1908);
			attr_dev(path3, "d", "M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z");
			add_location(path3, file$3, 81, 8, 2513);
			attr_dev(symbol3, "id", "hamburger-menu");
			attr_dev(symbol3, "xmlns", "http://www.w3.org/2000/svg");
			attr_dev(symbol3, "viewBox", "0 0 24 24");
			add_location(symbol3, file$3, 76, 4, 2392);
			attr_dev(svg3, "display", "none");
			add_location(svg3, file$3, 75, 0, 2367);
			attr_dev(use, "href", "#hamburger-menu");
			add_location(use, file$3, 92, 12, 2797);
			attr_dev(svg4, "class", "path-arrow svelte-1jp8rsy");
			add_location(svg4, file$3, 91, 8, 2760);
			attr_dev(div0, "id", "top-bar");
			attr_dev(div0, "class", "svelte-1jp8rsy");
			add_location(div0, file$3, 90, 4, 2733);
			attr_dev(div1, "id", "main_moc_div");
			attr_dev(div1, "class", "" + (null_to_empty(/*dark_mode*/ ctx[8]) + " svelte-1jp8rsy"));
			add_location(div1, file$3, 84, 0, 2600);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, svg0, anchor);
			append_dev(svg0, symbol0);
			append_dev(symbol0, path0);
			insert_dev(target, t0, anchor);
			insert_dev(target, svg1, anchor);
			append_dev(svg1, symbol1);
			append_dev(symbol1, path1);
			insert_dev(target, t1, anchor);
			insert_dev(target, svg2, anchor);
			append_dev(svg2, symbol2);
			append_dev(symbol2, path2);
			insert_dev(target, t2, anchor);
			insert_dev(target, svg3, anchor);
			append_dev(svg3, symbol3);
			append_dev(symbol3, path3);
			insert_dev(target, t3, anchor);
			insert_dev(target, div1, anchor);
			append_dev(div1, div0);
			append_dev(div0, svg4);
			append_dev(svg4, use);
			append_dev(div1, t4);
			if_blocks[current_block_type_index].m(div1, null);
			/*div1_binding*/ ctx[16](div1);
			current = true;

			if (!mounted) {
				dispose = listen_dev(div1, "scroll", /*scroll_handler*/ ctx[17], false, false, false);
				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			let previous_block_index = current_block_type_index;
			current_block_type_index = select_block_type(ctx);

			if (current_block_type_index === previous_block_index) {
				if_blocks[current_block_type_index].p(ctx, dirty);
			} else {
				group_outros();

				transition_out(if_blocks[previous_block_index], 1, 1, () => {
					if_blocks[previous_block_index] = null;
				});

				check_outros();
				if_block = if_blocks[current_block_type_index];

				if (!if_block) {
					if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
					if_block.c();
				} else {
					if_block.p(ctx, dirty);
				}

				transition_in(if_block, 1);
				if_block.m(div1, null);
			}
		},
		i: function intro(local) {
			if (current) return;
			transition_in(if_block);
			current = true;
		},
		o: function outro(local) {
			transition_out(if_block);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(svg0);
			if (detaching) detach_dev(t0);
			if (detaching) detach_dev(svg1);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(svg2);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(svg3);
			if (detaching) detach_dev(t3);
			if (detaching) detach_dev(div1);
			if_blocks[current_block_type_index].d();
			/*div1_binding*/ ctx[16](null);
			mounted = false;
			dispose();
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$3.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$3($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('PathView', slots, []);
	
	
	let { paths } = $$props;
	let { app } = $$props;
	let { db } = $$props;
	let { cn_path } = $$props;
	let { errors } = $$props;
	let { open_note_path } = $$props;
	let scroll_up_div;
	let main_div;
	let scroll_up_div_already_visible = false;

	let dark_mode = document.body.classList.contains("theme-dark")
	? "dark-mode"
	: "light-mode";

	onMount(() => {
		scroll_to_top();
	});

	/** Scroll the whole view to the top*/
	function scroll_to_top() {
		$$invalidate(7, main_div.scrollTop = 0, main_div);
	}

	/**show to "scroll to top" arrow if the user has scrolled the view*/
	function on_scroll(position) {
		if (position > 30 && !scroll_up_div_already_visible) {
			$$invalidate(6, scroll_up_div.style.display = "block", scroll_up_div);
			scroll_up_div_already_visible = true;
		} else //hide the arrow if user scrolls back to the top
		if (position <= 30 && scroll_up_div_already_visible) {
			$$invalidate(6, scroll_up_div.style.display = "none", scroll_up_div);
			scroll_up_div_already_visible = false;
		}
	}

	const writable_props = ['paths', 'app', 'db', 'cn_path', 'errors', 'open_note_path'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<PathView> was created with unknown prop '${key}'`);
	});

	const click_handler = event => NavigateToFile(app, cn_path, event);

	const click_handler_1 = () => {
		db.update();
	};

	const click_handler_2 = (pathitem, event) => NavigateToFile(app, pathitem[0], event);

	function div_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			scroll_up_div = $$value;
			$$invalidate(6, scroll_up_div);
		});
	}

	const click_handler_3 = () => scroll_to_top();

	function div1_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			main_div = $$value;
			$$invalidate(7, main_div);
		});
	}

	const scroll_handler = e => on_scroll(e.target.scrollTop);

	$$self.$$set = $$props => {
		if ('paths' in $$props) $$invalidate(0, paths = $$props.paths);
		if ('app' in $$props) $$invalidate(1, app = $$props.app);
		if ('db' in $$props) $$invalidate(2, db = $$props.db);
		if ('cn_path' in $$props) $$invalidate(3, cn_path = $$props.cn_path);
		if ('errors' in $$props) $$invalidate(4, errors = $$props.errors);
		if ('open_note_path' in $$props) $$invalidate(5, open_note_path = $$props.open_note_path);
	};

	$$self.$capture_state = () => ({
		LINKED_BOTH,
		LINKED_TO,
		LINKED_FROM,
		GetDisplayName,
		IsCtrlPressed,
		NavigateToFile,
		onMount,
		SaplingImage,
		Descendants,
		paths,
		app,
		db,
		cn_path,
		errors,
		open_note_path,
		scroll_up_div,
		main_div,
		scroll_up_div_already_visible,
		dark_mode,
		scroll_to_top,
		on_scroll
	});

	$$self.$inject_state = $$props => {
		if ('paths' in $$props) $$invalidate(0, paths = $$props.paths);
		if ('app' in $$props) $$invalidate(1, app = $$props.app);
		if ('db' in $$props) $$invalidate(2, db = $$props.db);
		if ('cn_path' in $$props) $$invalidate(3, cn_path = $$props.cn_path);
		if ('errors' in $$props) $$invalidate(4, errors = $$props.errors);
		if ('open_note_path' in $$props) $$invalidate(5, open_note_path = $$props.open_note_path);
		if ('scroll_up_div' in $$props) $$invalidate(6, scroll_up_div = $$props.scroll_up_div);
		if ('main_div' in $$props) $$invalidate(7, main_div = $$props.main_div);
		if ('scroll_up_div_already_visible' in $$props) scroll_up_div_already_visible = $$props.scroll_up_div_already_visible;
		if ('dark_mode' in $$props) $$invalidate(8, dark_mode = $$props.dark_mode);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		paths,
		app,
		db,
		cn_path,
		errors,
		open_note_path,
		scroll_up_div,
		main_div,
		dark_mode,
		scroll_to_top,
		on_scroll,
		click_handler,
		click_handler_1,
		click_handler_2,
		div_binding,
		click_handler_3,
		div1_binding,
		scroll_handler
	];
}

class PathView extends SvelteComponentDev {
	constructor(options) {
		super(options);

		init(
			this,
			options,
			instance$3,
			create_fragment$3,
			safe_not_equal,
			{
				paths: 0,
				app: 1,
				db: 2,
				cn_path: 3,
				errors: 4,
				open_note_path: 5
			},
			add_css$3
		);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "PathView",
			options,
			id: create_fragment$3.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*paths*/ ctx[0] === undefined && !('paths' in props)) {
			console.warn("<PathView> was created without expected prop 'paths'");
		}

		if (/*app*/ ctx[1] === undefined && !('app' in props)) {
			console.warn("<PathView> was created without expected prop 'app'");
		}

		if (/*db*/ ctx[2] === undefined && !('db' in props)) {
			console.warn("<PathView> was created without expected prop 'db'");
		}

		if (/*cn_path*/ ctx[3] === undefined && !('cn_path' in props)) {
			console.warn("<PathView> was created without expected prop 'cn_path'");
		}

		if (/*errors*/ ctx[4] === undefined && !('errors' in props)) {
			console.warn("<PathView> was created without expected prop 'errors'");
		}

		if (/*open_note_path*/ ctx[5] === undefined && !('open_note_path' in props)) {
			console.warn("<PathView> was created without expected prop 'open_note_path'");
		}
	}

	get paths() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set paths(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get app() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get db() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set db(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get cn_path() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set cn_path(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get errors() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set errors(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get open_note_path() {
		throw new Error("<PathView>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set open_note_path(value) {
		throw new Error("<PathView>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

class MOCView extends obsidian.ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.plugin = plugin;
        this.db = this.plugin.db;
        this.app = this.plugin.app;
        this.plugin.registerViewInstance(this);
        this.plugin.app.workspace.onLayoutReady(() => this.init());
        // rerender on css change to adapt to dark/light mode changes
        this.plugin.app.workspace.on("css-change", () => {
            this.rerender();
        });
    }
    init() {
        // update the path view every time a file is opened
        this.registerEvent(this.app.workspace.on("file-open", (file) => this.onFileOpen()));
        //register with the main class
        //show "loading" message
        if (this.errorview) {
            this.errorview.$destroy();
            this.errorview = undefined;
        }
        this.errorview = new Error$1({
            target: this.contentEl,
            props: { message: "Loading..." },
        });
    }
    async onOpen() {
    }
    /** rerender the view on file open, but only if the database has already been initiated */
    onFileOpen() {
        if (this.db.database_initialized) {
            this.rerender();
        }
    }
    /** reload paths and recreate the svelte instance */
    rerender() {
        Log("Rerender called on view", true);
        // destroy old pathview/errorview instance
        // set symbol to undefined to avoid "This component has already been destroyed" message
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        if (this.errorview) {
            this.errorview.$destroy();
            this.errorview = undefined;
        }
        let errors = [];
        //console.log(this.open_file_path)
        // during startup (before first db update is completed) show loading message
        if (!this.db.database_initialized) {
            errors.push("Please wait...");
        }
        // make sure the database is usable
        else if (!this.db.database_complete) {
            //TODO: try once to this.db.update()
            errors.push(`Your Map of Content couldn't be created.<br><br> Make sure your Central Note path '${this.plugin.getSettingValue("CN_path")}' is correct. You can change this path in the settings tab.`);
        }
        // make sure a file is opened
        else if (this.app.workspace.getActiveFile() == null) {
            errors.push("No file has been opened");
        }
        else if (this.plugin.isExludedFile(this.app.workspace.getActiveFile())) {
            errors.push("This file has been excluded from the Map of Content.");
        }
        // get path of open note 
        else {
            this.open_file_path = this.app.workspace.getActiveFile().path;
            if (this.db.getNoteFromPath(this.open_file_path) == undefined) {
                // make sure file is in library   
                errors.push("This file hasn't been indexed yet. Update the Map of Content to include it.");
            }
        }
        // Show error message if necessary
        if (errors.length > 0) {
            this._app = new PathView({
                target: this.contentEl,
                props: { paths: [], app: this.app, db: this.db, cn_path: this.plugin.getSettingValue("CN_path"), open_note_path: "None", errors: errors },
            });
            return;
        }
        // get paths to open note
        let all_paths = this.db.findPaths(this.open_file_path);
        if (all_paths.length == 0) {
            Log("No paths to this note", true);
        }
        // 
        let paths = all_paths.map((p) => p.items.slice());
        // create new pathview
        this._app = new PathView({
            target: this.contentEl,
            props: { paths: paths, app: this.app, db: this.db, cn_path: this.plugin.getSettingValue("CN_path"), open_note_path: this.open_file_path, errors: [] },
        });
    }
    getViewType() {
        return MOC_VIEW_TYPE;
    }
    getDisplayText() {
        return "Map of Content";
    }
    getIcon() {
        return "stacked-levels";
    }
    onClose() {
        // destroy old pathview/errorview instance
        // set symbol to undefined to avoid "This component has already been destroyed" message
        Log("View closing", true);
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        if (this.errorview) {
            this.errorview.$destroy();
            this.errorview = undefined;
        }
        this.plugin.unregisterViewInstance(this);
        return Promise.resolve();
    }
}

/* src/svelte/settings/ExcludedFolders.svelte generated by Svelte v3.42.1 */
const file$2 = "src/svelte/settings/ExcludedFolders.svelte";

function add_css$2(target) {
	append_styles(target, "svelte-1a0h8f5", ".svelte-1a0h8f5{font-size:1em}h2.svelte-1a0h8f5{text-align:left}div#exluded-folders.svelte-1a0h8f5{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-1a0h8f5{width:300px}#excluded-select.svelte-1a0h8f5{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-1a0h8f5{height:300px;width:300px}div#currently-excluded.svelte-1a0h8f5{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-1a0h8f5{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGb2xkZXJzLnN2ZWx0ZSIsIm1hcHBpbmdzIjoiQUEyS0ksZUFBRSxDQUFBLEFBQ0UsU0FBUyxDQUFFLEdBQUcsQUFDbEIsQ0FBQSxBQUVBLEVBQUUsZUFBQyxDQUFBLEFBQ0MsVUFBVSxDQUFFLElBQUksQUFDcEIsQ0FBQSxBQUVBLEdBQUcsZ0JBQWdCLGVBQUMsQ0FBQSxBQUNoQixPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxJQUFJLENBQ2YsVUFBVSxDQUFFLElBQUksQUFDcEIsQ0FBQSxBQUVBLEdBQUcsY0FBYyxlQUFDLENBQUEsQUFDZCxLQUFLLENBQUUsS0FBSyxBQUNoQixDQUFBLEFBRUEsZ0JBQWdCLGVBQUMsQ0FBQSxBQUNiLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQ0FDWixTQUFTLENBQUUsR0FBRyxDQUNkLFFBQVEsQ0FBRSxJQUFJLEFBQ2xCLENBQUEsQUFFQSxtQkFBbUIsZUFBQyxDQUFBLEFBQ2hCLE1BQU0sQ0FBRSxLQUFLLENBQ2IsS0FBSyxDQUFFLEtBQUssQUFDaEIsQ0FBQSxBQUNBLEdBQUcsbUJBQW1CLGVBQUMsQ0FBQSxBQUNuQixLQUFLLENBQUUsS0FBSyxDQUNaLFVBQVUsQ0FBRSxLQUFLLENBQ2pCLFFBQVEsQ0FBRSxNQUFNLEFBQ3BCLENBQUEsQUFDQSxHQUFHLHdCQUF3QixlQUFDLENBQUEsQUFDeEIsUUFBUSxDQUFFLElBQUksQ0FDZCxVQUFVLENBQUUsS0FBSyxBQUNyQixDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkV4Y2x1ZGVkRm9sZGVycy5zdmVsdGUiXX0= */");
}

function get_each_context$2(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

function get_each_context_1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[23] = list[i];
	return child_ctx;
}

// (107:12) {#each all_folders as folder_path}
function create_each_block_1(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*folder_path*/ ctx[23];
			option.value = option.__value;
			attr_dev(option, "class", "svelte-1a0h8f5");
			add_location(option, file$2, 107, 16, 3308);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block_1.name,
		type: "each",
		source: "(107:12) {#each all_folders as folder_path}",
		ctx
	});

	return block;
}

// (144:16) {#each excluded_files as file_path}
function create_each_block$2(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-1a0h8f5");
			add_location(li, file$2, 144, 20, 4339);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$2.name,
		type: "each",
		source: "(144:16) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$2(ctx) {
	let h2;
	let t1;
	let div4;
	let div0;
	let select;
	let t2;
	let div1;
	let label;
	let t4;
	let input0;
	let t5;
	let datalist;
	let br0;
	let t6;
	let br1;
	let t7;
	let input1;
	let br2;
	let t8;
	let input2;
	let br3;
	let br4;
	let t9;
	let div3;
	let t10;
	let t11_value = /*excluded_files*/ ctx[1].length + "";
	let t11;
	let t12;
	let input3;
	let input3_value_value;
	let t13;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value_1 = /*all_folders*/ ctx[5];
	validate_each_argument(each_value_1);
	let each_blocks_1 = [];

	for (let i = 0; i < each_value_1.length; i += 1) {
		each_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
	}

	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded folders";
			t1 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t2 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a folder:";
			t4 = space();
			input0 = element("input");
			t5 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].c();
			}

			br0 = element("br");
			t6 = space();
			br1 = element("br");
			t7 = space();
			input1 = element("input");
			br2 = element("br");
			t8 = space();
			input2 = element("input");
			br3 = element("br");
			br4 = element("br");
			t9 = space();
			div3 = element("div");
			t10 = text("Currently excluded files: ");
			t11 = text(t11_value);
			t12 = space();
			input3 = element("input");
			t13 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-1a0h8f5");
			add_location(h2, file$2, 82, 0, 2554);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-1a0h8f5");
			add_location(select, file$2, 86, 8, 2645);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-1a0h8f5");
			add_location(div0, file$2, 85, 4, 2612);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-1a0h8f5");
			add_location(label, file$2, 95, 8, 2860);
			attr_dev(input0, "list", "exlude-folder");
			attr_dev(input0, "id", "Exluded-folders");
			attr_dev(input0, "type", "text");
			attr_dev(input0, "placeholder", "Start typing to see suggestions...");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-1a0h8f5");
			add_location(input0, file$2, 96, 8, 2914);
			attr_dev(datalist, "id", "exlude-folder");
			attr_dev(datalist, "class", "svelte-1a0h8f5");
			add_location(datalist, file$2, 105, 8, 3215);
			attr_dev(br0, "class", "svelte-1a0h8f5");
			add_location(br0, file$2, 109, 19, 3378);
			attr_dev(br1, "class", "svelte-1a0h8f5");
			add_location(br1, file$2, 110, 8, 3393);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-1a0h8f5");
			add_location(input1, file$2, 111, 8, 3408);
			attr_dev(br2, "class", "svelte-1a0h8f5");
			add_location(br2, file$2, 118, 10, 3571);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-1a0h8f5");
			add_location(input2, file$2, 119, 8, 3586);
			attr_dev(br3, "class", "svelte-1a0h8f5");
			add_location(br3, file$2, 126, 10, 3758);
			attr_dev(br4, "class", "svelte-1a0h8f5");
			add_location(br4, file$2, 126, 16, 3764);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-1a0h8f5");
			add_location(div1, file$2, 94, 4, 2822);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-1a0h8f5");
			add_location(input3, file$2, 130, 8, 3882);
			attr_dev(ul, "class", "svelte-1a0h8f5");
			add_location(ul, file$2, 142, 12, 4262);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-1a0h8f5");
			add_location(div2, file$2, 138, 8, 4123);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-1a0h8f5");
			add_location(div3, file$2, 128, 4, 3786);
			attr_dev(div4, "id", "exluded-folders");
			attr_dev(div4, "class", "svelte-1a0h8f5");
			add_location(div4, file$2, 84, 0, 2581);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[10](select);
			append_dev(div4, t2);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t4);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[11](input0);
			set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			append_dev(div1, t5);
			append_dev(div1, datalist);

			for (let i = 0; i < each_blocks_1.length; i += 1) {
				each_blocks_1[i].m(datalist, null);
			}

			append_dev(div1, br0);
			append_dev(div1, t6);
			append_dev(div1, br1);
			append_dev(div1, t7);
			append_dev(div1, input1);
			append_dev(div1, br2);
			append_dev(div1, t8);
			append_dev(div1, input2);
			append_dev(div1, br3);
			append_dev(div1, br4);
			append_dev(div4, t9);
			append_dev(div4, div3);
			append_dev(div3, t10);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, input3);
			append_dev(div3, t13);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[12]),
					listen_dev(input1, "click", /*click_handler*/ ctx[13], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[14], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[15], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exlude_path_input_value*/ 4 && input0.value !== /*exlude_path_input_value*/ ctx[2]) {
				set_input_value(input0, /*exlude_path_input_value*/ ctx[2]);
			}

			if (dirty & /*all_folders*/ 32) {
				each_value_1 = /*all_folders*/ ctx[5];
				validate_each_argument(each_value_1);
				let i;

				for (i = 0; i < each_value_1.length; i += 1) {
					const child_ctx = get_each_context_1(ctx, each_value_1, i);

					if (each_blocks_1[i]) {
						each_blocks_1[i].p(child_ctx, dirty);
					} else {
						each_blocks_1[i] = create_each_block_1(child_ctx);
						each_blocks_1[i].c();
						each_blocks_1[i].m(datalist, null);
					}
				}

				for (; i < each_blocks_1.length; i += 1) {
					each_blocks_1[i].d(1);
				}

				each_blocks_1.length = each_value_1.length;
			}

			if (dirty & /*excluded_files*/ 2 && t11_value !== (t11_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t11, t11_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$2(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$2(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[10](null);
			/*input0_binding*/ ctx[11](null);
			destroy_each(each_blocks_1, detaching);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$2.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$2($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFolders', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let excluded_folders = plugin.getSettingValue("exluded_folders");

	// TODO show all exluded files in TextEdit not list
	// Select box based on https://www.c-sharpcorner.com/UploadFile/mahakgupta/add-and-remove-listbox-items-in-javascript/
	let all_folders = GetAllFolders(app);

	var list_options_no = 0;
	let excluded_files = allExcludedFiles();

	onMount(() => {
		// create select entries for all already excluded folders
		excluded_folders.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		let all_files = app.vault.getFiles().map(file => file.path);

		return all_files.filter(path_to_file => {
			return excluded_folders.some(path => path_to_file.startsWith(path));
		});
	}

	let exlude_path_input_value;
	let exlude_path_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.updateSettings({ exluded_folders: excluded_folders });
	}

	function addValue() {
		if (!exlude_path_input_value) {
			return;
		}

		// Return if folder doesn't exist
		if (!all_folders.contains(exlude_path_input_value)) {
			alert("Please choose a folder from the list");
			return;
		}

		// Return if folder already on list
		if (excluded_folders.contains(exlude_path_input_value)) {
			$$invalidate(3, exlude_path_input.value = "", exlude_path_input);
			$$invalidate(2, exlude_path_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exlude_path_input_value, exlude_path_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		excluded_folders.push(exlude_path_input_value);

		// reset input field
		$$invalidate(3, exlude_path_input.value = "", exlude_path_input);

		$$invalidate(2, exlude_path_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				excluded_folders.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFolders> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exlude_path_input = $$value;
			$$invalidate(3, exlude_path_input);
		});
	}

	function input0_input_handler() {
		exlude_path_input_value = this.value;
		$$invalidate(2, exlude_path_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		Log,
		GetAllFolders,
		app,
		plugin,
		excludedlist,
		excluded_folders,
		all_folders,
		list_options_no,
		excluded_files,
		allExcludedFiles,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(8, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(9, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('excluded_folders' in $$props) excluded_folders = $$props.excluded_folders;
		if ('all_folders' in $$props) $$invalidate(5, all_folders = $$props.all_folders);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('exlude_path_input_value' in $$props) $$invalidate(2, exlude_path_input_value = $$props.exlude_path_input_value);
		if ('exlude_path_input' in $$props) $$invalidate(3, exlude_path_input = $$props.exlude_path_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exlude_path_input_value,
		exlude_path_input,
		show_all_hidden,
		all_folders,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFolders extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$2, create_fragment$2, safe_not_equal, { app: 8, plugin: 9 }, add_css$2);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFolders",
			options,
			id: create_fragment$2.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[8] === undefined && !('app' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[9] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFolders> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFolders>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFolders>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/settings/ExcludedFilenames.svelte generated by Svelte v3.42.1 */
const file$1 = "src/svelte/settings/ExcludedFilenames.svelte";

function add_css$1(target) {
	append_styles(target, "svelte-1wc77v2", ".svelte-1wc77v2{font-size:1em}h2.svelte-1wc77v2{text-align:left}div#exlude-filenames.svelte-1wc77v2{display:flex;flex-wrap:wrap;column-gap:10px}div#list-excluded.svelte-1wc77v2{width:300px}#excluded-select.svelte-1wc77v2{height:300px;width:300px;font-size:1em;overflow:auto}#add-remove-exluded.svelte-1wc77v2{height:300px;width:300px}div#currently-excluded.svelte-1wc77v2{width:600px;max-height:300px;overflow:hidden}div#currently-excluded-list.svelte-1wc77v2{overflow:auto;max-height:260px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhjbHVkZWRGaWxlbmFtZXMuc3ZlbHRlIiwibWFwcGluZ3MiOiJBQXdLSSxlQUFFLENBQUEsQUFDRSxTQUFTLENBQUUsR0FBRyxBQUNsQixDQUFBLEFBRUEsRUFBRSxlQUFDLENBQUEsQUFDQyxVQUFVLENBQUUsSUFBSSxBQUNwQixDQUFBLEFBRUEsR0FBRyxpQkFBaUIsZUFBQyxDQUFBLEFBQ2pCLE9BQU8sQ0FBRSxJQUFJLENBQ2IsU0FBUyxDQUFFLElBQUksQ0FDZixVQUFVLENBQUUsSUFBSSxBQUNwQixDQUFBLEFBRUEsR0FBRyxjQUFjLGVBQUMsQ0FBQSxBQUNkLEtBQUssQ0FBRSxLQUFLLEFBQ2hCLENBQUEsQUFFQSxnQkFBZ0IsZUFBQyxDQUFBLEFBQ2IsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxDQUNaLFNBQVMsQ0FBRSxHQUFHLENBQ2QsUUFBUSxDQUFFLElBQUksQUFDbEIsQ0FBQSxBQUVBLG1CQUFtQixlQUFDLENBQUEsQUFDaEIsTUFBTSxDQUFFLEtBQUssQ0FDYixLQUFLLENBQUUsS0FBSyxBQUNoQixDQUFBLEFBQ0EsR0FBRyxtQkFBbUIsZUFBQyxDQUFBLEFBQ25CLEtBQUssQ0FBRSxLQUFLLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsUUFBUSxDQUFFLE1BQU0sQUFDcEIsQ0FBQSxBQUNBLEdBQUcsd0JBQXdCLGVBQUMsQ0FBQSxBQUN4QixRQUFRLENBQUUsSUFBSSxDQUNkLFVBQVUsQ0FBRSxLQUFLLEFBQ3JCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRXhjbHVkZWRGaWxlbmFtZXMuc3ZlbHRlIl19 */");
}

function get_each_context$1(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[20] = list[i];
	return child_ctx;
}

// (137:16) {#each excluded_files as file_path}
function create_each_block$1(ctx) {
	let li;
	let t_value = /*file_path*/ ctx[20] + "";
	let t;

	const block = {
		c: function create() {
			li = element("li");
			t = text(t_value);
			attr_dev(li, "class", "svelte-1wc77v2");
			add_location(li, file$1, 137, 20, 4082);
		},
		m: function mount(target, anchor) {
			insert_dev(target, li, anchor);
			append_dev(li, t);
		},
		p: function update(ctx, dirty) {
			if (dirty & /*excluded_files*/ 2 && t_value !== (t_value = /*file_path*/ ctx[20] + "")) set_data_dev(t, t_value);
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(li);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block$1.name,
		type: "each",
		source: "(137:16) {#each excluded_files as file_path}",
		ctx
	});

	return block;
}

function create_fragment$1(ctx) {
	let h2;
	let t1;
	let br0;
	let br1;
	let t2;
	let div4;
	let div0;
	let select;
	let t3;
	let div1;
	let label;
	let t5;
	let input0;
	let t6;
	let br2;
	let t7;
	let br3;
	let t8;
	let input1;
	let br4;
	let t9;
	let input2;
	let br5;
	let br6;
	let t10;
	let div3;
	let t11;
	let t12_value = /*excluded_files*/ ctx[1].length + "";
	let t12;
	let t13;
	let input3;
	let input3_value_value;
	let t14;
	let div2;
	let ul;
	let div2_style_value;
	let mounted;
	let dispose;
	let each_value = /*excluded_files*/ ctx[1];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
	}

	const block = {
		c: function create() {
			h2 = element("h2");
			h2.textContent = "Excluded filenames";
			t1 = text("\nFilenames that contain these phrases will not be included in the Map of Content.\nThat also includes the file extension.");
			br0 = element("br");
			br1 = element("br");
			t2 = space();
			div4 = element("div");
			div0 = element("div");
			select = element("select");
			t3 = space();
			div1 = element("div");
			label = element("label");
			label.textContent = "Add a phrase:";
			t5 = space();
			input0 = element("input");
			t6 = space();
			br2 = element("br");
			t7 = space();
			br3 = element("br");
			t8 = space();
			input1 = element("input");
			br4 = element("br");
			t9 = space();
			input2 = element("input");
			br5 = element("br");
			br6 = element("br");
			t10 = space();
			div3 = element("div");
			t11 = text("Currently excluded files: ");
			t12 = text(t12_value);
			t13 = space();
			input3 = element("input");
			t14 = space();
			div2 = element("div");
			ul = element("ul");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			attr_dev(h2, "class", "svelte-1wc77v2");
			add_location(h2, file$1, 79, 0, 2411);
			attr_dev(br0, "class", "svelte-1wc77v2");
			add_location(br0, file$1, 81, 38, 2558);
			attr_dev(br1, "class", "svelte-1wc77v2");
			add_location(br1, file$1, 81, 44, 2564);
			attr_dev(select, "id", "excluded-select");
			attr_dev(select, "name", "lstValue");
			attr_dev(select, "type", "text");
			select.multiple = true;
			attr_dev(select, "class", "svelte-1wc77v2");
			add_location(select, file$1, 85, 8, 2637);
			attr_dev(div0, "id", "list-excluded");
			attr_dev(div0, "class", "svelte-1wc77v2");
			add_location(div0, file$1, 84, 4, 2604);
			attr_dev(label, "for", "myBrowser");
			attr_dev(label, "class", "svelte-1wc77v2");
			add_location(label, file$1, 94, 8, 2852);
			attr_dev(input0, "id", "Exluded-filenames");
			attr_dev(input0, "type", "text");
			set_style(input0, "width", "300px");
			attr_dev(input0, "class", "svelte-1wc77v2");
			add_location(input0, file$1, 95, 8, 2906);
			attr_dev(br2, "class", "svelte-1wc77v2");
			add_location(br2, file$1, 102, 8, 3121);
			attr_dev(br3, "class", "svelte-1wc77v2");
			add_location(br3, file$1, 103, 8, 3136);
			attr_dev(input1, "type", "button");
			attr_dev(input1, "name", "add");
			input1.value = "Add";
			attr_dev(input1, "class", "svelte-1wc77v2");
			add_location(input1, file$1, 104, 8, 3151);
			attr_dev(br4, "class", "svelte-1wc77v2");
			add_location(br4, file$1, 111, 10, 3314);
			attr_dev(input2, "type", "button");
			attr_dev(input2, "name", "delete");
			input2.value = "Delete";
			attr_dev(input2, "class", "svelte-1wc77v2");
			add_location(input2, file$1, 112, 8, 3329);
			attr_dev(br5, "class", "svelte-1wc77v2");
			add_location(br5, file$1, 119, 10, 3501);
			attr_dev(br6, "class", "svelte-1wc77v2");
			add_location(br6, file$1, 119, 16, 3507);
			attr_dev(div1, "id", "add-remove-exluded");
			attr_dev(div1, "class", "svelte-1wc77v2");
			add_location(div1, file$1, 93, 4, 2814);
			attr_dev(input3, "type", "button");
			attr_dev(input3, "name", "toggle-show-hidden");
			input3.value = input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show";
			attr_dev(input3, "class", "svelte-1wc77v2");
			add_location(input3, file$1, 123, 8, 3625);
			attr_dev(ul, "class", "svelte-1wc77v2");
			add_location(ul, file$1, 135, 12, 4005);

			attr_dev(div2, "style", div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none");

			attr_dev(div2, "id", "currently-excluded-list");
			attr_dev(div2, "class", "svelte-1wc77v2");
			add_location(div2, file$1, 131, 8, 3866);
			attr_dev(div3, "id", "currently-excluded");
			attr_dev(div3, "class", "svelte-1wc77v2");
			add_location(div3, file$1, 121, 4, 3529);
			attr_dev(div4, "id", "exlude-filenames");
			attr_dev(div4, "class", "svelte-1wc77v2");
			add_location(div4, file$1, 83, 0, 2572);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, h2, anchor);
			insert_dev(target, t1, anchor);
			insert_dev(target, br0, anchor);
			insert_dev(target, br1, anchor);
			insert_dev(target, t2, anchor);
			insert_dev(target, div4, anchor);
			append_dev(div4, div0);
			append_dev(div0, select);
			/*select_binding*/ ctx[9](select);
			append_dev(div4, t3);
			append_dev(div4, div1);
			append_dev(div1, label);
			append_dev(div1, t5);
			append_dev(div1, input0);
			/*input0_binding*/ ctx[10](input0);
			set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			append_dev(div1, t6);
			append_dev(div1, br2);
			append_dev(div1, t7);
			append_dev(div1, br3);
			append_dev(div1, t8);
			append_dev(div1, input1);
			append_dev(div1, br4);
			append_dev(div1, t9);
			append_dev(div1, input2);
			append_dev(div1, br5);
			append_dev(div1, br6);
			append_dev(div4, t10);
			append_dev(div4, div3);
			append_dev(div3, t11);
			append_dev(div3, t12);
			append_dev(div3, t13);
			append_dev(div3, input3);
			append_dev(div3, t14);
			append_dev(div3, div2);
			append_dev(div2, ul);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(ul, null);
			}

			if (!mounted) {
				dispose = [
					listen_dev(input0, "input", /*input0_input_handler*/ ctx[11]),
					listen_dev(input1, "click", /*click_handler*/ ctx[12], false, false, false),
					listen_dev(input2, "click", /*click_handler_1*/ ctx[13], false, false, false),
					listen_dev(input3, "click", /*click_handler_2*/ ctx[14], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*exclude_phrase_input_value*/ 4 && input0.value !== /*exclude_phrase_input_value*/ ctx[2]) {
				set_input_value(input0, /*exclude_phrase_input_value*/ ctx[2]);
			}

			if (dirty & /*excluded_files*/ 2 && t12_value !== (t12_value = /*excluded_files*/ ctx[1].length + "")) set_data_dev(t12, t12_value);

			if (dirty & /*show_all_hidden*/ 16 && input3_value_value !== (input3_value_value = /*show_all_hidden*/ ctx[4] ? "Hide" : "Show")) {
				prop_dev(input3, "value", input3_value_value);
			}

			if (dirty & /*excluded_files*/ 2) {
				each_value = /*excluded_files*/ ctx[1];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context$1(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block$1(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(ul, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			if (dirty & /*show_all_hidden*/ 16 && div2_style_value !== (div2_style_value = /*show_all_hidden*/ ctx[4]
			? "display:block"
			: "display:none")) {
				attr_dev(div2, "style", div2_style_value);
			}
		},
		i: noop,
		o: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(h2);
			if (detaching) detach_dev(t1);
			if (detaching) detach_dev(br0);
			if (detaching) detach_dev(br1);
			if (detaching) detach_dev(t2);
			if (detaching) detach_dev(div4);
			/*select_binding*/ ctx[9](null);
			/*input0_binding*/ ctx[10](null);
			destroy_each(each_blocks, detaching);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment$1.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance$1($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('ExcludedFilenames', slots, []);
	
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let excludedlist;
	let exluded_filename_components = plugin.getSettingValue("exluded_filename_components");
	let all_files = app.vault.getFiles().map(file => file.basename + "." + file.extension);
	let excluded_files = allExcludedFiles();

	// TODO show all exluded files in TextEdit not list
	// add all existing excluded folders to select element
	var list_options_no = 0;

	onMount(() => {
		// create select entries for all already excluded filename components
		exluded_filename_components.forEach(folder => {
			$$invalidate(0, excludedlist.options[list_options_no] = new Option(folder, folder), excludedlist);
			list_options_no++;
		});
	});

	function allExcludedFiles() {
		return all_files.filter(filename => {
			return exluded_filename_components.some(path => filename.contains(path));
		});
	}

	let exclude_phrase_input_value;
	let exclude_phrase_input;
	let show_all_hidden = false;

	/** update the list of exluded files and save the updated settings*/
	function save() {
		$$invalidate(1, excluded_files = allExcludedFiles());
		plugin.updateSettings({ exluded_filename_components });
	}

	function addValue() {
		if (!exclude_phrase_input_value) {
			return;
		}

		// Return if folder already on list
		if (exluded_filename_components.contains(exclude_phrase_input_value)) {
			$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);
			$$invalidate(2, exclude_phrase_input_value = "");
			return;
		}

		// add option to select box
		let AddOpt = new Option(exclude_phrase_input_value, exclude_phrase_input_value);

		$$invalidate(0, excludedlist.options[list_options_no++] = AddOpt, excludedlist);
		exluded_filename_components.push(exclude_phrase_input_value);

		// reset input field
		$$invalidate(3, exclude_phrase_input.value = "", exclude_phrase_input);

		$$invalidate(2, exclude_phrase_input_value = "");
		save();
		return true;
	}

	function deleteValue() {
		let s = 1;
		let Index;

		if (excludedlist.selectedIndex == -1) {
			alert("Please select an item from the list");
			return true;
		}

		while (s > 0) {
			Index = excludedlist.selectedIndex;

			if (Index >= 0) {
				exluded_filename_components.remove(excludedlist.options[Index].value);
				$$invalidate(0, excludedlist.options[Index] = null, excludedlist);
				--list_options_no;
			} else s = 0;
		}

		save();
		return true;
	}

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<ExcludedFilenames> was created with unknown prop '${key}'`);
	});

	function select_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			excludedlist = $$value;
			$$invalidate(0, excludedlist);
		});
	}

	function input0_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			exclude_phrase_input = $$value;
			$$invalidate(3, exclude_phrase_input);
		});
	}

	function input0_input_handler() {
		exclude_phrase_input_value = this.value;
		$$invalidate(2, exclude_phrase_input_value);
	}

	const click_handler = () => {
		addValue();
	};

	const click_handler_1 = () => {
		deleteValue();
	};

	const click_handler_2 = () => {
		$$invalidate(4, show_all_hidden = !show_all_hidden);
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		onMount,
		app,
		plugin,
		excludedlist,
		exluded_filename_components,
		all_files,
		excluded_files,
		list_options_no,
		allExcludedFiles,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		save,
		addValue,
		deleteValue
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(7, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(8, plugin = $$props.plugin);
		if ('excludedlist' in $$props) $$invalidate(0, excludedlist = $$props.excludedlist);
		if ('exluded_filename_components' in $$props) exluded_filename_components = $$props.exluded_filename_components;
		if ('all_files' in $$props) all_files = $$props.all_files;
		if ('excluded_files' in $$props) $$invalidate(1, excluded_files = $$props.excluded_files);
		if ('list_options_no' in $$props) list_options_no = $$props.list_options_no;
		if ('exclude_phrase_input_value' in $$props) $$invalidate(2, exclude_phrase_input_value = $$props.exclude_phrase_input_value);
		if ('exclude_phrase_input' in $$props) $$invalidate(3, exclude_phrase_input = $$props.exclude_phrase_input);
		if ('show_all_hidden' in $$props) $$invalidate(4, show_all_hidden = $$props.show_all_hidden);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		excludedlist,
		excluded_files,
		exclude_phrase_input_value,
		exclude_phrase_input,
		show_all_hidden,
		addValue,
		deleteValue,
		app,
		plugin,
		select_binding,
		input0_binding,
		input0_input_handler,
		click_handler,
		click_handler_1,
		click_handler_2
	];
}

class ExcludedFilenames extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance$1, create_fragment$1, safe_not_equal, { app: 7, plugin: 8 }, add_css$1);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "ExcludedFilenames",
			options,
			id: create_fragment$1.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[7] === undefined && !('app' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[8] === undefined && !('plugin' in props)) {
			console.warn("<ExcludedFilenames> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<ExcludedFilenames>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<ExcludedFilenames>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

/* src/svelte/Settings.svelte generated by Svelte v3.42.1 */
const file = "src/svelte/Settings.svelte";

function add_css(target) {
	append_styles(target, "svelte-83jj2u", "#settings-container.svelte-83jj2u{position:relative;height:100%;width:100%}#CN_select.svelte-83jj2u{min-width:200px;width:50%;font-size:1em}#update_TLI_path_button.svelte-83jj2u{margin-left:auto;margin-right:auto}h2.svelte-83jj2u{text-align:left}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dGluZ3Muc3ZlbHRlIiwibWFwcGluZ3MiOiJBQXVFRSxtQkFBbUIsY0FBQyxDQUFBLEFBQ2xCLFFBQVEsQ0FBRSxRQUFRLENBQ2xCLE1BQU0sQ0FBRSxJQUFJLENBQ1osS0FBSyxDQUFFLElBQUksQUFDYixDQUFBLEFBQ0EsVUFBVSxjQUFDLENBQUEsQUFDVCxTQUFTLENBQUUsS0FBSyxDQUNoQixLQUFLLENBQUUsR0FBRyxDQUNWLFNBQVMsQ0FBRSxHQUFHLEFBQ2hCLENBQUEsQUFDQSx1QkFBdUIsY0FBQyxDQUFBLEFBQ3RCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLFlBQVksQ0FBRSxJQUFJLEFBQ3BCLENBQUEsQUFDQSxFQUFFLGNBQUMsQ0FBQSxBQUNELFVBQVUsQ0FBRSxJQUFJLEFBQ2xCLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiU2V0dGluZ3Muc3ZlbHRlIl19 */");
}

function get_each_context(ctx, list, i) {
	const child_ctx = ctx.slice();
	child_ctx[10] = list[i];
	return child_ctx;
}

// (49:6) {#each all_files as filepath}
function create_each_block(ctx) {
	let option;

	const block = {
		c: function create() {
			option = element("option");
			option.__value = /*filepath*/ ctx[10];
			option.value = option.__value;
			add_location(option, file, 49, 8, 1836);
		},
		m: function mount(target, anchor) {
			insert_dev(target, option, anchor);
		},
		p: noop,
		d: function destroy(detaching) {
			if (detaching) detach_dev(option);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_each_block.name,
		type: "each",
		source: "(49:6) {#each all_files as filepath}",
		ctx
	});

	return block;
}

function create_fragment(ctx) {
	let div1;
	let div0;
	let h2;
	let t1;
	let span;
	let br0;
	let t3;
	let label;
	let t5;
	let input;
	let t6;
	let datalist;
	let t7;
	let button;
	let t9;
	let br1;
	let t10;
	let excludedfolders;
	let t11;
	let excludedfilenames;
	let current;
	let mounted;
	let dispose;
	let each_value = /*all_files*/ ctx[4];
	validate_each_argument(each_value);
	let each_blocks = [];

	for (let i = 0; i < each_value.length; i += 1) {
		each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
	}

	excludedfolders = new ExcludedFolders({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	excludedfilenames = new ExcludedFilenames({
			props: {
				app: /*app*/ ctx[0],
				plugin: /*plugin*/ ctx[1]
			},
			$$inline: true
		});

	const block = {
		c: function create() {
			div1 = element("div");
			div0 = element("div");
			h2 = element("h2");
			h2.textContent = "Path of your Central Note";
			t1 = text("\n    Current path:");
			span = element("span");
			span.textContent = `${/*current_tli*/ ctx[5]}`;
			br0 = element("br");
			t3 = space();
			label = element("label");
			label.textContent = "New path:";
			t5 = space();
			input = element("input");
			t6 = space();
			datalist = element("datalist");

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].c();
			}

			t7 = space();
			button = element("button");
			button.textContent = "Save";
			t9 = space();
			br1 = element("br");
			t10 = space();
			create_component(excludedfolders.$$.fragment);
			t11 = space();
			create_component(excludedfilenames.$$.fragment);
			attr_dev(h2, "class", "svelte-83jj2u");
			add_location(h2, file, 36, 4, 1424);
			attr_dev(span, "id", "tli_path");
			add_location(span, file, 37, 17, 1476);
			add_location(br0, file, 37, 57, 1516);
			attr_dev(label, "for", "myBrowser");
			add_location(label, file, 38, 4, 1527);
			attr_dev(input, "type", "text");
			attr_dev(input, "list", "notes");
			attr_dev(input, "id", "CN_select");
			attr_dev(input, "placeholder", "Start typing to see suggestions...");
			attr_dev(input, "class", "svelte-83jj2u");
			add_location(input, file, 39, 4, 1573);
			attr_dev(datalist, "id", "notes");
			add_location(datalist, file, 47, 4, 1770);
			attr_dev(button, "id", "update_TLI_path_button");
			attr_dev(button, "type", "button");
			attr_dev(button, "class", "svelte-83jj2u");
			add_location(button, file, 52, 4, 1892);
			attr_dev(div0, "class", "path");
			add_location(div0, file, 35, 2, 1401);
			add_location(br1, file, 60, 2, 2041);
			attr_dev(div1, "id", "settings-container");
			attr_dev(div1, "class", "svelte-83jj2u");
			add_location(div1, file, 34, 0, 1369);
		},
		l: function claim(nodes) {
			throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option");
		},
		m: function mount(target, anchor) {
			insert_dev(target, div1, anchor);
			append_dev(div1, div0);
			append_dev(div0, h2);
			append_dev(div0, t1);
			append_dev(div0, span);
			append_dev(div0, br0);
			append_dev(div0, t3);
			append_dev(div0, label);
			append_dev(div0, t5);
			append_dev(div0, input);
			/*input_binding*/ ctx[7](input);
			set_input_value(input, /*cn_path_input_value*/ ctx[3]);
			append_dev(div0, t6);
			append_dev(div0, datalist);

			for (let i = 0; i < each_blocks.length; i += 1) {
				each_blocks[i].m(datalist, null);
			}

			append_dev(div0, t7);
			append_dev(div0, button);
			append_dev(div1, t9);
			append_dev(div1, br1);
			append_dev(div1, t10);
			mount_component(excludedfolders, div1, null);
			append_dev(div1, t11);
			mount_component(excludedfilenames, div1, null);
			current = true;

			if (!mounted) {
				dispose = [
					listen_dev(input, "input", /*input_input_handler*/ ctx[8]),
					listen_dev(button, "click", /*click_handler*/ ctx[9], false, false, false)
				];

				mounted = true;
			}
		},
		p: function update(ctx, [dirty]) {
			if (dirty & /*cn_path_input_value*/ 8 && input.value !== /*cn_path_input_value*/ ctx[3]) {
				set_input_value(input, /*cn_path_input_value*/ ctx[3]);
			}

			if (dirty & /*all_files*/ 16) {
				each_value = /*all_files*/ ctx[4];
				validate_each_argument(each_value);
				let i;

				for (i = 0; i < each_value.length; i += 1) {
					const child_ctx = get_each_context(ctx, each_value, i);

					if (each_blocks[i]) {
						each_blocks[i].p(child_ctx, dirty);
					} else {
						each_blocks[i] = create_each_block(child_ctx);
						each_blocks[i].c();
						each_blocks[i].m(datalist, null);
					}
				}

				for (; i < each_blocks.length; i += 1) {
					each_blocks[i].d(1);
				}

				each_blocks.length = each_value.length;
			}

			const excludedfolders_changes = {};
			if (dirty & /*app*/ 1) excludedfolders_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfolders_changes.plugin = /*plugin*/ ctx[1];
			excludedfolders.$set(excludedfolders_changes);
			const excludedfilenames_changes = {};
			if (dirty & /*app*/ 1) excludedfilenames_changes.app = /*app*/ ctx[0];
			if (dirty & /*plugin*/ 2) excludedfilenames_changes.plugin = /*plugin*/ ctx[1];
			excludedfilenames.$set(excludedfilenames_changes);
		},
		i: function intro(local) {
			if (current) return;
			transition_in(excludedfolders.$$.fragment, local);
			transition_in(excludedfilenames.$$.fragment, local);
			current = true;
		},
		o: function outro(local) {
			transition_out(excludedfolders.$$.fragment, local);
			transition_out(excludedfilenames.$$.fragment, local);
			current = false;
		},
		d: function destroy(detaching) {
			if (detaching) detach_dev(div1);
			/*input_binding*/ ctx[7](null);
			destroy_each(each_blocks, detaching);
			destroy_component(excludedfolders);
			destroy_component(excludedfilenames);
			mounted = false;
			run_all(dispose);
		}
	};

	dispatch_dev("SvelteRegisterBlock", {
		block,
		id: create_fragment.name,
		type: "component",
		source: "",
		ctx
	});

	return block;
}

function instance($$self, $$props, $$invalidate) {
	let { $$slots: slots = {}, $$scope } = $$props;
	validate_slots('Settings', slots, []);
	
	
	let { app } = $$props;
	let { plugin } = $$props;
	let cn_input;

	// TODO choose whether to reverse paths to note
	// TODO check the db is complete before allow settings changes (maybe have this svelte only do that and load all other components from other svelte files)
	// TODO lazy load all the file names and folders?
	// Show paths and descendants in different views
	// get list of all files for dropdown menu
	let all_files = app.vault.getFiles().map(file => file.path);

	Log("Central note path: " + plugin.getSettingValue("CN_path"), true);
	let cn_path_input_value;
	let current_tli = plugin.getSettingValue("CN_path");

	const updateCNPath = () => {
		if (!cn_path_input_value) {
			return;
		}

		// change TLI path
		plugin.updateSettings({ CN_path: cn_path_input_value });

		Log("New central note path: " + cn_path_input_value, true);
		document.getElementById("tli_path").textContent = cn_path_input_value;
		new obsidian.Notice("New Central Note path saved");

		// clear selection dropdown list
		//document.getElementById("CN_select").value = "";
		$$invalidate(2, cn_input.value = "", cn_input);

		$$invalidate(3, cn_path_input_value = "");
	};

	const writable_props = ['app', 'plugin'];

	Object.keys($$props).forEach(key => {
		if (!~writable_props.indexOf(key) && key.slice(0, 2) !== '$$' && key !== 'slot') console.warn(`<Settings> was created with unknown prop '${key}'`);
	});

	function input_binding($$value) {
		binding_callbacks[$$value ? 'unshift' : 'push'](() => {
			cn_input = $$value;
			$$invalidate(2, cn_input);
		});
	}

	function input_input_handler() {
		cn_path_input_value = this.value;
		$$invalidate(3, cn_path_input_value);
	}

	const click_handler = () => {
		updateCNPath();
	};

	$$self.$$set = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
	};

	$$self.$capture_state = () => ({
		App: obsidian.App,
		Notice: obsidian.Notice,
		TFile: obsidian.TFile,
		Log,
		GetAllFolders,
		ExcludedFolders,
		ExcludedFilenames,
		app,
		plugin,
		cn_input,
		all_files,
		cn_path_input_value,
		current_tli,
		updateCNPath
	});

	$$self.$inject_state = $$props => {
		if ('app' in $$props) $$invalidate(0, app = $$props.app);
		if ('plugin' in $$props) $$invalidate(1, plugin = $$props.plugin);
		if ('cn_input' in $$props) $$invalidate(2, cn_input = $$props.cn_input);
		if ('all_files' in $$props) $$invalidate(4, all_files = $$props.all_files);
		if ('cn_path_input_value' in $$props) $$invalidate(3, cn_path_input_value = $$props.cn_path_input_value);
		if ('current_tli' in $$props) $$invalidate(5, current_tli = $$props.current_tli);
	};

	if ($$props && "$$inject" in $$props) {
		$$self.$inject_state($$props.$$inject);
	}

	return [
		app,
		plugin,
		cn_input,
		cn_path_input_value,
		all_files,
		current_tli,
		updateCNPath,
		input_binding,
		input_input_handler,
		click_handler
	];
}

class Settings extends SvelteComponentDev {
	constructor(options) {
		super(options);
		init(this, options, instance, create_fragment, safe_not_equal, { app: 0, plugin: 1 }, add_css);

		dispatch_dev("SvelteRegisterComponent", {
			component: this,
			tagName: "Settings",
			options,
			id: create_fragment.name
		});

		const { ctx } = this.$$;
		const props = options.props || {};

		if (/*app*/ ctx[0] === undefined && !('app' in props)) {
			console.warn("<Settings> was created without expected prop 'app'");
		}

		if (/*plugin*/ ctx[1] === undefined && !('plugin' in props)) {
			console.warn("<Settings> was created without expected prop 'plugin'");
		}
	}

	get app() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set app(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	get plugin() {
		throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}

	set plugin(value) {
		throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'");
	}
}

const DEFAULT_SETTINGS = {
    CN_path: "Central Note.md",
    exluded_folders: [],
    exluded_filename_components: [],
    settings_version: "0.1.10"
};
/** take a legacy settings object and transform it till it conforms to the current version */
function UpgradeSettings(object, app) {
    try {
        // abort if settings are already in current version format
        if (object["settings_version"] === DEFAULT_SETTINGS["settings_version"]) {
            Log("Settings already in current version", true);
            return object;
        }
        // clone the object
        object = JSON.parse(JSON.stringify(object));
        let object_keys = Object.keys(object);
        console.log(object_keys);
        let old_version = undefined;
        // determine which version the legacy object is from
        if (!object_keys.contains("settings_version")) {
            old_version = "pre-0.1.10";
        }
        else {
            old_version = object["settings_version"];
        }
        console.log("old settings version: " + old_version);
        if (old_version === "pre-0.1.10") {
            // extract the CN path from CN_path_per_vault and save it as CN_path
            Log("Converting CN path from pre-0.1.10 to 0.1.10", true);
            // get just the name of all vaults there's a CN stored for
            let cn_settings_vault_names = object["CN_path_per_vault"].map((val) => val[0]);
            if (cn_settings_vault_names.contains(app.vault.getName())) {
                object["CN_path"] = object["CN_path_per_vault"][cn_settings_vault_names.indexOf(app.vault.getName())][1];
            }
            else {
                // delete the CN_path entry. it will then be filled with default_settings data later
                delete object["CN_path"];
            }
            // delete the legacy CN_path_per_vault entry
            delete object["CN_path_per_vault"];
            //set new settings_version
            object["settings_version"] = "0.1.10";
        }
        return object;
    }
    catch (_a) {
        // it things don't work out, delete all old settings data (better than breaking the plugin)
        return {};
    }
}

class MOCPlugin extends obsidian.Plugin {
    // statusbartext: HTMLElement	
    async onload() {
        await this.loadSettings();
        this.db = new DBManager(this.app, this);
        this.registerView(MOC_VIEW_TYPE, (leaf) => (this.view = new MOCView(leaf, this)));
        this.app.workspace.onLayoutReady(() => this.initializePlugin());
    }
    async initializePlugin() {
        this.addSettingTab(new MOCSettingTab(this.app, this, this.db));
        this.initLeaf();
        this.db.update();
        this.addRibbonIcon('sync', 'Update Map of Content', async () => {
            await this.db.update();
        });
        this.addCommand({
            id: 'rebuild-map-of-content',
            name: 'Update Map of Content',
            callback: () => {
                this.db.update();
            }
        });
        this.addCommand({
            id: 'open-note-as-central-note',
            name: 'Set open note as Central Note',
            callback: () => {
                let errors = [];
                // make sure a file is opened
                if (this.app.workspace.getActiveFile() == null) {
                    errors.push("No file has been opened");
                }
                else if (this.isExludedFile(this.app.workspace.getActiveFile())) {
                    errors.push("This file has been excluded from the Map of Content.");
                }
                if (errors.length) {
                    new obsidian.Notice(errors[0]);
                    return;
                }
                // get path of open note 
                this.updateSettings({ CN_path: this.app.workspace.getActiveFile().path });
                this.db.update();
            }
        });
        //Todo:  maybe implement some status bar text? like no of linked, unlinked, last time refreshed? 
        //this.statusbartext = this.addStatusBarItem()
        //this.statusbartext.setText("Total number of notes: " + String(l.count()));
    }
    initLeaf() {
        if (this.app.workspace.getLeavesOfType(MOC_VIEW_TYPE).length) {
            Log("View already attached", true);
        }
        else {
            this.app.workspace.getRightLeaf(true).setViewState({
                type: MOC_VIEW_TYPE,
                active: true
            });
        }
    }
    rerender() {
        Log("rerender on main plugin called", true);
        if (this.view) {
            this.view.rerender();
        }
    }
    onunload() {
        Log('Unloading plugin');
        if (this.view) {
            this.view.onClose();
        }
        this.app.workspace.detachLeavesOfType(MOC_VIEW_TYPE);
    }
    async loadSettings() {
        let data = await this.loadData();
        // upgrade settings to newest format if necessary
        // TODO only save new if changed
        data = UpgradeSettings(data, this.app);
        this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
        this.saveSettings();
    }
    async saveSettings() {
        await this.saveData(this.settings);
    }
    async updateSettings(updates) {
        Object.assign(this.settings, updates);
        await this.saveData(this.settings);
        this.rerender();
    }
    getSettingValue(setting) {
        return this.settings[setting];
    }
    /**check whether the central note exists */
    CNexists() {
        let exists = !(this.app.vault.getAbstractFileByPath(this.getSettingValue("CN_path")) == null);
        Log(exists ? "CN exists" : "CN does not exist", true);
        return exists;
    }
    /** get any open views and perform callback function on them */
    oldview(callback) {
        let leaves = this.app.workspace.getLeavesOfType(MOC_VIEW_TYPE);
        if (leaves.length) {
            Log(`Found ${leaves.length} leaves`, true);
            leaves.forEach((leaf) => {
                let view = leaf.view;
                callback(view);
            });
        }
        else {
            Log("No view attached", true);
        }
    }
    /**set internal reference to the current view
     * TODO: Allow keeping several views
     */
    registerViewInstance(view) {
        Log("View registered", true);
        this.view = view;
    }
    /** delete reference to view
     * TODO: allow keeping several views
    */
    unregisterViewInstance(view) {
        this.view = undefined;
    }
    /** check if the file is in any of the exluded folders or the filename contains excluded phrases */
    isExludedFile(file) {
        let path_to_file = file.path;
        let in_excluded_folder = this.getSettingValue("exluded_folders").some((path) => path_to_file.startsWith(path));
        if (in_excluded_folder) {
            return true;
        }
        let filename = file.basename + "." + file.extension;
        let has_excluded_filename = this.getSettingValue("exluded_filename_components").some((phrase) => filename.contains(phrase));
        return has_excluded_filename;
    }
}
class MOCSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin, db) {
        super(app, plugin);
        this.plugin = plugin;
        this.db = db;
        this._app = undefined;
    }
    display() {
        if (this._app) {
            this._app.$destroy();
            this._app = undefined;
        }
        this._app = new Settings({
            target: this.containerEl,
            props: { app: this.app, plugin: this.plugin },
        });
    }
    hide() {
        this.plugin.db.update();
    }
}

module.exports = MOCPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL2NvbnN0YW50cy50cyIsInNyYy90eXBlcy50cyIsInNyYy91dGlscy50cyIsInNyYy9kYi50cyIsIm5vZGVfbW9kdWxlcy9zdmVsdGUvaW50ZXJuYWwvaW5kZXgubWpzIiwic3JjL3N2ZWx0ZS9FcnJvci5zdmVsdGUiLCJzcmMvc3ZlbHRlL1NhcGxpbmdJbWFnZS5zdmVsdGUiLCJzcmMvc3ZlbHRlL0Rlc2NlbmRhbnRzLnN2ZWx0ZSIsInNyYy9zdmVsdGUvUGF0aFZpZXcuc3ZlbHRlIiwic3JjL3ZpZXcudHMiLCJzcmMvc3ZlbHRlL3NldHRpbmdzL0V4Y2x1ZGVkRm9sZGVycy5zdmVsdGUiLCJzcmMvc3ZlbHRlL3NldHRpbmdzL0V4Y2x1ZGVkRmlsZW5hbWVzLnN2ZWx0ZSIsInNyYy9zdmVsdGUvU2V0dGluZ3Muc3ZlbHRlIiwic3JjL3NldHRpbmdzLnRzIiwic3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgTU9DVmlldyBmcm9tIFwiLi92aWV3XCJcclxuZXhwb3J0IGNvbnN0IENFTlRSQUxfTk9URV9QQVRIX0RFRkFVTFQgPSBcIkNlbnRyYWwgTm90ZS5tZFwiXHJcbmV4cG9ydCBjb25zdCBMSU5LRURfVE8gPSBcIiA9PiBcIlxyXG5leHBvcnQgY29uc3QgTElOS0VEX0ZST00gPSBcIiA8PSBcIlxyXG5leHBvcnQgY29uc3QgTElOS0VEX0NOID0gXCJOb25lXCJcclxuZXhwb3J0IGNvbnN0IExJTktFRF9CT1RIID0gXCIgPD0+IFwiXHJcbmV4cG9ydCBjb25zdCBNT0NfVklFV19UWVBFID0gXCJtYXAtb2YtY29udGVudFwiXHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWaWV3Q2FsbGJhY2t7XHJcbiAgICAodmlldzpNT0NWaWV3KTp2b2lkO1xyXG59XHJcbiIsIlxuZXhwb3J0IGNsYXNzIE5vdGUge1xuICAgIHBhdGg6IHN0cmluZ1xuICAgIGV4dGVuc2lvbjogc3RyaW5nXG4gICAgbGlua3NfdG86IHN0cmluZ1tdXG4gICAgbGlua2VkX2Zyb206IHN0cmluZ1tdXG4gICAgZGlzdGFuY2VfZnJvbV9DTjogbnVtYmVyXG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcGF0aDogc3RyaW5nLFxuICAgICAgICBleHRlbnNpb246IHN0cmluZyxcbiAgICAgICAgbGlua3NfdG86IHN0cmluZ1tdLFxuICAgICAgICBsaW5rZWRfZnJvbTogc3RyaW5nW10sXG4gICAgICAgIGRpc3RhbmNlX2Zyb21fQ046IG51bWJlclxuXG4gICAgKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGhcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBleHRlbnNpb25cbiAgICAgICAgdGhpcy5saW5rc190byA9IGxpbmtzX3RvXG4gICAgICAgIHRoaXMubGlua2VkX2Zyb20gPSBsaW5rZWRfZnJvbVxuICAgICAgICB0aGlzLmRpc3RhbmNlX2Zyb21fQ04gPSBkaXN0YW5jZV9mcm9tX0NOXG4gICAgfVxuXG59XG5leHBvcnQgaW50ZXJmYWNlIERCIHtcbiAgICBbaW5kZXg6IHN0cmluZ106IE5vdGVcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aCB7XG4gICAgaXRlbXM6IFtzdHJpbmcsIGFueV1bXVxuICAgIGFsbF9tZW1iZXJzOiBzdHJpbmdbXVxuXG5cbn1cbiIsImltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4vZGJcIlxuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vKiogbG9nIHRvIHRoZSBjb25zb2xlICovXG5leHBvcnQgY29uc3QgTG9nID0gKG1lc3NhZ2U6IHN0cmluZywgZGV2OiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICBsZXQgbG9nX2RldiA9IGZhbHNlIC8vIHdoZXRoZXIgdG8gcHJpbnQgZGV2ZWxvcG1lbnQgbG9nIG1lc3NhZ2VzXG4gICAgaWYgKCFkZXYgfHwgbG9nX2RldikgY29uc29sZS5sb2coXCJbTWFwIG9mIENvbnRlbnRdIFwiICsgbWVzc2FnZSlcblxufVxuXG4vKiogIHJlbW92ZSB0aGUgZ2l2ZW4gZXh0ZW5zaW9uIChieSBkZWZhdWx0IFwiLm1kXCIpIGZyb20gcGF0aCAgKi9cbmV4cG9ydCBjb25zdCBDbGVhbkV4dGVuc2lvbiA9IChwYXRoOiBzdHJpbmcsIGV4dGVuc2lvbjogc3RyaW5nID0gXCIubWRcIikgPT4ge1xuICAgIGlmIChwYXRoLmVuZHNXaXRoKGV4dGVuc2lvbikpIHtcbiAgICAgICAgcmV0dXJuIHBhdGguc2xpY2UoMCwgLWV4dGVuc2lvbi5sZW5ndGgpXG4gICAgfVxuICAgIHJldHVybiBwYXRoXG59XG5cbi8qKkByZXR1cm5zIFRydWUgaWYgQ1RSTCAvIE1ldGEgaXMgcHJlc3NlZCAqL1xuZXhwb3J0IGNvbnN0IElzQ3RybFByZXNzZWQgPSAoZTogTW91c2VFdmVudCk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk1hY2ludG9zaFwiKSA/IGUubWV0YUtleSA6IGUuY3RybEtleVxuXG59XG5cbi8qKiAgUmV0dXJucyBvbmx5IHRoZSBuYW1lIG9mIHRoZSBhY3R1YWwgZmlsZSAgKi9cbmV4cG9ydCBjb25zdCBGaWxlTmFtZUZyb21QYXRoID0gKHBhdGg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHBhdGguc3BsaXQoXCIvXCIpLmxhc3QoKVxufVxuXG4vKiogIHJldHVybiB0aGUgZnVsbCBwYXRoIGlmIHRoZXJlIGFyZSB0d28gb3IgbW9yZSBub3RlcyB3aXRoIHRoZSBzYW1lIGZpbGVuYW1lIGFuZCBleHRlbnNpb24sIGVsc2Ugb25seSB0aGUgZmlsZW5hbWUgIFxuICogQHRvZG8gb25seSByZXR1cm4gYXMgbWFueSBzZWdtZW50cyAoZm9sZGVycykgb2YgdGhlIHBhdGggYXMgYXJlIG5lY2Nlc3NhcnkgdG8gdW5pcXVlbHkgZGlmZmVyZW50aWF0ZSB0aGUgbm90ZVxuKi9cbmV4cG9ydCBjb25zdCBHZXREaXNwbGF5TmFtZSA9IChwYXRoOiBzdHJpbmcsIGRiOiBEQk1hbmFnZXIpOiBzdHJpbmcgPT4ge1xuICAgIGxldCBmaWxlX25hbWUgPSBGaWxlTmFtZUZyb21QYXRoKHBhdGgpXG4gICAgbGV0IGRpc3BsYXlfbmFtZSA9IG51bGxcblxuICAgIGlmIChkYi5kdXBsaWNhdGVfZmlsZV9zdGF0dXMuZ2V0KGZpbGVfbmFtZSkpIHtcbiAgICAgICAgZGlzcGxheV9uYW1lID0gQ2xlYW5FeHRlbnNpb24ocGF0aClcbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXNwbGF5X25hbWUgPSBDbGVhbkV4dGVuc2lvbihmaWxlX25hbWUpXG4gICAgfVxuICAgIHJldHVybiBkaXNwbGF5X25hbWVcbn1cblxuXG5leHBvcnQgY29uc3QgTmF2aWdhdGVUb0ZpbGUgPSBhc3luYyAoXG4gICAgYXBwOiBBcHAsXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIGV2ZW50OiBNb3VzZUV2ZW50XG4pID0+IHtcblxuXG4gICAgbGV0IGZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXRoLCBcIi9cIik7XG5cbiAgICBpZiAoIWZpbGUpIHJldHVybjtcbiAgICBjb25zdCBsZWFmID0gSXNDdHJsUHJlc3NlZChldmVudClcbiAgICAgICAgPyBhcHAud29ya3NwYWNlLnNwbGl0QWN0aXZlTGVhZigpXG4gICAgICAgIDogYXBwLndvcmtzcGFjZS5nZXRVbnBpbm5lZExlYWYoKTtcbiAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwYXRoLCBcIi9cIilcbiAgICAvL2F3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG59O1xuXG4vKiogR2V0IHRoZSBwYXRocyBvZiBhbGwgZm9sZGVycyBpbiB0aGUgdmF1bHQsIGVtcHR5IG9yIG5vdCAqL1xuZXhwb3J0IGNvbnN0IEdldEFsbEZvbGRlcnMgPSAoYXBwOiBBcHApOiBzdHJpbmdbXSA9PiB7XG4gICAgbGV0IHZhdWx0X2ZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICBsZXQgYWxsX2ZvbGRlcl9wYXRocyA9IFtdXG4gICAgdmF1bHRfZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgICAvLyBjdXQgb2YgZmlsZW5hbWVcbiAgICAgICAgbGV0IGZvbGRlcl9wYXRoID0gZmlsZS5wYXRoLnNsaWNlKDAsIGZpbGUucGF0aC5sZW5ndGggLSAoZmlsZS5iYXNlbmFtZS5sZW5ndGggKyBmaWxlLmV4dGVuc2lvbi5sZW5ndGggKyAxKSlcbiAgICAgICAgLy8gYWRkIHBhdGggdG8gY29sbGVjdGVkIHBhdGhzXG4gICAgICAgIGlmIChmb2xkZXJfcGF0aC5sZW5ndGggJiYgIWFsbF9mb2xkZXJfcGF0aHMuY29udGFpbnMoZm9sZGVyX3BhdGgpKSB7XG4gICAgICAgICAgICBhbGxfZm9sZGVyX3BhdGhzLnB1c2goZm9sZGVyX3BhdGgpXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gc3RvcmUgYWxsIHBhcmVudCBmb2xkZXIgcGF0aHMgYXMgdW5pcXVlIHBhdGhzIGlmIHRoZXkgYXJlbid0IHlldCBiZWNhdXNlIHRoZXkgZG9uJ3QgaW5jbHVkZSBhbnkgbm90ZXMgZGlyZWN0bHlcbiAgICBhbGxfZm9sZGVyX3BhdGhzLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgICAgbGV0IGFsbF9zdWJfcGF0aHMgPSBwYXRoLnNwbGl0KFwiL1wiKVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGFsbF9zdWJfcGF0aHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcGFydGlhbF9wYXRoID0gYWxsX3N1Yl9wYXRocy5zbGljZSgwLCBpKS5qb2luKFwiL1wiKSArIFwiL1wiXG4gICAgICAgICAgICBpZiAoIWFsbF9mb2xkZXJfcGF0aHMuY29udGFpbnMocGFydGlhbF9wYXRoKSkge1xuICAgICAgICAgICAgICAgIGFsbF9mb2xkZXJfcGF0aHMucHVzaChwYXJ0aWFsX3BhdGgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cbiAgICB9KVxuIFxuXG4gICAgcmV0dXJuIGFsbF9mb2xkZXJfcGF0aHNcbn1cbiIsImltcG9ydCB7IExJTktFRF9CT1RILCBMSU5LRURfQ04gYXMgTElOS0VEX0NOLCBMSU5LRURfVE8sIExJTktFRF9GUk9NIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgdHlwZSB7IEFwcCwgVmF1bHQsIExpbmtDYWNoZSwgRW1iZWRDYWNoZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBOb3RlLCBEQiwgUGF0aCB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBGaWxlTmFtZUZyb21QYXRoIH0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuL21haW5cIlxuaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIERCTWFuYWdlciB7XG4gICAgZGI6IERCXG4gICAgZGJfZW50cmllczogYW55W11cbiAgICBkYl9rZXlzOiBzdHJpbmdbXVxuICAgIGFwcDogQXBwXG4gICAgcGx1Z2luOiBNT0NQbHVnaW5cbiAgICB2YXVsdDogVmF1bHRcbiAgICBhbGxfcGF0aHM6IFBhdGhbXVxuICAgIGdldF9wYXRoc19yYW46IG51bWJlclxuICAgIGRlc2NlbmRhbnRzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT5cbiAgICBkdXBsaWNhdGVfZmlsZV9zdGF0dXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+XG4gICAgZGF0YWJhc2VfY29tcGxldGU6IGJvb2xlYW4gLy8gd2hldGhlciB0aGUgZGIgZXRjLiBhcmUgaW4gYSBnb29kIHN0YXRlIGFuZCBjYW4gYmUgdXNlZFxuICAgIGRhdGFiYXNlX2luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2UgLy8gZmFsc2Ugb24gcGx1Z2luIGxhdW5jaCBiZWZvcmUgdGhlIGZpcnN0IChzdWNjZXNzZnVsIG9yIGZhaWxlZCkgZGIgdXBkYXRlIGF0dGVtcHRcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1PQ1BsdWdpbikge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICAgICAgdGhpcy5hbGxfcGF0aHMgPSBbXVxuICAgICAgICB0aGlzLmRiID0ge31cbiAgICAgICAgdGhpcy5kYl9lbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5kYilcbiAgICB9XG5cbiAgICBpbml0KCkge1xuXG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlX2NvbXBsZXRlID0gZmFsc2VcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBDZW50cmFsIG5vdGUgZXhpc3RzXG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLkNOZXhpc3RzKCkpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ2VudHJhbCBub3RlICdcIiArIHRoaXMucGx1Z2luLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIikgKyBcIicgZG9lcyBub3QgZXhpc3RcIilcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiWW91IGNhbiBhZGp1c3QgdGhlIHBhdGggb2YgeW91ciBDZW50cmFsIE5vdGUgaW4gdGhlIHNldHRpbmdzIHRhYlwiKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHRpbWVzdGFtcCBmb3IgdHJhY2tpbmcgZHVyYXRpb24gb2YgcmVidWlsZGluZ1xuICAgICAgICAgICAgICAgIGxldCBzdGFydF90bXNwID0gRGF0ZS5ub3coKVxuXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVXBkYXRpbmcgdGhlIE1hcCBvZiBDb250ZW50Li4uJyk7XG4gICAgICAgICAgICAgICAgTG9nKFwiVXBkYXRpbmcgdGhlIE1hcCBvZiBDb250ZW50Li4uXCIpXG5cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMCkpXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGRiXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEQigpXG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDApKVxuXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRfcGF0aHNfcmFuID0gMFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGVwdGhJbmZvcm1hdGlvbigpXG5cbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgb2xkIHBhdGggaW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLmFsbF9wYXRocy5sZW5ndGggPSAwXG4gICAgICAgICAgICAgICAgbGV0IHBhdGhfc29fZmFyOiBQYXRoID0geyBhbGxfbWVtYmVyczogW3RoaXMucGx1Z2luLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIildLCBpdGVtczogW1t0aGlzLnBsdWdpbi5nZXRTZXR0aW5nVmFsdWUoXCJDTl9wYXRoXCIpLCBMSU5LRURfQ05dXSB9XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDApKVxuXG4gICAgICAgICAgICAgICAgdGhpcy5mb2xsb3dQYXRocyhwYXRoX3NvX2ZhcilcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMCkpXG5cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURlc2NlbmRhbnRzKClcblxuICAgICAgICAgICAgICAgIC8vIG1hcmsgZGF0YWJhc2UgYXMgY29tcGxldGVcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlX2NvbXBsZXRlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVcGRhdGUgY29tcGxldGVcIilcbiAgICAgICAgICAgICAgICBMb2coXCJVcGRhdGUgY29tcGxldGVcIilcblxuICAgICAgICAgICAgICAgIGxldCBlbmRfdG1zcCA9IERhdGUubm93KClcbiAgICAgICAgICAgICAgICBMb2coXCJUb29rIFwiICsgU3RyaW5nKChlbmRfdG1zcCAtIHN0YXJ0X3Rtc3ApIC8gMTAwMCkpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VfaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZXJlbmRlcigpXG4gICAgICAgIH1cblxuXG4gICAgfVxuXG4gICAgLyoqUmV0dXJuIHRoZSBpbnRlcm5hbCBub3RlIHJlcHJlc2VudGF0aW9uIG9iamVjdCBmb3IgYSBnaXZlbiBwYXRoICovXG4gICAgZ2V0Tm90ZUZyb21QYXRoKHBhdGg6IHN0cmluZykge1xuICAgICAgICBpZiAocGF0aCBpbiB0aGlzLmRiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYltwYXRoXVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKiogcmV0dXJuIGFsbCBwYXRocyB0aGF0IGluY2x1ZGUgYSBjZXJ0YWluIG5vdGUuIE9ubHkgcmV0dXJuIHRoZSBwYXRoIHVwIHRvIHRoYXQgbm90ZSovXG4gICAgZmluZFBhdGhzKHBhdGg6IHN0cmluZyk6IFBhdGhbXSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZF9wYXRoczogUGF0aFtdID0gW11cbiAgICAgICAgbGV0IGZpbHRlcmVkX3BhdGhzX2pzb24gPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZF9wYXRocylcbiAgICAgICAgdGhpcy5hbGxfcGF0aHMuZm9yRWFjaCgocDogUGF0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKHAuYWxsX21lbWJlcnMuaW5jbHVkZXMocGF0aCkpIHtcbiAgICAgICAgICAgICAgICBpZiAocC5hbGxfbWVtYmVycy5sYXN0KCkgPT0gcGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9wYXRocy5wdXNoKHApXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBwLmFsbF9tZW1iZXJzLmluZGV4T2YocGF0aCkgKyAxXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaG9wcGVkX29mX3BhdGggPSBwLml0ZW1zLnNsaWNlKDAsIGluZGV4KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcmVkX3BhdGhzX2pzb24uaW5jbHVkZXMoSlNPTi5zdHJpbmdpZnkoY2hvcHBlZF9vZl9wYXRoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBhIHBhdGggZWxlbWVudCBjb250YWluaW5nIG9ubHkgdGhlIHBhcnRzIG9mIHRoZSBwYXRoIGluZm9ybWF0aW9uIHVwIHRvIHRoZSBub3RlIGluIHF1ZXN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZF9wYXRocy5wdXNoKHsgYWxsX21lbWJlcnM6IHAuYWxsX21lbWJlcnMuc2xpY2UoMCwgaW5kZXgpLCBpdGVtczogcC5pdGVtcy5zbGljZSgwLCBpbmRleCkgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkX3BhdGhzX2pzb24gPSBKU09OLnN0cmluZ2lmeShmaWx0ZXJlZF9wYXRocylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkX3BhdGhzXG5cbiAgICB9XG5cbiAgICBhbGxfbm90ZXMoKTogTm90ZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGJfZW50cmllcy5tYXAoKFtrZXksIHZhbHVlXSkgPT4gdmFsdWUpXG4gICAgfVxuXG4gICAgdXBkYXRlREIoKSB7XG4gICAgICAgIC8vIHN0ZXAgMTogdXBkYXRlIHRoZSBwbHVnaW5zIGludGVybmFsIHJlcHJlc2VudGF0aW9uIG9mIGFsbCBub3RlcyBpbiB0aGUgdmF1bHRcbiAgICAgICAgTG9nKFwiVXBkYXRpbmcgdGhlIGxpYnJhcnkuLi5cIiwgdHJ1ZSlcbiAgICAgICAgLy8gZGVsZXRlIG9sZCBzdGF0ZSBcbiAgICAgICAgZm9yIChsZXQgbm90ZSBpbiB0aGlzLmRiKSB7IGRlbGV0ZSB0aGlzLmRiW25vdGVdOyB9XG4gICAgICAgIC8vIHJlYWQgYWxsIGZpbGVzXG4gICAgICAgIGxldCB2YXVsdF9maWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICAgICAgTG9nKFwiVG90YWwgbnVtYmVyIG9mIGZpbGVzIGluIHZhdWx0OiBcIiArIFN0cmluZyh2YXVsdF9maWxlcy5sZW5ndGgpLCB0cnVlKVxuICAgICAgICAvLyBjcmVhdGUgbmV3IGRiIGVudHJpZXMgXG4gICAgICAgIGxldCBlbnRyaWVzX2NyZWF0ZWQgPSAwXG4gICAgICAgIGxldCBhbGxfZmlsZXMgPSBbXVxuICAgICAgICB2YXVsdF9maWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgZmlsZSBpc24ndCBpbiBhbnkgZXhsdWRlZCBmb2xkZXJzIFxuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5pc0V4bHVkZWRGaWxlKGZpbGUpKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBsb2dnaW5nXG4gICAgICAgICAgICAgICAgZW50cmllc19jcmVhdGVkICs9IDFcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllc19jcmVhdGVkICUgMTAwMCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIExvZyhcIkNyZWF0ZWQgbmV3IGRiIGVudHJpZXM6IFwiICsgU3RyaW5nKGVudHJpZXNfY3JlYXRlZCksIHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuZXdfbm90ZSA9IG5ldyBOb3RlKGZpbGUucGF0aCwgZmlsZS5leHRlbnNpb24sIFtdLCBbXSwgbnVsbCk7XG5cblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGJcbiAgICAgICAgICAgICAgICB0aGlzLmRiW25ld19ub3RlLnBhdGhdID0gbmV3X25vdGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBkYl9lbnRyaWVzIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkYlxuICAgICAgICB0aGlzLmRiX2VudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmRiKVxuICAgICAgICB0aGlzLmRiX2tleXMgPSBPYmplY3Qua2V5cyh0aGlzLmRiKVxuXG4gICAgICAgIC8vIGNoZWNrIGZvciBkdXBsaWNhdGUgZmlsZXNcbiAgICAgICAgdGhpcy5kdXBsaWNhdGVfZmlsZV9zdGF0dXMgPSBuZXcgTWFwPHN0cmluZywgYm9vbGVhbj4oKTtcbiAgICAgICAgbGV0IGNoZWNrZWRfZmlsZXMgPSAwXG4gICAgICAgIHRoaXMuYWxsX25vdGVzKCkuZm9yRWFjaCgobm90ZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGZpbGVfbmFtZSA9IEZpbGVOYW1lRnJvbVBhdGgobm90ZS5wYXRoKVxuXG4gICAgICAgICAgICAvLyBsb2dnaW5nXG4gICAgICAgICAgICBjaGVja2VkX2ZpbGVzICs9IDFcbiAgICAgICAgICAgIGlmIChjaGVja2VkX2ZpbGVzICUgMTAwMCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgTG9nKFwiY2hlY2tlZCBmb3IgZHVwbGljYXRlczogXCIgKyBTdHJpbmcoY2hlY2tlZF9maWxlcyksIHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kdXBsaWNhdGVfZmlsZV9zdGF0dXMuaGFzKGZpbGVfbmFtZSkpIHsgLy8gSWYgdGhlIGZpbGUgbmFtZSBpcyBlbmNvdW50ZXJlZCB0d2ljZSBvciBtb3JlLCBzZXQgaXQncyBkdXBsaWNhdGUgc3RhdHVzIHRvIHRydWVcbiAgICAgICAgICAgICAgICB0aGlzLmR1cGxpY2F0ZV9maWxlX3N0YXR1cy5zZXQoZmlsZV9uYW1lLCB0cnVlKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmR1cGxpY2F0ZV9maWxlX3N0YXR1cy5zZXQoZmlsZV9uYW1lLCBmYWxzZSlcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBkYl9lbnRyaWVzIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkYlxuICAgICAgICB0aGlzLmRiX2VudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmRiKVxuXG4gICAgICAgIC8vIHN0ZXAgMjogYW5hbHl6ZSBsaW5rcyBcbiAgICAgICAgTG9nKFwiYW5hbHl6aW5nIGxpbmtzXCIsIHRydWUpXG4gICAgICAgIHRoaXMuYWxsX25vdGVzKCkuZm9yRWFjaCgobm90ZTogTm90ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vdGUuZXh0ZW5zaW9uICE9IFwibWRcIikge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgaWYgaXQncyBub3QgYW4gbWQgZmlsZS4gT3RoZXIgZmlsZSB0eXBlcyBjYW4ndCBsaW5rIHRvIGFueXRoaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICBzYXZlIGFsbCB0aGUgbGlua3MgdGhpcyBub3RlIGxpbmtzIHRvXG4gICAgICAgICAgICBsZXQgdGhpc19saW5rc190bzogc3RyaW5nW10gPSBbXVxuICAgICAgICAgICAgbGV0IGxpbmtjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUobm90ZS5wYXRoKS5saW5rc1xuICAgICAgICAgICAgbGV0IGFsbF9saW5rcyA9IFtdXG4gICAgICAgICAgICBpZiAobGlua2NhY2hlKSB7XG4gICAgICAgICAgICAgICAgbGlua2NhY2hlLmZvckVhY2goKHZhbDogTGlua0NhY2hlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBsaW5rIGlzIHZhbGlkIFxuICAgICAgICAgICAgICAgICAgICBsZXQgbGlua19kZXN0ID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdCh2YWwubGluaywgXCIvXCIpXG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETyBpcyBpdCBuZWNjZXNzYXJ5IHRvIGF2b2lkIGluY2x1ZGluZyBsaW5rcyBtdWx0aXBsZSB0aW1lcz8gbWF5YmUgdGhleSBjYW4ndCBldmVuIGJlIGR1cGxpY2F0ZSBpbiB0aGUgbGlua2NhY2hlXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5rX2Rlc3QgJiYgIXRoaXNfbGlua3NfdG8uaW5jbHVkZXMobGlua19kZXN0LnBhdGgpICYmIHRoaXMuZGJfa2V5cy5jb250YWlucyhsaW5rX2Rlc3QucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfbGlua3NfdG8ucHVzaChsaW5rX2Rlc3QucGF0aClcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdHJhbnNjbHVzaW9ucyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUobm90ZS5wYXRoKS5lbWJlZHNcbiAgICAgICAgICAgIGlmICh0cmFuc2NsdXNpb25zKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNjbHVzaW9ucy5mb3JFYWNoKCh2YWw6IEVtYmVkQ2FjaGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGxpbmsgaXMgdmFsaWQgXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5rX2Rlc3QgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHZhbC5saW5rLCBcIi9cIilcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmtfZGVzdCAmJiAhdGhpc19saW5rc190by5pbmNsdWRlcyhsaW5rX2Rlc3QucGF0aCkgJiYgdGhpcy5kYl9rZXlzLmNvbnRhaW5zKGxpbmtfZGVzdC5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc19saW5rc190by5wdXNoKGxpbmtfZGVzdC5wYXRoKVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzX2xpbmtzX3RvLmxlbmd0aCkgcmV0dXJuIC8vIG5vIGxpbmtzXG5cbiAgICAgICAgICAgIC8vIHNhdmUgbGlua3NfdG8gaW5mb3JtYXRpb24gdG8gZGJcbiAgICAgICAgICAgIHRoaXMuZGJbbm90ZS5wYXRoXS5saW5rc190byA9IHRoaXNfbGlua3NfdG9cblxuICAgICAgICAgICAgLy8gYWRkIGEgXCJsaW5rZWRfZnJvbVwiIHJlZmVyZW5jZSB0byB0aGUgZGIgZW50cnkgb2YgYWxsIG5vdGVzIHRoYXQgYXJlIGxpbmtlZCB0byBmcm9tIHRoaXMgbm90ZVxuICAgICAgICAgICAgdGhpc19saW5rc190by5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGJbbGlua10ubGlua2VkX2Zyb20uaW5jbHVkZXMobm90ZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiW2xpbmtdLmxpbmtlZF9mcm9tLnB1c2gobm90ZS5wYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqIHN0YXJ0aW5nIGZyb20gdGhlIENOLCBmb2xsb3cgYWxsIHBhdGhzIGFuZCBzdG9yZSB0aGUgaW5mb3JtYXRpb24gb24gaG93IGxvbmcgdGhlIHNob3J0ZXN0IHBhdGggdG8gZWFjaCBub3RlIGlzKi9cbiAgICB1cGRhdGVEZXB0aEluZm9ybWF0aW9uKCkge1xuICAgICAgICBMb2coXCJBbmFseXppbmcgZGlzdGFuY2UgZnJvbSBDZW50cmFsIE5vdGUuIENOIHBhdGg6IFwiICsgdGhpcy5wbHVnaW4uZ2V0U2V0dGluZ1ZhbHVlKFwiQ05fcGF0aFwiKSwgdHJ1ZSlcbiAgICAgICAgbGV0IGRlcHRoID0gMCAvLyBkaXN0YW5jZSBmcm9tIHRoZSBDTi4gc3RhcnRzIGF0IHplcm8gXG4gICAgICAgIGxldCBjaGVja2VkX2xpbmtzOiBzdHJpbmdbXSA9IFtdICAvLyBhbGwgdGhlIG5vdGVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gdmlzaXRlZC4gZG9udCB2aXNpdCB0aGVtIGFnYWluIHRvIHByZXZlbnQgZW5kbGVzcyBsb29wc1xuICAgICAgICBsZXQgZG9fY29udGludWUgPSB0cnVlXG4gICAgICAgIC8vIHN0YXJ0IGF0IHRoZSB0aGUgQ05cbiAgICAgICAgbGV0IGxpbmtzID0gW3RoaXMucGx1Z2luLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIildXG4gICAgICAgIHdoaWxlIChkb19jb250aW51ZSkge1xuICAgICAgICAgICAgbGV0IG5leHRfbGlua3M6IHN0cmluZ1tdID0gW11cbiAgICAgICAgICAgIGxpbmtzLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGV4dHJhY3QgYWxsIGFjdGl2ZSBhbmQgcGFzc2l2ZSBjb25uZWN0aW9ucyAobGlua2VkIHRvIG9yIGZyb20pIGZvciB0aGUgbmV4dCBpdGVyYXRpb24gb2YgbGluay1mb2xsb3dpbmdcbiAgICAgICAgICAgICAgICBsZXQgbm90ZSA9IHRoaXMuZ2V0Tm90ZUZyb21QYXRoKGxpbmspXG4gICAgICAgICAgICAgICAgbm90ZS5saW5rc190by5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2VkX2xpbmtzLmNvbnRhaW5zKGxpbmspICYmICFuZXh0X2xpbmtzLmNvbnRhaW5zKGxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2xpbmtzLnB1c2gobGluaylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgbm90ZS5saW5rZWRfZnJvbS5mb3JFYWNoKChsaW5rOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2VkX2xpbmtzLmNvbnRhaW5zKGxpbmspICYmICFuZXh0X2xpbmtzLmNvbnRhaW5zKGxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2xpbmtzLnB1c2gobGluaylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBpbmZvIG9uIGhvdyBmYXIgdGhlIG5vdGUgaXMgcmVtb3ZlZCBmcm9tIENOXG4gICAgICAgICAgICAgICAgaWYgKG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA9PSBudWxsIHx8IG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA+IGRlcHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdGUuZGlzdGFuY2VfZnJvbV9DTiA9IGRlcHRoXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoZWNrZWRfbGlua3MucHVzaChsaW5rKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGxpbmtzID0gbmV4dF9saW5rcy5zbGljZSgpXG4gICAgICAgICAgICBpZiAobGlua3MubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBkb19jb250aW51ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZXB0aCArPSAxXG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cyBhbGwgcG9zc2libGUgcGF0aHMgZnJvbSB0aGUgQ04gdGhhdCBhcmVuJ3QgdW5yZWFzb25hYmx5IGxvbmcgb3IgY2lyY3VsYXIgYW5kIHN0b3JlcyB0aGVtXG4gICAgICogQHBhcmFtIHBhdGhfc29fZmFyIHRoZSBwYXRoIHRvIGJlIGV4dGVuZGVkIGluIHRoaXMgaXRlcmF0aW9uXG4gICAgICovXG4gICAgZm9sbG93UGF0aHMocGF0aF9zb19mYXI6IFBhdGgpIHtcbiAgICAgICAgLy8gbG9nZ2luZ1xuICAgICAgICB0aGlzLmdldF9wYXRoc19yYW4gKz0gMVxuICAgICAgICBpZiAodGhpcy5nZXRfcGF0aHNfcmFuICUgMTAwMDAgPT0gMCkge1xuICAgICAgICAgICAgTG9nKFwiZ2V0IHBhdGhzIHJhbiBcIiArIFN0cmluZyh0aGlzLmdldF9wYXRoc19yYW4pLCB0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5vdGUgPSB0aGlzLmRiW3BhdGhfc29fZmFyLmFsbF9tZW1iZXJzLmxhc3QoKV1cbiAgICAgICAgbGV0IGFsbF9tZW1iZXJzID0gcGF0aF9zb19mYXIuYWxsX21lbWJlcnNcbiAgICAgICAgbGV0IGl0ZW1zID0gcGF0aF9zb19mYXIuaXRlbXNcblxuICAgICAgICBsZXQgbmV3X3BhdGhzX3RvX2ZvbGxvdzogUGF0aFtdID0gW11cbiAgICAgICAgbGV0IG5vdGVfbGlua3NfdG8gPSBub3RlLmxpbmtzX3RvLnNsaWNlKClcbiAgICAgICAgbGV0IG5vdGVfbGlua2VkX2Zyb20gPSBub3RlLmxpbmtlZF9mcm9tLnNsaWNlKClcblxuICAgICAgICBub3RlX2xpbmtzX3RvLmZvckVhY2goKGxpbms6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgbGlua2VkIG5vdGUgYWxzbyBsaW5rcyB0byB0aGUgY3VycmVudCBub3RlXG4gICAgICAgICAgICBsZXQgbGlua2VkX3RvX29yX2JvdGhfd2F5cyA9IExJTktFRF9UT1xuICAgICAgICAgICAgaWYgKG5vdGVfbGlua2VkX2Zyb20uY29udGFpbnMobGluaykpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaXQgZnJvbSB0aGUgcGFzc2l2ZSBsaW5rcyB0byBiZSBmb2xsb3dlZCBsYXRlclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG5vdGVfbGlua2VkX2Zyb20uaW5kZXhPZihsaW5rLCAwKTtcbiAgICAgICAgICAgICAgICBub3RlX2xpbmtlZF9mcm9tLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgbGlua2VkX3RvX29yX2JvdGhfd2F5cyA9IExJTktFRF9CT1RIXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXdfcGF0aDogUGF0aCA9IHsgYWxsX21lbWJlcnM6IGFsbF9tZW1iZXJzLmNvbmNhdChsaW5rKSwgaXRlbXM6IGl0ZW1zLmNvbmNhdChbW2xpbmssIGxpbmtlZF90b19vcl9ib3RoX3dheXNdXSkgfVxuICAgICAgICAgICAgbmV3X3BhdGhzX3RvX2ZvbGxvdy5wdXNoKG5ld19wYXRoKVxuICAgICAgICB9KVxuXG4gICAgICAgIG5vdGVfbGlua2VkX2Zyb20uZm9yRWFjaCgobGluazogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmV3X3BhdGg6IFBhdGggPSB7IGFsbF9tZW1iZXJzOiBhbGxfbWVtYmVycy5jb25jYXQobGluayksIGl0ZW1zOiBpdGVtcy5jb25jYXQoW1tsaW5rLCBMSU5LRURfRlJPTV1dKSB9XG4gICAgICAgICAgICBuZXdfcGF0aHNfdG9fZm9sbG93LnB1c2gobmV3X3BhdGgpXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBjYWxsZWRfaXRzZWxmOiBib29sZWFuID0gZmFsc2UgLy8gd2hldGhlciB0aGUgZnVuY3Rpb24gY2FsbGVkIGl0c2VsZlxuXG4gICAgICAgIC8vIGZ1bmN0aW9uIGNhbGxzIGl0c2VsZiB0byBleHBsb3JlIGV2ZXJ5IG5ldyBwYXRoICBcblxuICAgICAgICBuZXdfcGF0aHNfdG9fZm9sbG93LmZvckVhY2goKHBhdGg6IFBhdGgpID0+IHtcbiAgICAgICAgICAgIC8vIHRoZSBwYXRoIHdpdGhvdXQgdGhlIG5leHQgbm90ZSB0aGF0IGlzIHRvIGJlIGV4cGxvcmVkXG4gICAgICAgICAgICBsZXQgYWxsX2l0ZW1zX3NvX2ZhciA9IHBhdGguYWxsX21lbWJlcnMuc2xpY2UoMCwgLTEpXG4gICAgICAgICAgICBsZXQgbGFzdF9pdGVtX3BhdGggPSBwYXRoLmFsbF9tZW1iZXJzLmxhc3QoKVxuICAgICAgICAgICAgbGV0IGxhc3RfaXRlbSA9IHRoaXMuZ2V0Tm90ZUZyb21QYXRoKGxhc3RfaXRlbV9wYXRoKVxuXG4gICAgICAgICAgICAvLyBzdG9wIGlmIHRoaXMgbm90ZSBpcyBhbHJlYWR5IHBhcnQgb2YgdGhlIGV4cGxvcmVkIHBhdGhcbiAgICAgICAgICAgIGlmIChhbGxfaXRlbXNfc29fZmFyLmluY2x1ZGVzKGxhc3RfaXRlbV9wYXRoKSkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzdG9wIGlmIHRoZSBwYXRoIG1lYW5kZXJzIHRvbyBtdWNoIFxuICAgICAgICAgICAgaWYgKChwYXRoLmFsbF9tZW1iZXJzLmxlbmd0aCAtIGxhc3RfaXRlbS5kaXN0YW5jZV9mcm9tX0NOKSA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mb2xsb3dQYXRocyhwYXRoKVxuICAgICAgICAgICAgY2FsbGVkX2l0c2VsZiA9IHRydWVcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAoIWNhbGxlZF9pdHNlbGYpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgYWRkIHRoZSBwYXRoIGlmIGl0IGRvZXMndCBsZWFkIGFueXdoZXJlIGVsc2UuIE5vIG5lZWQgdG8gaGF2ZSBwYXRocyB0aGF0IGFyZSBwYXJ0cyBvZiBvdGhlciBwYXRoc1xuICAgICAgICAgICAgdGhpcy5hbGxfcGF0aHMucHVzaChwYXRoX3NvX2ZhcilcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqIGZvciBldmVyeSBub3RlLCBzdG9yZSBhbGwgbm90ZXMgdGhhdCBjb21lIHJpZ2h0IGFmdGVyIGl0IGluIGFueSBwYXRoLiB0aGlzIGlzIGZvciBnZW5lcmF0aW5nIHRoZSBNYXAgT2YgQ29udGVudCBsYXRlciBvbiAqL1xuICAgIHVwZGF0ZURlc2NlbmRhbnRzKCkge1xuXG4gICAgICAgIC8vIGRlbGV0ZSBvbGQgSW5mb3JtYXRpb25cbiAgICAgICAgdGhpcy5kZXNjZW5kYW50cyA9IG5ldyBNYXAoKVxuXG4gICAgICAgIGxldCBkZXNjZW5kYW50c19yYW4gPSAwXG4gICAgICAgIHRoaXMuYWxsX3BhdGhzLmZvckVhY2goKHA6IFBhdGgpID0+IHtcblxuICAgICAgICAgICAgcC5hbGxfbWVtYmVycy5mb3JFYWNoKChub3RlX3BhdGg6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuXG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGl0J3Mgbm90IHRoZSBsYXN0IG1lbWJlciBvZiB0aGUgcGF0aFxuICAgICAgICAgICAgICAgIGlmICghKGluZGV4ID09IHAuYWxsX21lbWJlcnMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGVudHJ5IGluIGRlc2NlbmRhbnRzIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlc2NlbmRhbnRzLmhhcyhub3RlX3BhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NlbmRhbnRzLnNldChub3RlX3BhdGgsIFtdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudHNfcmFuICs9IDFcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NlbmRhbnRzX3JhbiAlIDEwMDAgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9nKFwiZGVzY2VuZGFudHMgcmFuIFwiICsgU3RyaW5nKGRlc2NlbmRhbnRzX3JhbiksIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRfcGF0aF9tZW1iZXIgPSBwLmFsbF9tZW1iZXJzW2luZGV4ICsgMV1cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG5vdGUgYXMgZGVzY2VuZGFudCBpZiBpdCBpc24ndCBhbHJlYWR5IHN0b3JlZCBpbiBhcnJheVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGVzY2VuZGFudHMuZ2V0KG5vdGVfcGF0aCkuaW5jbHVkZXMobmV4dF9wYXRoX21lbWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVzY2VuZGFudHMuc2V0KG5vdGVfcGF0aCwgdGhpcy5kZXNjZW5kYW50cy5nZXQobm90ZV9wYXRoKS5jb25jYXQobmV4dF9wYXRoX21lbWJlcikpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKVxuICAgICAgICB9KVxuXG4gICAgfVxuXG5cblxuXG59IiwiZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgaWRlbnRpdHkgPSB4ID0+IHg7XG5mdW5jdGlvbiBhc3NpZ24odGFyLCBzcmMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBrIGluIHNyYylcbiAgICAgICAgdGFyW2tdID0gc3JjW2tdO1xuICAgIHJldHVybiB0YXI7XG59XG5mdW5jdGlvbiBpc19wcm9taXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBhZGRfbG9jYXRpb24oZWxlbWVudCwgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyKSB7XG4gICAgZWxlbWVudC5fX3N2ZWx0ZV9tZXRhID0ge1xuICAgICAgICBsb2M6IHsgZmlsZSwgbGluZSwgY29sdW1uLCBjaGFyIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gcnVuKGZuKSB7XG4gICAgcmV0dXJuIGZuKCk7XG59XG5mdW5jdGlvbiBibGFua19vYmplY3QoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5mdW5jdGlvbiBydW5fYWxsKGZucykge1xuICAgIGZucy5mb3JFYWNoKHJ1bik7XG59XG5mdW5jdGlvbiBpc19mdW5jdGlvbih0aGluZykge1xuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBzYWZlX25vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGIgfHwgKChhICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JykgfHwgdHlwZW9mIGEgPT09ICdmdW5jdGlvbicpO1xufVxubGV0IHNyY191cmxfZXF1YWxfYW5jaG9yO1xuZnVuY3Rpb24gc3JjX3VybF9lcXVhbChlbGVtZW50X3NyYywgdXJsKSB7XG4gICAgaWYgKCFzcmNfdXJsX2VxdWFsX2FuY2hvcikge1xuICAgICAgICBzcmNfdXJsX2VxdWFsX2FuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB9XG4gICAgc3JjX3VybF9lcXVhbF9hbmNob3IuaHJlZiA9IHVybDtcbiAgICByZXR1cm4gZWxlbWVudF9zcmMgPT09IHNyY191cmxfZXF1YWxfYW5jaG9yLmhyZWY7XG59XG5mdW5jdGlvbiBub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiO1xufVxuZnVuY3Rpb24gaXNfZW1wdHkob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVfc3RvcmUoc3RvcmUsIG5hbWUpIHtcbiAgICBpZiAoc3RvcmUgIT0gbnVsbCAmJiB0eXBlb2Ygc3RvcmUuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJyR7bmFtZX0nIGlzIG5vdCBhIHN0b3JlIHdpdGggYSAnc3Vic2NyaWJlJyBtZXRob2RgKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzdWJzY3JpYmUoc3RvcmUsIC4uLmNhbGxiYWNrcykge1xuICAgIGlmIChzdG9yZSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBjb25zdCB1bnN1YiA9IHN0b3JlLnN1YnNjcmliZSguLi5jYWxsYmFja3MpO1xuICAgIHJldHVybiB1bnN1Yi51bnN1YnNjcmliZSA/ICgpID0+IHVuc3ViLnVuc3Vic2NyaWJlKCkgOiB1bnN1Yjtcbn1cbmZ1bmN0aW9uIGdldF9zdG9yZV92YWx1ZShzdG9yZSkge1xuICAgIGxldCB2YWx1ZTtcbiAgICBzdWJzY3JpYmUoc3RvcmUsIF8gPT4gdmFsdWUgPSBfKSgpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGNvbXBvbmVudF9zdWJzY3JpYmUoY29tcG9uZW50LCBzdG9yZSwgY2FsbGJhY2spIHtcbiAgICBjb21wb25lbnQuJCQub25fZGVzdHJveS5wdXNoKHN1YnNjcmliZShzdG9yZSwgY2FsbGJhY2spKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9zbG90KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pIHtcbiAgICBpZiAoZGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBzbG90X2N0eCA9IGdldF9zbG90X2NvbnRleHQoZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBmbik7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uWzBdKHNsb3RfY3R4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pIHtcbiAgICByZXR1cm4gZGVmaW5pdGlvblsxXSAmJiBmblxuICAgICAgICA/IGFzc2lnbigkJHNjb3BlLmN0eC5zbGljZSgpLCBkZWZpbml0aW9uWzFdKGZuKGN0eCkpKVxuICAgICAgICA6ICQkc2NvcGUuY3R4O1xufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY2hhbmdlcyhkZWZpbml0aW9uLCAkJHNjb3BlLCBkaXJ0eSwgZm4pIHtcbiAgICBpZiAoZGVmaW5pdGlvblsyXSAmJiBmbikge1xuICAgICAgICBjb25zdCBsZXRzID0gZGVmaW5pdGlvblsyXShmbihkaXJ0eSkpO1xuICAgICAgICBpZiAoJCRzY29wZS5kaXJ0eSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbGV0cztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGxldHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IE1hdGgubWF4KCQkc2NvcGUuZGlydHkubGVuZ3RoLCBsZXRzLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkW2ldID0gJCRzY29wZS5kaXJ0eVtpXSB8IGxldHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkJHNjb3BlLmRpcnR5IHwgbGV0cztcbiAgICB9XG4gICAgcmV0dXJuICQkc2NvcGUuZGlydHk7XG59XG5mdW5jdGlvbiB1cGRhdGVfc2xvdF9iYXNlKHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBzbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHRfZm4pIHtcbiAgICBpZiAoc2xvdF9jaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IHNsb3RfY29udGV4dCA9IGdldF9zbG90X2NvbnRleHQoc2xvdF9kZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGdldF9zbG90X2NvbnRleHRfZm4pO1xuICAgICAgICBzbG90LnAoc2xvdF9jb250ZXh0LCBzbG90X2NoYW5nZXMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9zbG90KHNsb3QsIHNsb3RfZGVmaW5pdGlvbiwgY3R4LCAkJHNjb3BlLCBkaXJ0eSwgZ2V0X3Nsb3RfY2hhbmdlc19mbiwgZ2V0X3Nsb3RfY29udGV4dF9mbikge1xuICAgIGNvbnN0IHNsb3RfY2hhbmdlcyA9IGdldF9zbG90X2NoYW5nZXMoc2xvdF9kZWZpbml0aW9uLCAkJHNjb3BlLCBkaXJ0eSwgZ2V0X3Nsb3RfY2hhbmdlc19mbik7XG4gICAgdXBkYXRlX3Nsb3RfYmFzZShzbG90LCBzbG90X2RlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgc2xvdF9jaGFuZ2VzLCBnZXRfc2xvdF9jb250ZXh0X2ZuKTtcbn1cbmZ1bmN0aW9uIGdldF9hbGxfZGlydHlfZnJvbV9zY29wZSgkJHNjb3BlKSB7XG4gICAgaWYgKCQkc2NvcGUuY3R4Lmxlbmd0aCA+IDMyKSB7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gW107XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9ICQkc2NvcGUuY3R4Lmxlbmd0aCAvIDMyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkaXJ0eVtpXSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXJ0eTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gZXhjbHVkZV9pbnRlcm5hbF9wcm9wcyhwcm9wcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKGtbMF0gIT09ICckJylcbiAgICAgICAgICAgIHJlc3VsdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjb21wdXRlX3Jlc3RfcHJvcHMocHJvcHMsIGtleXMpIHtcbiAgICBjb25zdCByZXN0ID0ge307XG4gICAga2V5cyA9IG5ldyBTZXQoa2V5cyk7XG4gICAgZm9yIChjb25zdCBrIGluIHByb3BzKVxuICAgICAgICBpZiAoIWtleXMuaGFzKGspICYmIGtbMF0gIT09ICckJylcbiAgICAgICAgICAgIHJlc3Rba10gPSBwcm9wc1trXTtcbiAgICByZXR1cm4gcmVzdDtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVfc2xvdHMoc2xvdHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICByZXN1bHRba2V5XSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgbGV0IHJhbiA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAocmFuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH07XG59XG5mdW5jdGlvbiBudWxsX3RvX2VtcHR5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X3N0b3JlX3ZhbHVlKHN0b3JlLCByZXQsIHZhbHVlKSB7XG4gICAgc3RvcmUuc2V0KHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufVxuY29uc3QgaGFzX3Byb3AgPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbmZ1bmN0aW9uIGFjdGlvbl9kZXN0cm95ZXIoYWN0aW9uX3Jlc3VsdCkge1xuICAgIHJldHVybiBhY3Rpb25fcmVzdWx0ICYmIGlzX2Z1bmN0aW9uKGFjdGlvbl9yZXN1bHQuZGVzdHJveSkgPyBhY3Rpb25fcmVzdWx0LmRlc3Ryb3kgOiBub29wO1xufVxuXG5jb25zdCBpc19jbGllbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmxldCBub3cgPSBpc19jbGllbnRcbiAgICA/ICgpID0+IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKVxuICAgIDogKCkgPT4gRGF0ZS5ub3coKTtcbmxldCByYWYgPSBpc19jbGllbnQgPyBjYiA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpIDogbm9vcDtcbi8vIHVzZWQgaW50ZXJuYWxseSBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gc2V0X25vdyhmbikge1xuICAgIG5vdyA9IGZuO1xufVxuZnVuY3Rpb24gc2V0X3JhZihmbikge1xuICAgIHJhZiA9IGZuO1xufVxuXG5jb25zdCB0YXNrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHJ1bl90YXNrcyhub3cpIHtcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICBpZiAoIXRhc2suYyhub3cpKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgICAgICB0YXNrLmYoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0YXNrcy5zaXplICE9PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbn1cbi8qKlxuICogRm9yIHRlc3RpbmcgcHVycG9zZXMgb25seSFcbiAqL1xuZnVuY3Rpb24gY2xlYXJfbG9vcHMoKSB7XG4gICAgdGFza3MuY2xlYXIoKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXNrIHRoYXQgcnVucyBvbiBlYWNoIHJhZiBmcmFtZVxuICogdW50aWwgaXQgcmV0dXJucyBhIGZhbHN5IHZhbHVlIG9yIGlzIGFib3J0ZWRcbiAqL1xuZnVuY3Rpb24gbG9vcChjYWxsYmFjaykge1xuICAgIGxldCB0YXNrO1xuICAgIGlmICh0YXNrcy5zaXplID09PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBuZXcgUHJvbWlzZShmdWxmaWxsID0+IHtcbiAgICAgICAgICAgIHRhc2tzLmFkZCh0YXNrID0geyBjOiBjYWxsYmFjaywgZjogZnVsZmlsbCB9KTtcbiAgICAgICAgfSksXG4gICAgICAgIGFib3J0KCkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLy8gVHJhY2sgd2hpY2ggbm9kZXMgYXJlIGNsYWltZWQgZHVyaW5nIGh5ZHJhdGlvbi4gVW5jbGFpbWVkIG5vZGVzIGNhbiB0aGVuIGJlIHJlbW92ZWQgZnJvbSB0aGUgRE9NXG4vLyBhdCB0aGUgZW5kIG9mIGh5ZHJhdGlvbiB3aXRob3V0IHRvdWNoaW5nIHRoZSByZW1haW5pbmcgbm9kZXMuXG5sZXQgaXNfaHlkcmF0aW5nID0gZmFsc2U7XG5mdW5jdGlvbiBzdGFydF9oeWRyYXRpbmcoKSB7XG4gICAgaXNfaHlkcmF0aW5nID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGVuZF9oeWRyYXRpbmcoKSB7XG4gICAgaXNfaHlkcmF0aW5nID0gZmFsc2U7XG59XG5mdW5jdGlvbiB1cHBlcl9ib3VuZChsb3csIGhpZ2gsIGtleSwgdmFsdWUpIHtcbiAgICAvLyBSZXR1cm4gZmlyc3QgaW5kZXggb2YgdmFsdWUgbGFyZ2VyIHRoYW4gaW5wdXQgdmFsdWUgaW4gdGhlIHJhbmdlIFtsb3csIGhpZ2gpXG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgY29uc3QgbWlkID0gbG93ICsgKChoaWdoIC0gbG93KSA+PiAxKTtcbiAgICAgICAgaWYgKGtleShtaWQpIDw9IHZhbHVlKSB7XG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG93O1xufVxuZnVuY3Rpb24gaW5pdF9oeWRyYXRlKHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQuaHlkcmF0ZV9pbml0KVxuICAgICAgICByZXR1cm47XG4gICAgdGFyZ2V0Lmh5ZHJhdGVfaW5pdCA9IHRydWU7XG4gICAgLy8gV2Uga25vdyB0aGF0IGFsbCBjaGlsZHJlbiBoYXZlIGNsYWltX29yZGVyIHZhbHVlcyBzaW5jZSB0aGUgdW5jbGFpbWVkIGhhdmUgYmVlbiBkZXRhY2hlZCBpZiB0YXJnZXQgaXMgbm90IDxoZWFkPlxuICAgIGxldCBjaGlsZHJlbiA9IHRhcmdldC5jaGlsZE5vZGVzO1xuICAgIC8vIElmIHRhcmdldCBpcyA8aGVhZD4sIHRoZXJlIG1heSBiZSBjaGlsZHJlbiB3aXRob3V0IGNsYWltX29yZGVyXG4gICAgaWYgKHRhcmdldC5ub2RlTmFtZSA9PT0gJ0hFQUQnKSB7XG4gICAgICAgIGNvbnN0IG15Q2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKG5vZGUuY2xhaW1fb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG15Q2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbiA9IG15Q2hpbGRyZW47XG4gICAgfVxuICAgIC8qXG4gICAgKiBSZW9yZGVyIGNsYWltZWQgY2hpbGRyZW4gb3B0aW1hbGx5LlxuICAgICogV2UgY2FuIHJlb3JkZXIgY2xhaW1lZCBjaGlsZHJlbiBvcHRpbWFsbHkgYnkgZmluZGluZyB0aGUgbG9uZ2VzdCBzdWJzZXF1ZW5jZSBvZlxuICAgICogbm9kZXMgdGhhdCBhcmUgYWxyZWFkeSBjbGFpbWVkIGluIG9yZGVyIGFuZCBvbmx5IG1vdmluZyB0aGUgcmVzdC4gVGhlIGxvbmdlc3RcbiAgICAqIHN1YnNlcXVlbmNlIHN1YnNlcXVlbmNlIG9mIG5vZGVzIHRoYXQgYXJlIGNsYWltZWQgaW4gb3JkZXIgY2FuIGJlIGZvdW5kIGJ5XG4gICAgKiBjb21wdXRpbmcgdGhlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiAuY2xhaW1fb3JkZXIgdmFsdWVzLlxuICAgICpcbiAgICAqIFRoaXMgYWxnb3JpdGhtIGlzIG9wdGltYWwgaW4gZ2VuZXJhdGluZyB0aGUgbGVhc3QgYW1vdW50IG9mIHJlb3JkZXIgb3BlcmF0aW9uc1xuICAgICogcG9zc2libGUuXG4gICAgKlxuICAgICogUHJvb2Y6XG4gICAgKiBXZSBrbm93IHRoYXQsIGdpdmVuIGEgc2V0IG9mIHJlb3JkZXJpbmcgb3BlcmF0aW9ucywgdGhlIG5vZGVzIHRoYXQgZG8gbm90IG1vdmVcbiAgICAqIGFsd2F5cyBmb3JtIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2UsIHNpbmNlIHRoZXkgZG8gbm90IG1vdmUgYW1vbmcgZWFjaCBvdGhlclxuICAgICogbWVhbmluZyB0aGF0IHRoZXkgbXVzdCBiZSBhbHJlYWR5IG9yZGVyZWQgYW1vbmcgZWFjaCBvdGhlci4gVGh1cywgdGhlIG1heGltYWxcbiAgICAqIHNldCBvZiBub2RlcyB0aGF0IGRvIG5vdCBtb3ZlIGZvcm0gYSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2UuXG4gICAgKi9cbiAgICAvLyBDb21wdXRlIGxvbmdlc3QgaW5jcmVhc2luZyBzdWJzZXF1ZW5jZVxuICAgIC8vIG06IHN1YnNlcXVlbmNlIGxlbmd0aCBqID0+IGluZGV4IGsgb2Ygc21hbGxlc3QgdmFsdWUgdGhhdCBlbmRzIGFuIGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2YgbGVuZ3RoIGpcbiAgICBjb25zdCBtID0gbmV3IEludDMyQXJyYXkoY2hpbGRyZW4ubGVuZ3RoICsgMSk7XG4gICAgLy8gUHJlZGVjZXNzb3IgaW5kaWNlcyArIDFcbiAgICBjb25zdCBwID0gbmV3IEludDMyQXJyYXkoY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICBtWzBdID0gLTE7XG4gICAgbGV0IGxvbmdlc3QgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGNoaWxkcmVuW2ldLmNsYWltX29yZGVyO1xuICAgICAgICAvLyBGaW5kIHRoZSBsYXJnZXN0IHN1YnNlcXVlbmNlIGxlbmd0aCBzdWNoIHRoYXQgaXQgZW5kcyBpbiBhIHZhbHVlIGxlc3MgdGhhbiBvdXIgY3VycmVudCB2YWx1ZVxuICAgICAgICAvLyB1cHBlcl9ib3VuZCByZXR1cm5zIGZpcnN0IGdyZWF0ZXIgdmFsdWUsIHNvIHdlIHN1YnRyYWN0IG9uZVxuICAgICAgICAvLyB3aXRoIGZhc3QgcGF0aCBmb3Igd2hlbiB3ZSBhcmUgb24gdGhlIGN1cnJlbnQgbG9uZ2VzdCBzdWJzZXF1ZW5jZVxuICAgICAgICBjb25zdCBzZXFMZW4gPSAoKGxvbmdlc3QgPiAwICYmIGNoaWxkcmVuW21bbG9uZ2VzdF1dLmNsYWltX29yZGVyIDw9IGN1cnJlbnQpID8gbG9uZ2VzdCArIDEgOiB1cHBlcl9ib3VuZCgxLCBsb25nZXN0LCBpZHggPT4gY2hpbGRyZW5bbVtpZHhdXS5jbGFpbV9vcmRlciwgY3VycmVudCkpIC0gMTtcbiAgICAgICAgcFtpXSA9IG1bc2VxTGVuXSArIDE7XG4gICAgICAgIGNvbnN0IG5ld0xlbiA9IHNlcUxlbiArIDE7XG4gICAgICAgIC8vIFdlIGNhbiBndWFyYW50ZWUgdGhhdCBjdXJyZW50IGlzIHRoZSBzbWFsbGVzdCB2YWx1ZS4gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBoYXZlIGdlbmVyYXRlZCBhIGxvbmdlciBzZXF1ZW5jZS5cbiAgICAgICAgbVtuZXdMZW5dID0gaTtcbiAgICAgICAgbG9uZ2VzdCA9IE1hdGgubWF4KG5ld0xlbiwgbG9uZ2VzdCk7XG4gICAgfVxuICAgIC8vIFRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2Ugb2Ygbm9kZXMgKGluaXRpYWxseSByZXZlcnNlZClcbiAgICBjb25zdCBsaXMgPSBbXTtcbiAgICAvLyBUaGUgcmVzdCBvZiB0aGUgbm9kZXMsIG5vZGVzIHRoYXQgd2lsbCBiZSBtb3ZlZFxuICAgIGNvbnN0IHRvTW92ZSA9IFtdO1xuICAgIGxldCBsYXN0ID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBjdXIgPSBtW2xvbmdlc3RdICsgMTsgY3VyICE9IDA7IGN1ciA9IHBbY3VyIC0gMV0pIHtcbiAgICAgICAgbGlzLnB1c2goY2hpbGRyZW5bY3VyIC0gMV0pO1xuICAgICAgICBmb3IgKDsgbGFzdCA+PSBjdXI7IGxhc3QtLSkge1xuICAgICAgICAgICAgdG9Nb3ZlLnB1c2goY2hpbGRyZW5bbGFzdF0pO1xuICAgICAgICB9XG4gICAgICAgIGxhc3QtLTtcbiAgICB9XG4gICAgZm9yICg7IGxhc3QgPj0gMDsgbGFzdC0tKSB7XG4gICAgICAgIHRvTW92ZS5wdXNoKGNoaWxkcmVuW2xhc3RdKTtcbiAgICB9XG4gICAgbGlzLnJldmVyc2UoKTtcbiAgICAvLyBXZSBzb3J0IHRoZSBub2RlcyBiZWluZyBtb3ZlZCB0byBndWFyYW50ZWUgdGhhdCB0aGVpciBpbnNlcnRpb24gb3JkZXIgbWF0Y2hlcyB0aGUgY2xhaW0gb3JkZXJcbiAgICB0b01vdmUuc29ydCgoYSwgYikgPT4gYS5jbGFpbV9vcmRlciAtIGIuY2xhaW1fb3JkZXIpO1xuICAgIC8vIEZpbmFsbHksIHdlIG1vdmUgdGhlIG5vZGVzXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdG9Nb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHdoaWxlIChqIDwgbGlzLmxlbmd0aCAmJiB0b01vdmVbaV0uY2xhaW1fb3JkZXIgPj0gbGlzW2pdLmNsYWltX29yZGVyKSB7XG4gICAgICAgICAgICBqKys7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYW5jaG9yID0gaiA8IGxpcy5sZW5ndGggPyBsaXNbal0gOiBudWxsO1xuICAgICAgICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHRvTW92ZVtpXSwgYW5jaG9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBlbmQodGFyZ2V0LCBub2RlKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX3N0eWxlcyh0YXJnZXQsIHN0eWxlX3NoZWV0X2lkLCBzdHlsZXMpIHtcbiAgICBjb25zdCBhcHBlbmRfc3R5bGVzX3RvID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKHRhcmdldCk7XG4gICAgaWYgKCFhcHBlbmRfc3R5bGVzX3RvLmdldEVsZW1lbnRCeUlkKHN0eWxlX3NoZWV0X2lkKSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IGVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgIHN0eWxlLmlkID0gc3R5bGVfc2hlZXRfaWQ7XG4gICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gc3R5bGVzO1xuICAgICAgICBhcHBlbmRfc3R5bGVzaGVldChhcHBlbmRfc3R5bGVzX3RvLCBzdHlsZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUpXG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICBjb25zdCByb290ID0gbm9kZS5nZXRSb290Tm9kZSA/IG5vZGUuZ2V0Um9vdE5vZGUoKSA6IG5vZGUub3duZXJEb2N1bWVudDtcbiAgICBpZiAocm9vdC5ob3N0KSB7XG4gICAgICAgIHJldHVybiByb290O1xuICAgIH1cbiAgICByZXR1cm4gZG9jdW1lbnQ7XG59XG5mdW5jdGlvbiBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldChub2RlKSB7XG4gICAgY29uc3Qgc3R5bGVfZWxlbWVudCA9IGVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgYXBwZW5kX3N0eWxlc2hlZXQoZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpLCBzdHlsZV9lbGVtZW50KTtcbiAgICByZXR1cm4gc3R5bGVfZWxlbWVudDtcbn1cbmZ1bmN0aW9uIGFwcGVuZF9zdHlsZXNoZWV0KG5vZGUsIHN0eWxlKSB7XG4gICAgYXBwZW5kKG5vZGUuaGVhZCB8fCBub2RlLCBzdHlsZSk7XG59XG5mdW5jdGlvbiBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSkge1xuICAgIGlmIChpc19oeWRyYXRpbmcpIHtcbiAgICAgICAgaW5pdF9oeWRyYXRlKHRhcmdldCk7XG4gICAgICAgIGlmICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPT09IHVuZGVmaW5lZCkgfHwgKCh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCAhPT0gbnVsbCkgJiYgKHRhcmdldC5hY3R1YWxfZW5kX2NoaWxkLnBhcmVudEVsZW1lbnQgIT09IHRhcmdldCkpKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IHRhcmdldC5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNraXAgbm9kZXMgb2YgdW5kZWZpbmVkIG9yZGVyaW5nXG4gICAgICAgIHdoaWxlICgodGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgIT09IG51bGwpICYmICh0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5jbGFpbV9vcmRlciA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQgPSB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZSAhPT0gdGFyZ2V0LmFjdHVhbF9lbmRfY2hpbGQpIHtcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgaW5zZXJ0IGlmIHRoZSBvcmRlcmluZyBvZiB0aGlzIG5vZGUgc2hvdWxkIGJlIG1vZGlmaWVkIG9yIHRoZSBwYXJlbnQgbm9kZSBpcyBub3QgdGFyZ2V0XG4gICAgICAgICAgICBpZiAobm9kZS5jbGFpbV9vcmRlciAhPT0gdW5kZWZpbmVkIHx8IG5vZGUucGFyZW50Tm9kZSAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuYWN0dWFsX2VuZF9jaGlsZCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgaWYgKGlzX2h5ZHJhdGluZyAmJiAhYW5jaG9yKSB7XG4gICAgICAgIGFwcGVuZF9oeWRyYXRpb24odGFyZ2V0LCBub2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICE9PSB0YXJnZXQgfHwgbm9kZS5uZXh0U2libGluZyAhPSBhbmNob3IpIHtcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZShub2RlLCBhbmNob3IgfHwgbnVsbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoKG5vZGUpIHtcbiAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2VhY2goaXRlcmF0aW9ucywgZGV0YWNoaW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpdGVyYXRpb25zW2ldKVxuICAgICAgICAgICAgaXRlcmF0aW9uc1tpXS5kKGRldGFjaGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59XG5mdW5jdGlvbiBlbGVtZW50X2lzKG5hbWUsIGlzKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSwgeyBpcyB9KTtcbn1cbmZ1bmN0aW9uIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMob2JqLCBleGNsdWRlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzX3Byb3Aob2JqLCBrKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGFyZ2V0W2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBzdmdfZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHRleHQoZGF0YSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIHNwYWNlKCkge1xuICAgIHJldHVybiB0ZXh0KCcgJyk7XG59XG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgICByZXR1cm4gdGV4dCgnJyk7XG59XG5mdW5jdGlvbiBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcHJldmVudF9kZWZhdWx0KGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RvcF9wcm9wYWdhdGlvbihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzZWxmKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJ1c3RlZChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoZXZlbnQuaXNUcnVzdGVkKVxuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLCBldmVudCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIGVsc2UgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSkgIT09IHZhbHVlKVxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIHNldF9hdHRyaWJ1dGVzKG5vZGUsIGF0dHJpYnV0ZXMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgZGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhub2RlLl9fcHJvdG9fXyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYXR0cmlidXRlc1trZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICBub2RlLnN0eWxlLmNzc1RleHQgPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnX192YWx1ZScpIHtcbiAgICAgICAgICAgIG5vZGUudmFsdWUgPSBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvcnNba2V5XSAmJiBkZXNjcmlwdG9yc1trZXldLnNldCkge1xuICAgICAgICAgICAgbm9kZVtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3ZnX2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgYXR0cihub2RlLCBrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X2N1c3RvbV9lbGVtZW50X2RhdGEobm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCBpbiBub2RlKSB7XG4gICAgICAgIG5vZGVbcHJvcF0gPSB0eXBlb2Ygbm9kZVtwcm9wXSA9PT0gJ2Jvb2xlYW4nICYmIHZhbHVlID09PSAnJyA/IHRydWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF0dHIobm9kZSwgcHJvcCwgdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHhsaW5rX2F0dHIobm9kZSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIG5vZGUuc2V0QXR0cmlidXRlTlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlKGdyb3VwLCBfX3ZhbHVlLCBjaGVja2VkKSB7XG4gICAgY29uc3QgdmFsdWUgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBpZiAoZ3JvdXBbaV0uY2hlY2tlZClcbiAgICAgICAgICAgIHZhbHVlLmFkZChncm91cFtpXS5fX3ZhbHVlKTtcbiAgICB9XG4gICAgaWYgKCFjaGVja2VkKSB7XG4gICAgICAgIHZhbHVlLmRlbGV0ZShfX3ZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20odmFsdWUpO1xufVxuZnVuY3Rpb24gdG9fbnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAnJyA/IG51bGwgOiArdmFsdWU7XG59XG5mdW5jdGlvbiB0aW1lX3Jhbmdlc190b19hcnJheShyYW5nZXMpIHtcbiAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGFycmF5LnB1c2goeyBzdGFydDogcmFuZ2VzLnN0YXJ0KGkpLCBlbmQ6IHJhbmdlcy5lbmQoaSkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGNoaWxkcmVuKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShlbGVtZW50LmNoaWxkTm9kZXMpO1xufVxuZnVuY3Rpb24gaW5pdF9jbGFpbV9pbmZvKG5vZGVzKSB7XG4gICAgaWYgKG5vZGVzLmNsYWltX2luZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvID0geyBsYXN0X2luZGV4OiAwLCB0b3RhbF9jbGFpbWVkOiAwIH07XG4gICAgfVxufVxuZnVuY3Rpb24gY2xhaW1fbm9kZShub2RlcywgcHJlZGljYXRlLCBwcm9jZXNzTm9kZSwgY3JlYXRlTm9kZSwgZG9udFVwZGF0ZUxhc3RJbmRleCA9IGZhbHNlKSB7XG4gICAgLy8gVHJ5IHRvIGZpbmQgbm9kZXMgaW4gYW4gb3JkZXIgc3VjaCB0aGF0IHdlIGxlbmd0aGVuIHRoZSBsb25nZXN0IGluY3JlYXNpbmcgc3Vic2VxdWVuY2VcbiAgICBpbml0X2NsYWltX2luZm8obm9kZXMpO1xuICAgIGNvbnN0IHJlc3VsdE5vZGUgPSAoKCkgPT4ge1xuICAgICAgICAvLyBXZSBmaXJzdCB0cnkgdG8gZmluZCBhbiBlbGVtZW50IGFmdGVyIHRoZSBwcmV2aW91cyBvbmVcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGVzLmNsYWltX2luZm8ubGFzdF9pbmRleDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBwcm9jZXNzTm9kZShub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1tpXSA9IHJlcGxhY2VtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRVcGRhdGVMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0cnkgdG8gZmluZCBvbmUgYmVmb3JlXG4gICAgICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBzbyB0aGF0IHdlIGRvbid0IGdvIHRvbyBmYXIgYmFja1xuICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMuY2xhaW1faW5mby5sYXN0X2luZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IHByb2Nlc3NOb2RlKG5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZG9udFVwZGF0ZUxhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlIHNwbGljZWQgYmVmb3JlIHRoZSBsYXN0X2luZGV4LCB3ZSBkZWNyZWFzZSBpdFxuICAgICAgICAgICAgICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLmxhc3RfaW5kZXgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgZmluZCBhbnkgbWF0Y2hpbmcgbm9kZSwgd2UgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICByZXR1cm4gY3JlYXRlTm9kZSgpO1xuICAgIH0pKCk7XG4gICAgcmVzdWx0Tm9kZS5jbGFpbV9vcmRlciA9IG5vZGVzLmNsYWltX2luZm8udG90YWxfY2xhaW1lZDtcbiAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICByZXR1cm4gcmVzdWx0Tm9kZTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIHN2Zykge1xuICAgIHJldHVybiBjbGFpbV9ub2RlKG5vZGVzLCAobm9kZSkgPT4gbm9kZS5ub2RlTmFtZSA9PT0gbmFtZSwgKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBub2RlLmF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlLnB1c2goYXR0cmlidXRlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbW92ZS5mb3JFYWNoKHYgPT4gbm9kZS5yZW1vdmVBdHRyaWJ1dGUodikpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sICgpID0+IHN2ZyA/IHN2Z19lbGVtZW50KG5hbWUpIDogZWxlbWVudChuYW1lKSk7XG59XG5mdW5jdGlvbiBjbGFpbV90ZXh0KG5vZGVzLCBkYXRhKSB7XG4gICAgcmV0dXJuIGNsYWltX25vZGUobm9kZXMsIChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSAzLCAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhU3RyID0gJycgKyBkYXRhO1xuICAgICAgICBpZiAobm9kZS5kYXRhLnN0YXJ0c1dpdGgoZGF0YVN0cikpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEubGVuZ3RoICE9PSBkYXRhU3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnNwbGl0VGV4dChkYXRhU3RyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlLmRhdGEgPSBkYXRhU3RyO1xuICAgICAgICB9XG4gICAgfSwgKCkgPT4gdGV4dChkYXRhKSwgdHJ1ZSAvLyBUZXh0IG5vZGVzIHNob3VsZCBub3QgdXBkYXRlIGxhc3QgaW5kZXggc2luY2UgaXQgaXMgbGlrZWx5IG5vdCB3b3J0aCBpdCB0byBlbGltaW5hdGUgYW4gaW5jcmVhc2luZyBzdWJzZXF1ZW5jZSBvZiBhY3R1YWwgZWxlbWVudHNcbiAgICApO1xufVxuZnVuY3Rpb24gY2xhaW1fc3BhY2Uobm9kZXMpIHtcbiAgICByZXR1cm4gY2xhaW1fdGV4dChub2RlcywgJyAnKTtcbn1cbmZ1bmN0aW9uIGZpbmRfY29tbWVudChub2RlcywgdGV4dCwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBub2Rlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSA4IC8qIGNvbW1lbnQgbm9kZSAqLyAmJiBub2RlLnRleHRDb250ZW50LnRyaW0oKSA9PT0gdGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGNsYWltX2h0bWxfdGFnKG5vZGVzKSB7XG4gICAgLy8gZmluZCBodG1sIG9wZW5pbmcgdGFnXG4gICAgY29uc3Qgc3RhcnRfaW5kZXggPSBmaW5kX2NvbW1lbnQobm9kZXMsICdIVE1MX1RBR19TVEFSVCcsIDApO1xuICAgIGNvbnN0IGVuZF9pbmRleCA9IGZpbmRfY29tbWVudChub2RlcywgJ0hUTUxfVEFHX0VORCcsIHN0YXJ0X2luZGV4KTtcbiAgICBpZiAoc3RhcnRfaW5kZXggPT09IGVuZF9pbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWxUYWdIeWRyYXRpb24oKTtcbiAgICB9XG4gICAgaW5pdF9jbGFpbV9pbmZvKG5vZGVzKTtcbiAgICBjb25zdCBodG1sX3RhZ19ub2RlcyA9IG5vZGVzLnNwbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4ICsgMSk7XG4gICAgZGV0YWNoKGh0bWxfdGFnX25vZGVzWzBdKTtcbiAgICBkZXRhY2goaHRtbF90YWdfbm9kZXNbaHRtbF90YWdfbm9kZXMubGVuZ3RoIC0gMV0pO1xuICAgIGNvbnN0IGNsYWltZWRfbm9kZXMgPSBodG1sX3RhZ19ub2Rlcy5zbGljZSgxLCBodG1sX3RhZ19ub2Rlcy5sZW5ndGggLSAxKTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgY2xhaW1lZF9ub2Rlcykge1xuICAgICAgICBuLmNsYWltX29yZGVyID0gbm9kZXMuY2xhaW1faW5mby50b3RhbF9jbGFpbWVkO1xuICAgICAgICBub2Rlcy5jbGFpbV9pbmZvLnRvdGFsX2NsYWltZWQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdG1sVGFnSHlkcmF0aW9uKGNsYWltZWRfbm9kZXMpO1xufVxuZnVuY3Rpb24gc2V0X2RhdGEodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ICE9PSBkYXRhKVxuICAgICAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuZnVuY3Rpb24gc2V0X2lucHV0X3ZhbHVlKGlucHV0LCB2YWx1ZSkge1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XG59XG5mdW5jdGlvbiBzZXRfaW5wdXRfdHlwZShpbnB1dCwgdHlwZSkge1xuICAgIHRyeSB7XG4gICAgICAgIGlucHV0LnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxufVxuZnVuY3Rpb24gc2V0X3N0eWxlKG5vZGUsIGtleSwgdmFsdWUsIGltcG9ydGFudCkge1xuICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCB2YWx1ZSwgaW1wb3J0YW50ID8gJ2ltcG9ydGFudCcgOiAnJyk7XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9uKHNlbGVjdCwgdmFsdWUpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5vcHRpb25zW2ldO1xuICAgICAgICBpZiAob3B0aW9uLl9fdmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2VsZWN0X29wdGlvbnMoc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IH52YWx1ZS5pbmRleE9mKG9wdGlvbi5fX3ZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3RfdmFsdWUoc2VsZWN0KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRfb3B0aW9uID0gc2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJzpjaGVja2VkJykgfHwgc2VsZWN0Lm9wdGlvbnNbMF07XG4gICAgcmV0dXJuIHNlbGVjdGVkX29wdGlvbiAmJiBzZWxlY3RlZF9vcHRpb24uX192YWx1ZTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9tdWx0aXBsZV92YWx1ZShzZWxlY3QpIHtcbiAgICByZXR1cm4gW10ubWFwLmNhbGwoc2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpjaGVja2VkJyksIG9wdGlvbiA9PiBvcHRpb24uX192YWx1ZSk7XG59XG4vLyB1bmZvcnR1bmF0ZWx5IHRoaXMgY2FuJ3QgYmUgYSBjb25zdGFudCBhcyB0aGF0IHdvdWxkbid0IGJlIHRyZWUtc2hha2VhYmxlXG4vLyBzbyB3ZSBjYWNoZSB0aGUgcmVzdWx0IGluc3RlYWRcbmxldCBjcm9zc29yaWdpbjtcbmZ1bmN0aW9uIGlzX2Nyb3Nzb3JpZ2luKCkge1xuICAgIGlmIChjcm9zc29yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNyb3Nzb3JpZ2luID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHZvaWQgd2luZG93LnBhcmVudC5kb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNyb3Nzb3JpZ2luID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3Jvc3NvcmlnaW47XG59XG5mdW5jdGlvbiBhZGRfcmVzaXplX2xpc3RlbmVyKG5vZGUsIGZuKSB7XG4gICAgY29uc3QgY29tcHV0ZWRfc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIGlmIChjb21wdXRlZF9zdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuICAgIGNvbnN0IGlmcmFtZSA9IGVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgJyArXG4gICAgICAgICdvdmVyZmxvdzogaGlkZGVuOyBib3JkZXI6IDA7IG9wYWNpdHk6IDA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB6LWluZGV4OiAtMTsnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgaWZyYW1lLnRhYkluZGV4ID0gLTE7XG4gICAgY29uc3QgY3Jvc3NvcmlnaW4gPSBpc19jcm9zc29yaWdpbigpO1xuICAgIGxldCB1bnN1YnNjcmliZTtcbiAgICBpZiAoY3Jvc3NvcmlnaW4pIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9IFwiZGF0YTp0ZXh0L2h0bWwsPHNjcmlwdD5vbnJlc2l6ZT1mdW5jdGlvbigpe3BhcmVudC5wb3N0TWVzc2FnZSgwLCcqJyl9PC9zY3JpcHQ+XCI7XG4gICAgICAgIHVuc3Vic2NyaWJlID0gbGlzdGVuKHdpbmRvdywgJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGlmcmFtZS5jb250ZW50V2luZG93KVxuICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSA9IGxpc3RlbihpZnJhbWUuY29udGVudFdpbmRvdywgJ3Jlc2l6ZScsIGZuKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXBwZW5kKG5vZGUsIGlmcmFtZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaWYgKGNyb3Nzb3JpZ2luKSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVuc3Vic2NyaWJlICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgICAgIGRldGFjaChpZnJhbWUpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0b2dnbGVfY2xhc3MoZWxlbWVudCwgbmFtZSwgdG9nZ2xlKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3RbdG9nZ2xlID8gJ2FkZCcgOiAncmVtb3ZlJ10obmFtZSk7XG59XG5mdW5jdGlvbiBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsLCBidWJibGVzID0gZmFsc2UpIHtcbiAgICBjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgYnViYmxlcywgZmFsc2UsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBxdWVyeV9zZWxlY3Rvcl9hbGwoc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50LmJvZHkpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xufVxuY2xhc3MgSHRtbFRhZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgfVxuICAgIG0oaHRtbCwgdGFyZ2V0LCBhbmNob3IgPSBudWxsKSB7XG4gICAgICAgIGlmICghdGhpcy5lKSB7XG4gICAgICAgICAgICB0aGlzLmUgPSBlbGVtZW50KHRhcmdldC5ub2RlTmFtZSk7XG4gICAgICAgICAgICB0aGlzLnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmMoaHRtbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pKGFuY2hvcik7XG4gICAgfVxuICAgIGgoaHRtbCkge1xuICAgICAgICB0aGlzLmUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgdGhpcy5uID0gQXJyYXkuZnJvbSh0aGlzLmUuY2hpbGROb2Rlcyk7XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnQodGhpcy50LCB0aGlzLm5baV0sIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLmgoaHRtbCk7XG4gICAgICAgIHRoaXMuaSh0aGlzLmEpO1xuICAgIH1cbiAgICBkKCkge1xuICAgICAgICB0aGlzLm4uZm9yRWFjaChkZXRhY2gpO1xuICAgIH1cbn1cbmNsYXNzIEh0bWxUYWdIeWRyYXRpb24gZXh0ZW5kcyBIdG1sVGFnIHtcbiAgICBjb25zdHJ1Y3RvcihjbGFpbWVkX25vZGVzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZSA9IHRoaXMubiA9IG51bGw7XG4gICAgICAgIHRoaXMubCA9IGNsYWltZWRfbm9kZXM7XG4gICAgfVxuICAgIGMoaHRtbCkge1xuICAgICAgICBpZiAodGhpcy5sKSB7XG4gICAgICAgICAgICB0aGlzLm4gPSB0aGlzLmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdXBlci5jKGh0bWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGkoYW5jaG9yKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbnNlcnRfaHlkcmF0aW9uKHRoaXMudCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cmlidXRlX3RvX29iamVjdChhdHRyaWJ1dGVzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICByZXN1bHRbYXR0cmlidXRlLm5hbWVdID0gYXR0cmlidXRlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZ2V0X2N1c3RvbV9lbGVtZW50c19zbG90cyhlbGVtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgcmVzdWx0W25vZGUuc2xvdCB8fCAnZGVmYXVsdCddID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBhY3RpdmVfZG9jcyA9IG5ldyBTZXQoKTtcbmxldCBhY3RpdmUgPSAwO1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Rhcmtza3lhcHAvc3RyaW5nLWhhc2gvYmxvYi9tYXN0ZXIvaW5kZXguanNcbmZ1bmN0aW9uIGhhc2goc3RyKSB7XG4gICAgbGV0IGhhc2ggPSA1MzgxO1xuICAgIGxldCBpID0gc3RyLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgXiBzdHIuY2hhckNvZGVBdChpKTtcbiAgICByZXR1cm4gaGFzaCA+Pj4gMDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9ydWxlKG5vZGUsIGEsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzZSwgZm4sIHVpZCA9IDApIHtcbiAgICBjb25zdCBzdGVwID0gMTYuNjY2IC8gZHVyYXRpb247XG4gICAgbGV0IGtleWZyYW1lcyA9ICd7XFxuJztcbiAgICBmb3IgKGxldCBwID0gMDsgcCA8PSAxOyBwICs9IHN0ZXApIHtcbiAgICAgICAgY29uc3QgdCA9IGEgKyAoYiAtIGEpICogZWFzZShwKTtcbiAgICAgICAga2V5ZnJhbWVzICs9IHAgKiAxMDAgKyBgJXske2ZuKHQsIDEgLSB0KX19XFxuYDtcbiAgICB9XG4gICAgY29uc3QgcnVsZSA9IGtleWZyYW1lcyArIGAxMDAlIHske2ZuKGIsIDEgLSBiKX19XFxufWA7XG4gICAgY29uc3QgbmFtZSA9IGBfX3N2ZWx0ZV8ke2hhc2gocnVsZSl9XyR7dWlkfWA7XG4gICAgY29uc3QgZG9jID0gZ2V0X3Jvb3RfZm9yX3N0eWxlKG5vZGUpO1xuICAgIGFjdGl2ZV9kb2NzLmFkZChkb2MpO1xuICAgIGNvbnN0IHN0eWxlc2hlZXQgPSBkb2MuX19zdmVsdGVfc3R5bGVzaGVldCB8fCAoZG9jLl9fc3ZlbHRlX3N0eWxlc2hlZXQgPSBhcHBlbmRfZW1wdHlfc3R5bGVzaGVldChub2RlKS5zaGVldCk7XG4gICAgY29uc3QgY3VycmVudF9ydWxlcyA9IGRvYy5fX3N2ZWx0ZV9ydWxlcyB8fCAoZG9jLl9fc3ZlbHRlX3J1bGVzID0ge30pO1xuICAgIGlmICghY3VycmVudF9ydWxlc1tuYW1lXSkge1xuICAgICAgICBjdXJyZW50X3J1bGVzW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgc3R5bGVzaGVldC5pbnNlcnRSdWxlKGBAa2V5ZnJhbWVzICR7bmFtZX0gJHtydWxlfWAsIHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgY29uc3QgYW5pbWF0aW9uID0gbm9kZS5zdHlsZS5hbmltYXRpb24gfHwgJyc7XG4gICAgbm9kZS5zdHlsZS5hbmltYXRpb24gPSBgJHthbmltYXRpb24gPyBgJHthbmltYXRpb259LCBgIDogJyd9JHtuYW1lfSAke2R1cmF0aW9ufW1zIGxpbmVhciAke2RlbGF5fW1zIDEgYm90aGA7XG4gICAgYWN0aXZlICs9IDE7XG4gICAgcmV0dXJuIG5hbWU7XG59XG5mdW5jdGlvbiBkZWxldGVfcnVsZShub2RlLCBuYW1lKSB7XG4gICAgY29uc3QgcHJldmlvdXMgPSAobm9kZS5zdHlsZS5hbmltYXRpb24gfHwgJycpLnNwbGl0KCcsICcpO1xuICAgIGNvbnN0IG5leHQgPSBwcmV2aW91cy5maWx0ZXIobmFtZVxuICAgICAgICA/IGFuaW0gPT4gYW5pbS5pbmRleE9mKG5hbWUpIDwgMCAvLyByZW1vdmUgc3BlY2lmaWMgYW5pbWF0aW9uXG4gICAgICAgIDogYW5pbSA9PiBhbmltLmluZGV4T2YoJ19fc3ZlbHRlJykgPT09IC0xIC8vIHJlbW92ZSBhbGwgU3ZlbHRlIGFuaW1hdGlvbnNcbiAgICApO1xuICAgIGNvbnN0IGRlbGV0ZWQgPSBwcmV2aW91cy5sZW5ndGggLSBuZXh0Lmxlbmd0aDtcbiAgICBpZiAoZGVsZXRlZCkge1xuICAgICAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IG5leHQuam9pbignLCAnKTtcbiAgICAgICAgYWN0aXZlIC09IGRlbGV0ZWQ7XG4gICAgICAgIGlmICghYWN0aXZlKVxuICAgICAgICAgICAgY2xlYXJfcnVsZXMoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbGVhcl9ydWxlcygpIHtcbiAgICByYWYoKCkgPT4ge1xuICAgICAgICBpZiAoYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhY3RpdmVfZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZXNoZWV0ID0gZG9jLl9fc3ZlbHRlX3N0eWxlc2hlZXQ7XG4gICAgICAgICAgICBsZXQgaSA9IHN0eWxlc2hlZXQuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBzdHlsZXNoZWV0LmRlbGV0ZVJ1bGUoaSk7XG4gICAgICAgICAgICBkb2MuX19zdmVsdGVfcnVsZXMgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFjdGl2ZV9kb2NzLmNsZWFyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZV9hbmltYXRpb24obm9kZSwgZnJvbSwgZm4sIHBhcmFtcykge1xuICAgIGlmICghZnJvbSlcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgY29uc3QgdG8gPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChmcm9tLmxlZnQgPT09IHRvLmxlZnQgJiYgZnJvbS5yaWdodCA9PT0gdG8ucmlnaHQgJiYgZnJvbS50b3AgPT09IHRvLnRvcCAmJiBmcm9tLmJvdHRvbSA9PT0gdG8uYm90dG9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86IHNob3VsZCB0aGlzIGJlIHNlcGFyYXRlZCBmcm9tIGRlc3RydWN0dXJpbmc/IE9yIHN0YXJ0L2VuZCBhZGRlZCB0byBwdWJsaWMgYXBpIGFuZCBkb2N1bWVudGF0aW9uP1xuICAgIHN0YXJ0OiBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheSwgXG4gICAgLy8gQHRzLWlnbm9yZSB0b2RvOlxuICAgIGVuZCA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbiwgdGljayA9IG5vb3AsIGNzcyB9ID0gZm4obm9kZSwgeyBmcm9tLCB0byB9LCBwYXJhbXMpO1xuICAgIGxldCBydW5uaW5nID0gdHJ1ZTtcbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBuYW1lO1xuICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICBuYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheSkge1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpO1xuICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGxvb3Aobm93ID0+IHtcbiAgICAgICAgaWYgKCFzdGFydGVkICYmIG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRlZCAmJiBub3cgPj0gZW5kKSB7XG4gICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcnVubmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwID0gbm93IC0gc3RhcnRfdGltZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSAwICsgMSAqIGVhc2luZyhwIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgc3RhcnQoKTtcbiAgICB0aWNrKDAsIDEpO1xuICAgIHJldHVybiBzdG9wO1xufVxuZnVuY3Rpb24gZml4X3Bvc2l0aW9uKG5vZGUpIHtcbiAgICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnYWJzb2x1dGUnICYmIHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gc3R5bGU7XG4gICAgICAgIGNvbnN0IGEgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgYWRkX3RyYW5zZm9ybShub2RlLCBhKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpIHtcbiAgICBjb25zdCBiID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpZiAoYS5sZWZ0ICE9PSBiLmxlZnQgfHwgYS50b3AgIT09IGIudG9wKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gc3R5bGUudHJhbnNmb3JtID09PSAnbm9uZScgPyAnJyA6IHN0eWxlLnRyYW5zZm9ybTtcbiAgICAgICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHt0cmFuc2Zvcm19IHRyYW5zbGF0ZSgke2EubGVmdCAtIGIubGVmdH1weCwgJHthLnRvcCAtIGIudG9wfXB4KWA7XG4gICAgfVxufVxuXG5sZXQgY3VycmVudF9jb21wb25lbnQ7XG5mdW5jdGlvbiBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY3VycmVudF9jb21wb25lbnQgPSBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBnZXRfY3VycmVudF9jb21wb25lbnQoKSB7XG4gICAgaWYgKCFjdXJyZW50X2NvbXBvbmVudClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiBjYWxsZWQgb3V0c2lkZSBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24nKTtcbiAgICByZXR1cm4gY3VycmVudF9jb21wb25lbnQ7XG59XG5mdW5jdGlvbiBiZWZvcmVVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5iZWZvcmVfdXBkYXRlLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gb25Nb3VudChmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX21vdW50LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWZ0ZXJVcGRhdGUoZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5hZnRlcl91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbkRlc3Ryb3koZm4pIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5vbl9kZXN0cm95LnB1c2goZm4pO1xufVxuZnVuY3Rpb24gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldF9jdXJyZW50X2NvbXBvbmVudCgpO1xuICAgIHJldHVybiAodHlwZSwgZGV0YWlsKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbdHlwZV07XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gYXJlIHRoZXJlIHNpdHVhdGlvbnMgd2hlcmUgZXZlbnRzIGNvdWxkIGJlIGRpc3BhdGNoZWRcbiAgICAgICAgICAgIC8vIGluIGEgc2VydmVyIChub24tRE9NKSBlbnZpcm9ubWVudD9cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gY3VzdG9tX2V2ZW50KHR5cGUsIGRldGFpbCk7XG4gICAgICAgICAgICBjYWxsYmFja3Muc2xpY2UoKS5mb3JFYWNoKGZuID0+IHtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKGNvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gc2V0Q29udGV4dChrZXksIGNvbnRleHQpIHtcbiAgICBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LnNldChrZXksIGNvbnRleHQpO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5nZXQoa2V5KTtcbn1cbmZ1bmN0aW9uIGdldEFsbENvbnRleHRzKCkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0O1xufVxuZnVuY3Rpb24gaGFzQ29udGV4dChrZXkpIHtcbiAgICByZXR1cm4gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQuY29udGV4dC5oYXMoa2V5KTtcbn1cbi8vIFRPRE8gZmlndXJlIG91dCBpZiB3ZSBzdGlsbCB3YW50IHRvIHN1cHBvcnRcbi8vIHNob3J0aGFuZCBldmVudHMsIG9yIGlmIHdlIHdhbnQgdG8gaW1wbGVtZW50XG4vLyBhIHJlYWwgYnViYmxpbmcgbWVjaGFuaXNtXG5mdW5jdGlvbiBidWJibGUoY29tcG9uZW50LCBldmVudCkge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNvbXBvbmVudC4kJC5jYWxsYmFja3NbZXZlbnQudHlwZV07XG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4uY2FsbCh0aGlzLCBldmVudCkpO1xuICAgIH1cbn1cblxuY29uc3QgZGlydHlfY29tcG9uZW50cyA9IFtdO1xuY29uc3QgaW50cm9zID0geyBlbmFibGVkOiBmYWxzZSB9O1xuY29uc3QgYmluZGluZ19jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlbmRlcl9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IGZsdXNoX2NhbGxiYWNrcyA9IFtdO1xuY29uc3QgcmVzb2x2ZWRfcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xubGV0IHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHNjaGVkdWxlX3VwZGF0ZSgpIHtcbiAgICBpZiAoIXVwZGF0ZV9zY2hlZHVsZWQpIHtcbiAgICAgICAgdXBkYXRlX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmVkX3Byb21pc2UudGhlbihmbHVzaCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGljaygpIHtcbiAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICByZXR1cm4gcmVzb2x2ZWRfcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGFkZF9yZW5kZXJfY2FsbGJhY2soZm4pIHtcbiAgICByZW5kZXJfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxuZnVuY3Rpb24gYWRkX2ZsdXNoX2NhbGxiYWNrKGZuKSB7XG4gICAgZmx1c2hfY2FsbGJhY2tzLnB1c2goZm4pO1xufVxubGV0IGZsdXNoaW5nID0gZmFsc2U7XG5jb25zdCBzZWVuX2NhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGlmIChmbHVzaGluZylcbiAgICAgICAgcmV0dXJuO1xuICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgICBkbyB7XG4gICAgICAgIC8vIGZpcnN0LCBjYWxsIGJlZm9yZVVwZGF0ZSBmdW5jdGlvbnNcbiAgICAgICAgLy8gYW5kIHVwZGF0ZSBjb21wb25lbnRzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlydHlfY29tcG9uZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gZGlydHlfY29tcG9uZW50c1tpXTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGNvbXBvbmVudC4kJCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHdoaWxlIChiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGgpXG4gICAgICAgICAgICBiaW5kaW5nX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAvLyB0aGVuLCBvbmNlIGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGNhbGxcbiAgICAgICAgLy8gYWZ0ZXJVcGRhdGUgZnVuY3Rpb25zLiBUaGlzIG1heSBjYXVzZVxuICAgICAgICAvLyBzdWJzZXF1ZW50IHVwZGF0ZXMuLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHJlbmRlcl9jYWxsYmFja3NbaV07XG4gICAgICAgICAgICBpZiAoIXNlZW5fY2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyAuLi5zbyBndWFyZCBhZ2FpbnN0IGluZmluaXRlIGxvb3BzXG4gICAgICAgICAgICAgICAgc2Vlbl9jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9IHdoaWxlIChkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZmx1c2hfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgfVxuICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBmbHVzaGluZyA9IGZhbHNlO1xuICAgIHNlZW5fY2FsbGJhY2tzLmNsZWFyKCk7XG59XG5mdW5jdGlvbiB1cGRhdGUoJCQpIHtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgJCQudXBkYXRlKCk7XG4gICAgICAgIHJ1bl9hbGwoJCQuYmVmb3JlX3VwZGF0ZSk7XG4gICAgICAgIGNvbnN0IGRpcnR5ID0gJCQuZGlydHk7XG4gICAgICAgICQkLmRpcnR5ID0gWy0xXTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQucCgkJC5jdHgsIGRpcnR5KTtcbiAgICAgICAgJCQuYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG4gICAgfVxufVxuXG5sZXQgcHJvbWlzZTtcbmZ1bmN0aW9uIHdhaXQoKSB7XG4gICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBkaXNwYXRjaChub2RlLCBkaXJlY3Rpb24sIGtpbmQpIHtcbiAgICBub2RlLmRpc3BhdGNoRXZlbnQoY3VzdG9tX2V2ZW50KGAke2RpcmVjdGlvbiA/ICdpbnRybycgOiAnb3V0cm8nfSR7a2luZH1gKSk7XG59XG5jb25zdCBvdXRyb2luZyA9IG5ldyBTZXQoKTtcbmxldCBvdXRyb3M7XG5mdW5jdGlvbiBncm91cF9vdXRyb3MoKSB7XG4gICAgb3V0cm9zID0ge1xuICAgICAgICByOiAwLFxuICAgICAgICBjOiBbXSxcbiAgICAgICAgcDogb3V0cm9zIC8vIHBhcmVudCBncm91cFxuICAgIH07XG59XG5mdW5jdGlvbiBjaGVja19vdXRyb3MoKSB7XG4gICAgaWYgKCFvdXRyb3Mucikge1xuICAgICAgICBydW5fYWxsKG91dHJvcy5jKTtcbiAgICB9XG4gICAgb3V0cm9zID0gb3V0cm9zLnA7XG59XG5mdW5jdGlvbiB0cmFuc2l0aW9uX2luKGJsb2NrLCBsb2NhbCkge1xuICAgIGlmIChibG9jayAmJiBibG9jay5pKSB7XG4gICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgIGJsb2NrLmkobG9jYWwpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25fb3V0KGJsb2NrLCBsb2NhbCwgZGV0YWNoLCBjYWxsYmFjaykge1xuICAgIGlmIChibG9jayAmJiBibG9jay5vKSB7XG4gICAgICAgIGlmIChvdXRyb2luZy5oYXMoYmxvY2spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBvdXRyb2luZy5hZGQoYmxvY2spO1xuICAgICAgICBvdXRyb3MuYy5wdXNoKCgpID0+IHtcbiAgICAgICAgICAgIG91dHJvaW5nLmRlbGV0ZShibG9jayk7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWNoKVxuICAgICAgICAgICAgICAgICAgICBibG9jay5kKDEpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBibG9jay5vKGxvY2FsKTtcbiAgICB9XG59XG5jb25zdCBudWxsX3RyYW5zaXRpb24gPSB7IGR1cmF0aW9uOiAwIH07XG5mdW5jdGlvbiBjcmVhdGVfaW5fdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWU7XG4gICAgbGV0IHRhc2s7XG4gICAgbGV0IHVpZCA9IDA7XG4gICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSA9IDAsIGR1cmF0aW9uID0gMzAwLCBlYXNpbmcgPSBpZGVudGl0eSwgdGljayA9IG5vb3AsIGNzcyB9ID0gY29uZmlnIHx8IG51bGxfdHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKGNzcylcbiAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgMCwgMSwgZHVyYXRpb24sIGRlbGF5LCBlYXNpbmcsIGNzcywgdWlkKyspO1xuICAgICAgICB0aWNrKDAsIDEpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGlmICh0YXNrKVxuICAgICAgICAgICAgdGFzay5hYm9ydCgpO1xuICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCB0cnVlLCAnc3RhcnQnKSk7XG4gICAgICAgIHRhc2sgPSBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kX3RpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGljaygxLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgdHJ1ZSwgJ2VuZCcpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gc3RhcnRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZWFzaW5nKChub3cgLSBzdGFydF90aW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgc3RhcnRlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0KCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlKTtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBlbmQocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldCAmJiBjb25maWcudGljaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50aWNrKDEsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zLCBpbnRybykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSAocHJvZ3JhbS5iIC0gdCk7XG4gICAgICAgIGR1cmF0aW9uICo9IE1hdGguYWJzKGQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYTogdCxcbiAgICAgICAgICAgIGI6IHByb2dyYW0uYixcbiAgICAgICAgICAgIGQsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIHN0YXJ0OiBwcm9ncmFtLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwcm9ncmFtLnN0YXJ0ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBncm91cDogcHJvZ3JhbS5ncm91cFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBnbyhiKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSB7XG4gICAgICAgICAgICBzdGFydDogbm93KCkgKyBkZWxheSxcbiAgICAgICAgICAgIGJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHRvZG86IGltcHJvdmUgdHlwaW5nc1xuICAgICAgICAgICAgcHJvZ3JhbS5ncm91cCA9IG91dHJvcztcbiAgICAgICAgICAgIG91dHJvcy5yICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5ibG9ja3NbaV0gPT09IGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8uYmxvY2tzW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgICAgIGlmICghaW5mby5oYXNDYXRjaCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaWYgd2UgcHJldmlvdXNseSBoYWQgYSB0aGVuL2NhdGNoIGJsb2NrLCBkZXN0cm95IGl0XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8ucGVuZGluZykge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8ucGVuZGluZywgMCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGluZm8uY3VycmVudCAhPT0gaW5mby50aGVuKSB7XG4gICAgICAgICAgICB1cGRhdGUoaW5mby50aGVuLCAxLCBpbmZvLnZhbHVlLCBwcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGluZm8ucmVzb2x2ZWQgPSBwcm9taXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2goaW5mbywgY3R4LCBkaXJ0eSkge1xuICAgIGNvbnN0IGNoaWxkX2N0eCA9IGN0eC5zbGljZSgpO1xuICAgIGNvbnN0IHsgcmVzb2x2ZWQgfSA9IGluZm87XG4gICAgaWYgKGluZm8uY3VycmVudCA9PT0gaW5mby50aGVuKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLnZhbHVlXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpZiAoaW5mby5jdXJyZW50ID09PSBpbmZvLmNhdGNoKSB7XG4gICAgICAgIGNoaWxkX2N0eFtpbmZvLmVycm9yXSA9IHJlc29sdmVkO1xuICAgIH1cbiAgICBpbmZvLmJsb2NrLnAoY2hpbGRfY3R4LCBkaXJ0eSk7XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICA6IGdsb2JhbCk7XG5cbmZ1bmN0aW9uIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmQoMSk7XG4gICAgbG9va3VwLmRlbGV0ZShibG9jay5rZXkpO1xufVxuZnVuY3Rpb24gb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIHRyYW5zaXRpb25fb3V0KGJsb2NrLCAxLCAxLCAoKSA9PiB7XG4gICAgICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGZpeF9hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIGRlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX291dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5mKCk7XG4gICAgb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCk7XG59XG5mdW5jdGlvbiB1cGRhdGVfa2V5ZWRfZWFjaChvbGRfYmxvY2tzLCBkaXJ0eSwgZ2V0X2tleSwgZHluYW1pYywgY3R4LCBsaXN0LCBsb29rdXAsIG5vZGUsIGRlc3Ryb3ksIGNyZWF0ZV9lYWNoX2Jsb2NrLCBuZXh0LCBnZXRfY29udGV4dCkge1xuICAgIGxldCBvID0gb2xkX2Jsb2Nrcy5sZW5ndGg7XG4gICAgbGV0IG4gPSBsaXN0Lmxlbmd0aDtcbiAgICBsZXQgaSA9IG87XG4gICAgY29uc3Qgb2xkX2luZGV4ZXMgPSB7fTtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICBvbGRfaW5kZXhlc1tvbGRfYmxvY2tzW2ldLmtleV0gPSBpO1xuICAgIGNvbnN0IG5ld19ibG9ja3MgPSBbXTtcbiAgICBjb25zdCBuZXdfbG9va3VwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IGRlbHRhcyA9IG5ldyBNYXAoKTtcbiAgICBpID0gbjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkX2N0eCA9IGdldF9jb250ZXh0KGN0eCwgbGlzdCwgaSk7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IGJsb2NrID0gbG9va3VwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICBibG9jayA9IGNyZWF0ZV9lYWNoX2Jsb2NrKGtleSwgY2hpbGRfY3R4KTtcbiAgICAgICAgICAgIGJsb2NrLmMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkeW5hbWljKSB7XG4gICAgICAgICAgICBibG9jay5wKGNoaWxkX2N0eCwgZGlydHkpO1xuICAgICAgICB9XG4gICAgICAgIG5ld19sb29rdXAuc2V0KGtleSwgbmV3X2Jsb2Nrc1tpXSA9IGJsb2NrKTtcbiAgICAgICAgaWYgKGtleSBpbiBvbGRfaW5kZXhlcylcbiAgICAgICAgICAgIGRlbHRhcy5zZXQoa2V5LCBNYXRoLmFicyhpIC0gb2xkX2luZGV4ZXNba2V5XSkpO1xuICAgIH1cbiAgICBjb25zdCB3aWxsX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZGlkX21vdmUgPSBuZXcgU2V0KCk7XG4gICAgZnVuY3Rpb24gaW5zZXJ0KGJsb2NrKSB7XG4gICAgICAgIHRyYW5zaXRpb25faW4oYmxvY2ssIDEpO1xuICAgICAgICBibG9jay5tKG5vZGUsIG5leHQpO1xuICAgICAgICBsb29rdXAuc2V0KGJsb2NrLmtleSwgYmxvY2spO1xuICAgICAgICBuZXh0ID0gYmxvY2suZmlyc3Q7XG4gICAgICAgIG4tLTtcbiAgICB9XG4gICAgd2hpbGUgKG8gJiYgbikge1xuICAgICAgICBjb25zdCBuZXdfYmxvY2sgPSBuZXdfYmxvY2tzW24gLSAxXTtcbiAgICAgICAgY29uc3Qgb2xkX2Jsb2NrID0gb2xkX2Jsb2Nrc1tvIC0gMV07XG4gICAgICAgIGNvbnN0IG5ld19rZXkgPSBuZXdfYmxvY2sua2V5O1xuICAgICAgICBjb25zdCBvbGRfa2V5ID0gb2xkX2Jsb2NrLmtleTtcbiAgICAgICAgaWYgKG5ld19ibG9jayA9PT0gb2xkX2Jsb2NrKSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICBuZXh0ID0gbmV3X2Jsb2NrLmZpcnN0O1xuICAgICAgICAgICAgby0tO1xuICAgICAgICAgICAgbi0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFuZXdfbG9va3VwLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIG9sZCBibG9ja1xuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvb2t1cC5oYXMobmV3X2tleSkgfHwgd2lsbF9tb3ZlLmhhcyhuZXdfa2V5KSkge1xuICAgICAgICAgICAgaW5zZXJ0KG5ld19ibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkX21vdmUuaGFzKG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsdGFzLmdldChuZXdfa2V5KSA+IGRlbHRhcy5nZXQob2xkX2tleSkpIHtcbiAgICAgICAgICAgIGRpZF9tb3ZlLmFkZChuZXdfa2V5KTtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lsbF9tb3ZlLmFkZChvbGRfa2V5KTtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoby0tKSB7XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3Nbb107XG4gICAgICAgIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2Jsb2NrLmtleSkpXG4gICAgICAgICAgICBkZXN0cm95KG9sZF9ibG9jaywgbG9va3VwKTtcbiAgICB9XG4gICAgd2hpbGUgKG4pXG4gICAgICAgIGluc2VydChuZXdfYmxvY2tzW24gLSAxXSk7XG4gICAgcmV0dXJuIG5ld19ibG9ja3M7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2tleXMoY3R4LCBsaXN0LCBnZXRfY29udGV4dCwgZ2V0X2tleSkge1xuICAgIGNvbnN0IGtleXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldF9rZXkoZ2V0X2NvbnRleHQoY3R4LCBsaXN0LCBpKSk7XG4gICAgICAgIGlmIChrZXlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBoYXZlIGR1cGxpY2F0ZSBrZXlzIGluIGEga2V5ZWQgZWFjaCcpO1xuICAgICAgICB9XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRfc3ByZWFkX3VwZGF0ZShsZXZlbHMsIHVwZGF0ZXMpIHtcbiAgICBjb25zdCB1cGRhdGUgPSB7fTtcbiAgICBjb25zdCB0b19udWxsX291dCA9IHt9O1xuICAgIGNvbnN0IGFjY291bnRlZF9mb3IgPSB7ICQkc2NvcGU6IDEgfTtcbiAgICBsZXQgaSA9IGxldmVscy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBvID0gbGV2ZWxzW2ldO1xuICAgICAgICBjb25zdCBuID0gdXBkYXRlc1tpXTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbikpXG4gICAgICAgICAgICAgICAgICAgIHRvX251bGxfb3V0W2tleV0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbikge1xuICAgICAgICAgICAgICAgIGlmICghYWNjb3VudGVkX2ZvcltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gbltrZXldO1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ZWRfZm9yW2tleV0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldmVsc1tpXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0b19udWxsX291dCkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdXBkYXRlKSlcbiAgICAgICAgICAgIHVwZGF0ZVtrZXldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gZ2V0X3NwcmVhZF9vYmplY3Qoc3ByZWFkX3Byb3BzKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzcHJlYWRfcHJvcHMgPT09ICdvYmplY3QnICYmIHNwcmVhZF9wcm9wcyAhPT0gbnVsbCA/IHNwcmVhZF9wcm9wcyA6IHt9O1xufVxuXG4vLyBzb3VyY2U6IGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbFxuY29uc3QgYm9vbGVhbl9hdHRyaWJ1dGVzID0gbmV3IFNldChbXG4gICAgJ2FsbG93ZnVsbHNjcmVlbicsXG4gICAgJ2FsbG93cGF5bWVudHJlcXVlc3QnLFxuICAgICdhc3luYycsXG4gICAgJ2F1dG9mb2N1cycsXG4gICAgJ2F1dG9wbGF5JyxcbiAgICAnY2hlY2tlZCcsXG4gICAgJ2NvbnRyb2xzJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2RlZmVyJyxcbiAgICAnZGlzYWJsZWQnLFxuICAgICdmb3Jtbm92YWxpZGF0ZScsXG4gICAgJ2hpZGRlbicsXG4gICAgJ2lzbWFwJyxcbiAgICAnbG9vcCcsXG4gICAgJ211bHRpcGxlJyxcbiAgICAnbXV0ZWQnLFxuICAgICdub21vZHVsZScsXG4gICAgJ25vdmFsaWRhdGUnLFxuICAgICdvcGVuJyxcbiAgICAncGxheXNpbmxpbmUnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlcXVpcmVkJyxcbiAgICAncmV2ZXJzZWQnLFxuICAgICdzZWxlY3RlZCdcbl0pO1xuXG5jb25zdCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciA9IC9bXFxzJ1wiPi89XFx1e0ZERDB9LVxcdXtGREVGfVxcdXtGRkZFfVxcdXtGRkZGfVxcdXsxRkZGRX1cXHV7MUZGRkZ9XFx1ezJGRkZFfVxcdXsyRkZGRn1cXHV7M0ZGRkV9XFx1ezNGRkZGfVxcdXs0RkZGRX1cXHV7NEZGRkZ9XFx1ezVGRkZFfVxcdXs1RkZGRn1cXHV7NkZGRkV9XFx1ezZGRkZGfVxcdXs3RkZGRX1cXHV7N0ZGRkZ9XFx1ezhGRkZFfVxcdXs4RkZGRn1cXHV7OUZGRkV9XFx1ezlGRkZGfVxcdXtBRkZGRX1cXHV7QUZGRkZ9XFx1e0JGRkZFfVxcdXtCRkZGRn1cXHV7Q0ZGRkV9XFx1e0NGRkZGfVxcdXtERkZGRX1cXHV7REZGRkZ9XFx1e0VGRkZFfVxcdXtFRkZGRn1cXHV7RkZGRkV9XFx1e0ZGRkZGfVxcdXsxMEZGRkV9XFx1ezEwRkZGRn1dL3U7XG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcbi8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNub25jaGFyYWN0ZXJcbmZ1bmN0aW9uIHNwcmVhZChhcmdzLCBjbGFzc2VzX3RvX2FkZCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QuYXNzaWduKHt9LCAuLi5hcmdzKTtcbiAgICBpZiAoY2xhc3Nlc190b19hZGQpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuY2xhc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyA9IGNsYXNzZXNfdG9fYWRkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cmlidXRlcy5jbGFzcyArPSAnICcgKyBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RyID0gJyc7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgaWYgKGludmFsaWRfYXR0cmlidXRlX25hbWVfY2hhcmFjdGVyLnRlc3QobmFtZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKVxuICAgICAgICAgICAgc3RyICs9ICcgJyArIG5hbWU7XG4gICAgICAgIGVsc2UgaWYgKGJvb2xlYW5fYXR0cmlidXRlcy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgICAgIHN0ciArPSAnICcgKyBuYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHN0ciArPSBgICR7bmFtZX09XCIke3ZhbHVlfVwiYDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBlc2NhcGVkID0ge1xuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnLFxuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7J1xufTtcbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gICAgcmV0dXJuIFN0cmluZyhodG1sKS5yZXBsYWNlKC9bXCInJjw+XS9nLCBtYXRjaCA9PiBlc2NhcGVkW21hdGNoXSk7XG59XG5mdW5jdGlvbiBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBlc2NhcGUodmFsdWUpIDogdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVfb2JqZWN0KG9iaikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICByZXN1bHRba2V5XSA9IGVzY2FwZV9hdHRyaWJ1dGVfdmFsdWUob2JqW2tleV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZWFjaChpdGVtcywgZm4pIHtcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gZm4oaXRlbXNbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuY29uc3QgbWlzc2luZ19jb21wb25lbnQgPSB7XG4gICAgJCRyZW5kZXI6ICgpID0+ICcnXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVfY29tcG9uZW50KGNvbXBvbmVudCwgbmFtZSkge1xuICAgIGlmICghY29tcG9uZW50IHx8ICFjb21wb25lbnQuJCRyZW5kZXIpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdzdmVsdGU6Y29tcG9uZW50JylcbiAgICAgICAgICAgIG5hbWUgKz0gJyB0aGlzPXsuLi59JztcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGA8JHtuYW1lfT4gaXMgbm90IGEgdmFsaWQgU1NSIGNvbXBvbmVudC4gWW91IG1heSBuZWVkIHRvIHJldmlldyB5b3VyIGJ1aWxkIGNvbmZpZyB0byBlbnN1cmUgdGhhdCBkZXBlbmRlbmNpZXMgYXJlIGNvbXBpbGVkLCByYXRoZXIgdGhhbiBpbXBvcnRlZCBhcyBwcmUtY29tcGlsZWQgbW9kdWxlc2ApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuZnVuY3Rpb24gZGVidWcoZmlsZSwgbGluZSwgY29sdW1uLCB2YWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhge0BkZWJ1Z30gJHtmaWxlID8gZmlsZSArICcgJyA6ICcnfSgke2xpbmV9OiR7Y29sdW1ufSlgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2codmFsdWVzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgcmV0dXJuICcnO1xufVxubGV0IG9uX2Rlc3Ryb3k7XG5mdW5jdGlvbiBjcmVhdGVfc3NyX2NvbXBvbmVudChmbikge1xuICAgIGZ1bmN0aW9uICQkcmVuZGVyKHJlc3VsdCwgcHJvcHMsIGJpbmRpbmdzLCBzbG90cywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgICAgIGNvbnN0ICQkID0ge1xuICAgICAgICAgICAgb25fZGVzdHJveSxcbiAgICAgICAgICAgIGNvbnRleHQ6IG5ldyBNYXAocGFyZW50X2NvbXBvbmVudCA/IHBhcmVudF9jb21wb25lbnQuJCQuY29udGV4dCA6IGNvbnRleHQgfHwgW10pLFxuICAgICAgICAgICAgLy8gdGhlc2Ugd2lsbCBiZSBpbW1lZGlhdGVseSBkaXNjYXJkZWRcbiAgICAgICAgICAgIG9uX21vdW50OiBbXSxcbiAgICAgICAgICAgIGJlZm9yZV91cGRhdGU6IFtdLFxuICAgICAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KClcbiAgICAgICAgfTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHsgJCQgfSk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBmbihyZXN1bHQsIHByb3BzLCBiaW5kaW5ncywgc2xvdHMpO1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQocGFyZW50X2NvbXBvbmVudCk7XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXI6IChwcm9wcyA9IHt9LCB7ICQkc2xvdHMgPSB7fSwgY29udGV4dCA9IG5ldyBNYXAoKSB9ID0ge30pID0+IHtcbiAgICAgICAgICAgIG9uX2Rlc3Ryb3kgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdGl0bGU6ICcnLCBoZWFkOiAnJywgY3NzOiBuZXcgU2V0KCkgfTtcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSAkJHJlbmRlcihyZXN1bHQsIHByb3BzLCB7fSwgJCRzbG90cywgY29udGV4dCk7XG4gICAgICAgICAgICBydW5fYWxsKG9uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBodG1sLFxuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBBcnJheS5mcm9tKHJlc3VsdC5jc3MpLm1hcChjc3MgPT4gY3NzLmNvZGUpLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICBtYXA6IG51bGwgLy8gVE9ET1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGVhZDogcmVzdWx0LnRpdGxlICsgcmVzdWx0LmhlYWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgICQkcmVuZGVyXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGFkZF9hdHRyaWJ1dGUobmFtZSwgdmFsdWUsIGJvb2xlYW4pIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCAoYm9vbGVhbiAmJiAhdmFsdWUpKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgcmV0dXJuIGAgJHtuYW1lfSR7dmFsdWUgPT09IHRydWUgPyAnJyA6IGA9JHt0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkoZXNjYXBlKHZhbHVlKSkgOiBgXCIke3ZhbHVlfVwiYH1gfWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6ICcnO1xufVxuXG5mdW5jdGlvbiBiaW5kKGNvbXBvbmVudCwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IGNvbXBvbmVudC4kJC5wcm9wc1tuYW1lXTtcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb21wb25lbnQuJCQuYm91bmRbaW5kZXhdID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrKGNvbXBvbmVudC4kJC5jdHhbaW5kZXhdKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVfY29tcG9uZW50KGJsb2NrKSB7XG4gICAgYmxvY2sgJiYgYmxvY2suYygpO1xufVxuZnVuY3Rpb24gY2xhaW1fY29tcG9uZW50KGJsb2NrLCBwYXJlbnRfbm9kZXMpIHtcbiAgICBibG9jayAmJiBibG9jay5sKHBhcmVudF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCB0YXJnZXQsIGFuY2hvciwgY3VzdG9tRWxlbWVudCkge1xuICAgIGNvbnN0IHsgZnJhZ21lbnQsIG9uX21vdW50LCBvbl9kZXN0cm95LCBhZnRlcl91cGRhdGUgfSA9IGNvbXBvbmVudC4kJDtcbiAgICBmcmFnbWVudCAmJiBmcmFnbWVudC5tKHRhcmdldCwgYW5jaG9yKTtcbiAgICBpZiAoIWN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgLy8gb25Nb3VudCBoYXBwZW5zIGJlZm9yZSB0aGUgaW5pdGlhbCBhZnRlclVwZGF0ZVxuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld19vbl9kZXN0cm95ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgICAgIGlmIChvbl9kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgb25fZGVzdHJveS5wdXNoKC4uLm5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEVkZ2UgY2FzZSAtIGNvbXBvbmVudCB3YXMgZGVzdHJveWVkIGltbWVkaWF0ZWx5LFxuICAgICAgICAgICAgICAgIC8vIG1vc3QgbGlrZWx5IGFzIGEgcmVzdWx0IG9mIGEgYmluZGluZyBpbml0aWFsaXNpbmdcbiAgICAgICAgICAgICAgICBydW5fYWxsKG5ld19vbl9kZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudC4kJC5vbl9tb3VudCA9IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWZ0ZXJfdXBkYXRlLmZvckVhY2goYWRkX3JlbmRlcl9jYWxsYmFjayk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2NvbXBvbmVudChjb21wb25lbnQsIGRldGFjaGluZykge1xuICAgIGNvbnN0ICQkID0gY29tcG9uZW50LiQkO1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICBydW5fYWxsKCQkLm9uX2Rlc3Ryb3kpO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5kKGRldGFjaGluZyk7XG4gICAgICAgIC8vIFRPRE8gbnVsbCBvdXQgb3RoZXIgcmVmcywgaW5jbHVkaW5nIGNvbXBvbmVudC4kJCAoYnV0IG5lZWQgdG9cbiAgICAgICAgLy8gcHJlc2VydmUgZmluYWwgc3RhdGU/KVxuICAgICAgICAkJC5vbl9kZXN0cm95ID0gJCQuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICAkJC5jdHggPSBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYWtlX2RpcnR5KGNvbXBvbmVudCwgaSkge1xuICAgIGlmIChjb21wb25lbnQuJCQuZGlydHlbMF0gPT09IC0xKSB7XG4gICAgICAgIGRpcnR5X2NvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xuICAgICAgICBzY2hlZHVsZV91cGRhdGUoKTtcbiAgICAgICAgY29tcG9uZW50LiQkLmRpcnR5LmZpbGwoMCk7XG4gICAgfVxuICAgIGNvbXBvbmVudC4kJC5kaXJ0eVsoaSAvIDMxKSB8IDBdIHw9ICgxIDw8IChpICUgMzEpKTtcbn1cbmZ1bmN0aW9uIGluaXQoY29tcG9uZW50LCBvcHRpb25zLCBpbnN0YW5jZSwgY3JlYXRlX2ZyYWdtZW50LCBub3RfZXF1YWwsIHByb3BzLCBhcHBlbmRfc3R5bGVzLCBkaXJ0eSA9IFstMV0pIHtcbiAgICBjb25zdCBwYXJlbnRfY29tcG9uZW50ID0gY3VycmVudF9jb21wb25lbnQ7XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgY29uc3QgJCQgPSBjb21wb25lbnQuJCQgPSB7XG4gICAgICAgIGZyYWdtZW50OiBudWxsLFxuICAgICAgICBjdHg6IG51bGwsXG4gICAgICAgIC8vIHN0YXRlXG4gICAgICAgIHByb3BzLFxuICAgICAgICB1cGRhdGU6IG5vb3AsXG4gICAgICAgIG5vdF9lcXVhbCxcbiAgICAgICAgYm91bmQ6IGJsYW5rX29iamVjdCgpLFxuICAgICAgICAvLyBsaWZlY3ljbGVcbiAgICAgICAgb25fbW91bnQ6IFtdLFxuICAgICAgICBvbl9kZXN0cm95OiBbXSxcbiAgICAgICAgb25fZGlzY29ubmVjdDogW10sXG4gICAgICAgIGJlZm9yZV91cGRhdGU6IFtdLFxuICAgICAgICBhZnRlcl91cGRhdGU6IFtdLFxuICAgICAgICBjb250ZXh0OiBuZXcgTWFwKHBhcmVudF9jb21wb25lbnQgPyBwYXJlbnRfY29tcG9uZW50LiQkLmNvbnRleHQgOiBvcHRpb25zLmNvbnRleHQgfHwgW10pLFxuICAgICAgICAvLyBldmVyeXRoaW5nIGVsc2VcbiAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgZGlydHksXG4gICAgICAgIHNraXBfYm91bmQ6IGZhbHNlLFxuICAgICAgICByb290OiBvcHRpb25zLnRhcmdldCB8fCBwYXJlbnRfY29tcG9uZW50LiQkLnJvb3RcbiAgICB9O1xuICAgIGFwcGVuZF9zdHlsZXMgJiYgYXBwZW5kX3N0eWxlcygkJC5yb290KTtcbiAgICBsZXQgcmVhZHkgPSBmYWxzZTtcbiAgICAkJC5jdHggPSBpbnN0YW5jZVxuICAgICAgICA/IGluc3RhbmNlKGNvbXBvbmVudCwgb3B0aW9ucy5wcm9wcyB8fCB7fSwgKGksIHJldCwgLi4ucmVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXN0Lmxlbmd0aCA/IHJlc3RbMF0gOiByZXQ7XG4gICAgICAgICAgICBpZiAoJCQuY3R4ICYmIG5vdF9lcXVhbCgkJC5jdHhbaV0sICQkLmN0eFtpXSA9IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICghJCQuc2tpcF9ib3VuZCAmJiAkJC5ib3VuZFtpXSlcbiAgICAgICAgICAgICAgICAgICAgJCQuYm91bmRbaV0odmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZWFkeSlcbiAgICAgICAgICAgICAgICAgICAgbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSlcbiAgICAgICAgOiBbXTtcbiAgICAkJC51cGRhdGUoKTtcbiAgICByZWFkeSA9IHRydWU7XG4gICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAvLyBgZmFsc2VgIGFzIGEgc3BlY2lhbCBjYXNlIG9mIG5vIERPTSBjb21wb25lbnRcbiAgICAkJC5mcmFnbWVudCA9IGNyZWF0ZV9mcmFnbWVudCA/IGNyZWF0ZV9mcmFnbWVudCgkJC5jdHgpIDogZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgICAgIHN0YXJ0X2h5ZHJhdGluZygpO1xuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSBjaGlsZHJlbihvcHRpb25zLnRhcmdldCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQubChub2Rlcyk7XG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKGRldGFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuYygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmludHJvKVxuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihjb21wb25lbnQuJCQuZnJhZ21lbnQpO1xuICAgICAgICBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCBvcHRpb25zLnRhcmdldCwgb3B0aW9ucy5hbmNob3IsIG9wdGlvbnMuY3VzdG9tRWxlbWVudCk7XG4gICAgICAgIGVuZF9oeWRyYXRpbmcoKTtcbiAgICAgICAgZmx1c2goKTtcbiAgICB9XG4gICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHBhcmVudF9jb21wb25lbnQpO1xufVxubGV0IFN2ZWx0ZUVsZW1lbnQ7XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgU3ZlbHRlRWxlbWVudCA9IGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25fbW91bnQgfSA9IHRoaXMuJCQ7XG4gICAgICAgICAgICB0aGlzLiQkLm9uX2Rpc2Nvbm5lY3QgPSBvbl9tb3VudC5tYXAocnVuKS5maWx0ZXIoaXNfZnVuY3Rpb24pO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuJCQuc2xvdHRlZCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLiQkLnNsb3R0ZWRba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIF9vbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cl0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJ1bl9hbGwodGhpcy4kJC5vbl9kaXNjb25uZWN0KTtcbiAgICAgICAgfVxuICAgICAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHNob3VsZCB0aGlzIGRlbGVnYXRlIHRvIGFkZEV2ZW50TGlzdGVuZXI/XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgICRzZXQoJCRwcm9wcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJCRzZXQgJiYgIWlzX2VtcHR5KCQkcHJvcHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLiQkc2V0KCQkcHJvcHMpO1xuICAgICAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgU3ZlbHRlIGNvbXBvbmVudHMuIFVzZWQgd2hlbiBkZXY9ZmFsc2UuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgJGRlc3Ryb3koKSB7XG4gICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gbm9vcDtcbiAgICB9XG4gICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9ICh0aGlzLiQkLmNhbGxiYWNrc1t0eXBlXSB8fCAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gPSBbXSkpO1xuICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGNhbGxiYWNrcy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgICRzZXQoJCRwcm9wcykge1xuICAgICAgICBpZiAodGhpcy4kJHNldCAmJiAhaXNfZW1wdHkoJCRwcm9wcykpIHtcbiAgICAgICAgICAgIHRoaXMuJCQuc2tpcF9ib3VuZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiQkc2V0KCQkcHJvcHMpO1xuICAgICAgICAgICAgdGhpcy4kJC5za2lwX2JvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoX2Rldih0eXBlLCBkZXRhaWwpIHtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudCh0eXBlLCBPYmplY3QuYXNzaWduKHsgdmVyc2lvbjogJzMuNDIuMScgfSwgZGV0YWlsKSwgdHJ1ZSkpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTUluc2VydCcsIHsgdGFyZ2V0LCBub2RlIH0pO1xuICAgIGFwcGVuZCh0YXJnZXQsIG5vZGUpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2h5ZHJhdGlvbl9kZXYodGFyZ2V0LCBub2RlKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSB9KTtcbiAgICBhcHBlbmRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBpbnNlcnRfZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01JbnNlcnQnLCB7IHRhcmdldCwgbm9kZSwgYW5jaG9yIH0pO1xuICAgIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcik7XG59XG5mdW5jdGlvbiBpbnNlcnRfaHlkcmF0aW9uX2Rldih0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NSW5zZXJ0JywgeyB0YXJnZXQsIG5vZGUsIGFuY2hvciB9KTtcbiAgICBpbnNlcnRfaHlkcmF0aW9uKHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGRldGFjaF9kZXYobm9kZSkge1xuICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlJywgeyBub2RlIH0pO1xuICAgIGRldGFjaChub2RlKTtcbn1cbmZ1bmN0aW9uIGRldGFjaF9iZXR3ZWVuX2RldihiZWZvcmUsIGFmdGVyKSB7XG4gICAgd2hpbGUgKGJlZm9yZS5uZXh0U2libGluZyAmJiBiZWZvcmUubmV4dFNpYmxpbmcgIT09IGFmdGVyKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRhY2hfYmVmb3JlX2RldihhZnRlcikge1xuICAgIHdoaWxlIChhZnRlci5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgZGV0YWNoX2RldihhZnRlci5wcmV2aW91c1NpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9hZnRlcl9kZXYoYmVmb3JlKSB7XG4gICAgd2hpbGUgKGJlZm9yZS5uZXh0U2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGJlZm9yZS5uZXh0U2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbGlzdGVuX2Rldihub2RlLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucywgaGFzX3ByZXZlbnRfZGVmYXVsdCwgaGFzX3N0b3BfcHJvcGFnYXRpb24pIHtcbiAgICBjb25zdCBtb2RpZmllcnMgPSBvcHRpb25zID09PSB0cnVlID8gWydjYXB0dXJlJ10gOiBvcHRpb25zID8gQXJyYXkuZnJvbShPYmplY3Qua2V5cyhvcHRpb25zKSkgOiBbXTtcbiAgICBpZiAoaGFzX3ByZXZlbnRfZGVmYXVsdClcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3ByZXZlbnREZWZhdWx0Jyk7XG4gICAgaWYgKGhhc19zdG9wX3Byb3BhZ2F0aW9uKVxuICAgICAgICBtb2RpZmllcnMucHVzaCgnc3RvcFByb3BhZ2F0aW9uJyk7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01BZGRFdmVudExpc3RlbmVyJywgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgIGNvbnN0IGRpc3Bvc2UgPSBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NUmVtb3ZlRXZlbnRMaXN0ZW5lcicsIHsgbm9kZSwgZXZlbnQsIGhhbmRsZXIsIG1vZGlmaWVycyB9KTtcbiAgICAgICAgZGlzcG9zZSgpO1xuICAgIH07XG59XG5mdW5jdGlvbiBhdHRyX2Rldihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICAgICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01SZW1vdmVBdHRyaWJ1dGUnLCB7IG5vZGUsIGF0dHJpYnV0ZSB9KTtcbiAgICBlbHNlXG4gICAgICAgIGRpc3BhdGNoX2RldignU3ZlbHRlRE9NU2V0QXR0cmlidXRlJywgeyBub2RlLCBhdHRyaWJ1dGUsIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gcHJvcF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoJ1N2ZWx0ZURPTVNldFByb3BlcnR5JywgeyBub2RlLCBwcm9wZXJ0eSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBkYXRhc2V0X2Rldihub2RlLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBub2RlLmRhdGFzZXRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXREYXRhc2V0JywgeyBub2RlLCBwcm9wZXJ0eSwgdmFsdWUgfSk7XG59XG5mdW5jdGlvbiBzZXRfZGF0YV9kZXYodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQud2hvbGVUZXh0ID09PSBkYXRhKVxuICAgICAgICByZXR1cm47XG4gICAgZGlzcGF0Y2hfZGV2KCdTdmVsdGVET01TZXREYXRhJywgeyBub2RlOiB0ZXh0LCBkYXRhIH0pO1xuICAgIHRleHQuZGF0YSA9IGRhdGE7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9lYWNoX2FyZ3VtZW50KGFyZykge1xuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnc3RyaW5nJyAmJiAhKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiAnbGVuZ3RoJyBpbiBhcmcpKSB7XG4gICAgICAgIGxldCBtc2cgPSAneyNlYWNofSBvbmx5IGl0ZXJhdGVzIG92ZXIgYXJyYXktbGlrZSBvYmplY3RzLic7XG4gICAgICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIGFyZyAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gYXJnKSB7XG4gICAgICAgICAgICBtc2cgKz0gJyBZb3UgY2FuIHVzZSBhIHNwcmVhZCB0byBjb252ZXJ0IHRoaXMgaXRlcmFibGUgaW50byBhbiBhcnJheS4nO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlX3Nsb3RzKG5hbWUsIHNsb3QsIGtleXMpIHtcbiAgICBmb3IgKGNvbnN0IHNsb3Rfa2V5IG9mIE9iamVjdC5rZXlzKHNsb3QpKSB7XG4gICAgICAgIGlmICghfmtleXMuaW5kZXhPZihzbG90X2tleSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgPCR7bmFtZX0+IHJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgc2xvdCBcIiR7c2xvdF9rZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIFN2ZWx0ZSBjb21wb25lbnRzIHdpdGggc29tZSBtaW5vciBkZXYtZW5oYW5jZW1lbnRzLiBVc2VkIHdoZW4gZGV2PXRydWUuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudERldiBleHRlbmRzIFN2ZWx0ZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgKCFvcHRpb25zLnRhcmdldCAmJiAhb3B0aW9ucy4kJGlubGluZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIid0YXJnZXQnIGlzIGEgcmVxdWlyZWQgb3B0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgICRkZXN0cm95KCkge1xuICAgICAgICBzdXBlci4kZGVzdHJveSgpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDb21wb25lbnQgd2FzIGFscmVhZHkgZGVzdHJveWVkJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAkY2FwdHVyZV9zdGF0ZSgpIHsgfVxuICAgICRpbmplY3Rfc3RhdGUoKSB7IH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyB0byBjcmVhdGUgc3Ryb25nbHkgdHlwZWQgU3ZlbHRlIGNvbXBvbmVudHMuXG4gKiBUaGlzIG9ubHkgZXhpc3RzIGZvciB0eXBpbmcgcHVycG9zZXMgYW5kIHNob3VsZCBiZSB1c2VkIGluIGAuZC50c2AgZmlsZXMuXG4gKlxuICogIyMjIEV4YW1wbGU6XG4gKlxuICogWW91IGhhdmUgY29tcG9uZW50IGxpYnJhcnkgb24gbnBtIGNhbGxlZCBgY29tcG9uZW50LWxpYnJhcnlgLCBmcm9tIHdoaWNoXG4gKiB5b3UgZXhwb3J0IGEgY29tcG9uZW50IGNhbGxlZCBgTXlDb21wb25lbnRgLiBGb3IgU3ZlbHRlK1R5cGVTY3JpcHQgdXNlcnMsXG4gKiB5b3Ugd2FudCB0byBwcm92aWRlIHR5cGluZ3MuIFRoZXJlZm9yZSB5b3UgY3JlYXRlIGEgYGluZGV4LmQudHNgOlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFN2ZWx0ZUNvbXBvbmVudFR5cGVkIH0gZnJvbSBcInN2ZWx0ZVwiO1xuICogZXhwb3J0IGNsYXNzIE15Q29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50VHlwZWQ8e2Zvbzogc3RyaW5nfT4ge31cbiAqIGBgYFxuICogVHlwaW5nIHRoaXMgbWFrZXMgaXQgcG9zc2libGUgZm9yIElERXMgbGlrZSBWUyBDb2RlIHdpdGggdGhlIFN2ZWx0ZSBleHRlbnNpb25cbiAqIHRvIHByb3ZpZGUgaW50ZWxsaXNlbnNlIGFuZCB0byB1c2UgdGhlIGNvbXBvbmVudCBsaWtlIHRoaXMgaW4gYSBTdmVsdGUgZmlsZVxuICogd2l0aCBUeXBlU2NyaXB0OlxuICogYGBgc3ZlbHRlXG4gKiA8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICogXHRpbXBvcnQgeyBNeUNvbXBvbmVudCB9IGZyb20gXCJjb21wb25lbnQtbGlicmFyeVwiO1xuICogPC9zY3JpcHQ+XG4gKiA8TXlDb21wb25lbnQgZm9vPXsnYmFyJ30gLz5cbiAqIGBgYFxuICpcbiAqICMjIyMgV2h5IG5vdCBtYWtlIHRoaXMgcGFydCBvZiBgU3ZlbHRlQ29tcG9uZW50KERldilgP1xuICogQmVjYXVzZVxuICogYGBgdHNcbiAqIGNsYXNzIEFTdWJjbGFzc09mU3ZlbHRlQ29tcG9uZW50IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50PHtmb286IHN0cmluZ30+IHt9XG4gKiBjb25zdCBjb21wb25lbnQ6IHR5cGVvZiBTdmVsdGVDb21wb25lbnQgPSBBU3ViY2xhc3NPZlN2ZWx0ZUNvbXBvbmVudDtcbiAqIGBgYFxuICogd2lsbCB0aHJvdyBhIHR5cGUgZXJyb3IsIHNvIHdlIG5lZWQgdG8gc2VwYXJhdGUgdGhlIG1vcmUgc3RyaWN0bHkgdHlwZWQgY2xhc3MuXG4gKi9cbmNsYXNzIFN2ZWx0ZUNvbXBvbmVudFR5cGVkIGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50RGV2IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvb3BfZ3VhcmQodGltZW91dCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0ID4gdGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmZpbml0ZSBsb29wIGRldGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBIdG1sVGFnLCBIdG1sVGFnSHlkcmF0aW9uLCBTdmVsdGVDb21wb25lbnQsIFN2ZWx0ZUNvbXBvbmVudERldiwgU3ZlbHRlQ29tcG9uZW50VHlwZWQsIFN2ZWx0ZUVsZW1lbnQsIGFjdGlvbl9kZXN0cm95ZXIsIGFkZF9hdHRyaWJ1dGUsIGFkZF9jbGFzc2VzLCBhZGRfZmx1c2hfY2FsbGJhY2ssIGFkZF9sb2NhdGlvbiwgYWRkX3JlbmRlcl9jYWxsYmFjaywgYWRkX3Jlc2l6ZV9saXN0ZW5lciwgYWRkX3RyYW5zZm9ybSwgYWZ0ZXJVcGRhdGUsIGFwcGVuZCwgYXBwZW5kX2RldiwgYXBwZW5kX2VtcHR5X3N0eWxlc2hlZXQsIGFwcGVuZF9oeWRyYXRpb24sIGFwcGVuZF9oeWRyYXRpb25fZGV2LCBhcHBlbmRfc3R5bGVzLCBhc3NpZ24sIGF0dHIsIGF0dHJfZGV2LCBhdHRyaWJ1dGVfdG9fb2JqZWN0LCBiZWZvcmVVcGRhdGUsIGJpbmQsIGJpbmRpbmdfY2FsbGJhY2tzLCBibGFua19vYmplY3QsIGJ1YmJsZSwgY2hlY2tfb3V0cm9zLCBjaGlsZHJlbiwgY2xhaW1fY29tcG9uZW50LCBjbGFpbV9lbGVtZW50LCBjbGFpbV9odG1sX3RhZywgY2xhaW1fc3BhY2UsIGNsYWltX3RleHQsIGNsZWFyX2xvb3BzLCBjb21wb25lbnRfc3Vic2NyaWJlLCBjb21wdXRlX3Jlc3RfcHJvcHMsIGNvbXB1dGVfc2xvdHMsIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgY3JlYXRlX2FuaW1hdGlvbiwgY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbiwgY3JlYXRlX2NvbXBvbmVudCwgY3JlYXRlX2luX3RyYW5zaXRpb24sIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbiwgY3JlYXRlX3Nsb3QsIGNyZWF0ZV9zc3JfY29tcG9uZW50LCBjdXJyZW50X2NvbXBvbmVudCwgY3VzdG9tX2V2ZW50LCBkYXRhc2V0X2RldiwgZGVidWcsIGRlc3Ryb3lfYmxvY2ssIGRlc3Ryb3lfY29tcG9uZW50LCBkZXN0cm95X2VhY2gsIGRldGFjaCwgZGV0YWNoX2FmdGVyX2RldiwgZGV0YWNoX2JlZm9yZV9kZXYsIGRldGFjaF9iZXR3ZWVuX2RldiwgZGV0YWNoX2RldiwgZGlydHlfY29tcG9uZW50cywgZGlzcGF0Y2hfZGV2LCBlYWNoLCBlbGVtZW50LCBlbGVtZW50X2lzLCBlbXB0eSwgZW5kX2h5ZHJhdGluZywgZXNjYXBlLCBlc2NhcGVfYXR0cmlidXRlX3ZhbHVlLCBlc2NhcGVfb2JqZWN0LCBlc2NhcGVkLCBleGNsdWRlX2ludGVybmFsX3Byb3BzLCBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9wb3NpdGlvbiwgZmx1c2gsIGdldEFsbENvbnRleHRzLCBnZXRDb250ZXh0LCBnZXRfYWxsX2RpcnR5X2Zyb21fc2NvcGUsIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlLCBnZXRfY3VycmVudF9jb21wb25lbnQsIGdldF9jdXN0b21fZWxlbWVudHNfc2xvdHMsIGdldF9yb290X2Zvcl9zdHlsZSwgZ2V0X3Nsb3RfY2hhbmdlcywgZ2V0X3NwcmVhZF9vYmplY3QsIGdldF9zcHJlYWRfdXBkYXRlLCBnZXRfc3RvcmVfdmFsdWUsIGdsb2JhbHMsIGdyb3VwX291dHJvcywgaGFuZGxlX3Byb21pc2UsIGhhc0NvbnRleHQsIGhhc19wcm9wLCBpZGVudGl0eSwgaW5pdCwgaW5zZXJ0LCBpbnNlcnRfZGV2LCBpbnNlcnRfaHlkcmF0aW9uLCBpbnNlcnRfaHlkcmF0aW9uX2RldiwgaW50cm9zLCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciwgaXNfY2xpZW50LCBpc19jcm9zc29yaWdpbiwgaXNfZW1wdHksIGlzX2Z1bmN0aW9uLCBpc19wcm9taXNlLCBsaXN0ZW4sIGxpc3Rlbl9kZXYsIGxvb3AsIGxvb3BfZ3VhcmQsIG1pc3NpbmdfY29tcG9uZW50LCBtb3VudF9jb21wb25lbnQsIG5vb3AsIG5vdF9lcXVhbCwgbm93LCBudWxsX3RvX2VtcHR5LCBvYmplY3Rfd2l0aG91dF9wcm9wZXJ0aWVzLCBvbkRlc3Ryb3ksIG9uTW91bnQsIG9uY2UsIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrLCBwcmV2ZW50X2RlZmF1bHQsIHByb3BfZGV2LCBxdWVyeV9zZWxlY3Rvcl9hbGwsIHJhZiwgcnVuLCBydW5fYWxsLCBzYWZlX25vdF9lcXVhbCwgc2NoZWR1bGVfdXBkYXRlLCBzZWxlY3RfbXVsdGlwbGVfdmFsdWUsIHNlbGVjdF9vcHRpb24sIHNlbGVjdF9vcHRpb25zLCBzZWxlY3RfdmFsdWUsIHNlbGYsIHNldENvbnRleHQsIHNldF9hdHRyaWJ1dGVzLCBzZXRfY3VycmVudF9jb21wb25lbnQsIHNldF9jdXN0b21fZWxlbWVudF9kYXRhLCBzZXRfZGF0YSwgc2V0X2RhdGFfZGV2LCBzZXRfaW5wdXRfdHlwZSwgc2V0X2lucHV0X3ZhbHVlLCBzZXRfbm93LCBzZXRfcmFmLCBzZXRfc3RvcmVfdmFsdWUsIHNldF9zdHlsZSwgc2V0X3N2Z19hdHRyaWJ1dGVzLCBzcGFjZSwgc3ByZWFkLCBzcmNfdXJsX2VxdWFsLCBzdGFydF9oeWRyYXRpbmcsIHN0b3BfcHJvcGFnYXRpb24sIHN1YnNjcmliZSwgc3ZnX2VsZW1lbnQsIHRleHQsIHRpY2ssIHRpbWVfcmFuZ2VzX3RvX2FycmF5LCB0b19udW1iZXIsIHRvZ2dsZV9jbGFzcywgdHJhbnNpdGlvbl9pbiwgdHJhbnNpdGlvbl9vdXQsIHRydXN0ZWQsIHVwZGF0ZV9hd2FpdF9ibG9ja19icmFuY2gsIHVwZGF0ZV9rZXllZF9lYWNoLCB1cGRhdGVfc2xvdCwgdXBkYXRlX3Nsb3RfYmFzZSwgdmFsaWRhdGVfY29tcG9uZW50LCB2YWxpZGF0ZV9lYWNoX2FyZ3VtZW50LCB2YWxpZGF0ZV9lYWNoX2tleXMsIHZhbGlkYXRlX3Nsb3RzLCB2YWxpZGF0ZV9zdG9yZSwgeGxpbmtfYXR0ciB9O1xuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgZXhwb3J0IGxldCBtZXNzYWdlOiBTdHJpbmc7XG48L3NjcmlwdD5cblxuXG5cbjxzdHlsZT5cbiAgLmVycm9ycyB7XG4gICAgcGFkZGluZzogMTBweDtcbiAgICB3aWR0aDogaW5pdGlhbDtcbiAgICBoZWlnaHQ6IGluaXRpYWw7XG4gICAgcG9zaXRpb246IGluaXRpYWw7XG4gICAgb3ZlcmZsb3cteTogaW5pdGlhbDtcbiAgICBvdmVyZmxvdy13cmFwOiBpbml0aWFsO1xuICB9XG48L3N0eWxlPlxuIiwiIFxuXG48ZGl2IGlkPVwic2VlZGxpbmctY29udGFpbmVyXCI+XG4gICAgPCEtLXNlZWRsaW5nIHN2ZyBmcm9tIGh0dHBzOi8vd3d3LnN2Z3JlcG8uY29tL3N2Zy8yNjMzMTIvc3Byb3V0LXRyZWUgLS0+XG4gICAgPHN2Z1xuICAgICAgICBpZD1cInNlZWRsaW5nXCJcbiAgICAgICAgdmVyc2lvbj1cIjEuMVwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxuICAgICAgICB4PVwiMHB4XCJcbiAgICAgICAgeT1cIjBweFwiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgNTEyLjAwMSA1MTIuMDAxXCJcbiAgICAgICAgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMi4wMDEgNTEyLjAwMTtcIlxuICAgICAgICB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiXG4gICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiM2REM4MkE7XCJcbiAgICAgICAgICAgIGQ9XCJNMjgyLjkxNSwyMTEuMzNjLTMuODYzLDQuMDc3LTkuMzI0LDYuMjI1LTE0Ljk0MSw1Ljg3N2MtMS45NDMtMC4xMjMtNDguMTI5LTMuMjk4LTk1LjM2OS0yOC43NTRcbmMtNDQuNjQxLTI0LjA1Ni05OC41MTEtNzIuODY4LTEwMS42MzktMTY4LjgwNGMtMC4xNzItNS4yMzIsMS44MzEtMTAuMyw1LjUzMS0xNC4wMDJDODIuMTQxLDAsODguNzY1LDAsOTEuNTk0LDBcbmMwLjAwMSwwLDAuMDAxLDAsMC4wMDEsMGMyLjAwMSwwLDQ5LjA0NSwwLjMzOCw5Ny41MTgsMjkuNDAzYzI1LjE2MywxNS4wODksNDYuMDgzLDM1LjE0OCw2Mi4xODEsNTkuNjIyXG5jMTkuNDQ2LDI5LjU2NiwzMS43ODYsNjUuNTg5LDM2LjY3OCwxMDcuMDY2QzI4OC42MywyMDEuNjcxLDI4Ni43NzcsMjA3LjI1MiwyODIuOTE1LDIxMS4zM3pcIlxuICAgICAgICAvPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiM1RUFDMjQ7XCJcbiAgICAgICAgICAgIGQ9XCJNMjUxLjg4Nyw4OS45NjNjLTcuOTM4LDE0LjY1LTE0LjYzMywzMS4xNS0xOS40MzcsNDkuNzM4Yy00LjMyLDEyLjkwMi0xMC45MTcsMzUuNTctMTYuMzYyLDY2LjkzM1xuYzI4LjcxOSw4Ljk4OCw1MC41NjMsMTAuNDksNTEuODg2LDEwLjU3M2M1LjYxOCwwLjM0OSwxMS4wNzgtMS43OTksMTQuOTQxLTUuODc3YzMuODYyLTQuMDc4LDUuNzE1LTkuNjU5LDUuMDU2LTE1LjIzN1xuQzI4My4xMywxNTUuMDQ4LDI3MC45ODMsMTE5LjM1NCwyNTEuODg3LDg5Ljk2M3pcIlxuICAgICAgICAvPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiM0RTkwMUU7XCJcbiAgICAgICAgICAgIGQ9XCJNMjY2LjY3NCwxNzguODU1bC00MC43ODgtMzkuNzc1TDIxNS4xMyw4NS40ODJjLTAuODUxLTQuMjQ4LTQuOTg0LTYuOTk3LTkuMjMzLTYuMTQ3XG5jLTQuMjQ4LDAuODUyLTYuOTk4LDQuOTg3LTYuMTQ3LDkuMjMzbDYuMjQ1LDMxLjExNkwxODMuNSw5Ny43NDhsLTEwLjkwNC01NC4zMzVjLTAuODUxLTQuMjQ4LTQuOTg2LTYuOTk0LTkuMjMzLTYuMTQ3XG5jLTQuMjQ4LDAuODUyLTYuOTk4LDQuOTg2LTYuMTQ3LDkuMjMzbDYuMzkyLDMxLjg1MmwtNTIuNDkyLTUxLjE4NGMtMy4xMDQtMy4wMjQtOC4wNjYtMi45Ni0xMS4wOTEsMC4xNFxuYy0zLjAyNCwzLjEwMi0yLjk2MSw4LjA2NywwLjE0LDExLjA5bDU3LjcxOSw1Ni4yODRsLTQwLjI2NC0wLjY4OGMtNC4zMjctMC4xMTgtNy45MDEsMy4zNzctNy45NzYsNy43MDhcbmMtMC4wNzMsNC4zMzEsMy4zNzcsNy45MDEsNy43MDgsNy45NzZsNTYuOTA3LDAuOTczbDI2Ljc3NSwyNi4xMWwtNDAuODgtMC42OTdjLTQuMjkyLTAuMDk2LTcuOTAxLDMuMzc3LTcuOTc2LDcuNzA4XG5jLTAuMDczLDQuMzMxLDMuMzc3LDcuOTAxLDcuNzA4LDcuOTc2bDU3LjUyMiwwLjk4MmwzOC4zMTEsMzcuMzU4YzEuNTI2LDEuNDg3LDMuNTAxLDIuMjI3LDUuNDc0LDIuMjI3XG5jMi4wNCwwLDQuMDc4LTAuNzkyLDUuNjE3LTIuMzY4QzI2OS44MzcsMTg2Ljg0MywyNjkuNzc1LDE4MS44NzgsMjY2LjY3NCwxNzguODU1elwiXG4gICAgICAgIC8+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgICBzdHlsZT1cImZpbGw6IzkxREM1QTtcIlxuICAgICAgICAgICAgZD1cIk00NjcuODI0LDUuOTE0Yy0zLjg2My00LjA3Ny05LjMyNC02LjIyNS0xNC45NDEtNS44NzdjLTEuOTQzLDAuMTIzLTQ4LjEyOSwzLjI5OC05NS4zNjksMjguNzU0XG5jLTM2LjMwMSwxOS41NjEtNzguNzAxLDU1LjQ5My05NC45NjEsMTE5LjgxOWMtOC44ODEsMjYuMTUzLTI4LjQ0Niw5Ny4wNzgtMjMuODcsMjAzLjg2OGMwLjM5Niw5LjIzOSw4LjAxLDE2LjQ2MywxNy4xNywxNi40NjJcbmMwLjI0OCwwLDAuNDk4LTAuMDA1LDAuNzQ5LTAuMDE2YzkuNDg5LTAuNDA3LDE2Ljg1Mi04LjQyOCwxNi40NDYtMTcuOTE5Yy0yLjM3MS01NS4zMjMsMi4xODQtMTAwLjU1LDguMDU0LTEzMy45MjNcbmMxMy4yMDktMC43NTcsNTIuNTY2LTUuMDQ1LDkyLjkyLTI5LjI0MWMyNS4xNjMtMTUuMDg5LDQ2LjA4My0zNS4xNDgsNjIuMTgxLTU5LjYyMmMxOS40NDYtMjkuNTY2LDMxLjc4Ni02NS41ODksMzYuNjc4LTEwNy4wNjZcbkM0NzMuNTM5LDE1LjU3Myw0NzEuNjg2LDkuOTkyLDQ2Ny44MjQsNS45MTR6XCJcbiAgICAgICAgLz5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojNUVBQzI0O1wiXG4gICAgICAgICAgICBkPVwiTTQ0My4xMjksMjcuMzA3Yy0zLjAyNi0zLjEwMS03Ljk5MS0zLjE2NC0xMS4wOTEtMC4xNEwzNzkuNTUsNzguMzVsNi4zOTItMzEuODUxXG5jMC44NTEtNC4yNDctMS44OTktOC4zOC02LjE0Ny05LjIzM2MtNC4yNDItMC44NDgtOC4zODEsMS44OTktOS4yMzMsNi4xNDdsLTEwLjkwNSw1NC4zMzVsLTIyLjQ5NCwyMS45MzZsNi4yNDUtMzEuMTE2XG5jMC44NTItNC4yNDctMS44OTktOC4zOC02LjE0Ny05LjIzM2MtNC4yNDYtMC44NS04LjM4MSwxLjg5OS05LjIzMyw2LjE0N2wtMTAuNzU3LDUzLjU5OWwtNDAuNzg5LDM5Ljc3NVxuYy0zLjEwMiwzLjAyNC0zLjE2Myw3Ljk4OS0wLjE0LDExLjA5YzEuNTM4LDEuNTc2LDMuNTc1LDIuMzY3LDUuNjE3LDIuMzY3YzEuOTc0LDAsMy45NS0wLjc0LDUuNDc0LTIuMjI3bDM4LjMxMS0zNy4zNThcbmw1Ny41MjQtMC45ODJjNC4zMzEtMC4wNzQsNy43ODEtMy42NDQsNy43MDgtNy45NzZjLTAuMDczLTQuMjg2LTMuNTctNy43MDktNy44MzktNy43MDljLTAuMDQ2LDAtMC4wOTIsMC0wLjEzNywwLjAwMVxubC00MC44ODEsMC42OTdsMjYuNzc1LTI2LjExbDU2LjkwNy0wLjk3M2M0LjMzMS0wLjA3NCw3Ljc4MS0zLjY0NCw3LjcwOC03Ljk3NmMtMC4wNzMtNC4yODYtMy41Ny03LjcwOS03LjgzOS03LjcwOVxuYy0wLjA0NiwwLTAuMDkyLDAtMC4xMzcsMC4wMDFsLTQwLjI2NCwwLjY4OGw1Ny43MTktNTYuMjg0QzQ0Ni4wOTEsMzUuMzczLDQ0Ni4xNTMsMzAuNDA4LDQ0My4xMjksMjcuMzA3elwiXG4gICAgICAgIC8+XG4gICAgICAgIDxwYXRoXG4gICAgICAgICAgICBzdHlsZT1cImZpbGw6I0NDNzQwMDtcIlxuICAgICAgICAgICAgZD1cIk00NDkuMTkzLDQxMC4xMjVjLTcuOTEsMC0xNS4yOTgsMi4yMjgtMjEuNTc3LDYuMDg3Yy05LjI3NC0zMC4zNDItMzcuNDkxLTUyLjQxNC03MC44NjktNTIuNDE0XG5jLTMuNzA0LDAtNy4zNDEsMC4yOC0xMC44OTgsMC44MDVjLTE1LjEzLTM0LjYxNC00OS42NTUtNTguODEzLTg5Ljg0Ni01OC44MTNzLTc0LjcxNiwyNC4xOTktODkuODQ2LDU4LjgxM1xuYy0zLjU1OC0wLjUyNS03LjE5Ni0wLjgwNS0xMC44OTgtMC44MDVjLTMzLjM3OCwwLTYxLjU5NCwyMi4wNzItNzAuODY5LDUyLjQxNGMtNi4yNzktMy44NTktMTMuNjY2LTYuMDg3LTIxLjU3Ny02LjA4N1xuYy0yMi43OTUsMC00MS4yNzUsMTguNDgtNDEuMjc1LDQxLjI3NXMxOC40OCw0MS4yNzUsNDEuMjc1LDQxLjI3NWMxMi4yMTYsMCwyMy4xODgtNS4zMSwzMC43NDQtMTMuNzQ0XG5jMTMuMjgyLDE5LjkzMSwzNS45NTQsMzMuMDcsNjEuNzAxLDMzLjA3YzIwLjg1MSwwLDM5LjY4LTguNjI1LDUzLjE0NC0yMi40ODdjMTQuMDk3LDcuODQ4LDMwLjMyMSwxMi4zMzQsNDcuNjAxLDEyLjMzNFxuYzE3LjI3OSwwLDMzLjUwNC00LjQ4Nyw0Ny42MDEtMTIuMzM0YzEzLjQ2NiwxMy44NjIsMzIuMjkzLDIyLjQ4Nyw1My4xNDQsMjIuNDg3YzI1Ljc0NywwLDQ4LjQyLTEzLjEzNyw2MS43MDEtMzMuMDdcbmM3LjU1Nyw4LjQzNCwxOC41MjksMTMuNzQ0LDMwLjc0NCwxMy43NDRjMjIuNzk1LDAsNDEuMjc1LTE4LjQ4LDQxLjI3NS00MS4yNzVDNDkwLjQ2OCw0MjguNjA0LDQ3MS45ODgsNDEwLjEyNSw0NDkuMTkzLDQxMC4xMjV6XCJcbiAgICAgICAgLz5cbiAgICAgICAgPGc+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQUE2MTAwO1wiXG4gICAgICAgICAgICAgICAgZD1cIk0zMDkuODg4LDM0NS45MThjOS43NDgsMCwxOS4xNTQsMS40NDMsMjguMDQyLDQuMDkyYy0xNy41MjUtMjYuNjMtNDcuNjY2LTQ0LjIyMS04MS45MjgtNDQuMjIxXG5jLTQwLjE5MiwwLTc0LjcxNiwyNC4xOTktODkuODQ2LDU4LjgxM2MtMy41NTgtMC41MjUtNy4xOTYtMC44MDUtMTAuODk4LTAuODA1Yy0zMy4zNzgsMC02MS41OTQsMjIuMDcyLTcwLjg2OSw1Mi40MTRcbmMtNi4yNzktMy44NTktMTMuNjY2LTYuMDg3LTIxLjU3Ny02LjA4N2MtMjIuNzk1LDAtNDEuMjc1LDE4LjQ4LTQxLjI3NSw0MS4yNzVjMCwyMi43OTUsMTguNDgsNDEuMjc1LDQxLjI3NSw0MS4yNzVcbmMxMi4yMTYsMCwyMy4xODgtNS4zMSwzMC43NDQtMTMuNzQ0YzEzLjI4MiwxOS45MzEsMzUuOTU0LDMzLjA3LDYxLjcwMSwzMy4wN2MyMC44NTEsMCwzOS42OC04LjYyNSw1My4xNDQtMjIuNDg3XG5jNi4xNDgsMy40MjMsMTIuNyw2LjIwNCwxOS41NjcsOC4yNTVjLTEwLjE3Mi0xNS40NTEtMTYuMTA4LTMzLjkzOS0xNi4xMDgtNTMuODIxQzIxMS44NiwzODkuODA4LDI1NS43NDksMzQ1LjkxOCwzMDkuODg4LDM0NS45MThcbnpcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxjaXJjbGVcbiAgICAgICAgICAgICAgICBzdHlsZT1cImZpbGw6I0FBNjEwMDtcIlxuICAgICAgICAgICAgICAgIGN4PVwiMjk0Ljk4NlwiXG4gICAgICAgICAgICAgICAgY3k9XCI0MjEuMDE0XCJcbiAgICAgICAgICAgICAgICByPVwiMTcuNzcxXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiNBQTYxMDA7XCJcbiAgICAgICAgICAgICAgICBjeD1cIjM2Ni42MzhcIlxuICAgICAgICAgICAgICAgIGN5PVwiNDYyLjg2M1wiXG4gICAgICAgICAgICAgICAgcj1cIjE3Ljc3MVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQUE2MTAwO1wiXG4gICAgICAgICAgICAgICAgY3g9XCIzNTUuNzFcIlxuICAgICAgICAgICAgICAgIGN5PVwiNDAyLjA1NVwiXG4gICAgICAgICAgICAgICAgcj1cIjYuODM4XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiNBQTYxMDA7XCJcbiAgICAgICAgICAgICAgICBjeD1cIjI1Ni4wMDJcIlxuICAgICAgICAgICAgICAgIGN5PVwiNDY5LjcwMlwiXG4gICAgICAgICAgICAgICAgcj1cIjYuODM4XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiNBQTYxMDA7XCJcbiAgICAgICAgICAgICAgICBjeD1cIjI3Ny4yMDlcIlxuICAgICAgICAgICAgICAgIGN5PVwiMzc2LjQ5OFwiXG4gICAgICAgICAgICAgICAgcj1cIjYuODM4XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiNBQTYxMDA7XCJcbiAgICAgICAgICAgICAgICBjeD1cIjQyNC4zNTFcIlxuICAgICAgICAgICAgICAgIGN5PVwiNDM4Ljc5MVwiXG4gICAgICAgICAgICAgICAgcj1cIjYuODM4XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvZz5cbiAgICAgICAgPGc+XG4gICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJmaWxsOiNDQzc0MDA7XCJcbiAgICAgICAgICAgICAgICBjeD1cIjM4NC40MTVcIlxuICAgICAgICAgICAgICAgIGN5PVwiMzE3LjIxNlwiXG4gICAgICAgICAgICAgICAgcj1cIjE3Ljc3MVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQ0M3NDAwO1wiXG4gICAgICAgICAgICAgICAgY3g9XCI0MjQuMzUxXCJcbiAgICAgICAgICAgICAgICBjeT1cIjM1Ni45NTNcIlxuICAgICAgICAgICAgICAgIHI9XCI2LjgzOFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQ0M3NDAwO1wiXG4gICAgICAgICAgICAgICAgY3g9XCI0MjQuMzUxXCJcbiAgICAgICAgICAgICAgICBjeT1cIjMyNC4wNTVcIlxuICAgICAgICAgICAgICAgIHI9XCI2LjgzOFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2c+XG4gICAgICAgIDxnPlxuICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQUE2MTAwO1wiXG4gICAgICAgICAgICAgICAgY3g9XCIxMTIuNTNcIlxuICAgICAgICAgICAgICAgIGN5PVwiMzEwLjk0MlwiXG4gICAgICAgICAgICAgICAgcj1cIjE3Ljc3MVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgIHN0eWxlPVwiZmlsbDojQUE2MTAwO1wiXG4gICAgICAgICAgICAgICAgY3g9XCI4My4wMlwiXG4gICAgICAgICAgICAgICAgY3k9XCIzNTAuMTE1XCJcbiAgICAgICAgICAgICAgICByPVwiNi44MzhcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9nPlxuICAgIDwvc3ZnPlxuPC9kaXY+XG48c3R5bGU+XG5cbmRpdiNzZWVkbGluZy1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIGJvdHRvbTogNSU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDI1JTtcbiAgICAgICAgbWF4LWhlaWdodDogMjAwcHg7XG4gICAgICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB9XG4gICAgc3ZnI3NlZWRsaW5nIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG9wYWNpdHk6IDYwJTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgIH1cbjwvc3R5bGU+IiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbiAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vZGJcIjtcbiAgaW1wb3J0IHsgR2V0RGlzcGxheU5hbWUsIE5hdmlnYXRlVG9GaWxlIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbiAgZXhwb3J0IGxldCBub3RlX3BhdGg6IHN0cmluZztcbiAgZXhwb3J0IGxldCBkYjogREJNYW5hZ2VyO1xuICBleHBvcnQgbGV0IGluZGVudGF0aW9uOiBudW1iZXI7XG4gIGV4cG9ydCBsZXQgYXBwOiBBcHA7XG4gIGxldCBkYXJrX21vZGUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhcInRoZW1lLWRhcmtcIilcbiAgICA/IFwiZGFyay1tb2RlXCJcbiAgICA6IFwibGlnaHQtbW9kZVwiO1xuICBsZXQgZXhwYW5kZWQgPSB0cnVlID8gaW5kZW50YXRpb24gPCAzIDogZmFsc2U7XG5cbiAgbGV0IGNoaWxkcmVuID0gW107XG4gIGlmIChkYi5kZXNjZW5kYW50cy5oYXMobm90ZV9wYXRoKSkge1xuICAgIGNoaWxkcmVuID0gZGIuZGVzY2VuZGFudHMuZ2V0KG5vdGVfcGF0aCkuc2xpY2UoKTtcbiAgfVxuPC9zY3JpcHQ+XG5cbjwhLS0gZGVmaW5lIGV4cGFuZCBzdmctLT5cbjxzdmcgZGlzcGxheT1cIm5vbmVcIj5cbiAgPHN5bWJvbFxuICAgIGlkPVwiZXhwYW5kLWFycm93LXN2Z1wiXG4gICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgPjxwYXRoIGQ9XCJNMjIgMTJsLTIwIDEyIDUtMTItNS0xMnpcIiAvPlxuICA8L3N5bWJvbD48L3N2Z1xuPlxuPCEtLXN0YXJ0IGRlc2NlbmRhbnRzIHZpZXctLT5cbnsjaWYgaW5kZW50YXRpb24gPT0gMCAmJiBjaGlsZHJlbi5sZW5ndGggPT0gMH1cbiAgTm8gZGVzY2VuZGFudHNcbns6ZWxzZX1cbiAgPGxpIGNsYXNzPVwiY29udGFpbmVyIHtkYXJrX21vZGV9XCI+XG4gICAgPHA+XG4gICAgICB7I2lmIGluZGVudGF0aW9uID09IDB9XG4gICAgICAgIHtHZXREaXNwbGF5TmFtZShub3RlX3BhdGgsIGRiKX1cbiAgICAgIHs6ZWxzZX17I2lmIGNoaWxkcmVuLmxlbmd0aCA+IDB9XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzPVwiZXhwYW5kLWFycm93XCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGV4cGFuZGVkID0gIWV4cGFuZGVkO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID48ZGl2IGNsYXNzPVwiZXhwYW5kX2J1dHRvblwiPlxuICAgICAgICAgICAgICB7I2lmIGV4cGFuZGVkfVxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJzdmcgZXhwYW5kZWRcIj5cbiAgICAgICAgICAgICAgICAgIDx1c2UgaHJlZj1cIiNleHBhbmQtYXJyb3ctc3ZnXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgezplbHNlfTxzdmcgY2xhc3M9XCJzdmdcIj5cbiAgICAgICAgICAgICAgICAgIDx1c2UgaHJlZj1cIiNleHBhbmQtYXJyb3ctc3ZnXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgIDwvZGl2Pjwvc3BhblxuICAgICAgICAgID57L2lmfVxuICAgICAgICA8YVxuICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgdGl0bGU9e25vdGVfcGF0aH1cbiAgICAgICAgICBvbjpjbGljaz17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBOYXZpZ2F0ZVRvRmlsZShhcHAsIG5vdGVfcGF0aCwgZXZlbnQpO1xuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7R2V0RGlzcGxheU5hbWUobm90ZV9wYXRoLCBkYil9PC9hXG4gICAgICAgID5cbiAgICAgIHsvaWZ9XG4gICAgPC9wPlxuICAgIDx1bD5cbiAgICAgIHsjaWYgY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBleHBhbmRlZH1cbiAgICAgICAgeyNlYWNoIGNoaWxkcmVuIGFzIGNoaWxkfVxuICAgICAgICAgIDxzdmVsdGU6c2VsZlxuICAgICAgICAgICAge2RifVxuICAgICAgICAgICAge2FwcH1cbiAgICAgICAgICAgIG5vdGVfcGF0aD17Y2hpbGR9XG4gICAgICAgICAgICBpbmRlbnRhdGlvbj17aW5kZW50YXRpb24gKyAxfVxuICAgICAgICAgIC8+XG4gICAgICAgIHsvZWFjaH1cbiAgICAgIHsvaWZ9XG4gICAgPC91bD5cbiAgPC9saT5cbnsvaWZ9XG5cbjxzdHlsZT5cbiAgYS5saW5rIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuICB1bCB7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICBtYXJnaW46IDA7XG4gICAgcGFkZGluZzogMDtcbiAgfVxuXG4gIGxpIHtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgdWwge1xuICAgIHBhZGRpbmctbGVmdDogMWVtO1xuICB9XG5cbiAgbGkge1xuICAgIHBhZGRpbmctbGVmdDogMWVtO1xuICAgIGJvcmRlcjogNXB4IGRvdHRlZCBibGFjaztcbiAgICBib3JkZXItd2lkdGg6IDAgMCAxcHggMXB4O1xuICB9XG4gIGxpLmRhcmstbW9kZSB7XG4gICAgcGFkZGluZy1sZWZ0OiAxZW07XG4gICAgYm9yZGVyOiA1cHggZG90dGVkIGxpZ2h0Z3JheTtcbiAgICBib3JkZXItd2lkdGg6IDAgMCAxcHggMXB4O1xuICB9XG4gIGxpLmNvbnRhaW5lciB7XG4gICAgYm9yZGVyLWJvdHRvbTogMHB4O1xuICB9XG5cbiAgbGkgcCB7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB0b3A6IDBlbTtcbiAgfVxuXG4gIGxpIHVsIHtcbiAgICBib3JkZXItdG9wOiAxcHggZG90dGVkIGJsYWNrO1xuICAgIG1hcmdpbi1sZWZ0OiAtMWVtO1xuICAgIHBhZGRpbmctbGVmdDogMmVtO1xuICB9XG5cbiAgbGkuZGFyay1tb2RlIHVsIHtcbiAgICBib3JkZXItdG9wOiAxcHggZG90dGVkIGxpZ2h0Z3JheTtcbiAgfVxuXG4gIHVsIGxpOmxhc3QtY2hpbGQgdWwge1xuICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgIG1hcmdpbi1sZWZ0OiAtMTdweDtcbiAgfVxuXG4gIC5leHBhbmQtYXJyb3cge1xuICAgIGNvbG9yOiBkYXJrZ3JleTtcbiAgfVxuXG4gIC5leHBhbmQtYXJyb3c6aG92ZXIge1xuICAgIGNvbG9yOiBncmF5O1xuICB9XG5cbiAgZGl2LmV4cGFuZF9idXR0b24ge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxuXG4gIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcge1xuICAgIHdpZHRoOiAxNHB4O1xuICAgIGhlaWdodDogMTRweDtcbiAgICBtYXJnaW4tdG9wOiA1cHg7XG4gIH1cblxuICBsaS5saWdodC1tb2RlIGRpdi5leHBhbmRfYnV0dG9uIHN2Zy5zdmcge1xuICAgIGZpbGw6IGRhcmtncmV5O1xuICB9XG4gIGxpLmxpZ2h0LW1vZGUgZGl2LmV4cGFuZF9idXR0b24gc3ZnLnN2Zzpob3ZlciB7XG4gICAgZmlsbDogZ3JheTtcbiAgfVxuXG4gIGxpLmRhcmstbW9kZSBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnIHtcbiAgICBmaWxsOiBncmF5O1xuICB9XG4gIGxpLmRhcmstbW9kZSBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnOmhvdmVyIHtcbiAgICBmaWxsOiBsaWdodGdyYXk7XG4gIH1cblxuICBkaXYuZXhwYW5kX2J1dHRvbiBzdmcuc3ZnLmV4cGFuZGVkIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7XG4gIH1cbjwvc3R5bGU+XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB0eXBlIHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gICAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vZGJcIjtcbiAgICBpbXBvcnQgeyBMSU5LRURfQk9USCwgTElOS0VEX1RPLCBMSU5LRURfRlJPTSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbiAgICBpbXBvcnQgeyBHZXREaXNwbGF5TmFtZSwgSXNDdHJsUHJlc3NlZCwgTmF2aWdhdGVUb0ZpbGUgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuICAgIGltcG9ydCBTYXBsaW5nSW1hZ2UgZnJvbSBcIi4vU2FwbGluZ0ltYWdlLnN2ZWx0ZVwiO1xuICAgIGltcG9ydCBEZXNjZW5kYW50cyBmcm9tIFwiLi9EZXNjZW5kYW50cy5zdmVsdGVcIjtcblxuICAgIGV4cG9ydCBsZXQgcGF0aHM6IFtzdHJpbmcsIHN0cmluZ11bXVtdO1xuICAgIGV4cG9ydCBsZXQgYXBwOiBBcHA7XG4gICAgZXhwb3J0IGxldCBkYjogREJNYW5hZ2VyO1xuICAgIGV4cG9ydCBsZXQgY25fcGF0aDogc3RyaW5nO1xuICAgIGV4cG9ydCBsZXQgZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGV4cG9ydCBsZXQgb3Blbl9ub3RlX3BhdGg6IHN0cmluZztcbiAgICBsZXQgc2Nyb2xsX3VwX2RpdjtcbiAgICBsZXQgbWFpbl9kaXY7XG4gICAgbGV0IHNjcm9sbF91cF9kaXZfYWxyZWFkeV92aXNpYmxlID0gZmFsc2U7XG4gICAgbGV0IGRhcmtfbW9kZSA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhlbWUtZGFya1wiKVxuICAgICAgICA/IFwiZGFyay1tb2RlXCJcbiAgICAgICAgOiBcImxpZ2h0LW1vZGVcIjtcbiAgICBvbk1vdW50KCgpID0+IHtcbiAgICAgICAgc2Nyb2xsX3RvX3RvcCgpO1xuICAgIH0pO1xuXG4gICAgLyoqIFNjcm9sbCB0aGUgd2hvbGUgdmlldyB0byB0aGUgdG9wKi9cbiAgICBmdW5jdGlvbiBzY3JvbGxfdG9fdG9wKCkge1xuICAgICAgICBtYWluX2Rpdi5zY3JvbGxUb3AgPSAwO1xuICAgIH1cbiAgICAvKipzaG93IHRvIFwic2Nyb2xsIHRvIHRvcFwiIGFycm93IGlmIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCB0aGUgdmlldyovXG4gICAgZnVuY3Rpb24gb25fc2Nyb2xsKHBvc2l0aW9uOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uID4gMzAgJiYgIXNjcm9sbF91cF9kaXZfYWxyZWFkeV92aXNpYmxlKSB7XG4gICAgICAgICAgICBzY3JvbGxfdXBfZGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBzY3JvbGxfdXBfZGl2X2FscmVhZHlfdmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy9oaWRlIHRoZSBhcnJvdyBpZiB1c2VyIHNjcm9sbHMgYmFjayB0byB0aGUgdG9wXG4gICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uIDw9IDMwICYmIHNjcm9sbF91cF9kaXZfYWxyZWFkeV92aXNpYmxlKSB7XG4gICAgICAgICAgICBzY3JvbGxfdXBfZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHNjcm9sbF91cF9kaXZfYWxyZWFkeV92aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG48L3NjcmlwdD5cblxuPCEtLSBkZWZpbmUgcmlnaHQgcG9pbnRlciBhcnJvdyBzdmctLT5cbjxzdmcgZGlzcGxheT1cIm5vbmVcIj5cbiAgICA8c3ltYm9sXG4gICAgICAgIGlkPVwicG9pbnRlci1hcnJvdy1yaWdodC1zdmctbW9jXCJcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMTUuMDVcIlxuICAgICAgICA+PHBhdGhcbiAgICAgICAgICAgIGQ9XCIgTSAyMS44ODMsOCAxNC4zNTYsMTQuMjM1IDE1LDE1IDI0LDcuNDc5IDE1LDAgMTQuMzU1LDAuNzY0IDIxLjg4NCw3IEggMCB2IDEgelwiXG4gICAgICAgIC8+XG4gICAgPC9zeW1ib2w+PC9zdmdcbj5cbjwhLS0gZGVmaW5lIGxlZnQgcG9pbnRlciBhcnJvdyBzdmctLT5cbjxzdmcgZGlzcGxheT1cIm5vbmVcIj5cbiAgICA8c3ltYm9sXG4gICAgICAgIGlkPVwicG9pbnRlci1hcnJvdy1sZWZ0LXN2Zy1tb2NcIlxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgICAgID48cGF0aFxuICAgICAgICAgICAgZD1cIk0gMi4xMTcsNyA5LjY0NCwwLjc2NSA5LDAgMCw3LjUyMSA5LDE1IDkuNjQ1LDE0LjIzNiAyLjExNiw4IEggMjQgViA3IFpcIlxuICAgICAgICAvPlxuICAgIDwvc3ltYm9sPjwvc3ZnXG4+XG48IS0tIGRlZmluZSBib3RoIGRpcmVjdGlvbnMgcG9pbnRlciBhcnJvdyBzdmctLT5cbjxzdmcgZGlzcGxheT1cIm5vbmVcIj5cbiAgICA8c3ltYm9sXG4gICAgICAgIGlkPVwicG9pbnRlci1hcnJvdy1ib3RoLXN2Zy1tb2NcIlxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgdmlld0JveD1cIjAgMCAyNCAxNS4wNVwiXG4gICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk0gOSAwIEwgMCA3LjUyMTQ4NDQgTCA5IDE1IEwgOS42NDQ1MzEyIDE0LjIzNjMyOCBMIDIuMTE1MjM0NCA4IEwgMjEuODgyODEyIDggTCAxNC4zNTU0NjkgMTQuMjM0Mzc1IEwgMTUgMTUgTCAyNCA3LjQ3ODUxNTYgTCAxNSAwIEwgMTQuMzU1NDY5IDAuNzYzNjcxODggTCAyMS44ODQ3NjYgNyBMIDIuMTE3MTg3NSA3IEwgOS42NDQ1MzEyIDAuNzY1NjI1IEwgOSAwIHogXCJcbiAgICAgICAgLz5cbiAgICA8L3N5bWJvbD48L3N2Z1xuPlxuPCEtLSBkZWZpbmUgaGFtYnVyZ2VyIG1lbnUgc3ZnLS0+XG48c3ZnIGRpc3BsYXk9XCJub25lXCI+XG4gICAgPHN5bWJvbFxuICAgICAgICBpZD1cImhhbWJ1cmdlci1tZW51XCJcbiAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgID5cbiAgICAgICAgPHBhdGggZD1cIk0yNCA2aC0yNHYtNGgyNHY0em0wIDRoLTI0djRoMjR2LTR6bTAgOGgtMjR2NGgyNHYtNHpcIiAvPlxuICAgIDwvc3ltYm9sPjwvc3ZnXG4+XG48ZGl2XG4gICAgaWQ9XCJtYWluX21vY19kaXZcIlxuICAgIGNsYXNzPXtkYXJrX21vZGV9XG4gICAgYmluZDp0aGlzPXttYWluX2Rpdn1cbiAgICBvbjpzY3JvbGw9eyhlKSA9PiBvbl9zY3JvbGwoZS50YXJnZXQuc2Nyb2xsVG9wKX1cbj5cbiAgICA8ZGl2IGlkPVwidG9wLWJhclwiPlxuICAgICAgICA8c3ZnIGNsYXNzPVwicGF0aC1hcnJvd1wiPlxuICAgICAgICAgICAgPHVzZSBocmVmPVwiI2hhbWJ1cmdlci1tZW51XCIgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9kaXY+XG4gICAgeyNpZiBlcnJvcnMubGVuZ3RofVxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXJyb3JzXCI+XG4gICAgICAgICAgICB7QGh0bWwgZXJyb3JzWzBdfVxuICAgICAgICA8L2Rpdj5cbiAgICB7OmVsc2UgaWYgcGF0aHMubGVuZ3RoID09IDB9XG4gICAgICAgIFRoaXMgZmlsZSBkb2Vzbid0IGhhdmUgYW55IGNvbm5lY3Rpb25zIHRvIDxhXG4gICAgICAgICAgICBjbGFzcz1cImxpbmtcIlxuICAgICAgICAgICAgdGl0bGU9e2NuX3BhdGh9XG4gICAgICAgICAgICBvbjpjbGljaz17KGV2ZW50KSA9PiBOYXZpZ2F0ZVRvRmlsZShhcHAsIGNuX3BhdGgsIGV2ZW50KX1cbiAgICAgICAgPlxuICAgICAgICAgICAge0dldERpc3BsYXlOYW1lKGNuX3BhdGgsIGRiKX08L2FcbiAgICAgICAgPi48YnIgLz48YnIgLz4gTGluayBpdCB0byBhIGZpbGUgdGhhdCBpcyBwYXJ0IG9mIHlvdXIgTWFwIG9mIENvbnRlbnQuXG4gICAgICAgIFRoZW5cbiAgICAgICAgPGFcbiAgICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIGRiLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfX0+dXBkYXRlPC9hXG4gICAgICAgID5cbiAgICAgICAgeW91ciBNYXAgb2YgQ29udGVudCBhbmQgd2F0Y2ggaXQgZ3JvdyE8YnIgLz5cbiAgICAgICAgPFNhcGxpbmdJbWFnZSAvPlxuICAgIHs6ZWxzZX1cbiAgICAgICAgeyNlYWNoIHBhdGhzIGFzIHBhdGh9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGF0aFwiPlxuICAgICAgICAgICAgICAgIHsjZWFjaCBwYXRoLnJldmVyc2UoKSBhcyBwYXRoaXRlbSwgaX1cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBpID09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB0aXRsZT17cGF0aGl0ZW1bMF19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtHZXREaXNwbGF5TmFtZShwYXRoaXRlbVswXSwgZGIpfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3BhdGhpdGVtWzBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZXZlbnQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5hdmlnYXRlVG9GaWxlKGFwcCwgcGF0aGl0ZW1bMF0sIGV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7R2V0RGlzcGxheU5hbWUocGF0aGl0ZW1bMF0sIGRiKX08L2FcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBwYXRoaXRlbVsxXSA9PSBMSU5LRURfRlJPTX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJwYXRoLWFycm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBocmVmPVwiI3BvaW50ZXItYXJyb3ctcmlnaHQtc3ZnLW1vY1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgezplbHNlIGlmIHBhdGhpdGVtWzFdID09IExJTktFRF9UT31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJwYXRoLWFycm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBocmVmPVwiI3BvaW50ZXItYXJyb3ctbGVmdC1zdmctbW9jXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICB7OmVsc2UgaWYgcGF0aGl0ZW1bMV0gPT0gTElOS0VEX0JPVEh9XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwicGF0aC1hcnJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgaHJlZj1cIiNwb2ludGVyLWFycm93LWJvdGgtc3ZnLW1vY1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxiciAvPlxuICAgICAgICB7L2VhY2h9XG5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICAgIDxEZXNjZW5kYW50c1xuICAgICAgICAgICAgICAgIHtkYn1cbiAgICAgICAgICAgICAgICB7YXBwfVxuICAgICAgICAgICAgICAgIG5vdGVfcGF0aD17b3Blbl9ub3RlX3BhdGh9XG4gICAgICAgICAgICAgICAgaW5kZW50YXRpb249ezB9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBiaW5kOnRoaXM9e3Njcm9sbF91cF9kaXZ9XG4gICAgICAgICAgICBpZD1cInNjcm9sbF91cFwiXG4gICAgICAgICAgICB0aXRsZT1cIlNjcm9sbCB0byB0b3BcIlxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHNjcm9sbF90b190b3AoKX1cbiAgICAgICAgPlxuICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMjRcIlxuICAgICAgICAgICAgICAgIGhlaWdodD1cIjI0XCJcbiAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgICAgICAgICAgICA+PHBhdGggZD1cIk0yNCAxMmwtMTItOXY1aC0xMnY4aDEydjVsMTItOXpcIiAvPjwvc3ZnXG4gICAgICAgICAgICA+XG4gICAgICAgIDwvZGl2PnsvaWZ9XG48L2Rpdj5cblxuPHN0eWxlPlxuICAgIGRpdiN0b3AtYmFyIHtcbiAgICAgICAgZGlzcGxheTpub25lO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICB9XG4gICAgZGl2I3RvcC1iYXIgc3ZnIHtcbiAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICBjbGVhcjogYm90aDtcbiAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OjEwcHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGhlaWdodDogMjRweDtcbiAgICB9XG4gICAgZGl2I21haW5fbW9jX2RpdiB7XG4gICAgICAgIHBhZGRpbmc6IGluaXRpYWw7XG4gICAgICAgIHdpZHRoOiBpbml0aWFsO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICB9XG4gICAgZGl2I21haW5fbW9jX2Rpdi5kYXJrLW1vZGUge1xuICAgICAgICBjb2xvcjogI2RjZGRkZTtcbiAgICB9XG5cbiAgICBkaXYjc2Nyb2xsX3VwIHtcbiAgICAgICAgY29sb3I6IGdyYXk7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICByaWdodDogNXB4O1xuICAgICAgICB0b3A6IDRweDtcbiAgICB9XG4gICAgZGl2I3Njcm9sbF91cCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAyNXB4O1xuICAgICAgICBjb2xvcjogZGFya2dyZXk7XG4gICAgfVxuXG4gICAgZGl2I3Njcm9sbF91cCBzdmcge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpO1xuICAgIH1cblxuICAgIGRpdi5saWdodC1tb2RlIGRpdiNzY3JvbGxfdXAgc3ZnIHtcbiAgICAgICAgZmlsbDogbGlnaHRncmF5O1xuICAgIH1cbiAgICBkaXYubGlnaHQtbW9kZSBkaXYjc2Nyb2xsX3VwOmhvdmVyIHN2ZyB7XG4gICAgICAgIGZpbGw6IGdyYXk7XG4gICAgfVxuXG4gICAgZGl2LmRhcmstbW9kZSBkaXYjc2Nyb2xsX3VwIHN2ZyB7XG4gICAgICAgIGZpbGw6IGdyYXk7XG4gICAgfVxuICAgIGRpdi5kYXJrLW1vZGUgZGl2I3Njcm9sbF91cDpob3ZlciBzdmcge1xuICAgICAgICBmaWxsOiBsaWdodGdyYXk7XG4gICAgfVxuXG4gICAgYS5saW5rIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICB1bCB7XG4gICAgICAgIHBhZGRpbmctbGVmdDogMDtcbiAgICB9XG5cbiAgICBzdmcucGF0aC1hcnJvdyB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMnB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogMnB4O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmU7XG4gICAgICAgIHdpZHRoOiAyNHB4O1xuICAgICAgICBoZWlnaHQ6IDAuN2VtO1xuICAgIH1cbiAgICBkaXYuZGFyay1tb2RlIHN2Zy5wYXRoLWFycm93IHtcbiAgICAgICAgZmlsbDogbGlnaHRncmF5O1xuICAgIH1cbiAgICAuZXJyb3JzIHtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgd2lkdGg6IGluaXRpYWw7XG4gICAgICAgIGhlaWdodDogaW5pdGlhbDtcbiAgICAgICAgcG9zaXRpb246IGluaXRpYWw7XG4gICAgICAgIG92ZXJmbG93LXk6IGluaXRpYWw7XG4gICAgICAgIG92ZXJmbG93LXdyYXA6IGluaXRpYWw7XG4gICAgfVxuPC9zdHlsZT5cbiIsImltcG9ydCAnc3ZlbHRlJ1xuXG5pbXBvcnQgeyBJdGVtVmlldywgTm90aWNlLCBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJ1xuXG5cbmltcG9ydCB7IExvZyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgTU9DX1ZJRVdfVFlQRSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gJy4vbWFpbidcbmltcG9ydCB0eXBlIHsgUGF0aCB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgdHlwZSB7IERCTWFuYWdlciB9IGZyb20gJy4vZGInXG5cbmltcG9ydCBFcnJvciBmcm9tICcuL3N2ZWx0ZS9FcnJvci5zdmVsdGUnXG5cbmltcG9ydCBQYXRoVmlldyBmcm9tICcuL3N2ZWx0ZS9QYXRoVmlldy5zdmVsdGUnXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNT0NWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBkYjogREJNYW5hZ2VyXG4gIF9hcHA6IFBhdGhWaWV3XG4gIGVycm9ydmlldzogRXJyb3JcbiAgcGx1Z2luOiBNT0NQbHVnaW5cbiAgb3Blbl9maWxlX3BhdGg6IHN0cmluZ1xuXG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNT0NQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKVxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgdGhpcy5kYiA9IHRoaXMucGx1Z2luLmRiXG4gICAgdGhpcy5hcHAgPSB0aGlzLnBsdWdpbi5hcHBcbiAgICB0aGlzLnBsdWdpbi5yZWdpc3RlclZpZXdJbnN0YW5jZSh0aGlzKVxuICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB0aGlzLmluaXQoKSlcblxuICAgIC8vIHJlcmVuZGVyIG9uIGNzcyBjaGFuZ2UgdG8gYWRhcHQgdG8gZGFyay9saWdodCBtb2RlIGNoYW5nZXNcbiAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiY3NzLWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcmVuZGVyKClcbiAgICB9KVxuXG4gIH1cblxuICBpbml0KCkge1xuICAgIC8vIHVwZGF0ZSB0aGUgcGF0aCB2aWV3IGV2ZXJ5IHRpbWUgYSBmaWxlIGlzIG9wZW5lZFxuICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6IFRGaWxlKSA9PiB0aGlzLm9uRmlsZU9wZW4oKSkpXG4gICAgLy9yZWdpc3RlciB3aXRoIHRoZSBtYWluIGNsYXNzXG4gICAgLy9zaG93IFwibG9hZGluZ1wiIG1lc3NhZ2VcbiAgICBpZiAodGhpcy5lcnJvcnZpZXcpIHtcbiAgICAgIHRoaXMuZXJyb3J2aWV3LiRkZXN0cm95KClcbiAgICAgIHRoaXMuZXJyb3J2aWV3ID0gdW5kZWZpbmVkXG4gICAgfVxuICAgIHRoaXMuZXJyb3J2aWV3ID0gbmV3IEVycm9yKHtcbiAgICAgIHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250ZW50RWwsXG4gICAgICBwcm9wczogeyBtZXNzYWdlOiBcIkxvYWRpbmcuLi5cIiB9LFxuXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcblxuICB9XG5cbiAgLyoqIHJlcmVuZGVyIHRoZSB2aWV3IG9uIGZpbGUgb3BlbiwgYnV0IG9ubHkgaWYgdGhlIGRhdGFiYXNlIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhdGVkICovXG4gIG9uRmlsZU9wZW4oKSB7XG4gICAgaWYgKHRoaXMuZGIuZGF0YWJhc2VfaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMucmVyZW5kZXIoKVxuICAgIH1cbiAgfVxuXG4gIC8qKiByZWxvYWQgcGF0aHMgYW5kIHJlY3JlYXRlIHRoZSBzdmVsdGUgaW5zdGFuY2UgKi9cbiAgcmVyZW5kZXIoKTogdm9pZCB7XG4gICAgTG9nKFwiUmVyZW5kZXIgY2FsbGVkIG9uIHZpZXdcIiwgdHJ1ZSlcblxuICAgIC8vIGRlc3Ryb3kgb2xkIHBhdGh2aWV3L2Vycm9ydmlldyBpbnN0YW5jZVxuICAgIC8vIHNldCBzeW1ib2wgdG8gdW5kZWZpbmVkIHRvIGF2b2lkIFwiVGhpcyBjb21wb25lbnQgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWRcIiBtZXNzYWdlXG4gICAgaWYgKHRoaXMuX2FwcCkge1xuICAgICAgdGhpcy5fYXBwLiRkZXN0cm95KClcbiAgICAgIHRoaXMuX2FwcCA9IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmVycm9ydmlldykge1xuICAgICAgdGhpcy5lcnJvcnZpZXcuJGRlc3Ryb3koKVxuICAgICAgdGhpcy5lcnJvcnZpZXcgPSB1bmRlZmluZWRcbiAgICB9XG5cblxuICAgIGxldCBlcnJvcnMgPSBbXVxuICAgIC8vY29uc29sZS5sb2codGhpcy5vcGVuX2ZpbGVfcGF0aClcblxuICAgIC8vIGR1cmluZyBzdGFydHVwIChiZWZvcmUgZmlyc3QgZGIgdXBkYXRlIGlzIGNvbXBsZXRlZCkgc2hvdyBsb2FkaW5nIG1lc3NhZ2VcbiAgICBpZiAoIXRoaXMuZGIuZGF0YWJhc2VfaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiUGxlYXNlIHdhaXQuLi5cIilcbiAgICB9XG5cbiAgICAvLyBtYWtlIHN1cmUgdGhlIGRhdGFiYXNlIGlzIHVzYWJsZVxuICAgIGVsc2UgaWYgKCF0aGlzLmRiLmRhdGFiYXNlX2NvbXBsZXRlKSB7XG4gICAgICAvL1RPRE86IHRyeSBvbmNlIHRvIHRoaXMuZGIudXBkYXRlKClcbiAgICAgIGVycm9ycy5wdXNoKGBZb3VyIE1hcCBvZiBDb250ZW50IGNvdWxkbid0IGJlIGNyZWF0ZWQuPGJyPjxicj4gTWFrZSBzdXJlIHlvdXIgQ2VudHJhbCBOb3RlIHBhdGggJyR7dGhpcy5wbHVnaW4uZ2V0U2V0dGluZ1ZhbHVlKFwiQ05fcGF0aFwiKX0nIGlzIGNvcnJlY3QuIFlvdSBjYW4gY2hhbmdlIHRoaXMgcGF0aCBpbiB0aGUgc2V0dGluZ3MgdGFiLmApXG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIGEgZmlsZSBpcyBvcGVuZWRcbiAgICBlbHNlIGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09IG51bGwpIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiTm8gZmlsZSBoYXMgYmVlbiBvcGVuZWRcIilcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5wbHVnaW4uaXNFeGx1ZGVkRmlsZSh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpKSkge1xuICAgICAgZXJyb3JzLnB1c2goXCJUaGlzIGZpbGUgaGFzIGJlZW4gZXhjbHVkZWQgZnJvbSB0aGUgTWFwIG9mIENvbnRlbnQuXCIpXG4gICAgfVxuICAgIC8vIGdldCBwYXRoIG9mIG9wZW4gbm90ZSBcbiAgICBlbHNlIHtcbiAgICAgIHRoaXMub3Blbl9maWxlX3BhdGggPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLnBhdGhcbiAgICAgIGlmICh0aGlzLmRiLmdldE5vdGVGcm9tUGF0aCh0aGlzLm9wZW5fZmlsZV9wYXRoKSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gbWFrZSBzdXJlIGZpbGUgaXMgaW4gbGlicmFyeSAgIFxuICAgICAgICBlcnJvcnMucHVzaChcIlRoaXMgZmlsZSBoYXNuJ3QgYmVlbiBpbmRleGVkIHlldC4gVXBkYXRlIHRoZSBNYXAgb2YgQ29udGVudCB0byBpbmNsdWRlIGl0LlwiKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNob3cgZXJyb3IgbWVzc2FnZSBpZiBuZWNlc3NhcnlcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuX2FwcCA9IG5ldyBQYXRoVmlldyh7XG4gICAgICAgIHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250ZW50RWwsXG4gICAgICAgIHByb3BzOiB7IHBhdGhzOiBbXSwgYXBwOiB0aGlzLmFwcCwgZGI6IHRoaXMuZGIsIGNuX3BhdGg6IHRoaXMucGx1Z2luLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIiksIG9wZW5fbm90ZV9wYXRoOiBcIk5vbmVcIiwgZXJyb3JzOiBlcnJvcnMgfSxcblxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyBnZXQgcGF0aHMgdG8gb3BlbiBub3RlXG4gICAgbGV0IGFsbF9wYXRocyA9IHRoaXMuZGIuZmluZFBhdGhzKHRoaXMub3Blbl9maWxlX3BhdGgpXG4gICAgaWYgKGFsbF9wYXRocy5sZW5ndGggPT0gMCkge1xuICAgICAgTG9nKFwiTm8gcGF0aHMgdG8gdGhpcyBub3RlXCIsIHRydWUpXG4gICAgfVxuXG4gICAgLy8gXG4gICAgbGV0IHBhdGhzID0gYWxsX3BhdGhzLm1hcCgocDogUGF0aCkgPT5cbiAgICAgIHAuaXRlbXMuc2xpY2UoKVxuICAgIClcblxuICAgIC8vIGNyZWF0ZSBuZXcgcGF0aHZpZXdcbiAgICB0aGlzLl9hcHAgPSBuZXcgUGF0aFZpZXcoe1xuICAgICAgdGFyZ2V0OiAodGhpcyBhcyBhbnkpLmNvbnRlbnRFbCxcbiAgICAgIHByb3BzOiB7IHBhdGhzOiBwYXRocywgYXBwOiB0aGlzLmFwcCwgZGI6IHRoaXMuZGIsIGNuX3BhdGg6IHRoaXMucGx1Z2luLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIiksIG9wZW5fbm90ZV9wYXRoOiB0aGlzLm9wZW5fZmlsZV9wYXRoLCBlcnJvcnM6IFtdIH0sXG5cbiAgICB9KVxuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gTU9DX1ZJRVdfVFlQRVxuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJNYXAgb2YgQ29udGVudFwiXG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwic3RhY2tlZC1sZXZlbHNcIlxuICB9XG5cblxuICBvbkNsb3NlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIGRlc3Ryb3kgb2xkIHBhdGh2aWV3L2Vycm9ydmlldyBpbnN0YW5jZVxuICAgIC8vIHNldCBzeW1ib2wgdG8gdW5kZWZpbmVkIHRvIGF2b2lkIFwiVGhpcyBjb21wb25lbnQgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWRcIiBtZXNzYWdlXG5cbiAgICBMb2coXCJWaWV3IGNsb3NpbmdcIiwgdHJ1ZSlcblxuICAgIGlmICh0aGlzLl9hcHApIHtcbiAgICAgIHRoaXMuX2FwcC4kZGVzdHJveSgpXG4gICAgICB0aGlzLl9hcHAgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lcnJvcnZpZXcpIHtcbiAgICAgIHRoaXMuZXJyb3J2aWV3LiRkZXN0cm95KClcbiAgICAgIHRoaXMuZXJyb3J2aWV3ID0gdW5kZWZpbmVkXG4gICAgfVxuICAgIHRoaXMucGx1Z2luLnVucmVnaXN0ZXJWaWV3SW5zdGFuY2UodGhpcylcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICB9XG5cbn1cbiIsIjxzY3JpcHQgbGFuZz1cInRzXCI+XG4gICAgaW1wb3J0IHR5cGUgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gICAgaW1wb3J0IHR5cGUgeyBEQk1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vZGJcIjtcbiAgICBpbXBvcnQgdHlwZSBNT0NQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcbiAgICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSBcInN2ZWx0ZVwiO1xuXG4gICAgaW1wb3J0IHsgTG9nLCBHZXRBbGxGb2xkZXJzIH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XG5cbiAgICBleHBvcnQgbGV0IGFwcDogQXBwO1xuICAgIGV4cG9ydCBsZXQgcGx1Z2luOiBNT0NQbHVnaW47XG4gICAgbGV0IGV4Y2x1ZGVkbGlzdDtcbiAgICBsZXQgZXhjbHVkZWRfZm9sZGVycyA9IHBsdWdpbi5nZXRTZXR0aW5nVmFsdWUoXCJleGx1ZGVkX2ZvbGRlcnNcIik7XG4gICAgLy8gVE9ETyBzaG93IGFsbCBleGx1ZGVkIGZpbGVzIGluIFRleHRFZGl0IG5vdCBsaXN0XG4gICAgLy8gU2VsZWN0IGJveCBiYXNlZCBvbiBodHRwczovL3d3dy5jLXNoYXJwY29ybmVyLmNvbS9VcGxvYWRGaWxlL21haGFrZ3VwdGEvYWRkLWFuZC1yZW1vdmUtbGlzdGJveC1pdGVtcy1pbi1qYXZhc2NyaXB0L1xuICAgIGxldCBhbGxfZm9sZGVycyA9IEdldEFsbEZvbGRlcnMoYXBwKTtcblxuICAgIHZhciBsaXN0X29wdGlvbnNfbm8gPSAwO1xuICAgIGxldCBleGNsdWRlZF9maWxlcyA9IGFsbEV4Y2x1ZGVkRmlsZXMoKTtcbiAgICBvbk1vdW50KCgpID0+IHtcbiAgICAgICAgLy8gY3JlYXRlIHNlbGVjdCBlbnRyaWVzIGZvciBhbGwgYWxyZWFkeSBleGNsdWRlZCBmb2xkZXJzXG4gICAgICAgIGV4Y2x1ZGVkX2ZvbGRlcnMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG4gICAgICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm9dID0gbmV3IE9wdGlvbihmb2xkZXIsIGZvbGRlcik7XG4gICAgICAgICAgICBsaXN0X29wdGlvbnNfbm8rKztcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBhbGxFeGNsdWRlZEZpbGVzKCkge1xuICAgICAgICBsZXQgYWxsX2ZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCkubWFwKChmaWxlKSA9PiBmaWxlLnBhdGgpO1xuXG4gICAgICAgIHJldHVybiBhbGxfZmlsZXMuZmlsdGVyKChwYXRoX3RvX2ZpbGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBleGNsdWRlZF9mb2xkZXJzLnNvbWUoKHBhdGg6IHN0cmluZykgPT5cbiAgICAgICAgICAgICAgICBwYXRoX3RvX2ZpbGUuc3RhcnRzV2l0aChwYXRoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlO1xuICAgIGxldCBleGx1ZGVfcGF0aF9pbnB1dDtcbiAgICBsZXQgc2hvd19hbGxfaGlkZGVuID0gZmFsc2U7XG5cbiAgICAvKiogdXBkYXRlIHRoZSBsaXN0IG9mIGV4bHVkZWQgZmlsZXMgYW5kIHNhdmUgdGhlIHVwZGF0ZWQgc2V0dGluZ3MqL1xuICAgIGZ1bmN0aW9uIHNhdmUoKSB7XG4gICAgICAgIGV4Y2x1ZGVkX2ZpbGVzID0gYWxsRXhjbHVkZWRGaWxlcygpO1xuICAgICAgICBwbHVnaW4udXBkYXRlU2V0dGluZ3MoeyBleGx1ZGVkX2ZvbGRlcnM6IGV4Y2x1ZGVkX2ZvbGRlcnMgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkVmFsdWUoKSB7XG4gICAgICAgIGlmICghZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gaWYgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgaWYgKCFhbGxfZm9sZGVycy5jb250YWlucyhleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZSkpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGNob29zZSBhIGZvbGRlciBmcm9tIHRoZSBsaXN0XCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiBpZiBmb2xkZXIgYWxyZWFkeSBvbiBsaXN0XG4gICAgICAgIGlmIChleGNsdWRlZF9mb2xkZXJzLmNvbnRhaW5zKGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlKSkge1xuICAgICAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBvcHRpb24gdG8gc2VsZWN0IGJveFxuICAgICAgICBsZXQgQWRkT3B0ID0gbmV3IE9wdGlvbihcbiAgICAgICAgICAgIGV4bHVkZV9wYXRoX2lucHV0X3ZhbHVlLFxuICAgICAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbbGlzdF9vcHRpb25zX25vKytdID0gQWRkT3B0O1xuICAgICAgICBleGNsdWRlZF9mb2xkZXJzLnB1c2goZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUpO1xuXG4gICAgICAgIC8vIHJlc2V0IGlucHV0IGZpZWxkXG4gICAgICAgIGV4bHVkZV9wYXRoX2lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgZXhsdWRlX3BhdGhfaW5wdXRfdmFsdWUgPSBcIlwiO1xuXG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlVmFsdWUoKSB7XG4gICAgICAgIGxldCBzID0gMTtcbiAgICAgICAgbGV0IEluZGV4O1xuICAgICAgICBpZiAoZXhjbHVkZWRsaXN0LnNlbGVjdGVkSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhbiBpdGVtIGZyb20gdGhlIGxpc3RcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChzID4gMCkge1xuICAgICAgICAgICAgSW5kZXggPSBleGNsdWRlZGxpc3Quc2VsZWN0ZWRJbmRleDtcblxuICAgICAgICAgICAgaWYgKEluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBleGNsdWRlZF9mb2xkZXJzLnJlbW92ZShleGNsdWRlZGxpc3Qub3B0aW9uc1tJbmRleF0udmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbSW5kZXhdID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC0tbGlzdF9vcHRpb25zX25vO1xuICAgICAgICAgICAgfSBlbHNlIHMgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHNhdmUoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuPC9zY3JpcHQ+XG5cbjxoMj5FeGNsdWRlZCBmb2xkZXJzPC9oMj5cblxuPGRpdiBpZD1cImV4bHVkZWQtZm9sZGVyc1wiPlxuICAgIDxkaXYgaWQ9XCJsaXN0LWV4Y2x1ZGVkXCI+XG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZWRsaXN0fVxuICAgICAgICAgICAgaWQ9XCJleGNsdWRlZC1zZWxlY3RcIlxuICAgICAgICAgICAgbmFtZT1cImxzdFZhbHVlXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImFkZC1yZW1vdmUtZXhsdWRlZFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwibXlCcm93c2VyXCI+IEFkZCBhIGZvbGRlcjo8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhsdWRlX3BhdGhfaW5wdXR9XG4gICAgICAgICAgICBiaW5kOnZhbHVlPXtleGx1ZGVfcGF0aF9pbnB1dF92YWx1ZX1cbiAgICAgICAgICAgIGxpc3Q9XCJleGx1ZGUtZm9sZGVyXCJcbiAgICAgICAgICAgIGlkPVwiRXhsdWRlZC1mb2xkZXJzXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU3RhcnQgdHlwaW5nIHRvIHNlZSBzdWdnZXN0aW9ucy4uLlwiXG4gICAgICAgICAgICBzdHlsZT1cIndpZHRoOjMwMHB4O1wiXG4gICAgICAgIC8+XG4gICAgICAgIDxkYXRhbGlzdCBpZD1cImV4bHVkZS1mb2xkZXJcIj5cbiAgICAgICAgICAgIHsjZWFjaCBhbGxfZm9sZGVycyBhcyBmb2xkZXJfcGF0aH1cbiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXtmb2xkZXJfcGF0aH0gLz5cbiAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgPC9kYXRhbGlzdD48YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiYWRkXCJcbiAgICAgICAgICAgIHZhbHVlPVwiQWRkXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiZGVsZXRlXCJcbiAgICAgICAgICAgIHZhbHVlPVwiRGVsZXRlXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+PGJyIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImN1cnJlbnRseS1leGNsdWRlZFwiPlxuICAgICAgICBDdXJyZW50bHkgZXhjbHVkZWQgZmlsZXM6IHtleGNsdWRlZF9maWxlcy5sZW5ndGh9XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwidG9nZ2xlLXNob3ctaGlkZGVuXCJcbiAgICAgICAgICAgIHZhbHVlPXtzaG93X2FsbF9oaWRkZW4gPyBcIkhpZGVcIiA6IFwiU2hvd1wifVxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzaG93X2FsbF9oaWRkZW4gPSAhc2hvd19hbGxfaGlkZGVuO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9e3Nob3dfYWxsX2hpZGRlbiA/IFwiZGlzcGxheTpibG9ja1wiIDogXCJkaXNwbGF5Om5vbmVcIn1cbiAgICAgICAgICAgIGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3RcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgeyNlYWNoIGV4Y2x1ZGVkX2ZpbGVzIGFzIGZpbGVfcGF0aH1cbiAgICAgICAgICAgICAgICAgICAgPGxpPntmaWxlX3BhdGh9PC9saT5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgKiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIH1cblxuICAgIGgyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG5cbiAgICBkaXYjZXhsdWRlZC1mb2xkZXJzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBjb2x1bW4tZ2FwOiAxMHB4O1xuICAgIH1cblxuICAgIGRpdiNsaXN0LWV4Y2x1ZGVkIHtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgIH1cblxuICAgICNleGNsdWRlZC1zZWxlY3Qge1xuICAgICAgICBoZWlnaHQ6IDMwMHB4O1xuICAgICAgICB3aWR0aDogMzAwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICB9XG5cbiAgICAjYWRkLXJlbW92ZS1leGx1ZGVkIHtcbiAgICAgICAgaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgIH1cbiAgICBkaXYjY3VycmVudGx5LWV4Y2x1ZGVkIHtcbiAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgZGl2I2N1cnJlbnRseS1leGNsdWRlZC1saXN0IHtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgIG1heC1oZWlnaHQ6IDI2MHB4O1xuICAgIH1cbjwvc3R5bGU+XG4iLCI8c2NyaXB0IGxhbmc9XCJ0c1wiPlxuICAgIGltcG9ydCB0eXBlIHsgQXBwLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuICAgIGltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2RiXCI7XG4gICAgaW1wb3J0IHR5cGUgTU9DUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XG4gICAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gXCJzdmVsdGVcIjtcblxuICAgIGV4cG9ydCBsZXQgYXBwOiBBcHA7XG4gICAgZXhwb3J0IGxldCBwbHVnaW46IE1PQ1BsdWdpbjtcbiAgICBsZXQgZXhjbHVkZWRsaXN0O1xuXG4gICAgbGV0IGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cyA9IHBsdWdpbi5nZXRTZXR0aW5nVmFsdWUoXG4gICAgICAgIFwiZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzXCJcbiAgICApO1xuICAgIGxldCBhbGxfZmlsZXMgPSBhcHAudmF1bHRcbiAgICAgICAgLmdldEZpbGVzKClcbiAgICAgICAgLm1hcCgoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSArIFwiLlwiICsgZmlsZS5leHRlbnNpb24pO1xuXG4gICAgbGV0IGV4Y2x1ZGVkX2ZpbGVzID0gYWxsRXhjbHVkZWRGaWxlcygpO1xuICAgIC8vIFRPRE8gc2hvdyBhbGwgZXhsdWRlZCBmaWxlcyBpbiBUZXh0RWRpdCBub3QgbGlzdFxuICAgIC8vIGFkZCBhbGwgZXhpc3RpbmcgZXhjbHVkZWQgZm9sZGVycyB0byBzZWxlY3QgZWxlbWVudFxuXG4gICAgdmFyIGxpc3Rfb3B0aW9uc19ubyA9IDA7XG4gICAgb25Nb3VudCgoKSA9PiB7XG4gICAgICAgIC8vIGNyZWF0ZSBzZWxlY3QgZW50cmllcyBmb3IgYWxsIGFscmVhZHkgZXhjbHVkZWQgZmlsZW5hbWUgY29tcG9uZW50c1xuICAgICAgICBleGx1ZGVkX2ZpbGVuYW1lX2NvbXBvbmVudHMuZm9yRWFjaCgoZm9sZGVyKSA9PiB7XG4gICAgICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm9dID0gbmV3IE9wdGlvbihmb2xkZXIsIGZvbGRlcik7XG4gICAgICAgICAgICBsaXN0X29wdGlvbnNfbm8rKztcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBhbGxFeGNsdWRlZEZpbGVzKCkge1xuICAgICAgICByZXR1cm4gYWxsX2ZpbGVzLmZpbHRlcigoZmlsZW5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cy5zb21lKChwYXRoOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgZmlsZW5hbWUuY29udGFpbnMocGF0aClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCBleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZTtcbiAgICBsZXQgZXhjbHVkZV9waHJhc2VfaW5wdXQ7XG4gICAgbGV0IHNob3dfYWxsX2hpZGRlbiA9IGZhbHNlO1xuXG4gICAgLyoqIHVwZGF0ZSB0aGUgbGlzdCBvZiBleGx1ZGVkIGZpbGVzIGFuZCBzYXZlIHRoZSB1cGRhdGVkIHNldHRpbmdzKi9cbiAgICBmdW5jdGlvbiBzYXZlKCkge1xuICAgICAgICBleGNsdWRlZF9maWxlcyA9IGFsbEV4Y2x1ZGVkRmlsZXMoKTtcbiAgICAgICAgcGx1Z2luLnVwZGF0ZVNldHRpbmdzKHtcbiAgICAgICAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50czogZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkVmFsdWUoKSB7XG4gICAgICAgIGlmICghZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gaWYgZm9sZGVyIGFscmVhZHkgb24gbGlzdFxuICAgICAgICBpZiAoZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLmNvbnRhaW5zKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKSkge1xuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIG9wdGlvbiB0byBzZWxlY3QgYm94XG4gICAgICAgIGxldCBBZGRPcHQgPSBuZXcgT3B0aW9uKFxuICAgICAgICAgICAgZXhjbHVkZV9waHJhc2VfaW5wdXRfdmFsdWUsXG4gICAgICAgICAgICBleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZVxuICAgICAgICApO1xuICAgICAgICBleGNsdWRlZGxpc3Qub3B0aW9uc1tsaXN0X29wdGlvbnNfbm8rK10gPSBBZGRPcHQ7XG4gICAgICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50cy5wdXNoKGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlKTtcbiAgICAgICAgLy8gcmVzZXQgaW5wdXQgZmllbGRcblxuICAgICAgICBleGNsdWRlX3BocmFzZV9pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGV4Y2x1ZGVfcGhyYXNlX2lucHV0X3ZhbHVlID0gXCJcIjtcblxuICAgICAgICBzYXZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVZhbHVlKCkge1xuICAgICAgICBsZXQgcyA9IDE7XG4gICAgICAgIGxldCBJbmRleDtcbiAgICAgICAgaWYgKGV4Y2x1ZGVkbGlzdC5zZWxlY3RlZEluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gaXRlbSBmcm9tIHRoZSBsaXN0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAocyA+IDApIHtcbiAgICAgICAgICAgIEluZGV4ID0gZXhjbHVkZWRsaXN0LnNlbGVjdGVkSW5kZXg7XG5cbiAgICAgICAgICAgIGlmIChJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzLnJlbW92ZShcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZWRsaXN0Lm9wdGlvbnNbSW5kZXhdLnZhbHVlXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkbGlzdC5vcHRpb25zW0luZGV4XSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAtLWxpc3Rfb3B0aW9uc19ubztcbiAgICAgICAgICAgIH0gZWxzZSBzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBzYXZlKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbjwvc2NyaXB0PlxuXG48aDI+RXhjbHVkZWQgZmlsZW5hbWVzPC9oMj5cbkZpbGVuYW1lcyB0aGF0IGNvbnRhaW4gdGhlc2UgcGhyYXNlcyB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgTWFwIG9mIENvbnRlbnQuXG5UaGF0IGFsc28gaW5jbHVkZXMgdGhlIGZpbGUgZXh0ZW5zaW9uLjxiciAvPjxiciAvPlxuXG48ZGl2IGlkPVwiZXhsdWRlLWZpbGVuYW1lc1wiPlxuICAgIDxkaXYgaWQ9XCJsaXN0LWV4Y2x1ZGVkXCI+XG4gICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZWRsaXN0fVxuICAgICAgICAgICAgaWQ9XCJleGNsdWRlZC1zZWxlY3RcIlxuICAgICAgICAgICAgbmFtZT1cImxzdFZhbHVlXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG11bHRpcGxlXG4gICAgICAgIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImFkZC1yZW1vdmUtZXhsdWRlZFwiPlxuICAgICAgICA8bGFiZWwgZm9yPVwibXlCcm93c2VyXCI+IEFkZCBhIHBocmFzZTo8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIGJpbmQ6dGhpcz17ZXhjbHVkZV9waHJhc2VfaW5wdXR9XG4gICAgICAgICAgICBiaW5kOnZhbHVlPXtleGNsdWRlX3BocmFzZV9pbnB1dF92YWx1ZX1cbiAgICAgICAgICAgIGlkPVwiRXhsdWRlZC1maWxlbmFtZXNcIlxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDozMDBweDtcIlxuICAgICAgICAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiYWRkXCJcbiAgICAgICAgICAgIHZhbHVlPVwiQWRkXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwiZGVsZXRlXCJcbiAgICAgICAgICAgIHZhbHVlPVwiRGVsZXRlXCJcbiAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGVsZXRlVmFsdWUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgIC8+PGJyIC8+PGJyIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBpZD1cImN1cnJlbnRseS1leGNsdWRlZFwiPlxuICAgICAgICBDdXJyZW50bHkgZXhjbHVkZWQgZmlsZXM6IHtleGNsdWRlZF9maWxlcy5sZW5ndGh9XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBuYW1lPVwidG9nZ2xlLXNob3ctaGlkZGVuXCJcbiAgICAgICAgICAgIHZhbHVlPXtzaG93X2FsbF9oaWRkZW4gPyBcIkhpZGVcIiA6IFwiU2hvd1wifVxuICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzaG93X2FsbF9oaWRkZW4gPSAhc2hvd19hbGxfaGlkZGVuO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9e3Nob3dfYWxsX2hpZGRlbiA/IFwiZGlzcGxheTpibG9ja1wiIDogXCJkaXNwbGF5Om5vbmVcIn1cbiAgICAgICAgICAgIGlkPVwiY3VycmVudGx5LWV4Y2x1ZGVkLWxpc3RcIlxuICAgICAgICA+XG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgeyNlYWNoIGV4Y2x1ZGVkX2ZpbGVzIGFzIGZpbGVfcGF0aH1cbiAgICAgICAgICAgICAgICAgICAgPGxpPntmaWxlX3BhdGh9PC9saT5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgKiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIH1cblxuICAgIGgyIHtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG5cbiAgICBkaXYjZXhsdWRlLWZpbGVuYW1lcyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgY29sdW1uLWdhcDogMTBweDtcbiAgICB9XG5cbiAgICBkaXYjbGlzdC1leGNsdWRlZCB7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICB9XG5cbiAgICAjZXhjbHVkZWQtc2VsZWN0IHtcbiAgICAgICAgaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgfVxuXG4gICAgI2FkZC1yZW1vdmUtZXhsdWRlZCB7XG4gICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICB9XG4gICAgZGl2I2N1cnJlbnRseS1leGNsdWRlZCB7XG4gICAgICAgIHdpZHRoOiA2MDBweDtcbiAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgIGRpdiNjdXJyZW50bHktZXhjbHVkZWQtbGlzdCB7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICBtYXgtaGVpZ2h0OiAyNjBweDtcbiAgICB9XG48L3N0eWxlPlxuIiwiPHNjcmlwdCBsYW5nPVwidHNcIj5cbiAgaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4gIGltcG9ydCB0eXBlIHsgREJNYW5hZ2VyIH0gZnJvbSBcIi4uL2RiXCI7XG4gIGltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuICBpbXBvcnQgeyBMb2csIEdldEFsbEZvbGRlcnMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbiAgaW1wb3J0IEV4Y2x1ZGVkRm9sZGVycyBmcm9tIFwiLi9zZXR0aW5ncy9FeGNsdWRlZEZvbGRlcnMuc3ZlbHRlXCI7XG4gIGltcG9ydCBFeGNsdWRlZEZpbGVuYW1lcyBmcm9tIFwiLi9zZXR0aW5ncy9FeGNsdWRlZEZpbGVuYW1lcy5zdmVsdGVcIjtcblxuICBleHBvcnQgbGV0IGFwcDogQXBwO1xuICBleHBvcnQgbGV0IHBsdWdpbjogTU9DUGx1Z2luO1xuICBsZXQgY25faW5wdXQ7XG4gIC8vIFRPRE8gY2hvb3NlIHdoZXRoZXIgdG8gcmV2ZXJzZSBwYXRocyB0byBub3RlXG4gIC8vIFRPRE8gY2hlY2sgdGhlIGRiIGlzIGNvbXBsZXRlIGJlZm9yZSBhbGxvdyBzZXR0aW5ncyBjaGFuZ2VzIChtYXliZSBoYXZlIHRoaXMgc3ZlbHRlIG9ubHkgZG8gdGhhdCBhbmQgbG9hZCBhbGwgb3RoZXIgY29tcG9uZW50cyBmcm9tIG90aGVyIHN2ZWx0ZSBmaWxlcylcbiAgLy8gVE9ETyBsYXp5IGxvYWQgYWxsIHRoZSBmaWxlIG5hbWVzIGFuZCBmb2xkZXJzP1xuICAvLyBTaG93IHBhdGhzIGFuZCBkZXNjZW5kYW50cyBpbiBkaWZmZXJlbnQgdmlld3NcblxuICAvLyBnZXQgbGlzdCBvZiBhbGwgZmlsZXMgZm9yIGRyb3Bkb3duIG1lbnVcbiAgbGV0IGFsbF9maWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpLm1hcCgoZmlsZTogVEZpbGUpID0+IGZpbGUucGF0aCk7XG4gIExvZyhcIkNlbnRyYWwgbm90ZSBwYXRoOiBcIiArIHBsdWdpbi5nZXRTZXR0aW5nVmFsdWUoXCJDTl9wYXRoXCIpLCB0cnVlKTtcbiAgbGV0IGNuX3BhdGhfaW5wdXRfdmFsdWU7XG4gIGxldCBjdXJyZW50X3RsaSA9IHBsdWdpbi5nZXRTZXR0aW5nVmFsdWUoXCJDTl9wYXRoXCIpO1xuXG4gIGNvbnN0IHVwZGF0ZUNOUGF0aCA9ICgpID0+IHtcbiAgICBpZiAoIWNuX3BhdGhfaW5wdXRfdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY2hhbmdlIFRMSSBwYXRoXG4gICAgcGx1Z2luLnVwZGF0ZVNldHRpbmdzKHsgQ05fcGF0aDogY25fcGF0aF9pbnB1dF92YWx1ZSB9KTtcbiAgICBMb2coXCJOZXcgY2VudHJhbCBub3RlIHBhdGg6IFwiICsgY25fcGF0aF9pbnB1dF92YWx1ZSwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0bGlfcGF0aFwiKS50ZXh0Q29udGVudCA9IGNuX3BhdGhfaW5wdXRfdmFsdWU7XG4gICAgbmV3IE5vdGljZShcIk5ldyBDZW50cmFsIE5vdGUgcGF0aCBzYXZlZFwiKTtcblxuICAgIC8vIGNsZWFyIHNlbGVjdGlvbiBkcm9wZG93biBsaXN0XG4gICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNOX3NlbGVjdFwiKS52YWx1ZSA9IFwiXCI7XG4gICAgY25faW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIGNuX3BhdGhfaW5wdXRfdmFsdWUgPSBcIlwiO1xuICB9O1xuPC9zY3JpcHQ+XG5cbjxkaXYgaWQ9XCJzZXR0aW5ncy1jb250YWluZXJcIj5cbiAgPGRpdiBjbGFzcz1cInBhdGhcIj5cbiAgICA8aDI+UGF0aCBvZiB5b3VyIENlbnRyYWwgTm90ZTwvaDI+XG4gICAgQ3VycmVudCBwYXRoOjxzcGFuIGlkPVwidGxpX3BhdGhcIj57Y3VycmVudF90bGl9PC9zcGFuPjxiciAvPlxuICAgIDxsYWJlbCBmb3I9XCJteUJyb3dzZXJcIj4gTmV3IHBhdGg6PC9sYWJlbD5cbiAgICA8aW5wdXRcbiAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgIGJpbmQ6dGhpcz17Y25faW5wdXR9XG4gICAgICBiaW5kOnZhbHVlPXtjbl9wYXRoX2lucHV0X3ZhbHVlfVxuICAgICAgbGlzdD1cIm5vdGVzXCJcbiAgICAgIGlkPVwiQ05fc2VsZWN0XCJcbiAgICAgIHBsYWNlaG9sZGVyPVwiU3RhcnQgdHlwaW5nIHRvIHNlZSBzdWdnZXN0aW9ucy4uLlwiXG4gICAgLz5cbiAgICA8ZGF0YWxpc3QgaWQ9XCJub3Rlc1wiPlxuICAgICAgeyNlYWNoIGFsbF9maWxlcyBhcyBmaWxlcGF0aH1cbiAgICAgICAgPG9wdGlvbiB2YWx1ZT17ZmlsZXBhdGh9IC8+ey9lYWNofVxuICAgIDwvZGF0YWxpc3Q+XG5cbiAgICA8YnV0dG9uXG4gICAgICBpZD1cInVwZGF0ZV9UTElfcGF0aF9idXR0b25cIlxuICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICBvbjpjbGljaz17KCkgPT4ge1xuICAgICAgICB1cGRhdGVDTlBhdGgoKTtcbiAgICAgIH19PlNhdmU8L2J1dHRvblxuICAgID5cbiAgPC9kaXY+XG4gIDxiciAvPlxuICA8RXhjbHVkZWRGb2xkZXJzIHthcHB9IHtwbHVnaW59IC8+XG4gIDxFeGNsdWRlZEZpbGVuYW1lcyB7YXBwfSB7cGx1Z2lufSAvPlxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgI3NldHRpbmdzLWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuICAjQ05fc2VsZWN0IHtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIHdpZHRoOiA1MCU7XG4gICAgZm9udC1zaXplOiAxZW07XG4gIH1cbiAgI3VwZGF0ZV9UTElfcGF0aF9idXR0b24ge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgfVxuICBoMiB7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgfVxuPC9zdHlsZT5cbiIsImltcG9ydCB0eXBlIHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nXG5cbmltcG9ydCB0eXBlIE1PQ1BsdWdpbiBmcm9tIFwiLi9tYWluXCJcbmltcG9ydCB7IExvZyB9IGZyb20gJy4vdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgTU9DU2V0dGluZ3Mge1xuICAgIENOX3BhdGg6IHN0cmluZyAvLyBwYXRoIG9mIHRoZSBub3RlIHRoYXQgc2VydmVzIGFzIENlbnRyYWwgTm90ZVxuICAgIGV4bHVkZWRfZm9sZGVyczogc3RyaW5nW10sXG4gICAgZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzOiBzdHJpbmdbXSxcbiAgICBzZXR0aW5nc192ZXJzaW9uOlwiMC4xLjEwXCJcblxufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTU9DU2V0dGluZ3MgPSB7XG4gICAgQ05fcGF0aDogXCJDZW50cmFsIE5vdGUubWRcIixcbiAgICBleGx1ZGVkX2ZvbGRlcnM6IFtdLFxuICAgIGV4bHVkZWRfZmlsZW5hbWVfY29tcG9uZW50czogW10sXG4gICAgc2V0dGluZ3NfdmVyc2lvbjpcIjAuMS4xMFwiXG5cbn1cblxuLyoqIHRha2UgYSBsZWdhY3kgc2V0dGluZ3Mgb2JqZWN0IGFuZCB0cmFuc2Zvcm0gaXQgdGlsbCBpdCBjb25mb3JtcyB0byB0aGUgY3VycmVudCB2ZXJzaW9uICovXG5leHBvcnQgZnVuY3Rpb24gVXBncmFkZVNldHRpbmdzKG9iamVjdDogYW55LCBhcHA6IEFwcCkge1xuICAgIHRyeSB7XG4gICAgICAgICAvLyBhYm9ydCBpZiBzZXR0aW5ncyBhcmUgYWxyZWFkeSBpbiBjdXJyZW50IHZlcnNpb24gZm9ybWF0XG4gICAgICAgIGlmIChvYmplY3RbXCJzZXR0aW5nc192ZXJzaW9uXCJdID09PSBERUZBVUxUX1NFVFRJTkdTW1wic2V0dGluZ3NfdmVyc2lvblwiXSkge1xuICAgICAgICAgICAgTG9nKFwiU2V0dGluZ3MgYWxyZWFkeSBpbiBjdXJyZW50IHZlcnNpb25cIiwgdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNsb25lIHRoZSBvYmplY3RcbiAgICAgICAgb2JqZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmplY3QpKVxuXG4gICAgICAgIGxldCBvYmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdClcbiAgICAgICAgY29uc29sZS5sb2cob2JqZWN0X2tleXMpXG4gICAgICAgIGxldCBvbGRfdmVyc2lvbiA9IHVuZGVmaW5lZFxuXG4gICAgICAgIC8vIGRldGVybWluZSB3aGljaCB2ZXJzaW9uIHRoZSBsZWdhY3kgb2JqZWN0IGlzIGZyb21cbiAgICAgICAgaWYgKCFvYmplY3Rfa2V5cy5jb250YWlucyhcInNldHRpbmdzX3ZlcnNpb25cIikpIHtcbiAgICAgICAgICAgIG9sZF92ZXJzaW9uID0gXCJwcmUtMC4xLjEwXCJcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9sZF92ZXJzaW9uID0gb2JqZWN0W1wic2V0dGluZ3NfdmVyc2lvblwiXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJvbGQgc2V0dGluZ3MgdmVyc2lvbjogXCIgKyBvbGRfdmVyc2lvbilcblxuICAgICAgICBpZiAob2xkX3ZlcnNpb24gPT09IFwicHJlLTAuMS4xMFwiKSB7XG4gICAgICAgICAgICAvLyBleHRyYWN0IHRoZSBDTiBwYXRoIGZyb20gQ05fcGF0aF9wZXJfdmF1bHQgYW5kIHNhdmUgaXQgYXMgQ05fcGF0aFxuICAgICAgICAgICAgTG9nKFwiQ29udmVydGluZyBDTiBwYXRoIGZyb20gcHJlLTAuMS4xMCB0byAwLjEuMTBcIix0cnVlKVxuXG4gICAgICAgICAgICAvLyBnZXQganVzdCB0aGUgbmFtZSBvZiBhbGwgdmF1bHRzIHRoZXJlJ3MgYSBDTiBzdG9yZWQgZm9yXG4gICAgICAgICAgICBsZXQgY25fc2V0dGluZ3NfdmF1bHRfbmFtZXMgPSBvYmplY3RbXCJDTl9wYXRoX3Blcl92YXVsdFwiXS5tYXAoKHZhbDogW3N0cmluZywgc3RyaW5nXSkgPT4gdmFsWzBdKVxuICAgICAgICAgICAgaWYgKGNuX3NldHRpbmdzX3ZhdWx0X25hbWVzLmNvbnRhaW5zKGFwcC52YXVsdC5nZXROYW1lKCkpKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0W1wiQ05fcGF0aFwiXSA9IG9iamVjdFtcIkNOX3BhdGhfcGVyX3ZhdWx0XCJdW2NuX3NldHRpbmdzX3ZhdWx0X25hbWVzLmluZGV4T2YoYXBwLnZhdWx0LmdldE5hbWUoKSldWzFdXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgQ05fcGF0aCBlbnRyeS4gaXQgd2lsbCB0aGVuIGJlIGZpbGxlZCB3aXRoIGRlZmF1bHRfc2V0dGluZ3MgZGF0YSBsYXRlclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmplY3RbXCJDTl9wYXRoXCJdXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgbGVnYWN5IENOX3BhdGhfcGVyX3ZhdWx0IGVudHJ5XG4gICAgICAgICAgICBkZWxldGUgb2JqZWN0W1wiQ05fcGF0aF9wZXJfdmF1bHRcIl1cblxuICAgICAgICAgICAgLy9zZXQgbmV3IHNldHRpbmdzX3ZlcnNpb25cbiAgICAgICAgICAgIG9iamVjdFtcInNldHRpbmdzX3ZlcnNpb25cIl09XCIwLjEuMTBcIlxuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdFxuICAgIH0gY2F0Y2gge1xuICAgICAgICAvLyBpdCB0aGluZ3MgZG9uJ3Qgd29yayBvdXQsIGRlbGV0ZSBhbGwgb2xkIHNldHRpbmdzIGRhdGEgKGJldHRlciB0aGFuIGJyZWFraW5nIHRoZSBwbHVnaW4pXG4gICAgICAgIHJldHVybiB7fVxuICAgIH1cbn0iLCJcbmltcG9ydCB7IEFwcCwgZ2V0TGlua3BhdGgsIExpbmtDYWNoZSwgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDRU5UUkFMX05PVEVfUEFUSF9ERUZBVUxULCBNT0NfVklFV19UWVBFLCBWaWV3Q2FsbGJhY2sgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCB7IERCTWFuYWdlciB9IGZyb20gJy4vZGInXG5pbXBvcnQgTU9DVmlldyBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gJy4vc3ZlbHRlL1NldHRpbmdzLnN2ZWx0ZSc7XG5pbXBvcnQgeyBNT0NTZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUywgVXBncmFkZVNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBMb2cgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTU9DUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IE1PQ1NldHRpbmdzO1xuXHRkYjogREJNYW5hZ2VyO1xuXHR2aWV3OiBNT0NWaWV3O1xuXHQvLyBzdGF0dXNiYXJ0ZXh0OiBIVE1MRWxlbWVudFx0XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKClcblxuXHRcdHRoaXMuZGIgPSBuZXcgREJNYW5hZ2VyKHRoaXMuYXBwLCB0aGlzKVxuXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoTU9DX1ZJRVdfVFlQRSwgKGxlYWYpID0+ICh0aGlzLnZpZXcgPSBuZXcgTU9DVmlldyhsZWFmLCB0aGlzKSkpXG5cblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB0aGlzLmluaXRpYWxpemVQbHVnaW4oKSlcblx0fVxuXG5cdGFzeW5jIGluaXRpYWxpemVQbHVnaW4oKSB7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNT0NTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzLCB0aGlzLmRiKSk7XG5cblx0XHR0aGlzLmluaXRMZWFmKClcblx0XHR0aGlzLmRiLnVwZGF0ZSgpXG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3N5bmMnLCAnVXBkYXRlIE1hcCBvZiBDb250ZW50JywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5kYi51cGRhdGUoKVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAncmVidWlsZC1tYXAtb2YtY29udGVudCcsXG5cdFx0XHRuYW1lOiAnVXBkYXRlIE1hcCBvZiBDb250ZW50Jyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuZGIudXBkYXRlKClcblxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnb3Blbi1ub3RlLWFzLWNlbnRyYWwtbm90ZScsXG5cdFx0XHRuYW1lOiAnU2V0IG9wZW4gbm90ZSBhcyBDZW50cmFsIE5vdGUnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bGV0IGVycm9ycyA9IFtdXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSBhIGZpbGUgaXMgb3BlbmVkXG5cdFx0XHRcdGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpID09IG51bGwpIHtcblx0XHRcdFx0XHRlcnJvcnMucHVzaChcIk5vIGZpbGUgaGFzIGJlZW4gb3BlbmVkXCIpXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAodGhpcy5pc0V4bHVkZWRGaWxlKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpKSB7XG5cdFx0XHRcdFx0ZXJyb3JzLnB1c2goXCJUaGlzIGZpbGUgaGFzIGJlZW4gZXhjbHVkZWQgZnJvbSB0aGUgTWFwIG9mIENvbnRlbnQuXCIpXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGVycm9ycy5sZW5ndGgpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGVycm9yc1swXSlcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBnZXQgcGF0aCBvZiBvcGVuIG5vdGUgXG5cdFx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3MoeyBDTl9wYXRoOiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLnBhdGggfSk7XG5cdFx0XHRcdHRoaXMuZGIudXBkYXRlKClcblxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vVG9kbzogIG1heWJlIGltcGxlbWVudCBzb21lIHN0YXR1cyBiYXIgdGV4dD8gbGlrZSBubyBvZiBsaW5rZWQsIHVubGlua2VkLCBsYXN0IHRpbWUgcmVmcmVzaGVkPyBcblx0XHQvL3RoaXMuc3RhdHVzYmFydGV4dCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpXG5cdFx0Ly90aGlzLnN0YXR1c2JhcnRleHQuc2V0VGV4dChcIlRvdGFsIG51bWJlciBvZiBub3RlczogXCIgKyBTdHJpbmcobC5jb3VudCgpKSk7XG5cblx0fVxuXG5cdGluaXRMZWFmKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKE1PQ19WSUVXX1RZUEUpLmxlbmd0aCkge1xuXHRcdFx0TG9nKFwiVmlldyBhbHJlYWR5IGF0dGFjaGVkXCIsIHRydWUpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSkuc2V0Vmlld1N0YXRlKHtcblx0XHRcdFx0dHlwZTogTU9DX1ZJRVdfVFlQRSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlXG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdHJlcmVuZGVyKCkge1xuXHRcdExvZyhcInJlcmVuZGVyIG9uIG1haW4gcGx1Z2luIGNhbGxlZFwiLCB0cnVlKVxuXHRcdGlmICh0aGlzLnZpZXcpIHtcblx0XHRcdHRoaXMudmlldy5yZXJlbmRlcigpXG5cdFx0fVxuXHR9XG5cblx0b251bmxvYWQoKTogdm9pZCB7XG5cdFx0TG9nKCdVbmxvYWRpbmcgcGx1Z2luJyk7XG5cblx0XHRpZiAodGhpcy52aWV3KSB7XG5cdFx0XHR0aGlzLnZpZXcub25DbG9zZSgpXG5cdFx0fVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoTU9DX1ZJRVdfVFlQRSlcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHRsZXQgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdC8vIHVwZ3JhZGUgc2V0dGluZ3MgdG8gbmV3ZXN0IGZvcm1hdCBpZiBuZWNlc3Nhcnlcblx0XHQvLyBUT0RPIG9ubHkgc2F2ZSBuZXcgaWYgY2hhbmdlZFxuXHRcdGRhdGEgPSBVcGdyYWRlU2V0dGluZ3MoZGF0YSwgdGhpcy5hcHApXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEpO1xuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKClcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlU2V0dGluZ3ModXBkYXRlczogUGFydGlhbDxNT0NTZXR0aW5ncz4pIHtcblx0XHRPYmplY3QuYXNzaWduKHRoaXMuc2V0dGluZ3MsIHVwZGF0ZXMpXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKVxuXHRcdHRoaXMucmVyZW5kZXIoKVxuXHR9XG5cblx0Z2V0U2V0dGluZ1ZhbHVlPEsgZXh0ZW5kcyBrZXlvZiBNT0NTZXR0aW5ncz4oc2V0dGluZzogSyk6IE1PQ1NldHRpbmdzW0tdIHtcblx0XHRyZXR1cm4gdGhpcy5zZXR0aW5nc1tzZXR0aW5nXVxuXHR9XG5cblxuXHQvKipjaGVjayB3aGV0aGVyIHRoZSBjZW50cmFsIG5vdGUgZXhpc3RzICovXG5cdENOZXhpc3RzKCk6IGJvb2xlYW4ge1xuXHRcdGxldCBleGlzdHMgPSAhKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmdldFNldHRpbmdWYWx1ZShcIkNOX3BhdGhcIikpID09IG51bGwpXG5cdFx0TG9nKGV4aXN0cyA/IFwiQ04gZXhpc3RzXCIgOiBcIkNOIGRvZXMgbm90IGV4aXN0XCIsIHRydWUpXG5cdFx0cmV0dXJuIGV4aXN0c1xuXHR9XG5cblx0LyoqIGdldCBhbnkgb3BlbiB2aWV3cyBhbmQgcGVyZm9ybSBjYWxsYmFjayBmdW5jdGlvbiBvbiB0aGVtICovXG5cdG9sZHZpZXcoY2FsbGJhY2s6IFZpZXdDYWxsYmFjaykge1xuXHRcdGxldCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKE1PQ19WSUVXX1RZUEUpXG5cdFx0aWYgKGxlYXZlcy5sZW5ndGgpIHtcblx0XHRcdExvZyhgRm91bmQgJHtsZWF2ZXMubGVuZ3RofSBsZWF2ZXNgLCB0cnVlKVxuXHRcdFx0bGVhdmVzLmZvckVhY2goKGxlYWYpID0+IHtcblx0XHRcdFx0bGV0IHZpZXcgPSBsZWFmLnZpZXcgYXMgTU9DVmlld1xuXHRcdFx0XHRjYWxsYmFjayh2aWV3KVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRMb2coXCJObyB2aWV3IGF0dGFjaGVkXCIsIHRydWUpXG5cdFx0fVxuXHR9XG5cdC8qKnNldCBpbnRlcm5hbCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdmlld1xuXHQgKiBUT0RPOiBBbGxvdyBrZWVwaW5nIHNldmVyYWwgdmlld3Ncblx0ICovXG5cdHJlZ2lzdGVyVmlld0luc3RhbmNlKHZpZXc6IE1PQ1ZpZXcpIHtcblx0XHRMb2coXCJWaWV3IHJlZ2lzdGVyZWRcIiwgdHJ1ZSlcblx0XHR0aGlzLnZpZXcgPSB2aWV3XG5cdH1cblx0LyoqIGRlbGV0ZSByZWZlcmVuY2UgdG8gdmlldyBcblx0ICogVE9ETzogYWxsb3cga2VlcGluZyBzZXZlcmFsIHZpZXdzXG5cdCovXG5cdHVucmVnaXN0ZXJWaWV3SW5zdGFuY2UodmlldzogTU9DVmlldykge1xuXHRcdHRoaXMudmlldyA9IHVuZGVmaW5lZFxuXHR9XG5cdC8qKiBjaGVjayBpZiB0aGUgZmlsZSBpcyBpbiBhbnkgb2YgdGhlIGV4bHVkZWQgZm9sZGVycyBvciB0aGUgZmlsZW5hbWUgY29udGFpbnMgZXhjbHVkZWQgcGhyYXNlcyAqL1xuXHRpc0V4bHVkZWRGaWxlKGZpbGU6IFRGaWxlKSB7XG5cdFx0bGV0IHBhdGhfdG9fZmlsZSA9IGZpbGUucGF0aFxuXHRcdGxldCBpbl9leGNsdWRlZF9mb2xkZXIgPSB0aGlzLmdldFNldHRpbmdWYWx1ZShcImV4bHVkZWRfZm9sZGVyc1wiKS5zb21lKChwYXRoOiBzdHJpbmcpID0+IHBhdGhfdG9fZmlsZS5zdGFydHNXaXRoKHBhdGgpKVxuXHRcdGlmIChpbl9leGNsdWRlZF9mb2xkZXIpIHsgcmV0dXJuIHRydWUgfVxuXHRcdGxldCBmaWxlbmFtZSA9IGZpbGUuYmFzZW5hbWUgKyBcIi5cIiArIGZpbGUuZXh0ZW5zaW9uXG5cdFx0bGV0IGhhc19leGNsdWRlZF9maWxlbmFtZSA9IHRoaXMuZ2V0U2V0dGluZ1ZhbHVlKFwiZXhsdWRlZF9maWxlbmFtZV9jb21wb25lbnRzXCIpLnNvbWUoKHBocmFzZTogc3RyaW5nKSA9PiBmaWxlbmFtZS5jb250YWlucyhwaHJhc2UpKVxuXHRcdHJldHVybiBoYXNfZXhjbHVkZWRfZmlsZW5hbWVcblx0fVxufVxuXG5cbmNsYXNzIE1PQ1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNT0NQbHVnaW47XG5cdF9hcHA6IFNldHRpbmdzO1xuXHRkYjogREJNYW5hZ2VyXG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTU9DUGx1Z2luLCBkYjogREJNYW5hZ2VyKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuZGIgPSBkYlxuXHRcdHRoaXMuX2FwcCA9IHVuZGVmaW5lZFxuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fYXBwKSB7XG5cdFx0XHR0aGlzLl9hcHAuJGRlc3Ryb3koKVxuXHRcdFx0dGhpcy5fYXBwID0gdW5kZWZpbmVkXG5cblx0XHR9XG5cdFx0dGhpcy5fYXBwID0gbmV3IFNldHRpbmdzKHtcblx0XHRcdHRhcmdldDogKHRoaXMgYXMgYW55KS5jb250YWluZXJFbCxcblx0XHRcdHByb3BzOiB7IGFwcDogdGhpcy5hcHAsIHBsdWdpbjogdGhpcy5wbHVnaW4gfSxcblx0XHR9KVxuXHR9XG5cdGhpZGUoKTogdm9pZCB7XG5cdFx0dGhpcy5wbHVnaW4uZGIudXBkYXRlKClcblx0fVxuXG5cdC8qIGluaXRpYWwgdHJpYWxzIGluIHBvcnRpbmcgdGhlIHNldHRpbmdzIHRvIHRoZSBuYXRpdmUgT2JzaWRpYW4gcHJlc2V0czpcblx0ZGlzcGxheXYoKTogdm9pZCB7XG5cdFx0bGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcblxuXHRcdHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKVxuXG5cdFx0dGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHtcblx0XHRcdHRleHQ6IFwiR2VuZXJhbCBTZXR0aW5nc1wiLFxuXHRcdH0pXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwic2RmXCIpXG5cdFx0XHQuc2V0RGVzYyhcInNkZnNcIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0bGV0IGFsbF9maWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRGaWxlcygpLm1hcCgoZmlsZTogVEZpbGUpID0+IGZpbGUucGF0aCk7XG5cdFx0XHRcdGFsbF9maWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG5cdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKGZpbGUsIGZpbGUpXG5cblxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcInNkZlwiKVxuXHRcdFx0LnNldERlc2MoXCJzd2Rmc1wiKVxuXHRcdFx0LmFkZFNlYXJjaCgoc2VhcmNoKSA9PiB7XG5cdFx0XHRcdHNlYXJjaC5yZWdpc3Rlck9wdGlvbkxpc3RlbmVyKHsgXCJzZnNcIjogKChzZCkgPT4gXCJhc2RmXCIpLCBcImFzZGZhc1wiOiAoKHNkKSA9PiB7IHJldHVybiBcInNkZmFzXCIgfSkgfSwgXCJhc2RcIilcblx0XHRcdFx0c2VhcmNoLm9uQ2hhbmdlZFxuXHRcdFx0XHRzZWFyY2guc2V0UGxhY2Vob2xkZXIoXCJhZGZhc2RmXCIpXG5cdFx0XHRcdHNlYXJjaC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSlcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0XHQuYWRkVGV4dEFyZWEoKGRmKSA9PiB7XG5cblx0XHRcdH0pXG5cblxuXHR9Ki9cblxufVxuXG4iXSwibmFtZXMiOlsiTm90aWNlIiwiSXRlbVZpZXciLCJFcnJvciIsIlBsdWdpbiIsIlBsdWdpblNldHRpbmdUYWIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVPLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQTtBQUN4QixNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUE7QUFDMUIsTUFBTSxTQUFTLEdBQUcsTUFB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
